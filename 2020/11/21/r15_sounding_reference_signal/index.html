<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.2.0">

<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.jpeg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.jpeg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.jpeg">
  <link rel="mask-icon" href="/images/favicon.jpeg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PingFang+SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha256-xejo6yLi6vGtAjcMIsY8BHdKsLg7QynVlFMzdQgUuy8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"marshallcomm.cn","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.12.3","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Note: 本文基于 3GPP Rel15 (2020-09) 版本规范。 SRS 用于上行信道信息获取、满足信道互易性时的下行信道信息获取以及上行波束管理。 NR 定义了 3 种类型的 SRS 传输：周期性 SRS，半持续性 SRS 和非周期性 SRS，通过为 SRS 资源集和 SRS 资源配置关于时域类型的高层参数 resourceType 来实现。 SRS 资源集配置  SR">
<meta property="og:type" content="article">
<meta property="og:title" content="5G Sounding Reference Signal">
<meta property="og:url" content="https://marshallcomm.cn/2020/11/21/r15_sounding_reference_signal/index.html">
<meta property="og:site_name" content="Marshall">
<meta property="og:description" content="Note: 本文基于 3GPP Rel15 (2020-09) 版本规范。 SRS 用于上行信道信息获取、满足信道互易性时的下行信道信息获取以及上行波束管理。 NR 定义了 3 种类型的 SRS 传输：周期性 SRS，半持续性 SRS 和非周期性 SRS，通过为 SRS 资源集和 SRS 资源配置关于时域类型的高层参数 resourceType 来实现。 SRS 资源集配置  SR">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-11-21T07:27:43.000Z">
<meta property="article:modified_time" content="2020-11-23T00:26:52.444Z">
<meta property="article:author" content="Marshall">
<meta property="article:tag" content="5G-NR">
<meta property="article:tag" content="3GPP">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://marshallcomm.cn/2020/11/21/r15_sounding_reference_signal/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://marshallcomm.cn/2020/11/21/r15_sounding_reference_signal/","path":"2020/11/21/r15_sounding_reference_signal/","title":"5G Sounding Reference Signal"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>5G Sounding Reference Signal | Marshall</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?8abce461480fd6278fb829e039e83852"></script>




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Marshall</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Comm. Tech. Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">10</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">7</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">52</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#srs-%E8%B5%84%E6%BA%90%E5%AE%9A%E4%B9%89"><span class="nav-number">1.</span> <span class="nav-text">SRS 资源定义</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#srs-%E5%BA%8F%E5%88%97%E7%94%9F%E6%88%90"><span class="nav-number">2.</span> <span class="nav-text">SRS 序列生成</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%98%A0%E5%B0%84%E5%88%B0%E7%89%A9%E7%90%86%E8%B5%84%E6%BA%90"><span class="nav-number">3.</span> <span class="nav-text">映射到物理资源</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#srs-%E9%A2%91%E5%9F%9F%E8%B5%84%E6%BA%90"><span class="nav-number">3.1.</span> <span class="nav-text">SRS 频域资源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#srs-%E6%97%B6%E5%9F%9F%E8%B5%84%E6%BA%90"><span class="nav-number">3.2.</span> <span class="nav-text">SRS 时域资源</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ue-%E6%8E%A2%E6%B5%8B%E8%BF%87%E7%A8%8B"><span class="nav-number">4.</span> <span class="nav-text">UE 探测过程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#srs-%E7%9A%84%E5%86%B2%E7%AA%81%E5%A4%84%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">SRS 的冲突处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ue-srs-%E8%B7%B3%E9%A2%91%E8%BF%87%E7%A8%8B"><span class="nav-number">5.1.</span> <span class="nav-text">UE SRS 跳频过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E4%BA%8E%E4%B8%8B%E8%A1%8C-csi-%E8%8E%B7%E5%8F%96%E7%9A%84-ue-%E6%8E%A2%E6%B5%8B%E8%BF%87%E7%A8%8B"><span class="nav-number">5.2.</span> <span class="nav-text">用于下行 CSI 获取的 UE
探测过程</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%8E%E5%B3%B0%E5%9D%87%E6%AF%94%E5%BA%8F%E5%88%97"><span class="nav-number">6.</span> <span class="nav-text">低峰均比序列</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%95%BF%E5%BA%A6%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8E-36-%E7%9A%84%E5%9F%BA%E5%BA%8F%E5%88%97"><span class="nav-number">6.1.</span> <span class="nav-text">长度大于等于 36 的基序列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%95%BF%E5%BA%A6%E5%B0%8F%E4%BA%8E-36-%E7%9A%84%E5%9F%BA%E5%BA%8F%E5%88%97"><span class="nav-number">6.2.</span> <span class="nav-text">长度小于 36 的基序列</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%98%AF-zc-%E5%BA%8F%E5%88%97"><span class="nav-number">7.</span> <span class="nav-text">为什么是 ZC 序列</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Marshall"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Marshall</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://marshallcomm.cn/2020/11/21/r15_sounding_reference_signal/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Marshall">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Marshall">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="5G Sounding Reference Signal | Marshall">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          5G Sounding Reference Signal
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-11-21 15:27:43" itemprop="dateCreated datePublished" datetime="2020-11-21T15:27:43+08:00">2020-11-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2020-11-23 08:26:52" itemprop="dateModified" datetime="2020-11-23T08:26:52+08:00">2020-11-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/5G-NR/" itemprop="url" rel="index"><span itemprop="name">5G-NR</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Note: 本文基于 3GPP Rel15 (2020-09) 版本规范。</p>
<p>SRS
用于上行信道信息获取、满足信道互易性时的下行信道信息获取以及上行波束管理。</p>
<p>NR 定义了 3 种类型的 SRS 传输：周期性 SRS，半持续性 SRS 和非周期性
SRS，通过为 SRS 资源集和 SRS 资源配置关于时域类型的高层参数 resourceType
来实现。</p>
<p><strong>SRS 资源集配置</strong></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112101.png" /></p>
<p><strong>SRS 资源配置</strong></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112102.png" /></p>
<ul>
<li>周期性 SRS。时域类型被配置为周期 SRS
资源的所有参数由高层信令配置，UE根据所配置的参数进行周期性发送。同一个
SRS 资源集内的所有 SRS 资源具有相同的周期性。考虑到 NR
系统支持各种子载波间隔，不同子载波间隔对应的时隙时长不同，周期 SRS
资源的周期以及周期内的偏移以时隙为单位进行配置。周期 SRS
资源可配置的最小周期为 1 个时隙，最大周期为 2560 个时隙。</li>
<li>半持续性 SRS。时域类型被配置为半持续 SRS
资源在激活期间也是周期性发送。它与周期性 SRS 的区别在于 UE
在接收到关于半持续 SRS 资源的高层信令配置后不发送 SRS，只有在接收到 MAC
层发送的关于半持续 SRS 资源的激活信令后才开始周期性地发送半持续 SRS
资源对应的 SRS ，在收到 MAC 层发送的半持续 SRS
资源的去激活命令后停止发送 SRS。因此，相对于周期性 SRS 资源，半持续 SRS
资源的配置以及激活、去激活相比高层信令（RRC信令）更快，更灵活，适用于要求时延较低的业务的快速传输。与周期性
SRS 资源类似，基站通过高层信令为半持续 SRS
资源配置周期和周期内的偏移，同一个 SRS
资源集内的所有SRS资源具有相同的周期性。</li>
<li>非周期性 SRS。时域类型被配置为非周期 SRS 资源通过 DCI 信令激活。UE
每接收到一次触发非周期 SRS 资源的 SRS 触发信令，UE 进行一次所触发的 SRS
资源对应的 SRS 发送。DCI 中的 SRS 触发信令包含 2 个比特（如表 Table
7.3.1.1.2-24 所示），2 个比特可表示的 4 个状态。其中中的 1
个状态表示不触发非周期 SRS 发送，其他 3
个状态分别表示触发第一、第二、第三个 SRS
资源组；一个状态可以触发一个或多个 SRS 资源集，一个状态对应的多个 SRS
资源集可以对应多个载波。</li>
</ul>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112103.png" /></p>
<span id="more"></span>
<h1 id="srs-资源定义">SRS 资源定义</h1>
<p>SRS 资源由「天线端口数目 <span
class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}\)</span>，连续的
OFDM 符号数目 <span
class="math inline">\(N_{symb}^{SRS}\)</span>，时域起始符号 <span
class="math inline">\(\ l_0\)</span> 和频域起始位置 <span
class="math inline">\(k_0\)</span>」四个信息共同确定。</p>
<p><strong>天线端口数目 <span
class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}\)</span></strong>：
<span class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}\)</span>
取值范围 <span
class="math inline">\({1,2,4}\)</span>，天线端口索引表示为 <span
class="math inline">\(\left\{p_i\right\}_{i=0}^{N_{\mathrm{ap}}^{\mathrm{SRS}}-1}\)</span>，其中
<span class="math inline">\(p_i=1000+i\)</span>。</p>
<ul>
<li><p>如果高层参数 SRS-ResourceSet 中的 usage 未配置为
“nonCodebook”，则 <span
class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}\)</span> 由
nrofSRS-Ports 确定。</p></li>
<li><p>如果高层参数 SRS-ResourceSet 中的 usage 配置为 “nonCodebook”，则
<span class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}\)</span>
取决于 section 5.2.</p></li>
</ul>
<p><strong>连续的 OFDM 符号数目 <span
class="math inline">\(N_{symb}^{SRS}\)</span></strong>：由高层参数
resourceMapping 中的 nrofSymbols 确定。</p>
<p><strong>时域起始符号 <span class="math inline">\(\
l_0\)</span></strong>：<span
class="math inline">\(l_0=N_{\mathrm{symb}}^{\mathrm{slot}}-1-l_{\mathrm{offset}}\)</span>，其中
<span
class="math inline">\(l_{\mathrm{offset}}\in\left\{0,1,\ldots,5\right\}\)</span>
并且 <span class="math inline">\(l_{\mathrm{offset}}\geq
N_{\mathrm{symb}}^{\mathrm{SRS}}-1\)</span>。</p>
<p>当遍历所有可能的 <span
class="math inline">\(l_{\mathrm{offset}}\)</span> 取值后，可知 SRS
在一个时隙内的起始符号 <span class="math inline">\(l_0\)</span>
的可能取值是 symbol 8~13。即 symbol 8~13 是时隙内的 SRS 资源区域。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112104.png" /></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112105.jpg" /></p>
<p><strong>频域起始位置 <span
class="math inline">\(k_0\)</span></strong>：SRS 的频域起始子载波。</p>
<h1 id="srs-序列生成">SRS 序列生成</h1>
<p>SRS 序列基于Zadoff-Chu 序列产生：</p>
<p><span
class="math display">\[r^{\left(p_i\right)}\left(n,l&#39;\right)=r_{u,v}^{\left(\alpha_i,\delta\right)}\left(n\right)\]</span></p>
<p><span class="math display">\[0\le n\le
M_{\mathrm{sc},b}^{\mathrm{SRS}}-1\]</span></p>
<p><span
class="math display">\[l&#39;\in\left\{0,1,\ldots,N_{\mathrm{symb}}^{\mathrm{SRS}}-1\right\}\]</span></p>
<p><span
class="math inline">\(r_{u,v}^{\left(\alpha_i,\delta\right)}\left(n\right)\)</span>
是 扩展 ZC 序列，序列长度为 <span
class="math inline">\(M_{\mathrm{sc},b}^{\mathrm{SRS}}\)</span>，其中
<span
class="math inline">\(\delta={\mathrm{log}}_\mathrm{2}\left(K_{\mathrm{TC}}\right)\)</span>，<span
class="math inline">\(\alpha_i\)</span> 是对应于天线端口 <span
class="math inline">\(p_i\)</span> 的循环移位。<span
class="math inline">\(l&#39;\)</span> 是 SRS 资源的 OFDM
符号索引。传输梳齿数目 <span
class="math inline">\(K_{\mathrm{TC}}\)</span> 由高层参数
transmissionComb 确定，循环移位 <span
class="math inline">\(\alpha_i\)</span> 由下式给出：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112106.png" /></p>
<p>如果传输梳齿数目 <span
class="math inline">\(K_{\mathrm{TC}}=4\)</span>，则最大循环移位数目
<span
class="math inline">\(n_{SRS}^{cs,max}=12\)</span>；如果传输梳齿数目
<span
class="math inline">\(K_{\mathrm{TC}}=2\)</span>，则最大循环移位数目
<span class="math inline">\(n_{SRS}^{cs,max}=8\)</span>。<span
class="math inline">\(n_{\mathrm{SRS}}^{\mathrm{cs}}\in\left\{0,1,\ldots,n_{SRS}^{cs,max}-1\right\}\)</span>
由高层参数 transmissionComb 给定。</p>
<p>循环移位 <span class="math inline">\(\alpha_i\)</span> 是 <span
class="math inline">\(n_{\mathrm{SRS}}^{\mathrm{cs}}\)</span> 和 <span
class="math inline">\(p_i\)</span> 的函数，即使高层给定了 <span
class="math inline">\(n_{\mathrm{SRS}}^{\mathrm{cs}}\)</span>，不同的天线端口
<span class="math inline">\(p_i\)</span> 也会使得循环移位 <span
class="math inline">\(\alpha_i\)</span> 不同。也就是说，同一个 UE
的不同天线端口所使用的 SRS 序列不同，每个天线端口对应的 SRS
序列是通过不同的循环移位得到的。</p>
<p>例如，假设 SRS 天线端口数目 <span
class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}=4\)</span>, <span
class="math inline">\(n_{SRS}^{cs,max}=8\)</span>，并且给定 <span
class="math inline">\(n_{\mathrm{SRS}}^{\mathrm{cs}}=0\)</span>。根据低峰均比序列的定义
<span
class="math inline">\(r_{u,v}^{\left(\alpha,\delta\right)}\left(n\right)=e^{j\alpha
n}{\bar{r}}_{u,\nu}\left(n\right)\)</span>，<span
class="math inline">\(e^{j\alpha n}\)</span>
表示对频域序列进行相位偏移，等效为时域的循环移位。这里假定基序列 <span
class="math inline">\({\bar{r}}_{u,\nu}\left(n\right)\)</span>
保持不变，则唯一变化的是相位偏移量 <span
class="math inline">\(e^{j\alpha
n}\)</span>。尽管数学上称为频域的相位偏移，但 NR
标准统称为循环移位（cyclic shift）。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112107.png" /></p>
<p>为了干扰随机化，5G NR 系统支持 SRS
序列跳和序列组跳，是否开启这项功能由高层参数 groupOrSequenceHopping
决定。</p>
<p>SRS 的基序列被分成若干组，每组包含若干序列。如果基站给终端配置为
groupOrSequenceHopping = neither，则每次终端发送的 SRS
序列不变；如果基站给终端配置为 groupOrSequenceHopping = groupHopping or
sequenceHopping，则每次终端发送上行 SRS
时按照以下规则采用不同的序列。</p>
<p>序列组号定义为 <span
class="math inline">\(u=\left(f_{\mathrm{gh}}\left(n_{\mathrm{s,f}}^\mu,l^\prime\right)+n_{\mathrm{ID}}^{\mathrm{SRS}}\right)\
mod\ 30\)</span>，序列号 <span class="math inline">\(v\)</span>
取决于高层参数 groupOrSequenceHopping 的值。SRS 序列标识 <span
class="math inline">\(n_{\mathrm{ID}}^{\mathrm{SRS}}\)</span> 由高层参数
sequenceId 给定，取值范围为 0~1023。</p>
<p>在协议讨论阶段，RAN1#89 次会议同意使用 SRS sequence ID 来生成 SRS
序列。序列组号 <span class="math inline">\(u\)</span> 是 SRS sequence ID
的函数，而 SRS sequence ID 是 UE 特定的信息。这意味着 NR SRS
序列本身带有 UE 信息，而 LTE SRS 序列的生成是不带有 UE
信息的。这样做的好处是，即使两个 UE 使用了完全相同的时频域资源发送
SRS，由于 SRS sequence ID 不同，又由于 ZC 序列良好的互相关特性，那么两个
SRS 序列也具有较好的正交性。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112108.png" /></p>
<p>下面回到序列跳和组跳的讨论。</p>
<p>如果 groupOrSequenceHopping = neither，表示
SRS既不序列跳，也不序列组跳，此时有</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112109.png" /></p>
<p>如果 groupOrSequenceHopping = groupHopping，表示 SRS
只进行序列组跳，此时有</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112110.png" /></p>
<p>其中 <span class="math inline">\(c\left(i\right)\)</span>
表示伪随机序列，伪随机序列在每个无线帧的起始点使用 <span
class="math inline">\(c_{\mathrm{init}}=n_{\mathrm{ID}}^{\mathrm{SRS}}\)</span>
进行初始化。</p>
<p>如果 groupOrSequenceHopping = sequenceHopping，表示 SRS
只进行序列跳，此时有</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112111.png" /></p>
<p>其中 <span class="math inline">\(c\left(i\right)\)</span>
表示伪随机序列，伪随机序列在每个无线帧的起始点使用 <span
class="math inline">\(c_{\mathrm{init}}=n_{\mathrm{ID}}^{\mathrm{SRS}}\)</span>
进行初始化。</p>
<h1 id="映射到物理资源">映射到物理资源</h1>
<h2 id="srs-频域资源">SRS 频域资源</h2>
<p>对应 SRS 资源的每个 OFDM 符号 <span
class="math inline">\(l\prime\)</span> 和天线端口 <span
class="math inline">\(p_i\)</span>，需要先将 SRS 序列 <span
class="math inline">\(r^{(p_i)}\left(n,l\prime\right)\)</span>
乘以幅度扩展因子 <span
class="math inline">\(\beta_{\mathrm{SRS}}\)</span> 以符合 38.213
规定的传输功率。然后对每个天线端口 <span
class="math inline">\(p_i\)</span>，从 <span
class="math inline">\(r^{\left(p_i\right)}(0,l^\prime)\)</span>
开始在一个时隙内根据下式映射到资源粒子 <span
class="math inline">\((k,l)\)</span>：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112112.png" /></p>
<p>SRS 序列长度等于 SRS 资源在一个符号内占用的子载波数目，具体定义为</p>
<p><span
class="math display">\[M_{\mathrm{sc},b}^{\mathrm{SRS}}=\frac{m_{\mathrm{SRS},b}N_{\mathrm{sc}}^{\mathrm{RB}}}{K_{\mathrm{TC}}}\]</span></p>
<p><span class="math inline">\(m_{\mathrm{SRS},b}\)</span> 通过查 Table
6.4.1.4.3-1 得到，其中 <span
class="math inline">\(b=B_{\mathrm{SRS}}\)</span>。<span
class="math inline">\(B_{\mathrm{SRS}}\in\left\{0,1,2,3\right\}\)</span>
由高层参数 freqHopping 中的字段 b-SRS 给定，<span
class="math inline">\(C_{\mathrm{SRS}}\in\left\{0,1,...,63\right\}\)</span>
由高层参数 freqHopping 中的 c-SRS 给定。查表时通过 <span
class="math inline">\(C_{\mathrm{SRS}}\)</span> 选中某一行，再通过 <span
class="math inline">\(B_{\mathrm{SRS}}\)</span> 选中某一列，即可最终确定
SRS 的带宽信息。 根据 Table 6.4.1.4.3-1，NR 系统支持 64 种 SRS
带宽配置方式，一个 SRS 资源可配置的最小带宽为 4 个 RB，最大带宽为 272
个RB。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112113.png" /></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112114.png" /></p>
<p>确定了 SRS 资源的带宽信息后，还需要确定 SRS 的频域起始位置。SRS
的频域起始位置 <span class="math inline">\(k_0^{(p_i)}\)</span>
定义如下：</p>
<p><span class="math display">\[k_0^{(p_i)} =
{\bar{k}}_0^{\left(p_i\right)} +
\sum_{b=0}^{B_{\mathrm{SRS}}}{K_{\mathrm{TC}}M_{\mathrm{sc},b}^{\mathrm{SRS}}}n_b\]</span></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112115.png" /></p>
<p>频域移位值 <span class="math inline">\(n_{shift}\)</span> 用来调整
SRS 资源和 CRB 的 4 的倍数网格对齐，它包含在高层参 freqDomainShift
中。如果 <span class="math inline">\(N_{BWP}^{start}\le\
n_{shift}\)</span>，则 <span
class="math inline">\(k_0^{(p_i)}=0\)</span> 的参考点是 CRB 0 的子载波
0；如果 <span
class="math inline">\(N_{BWP}^{start}&gt;n_{shift}\)</span>，则 <span
class="math inline">\(k_0^{(p_i)}=0\)</span> 的参考点是 BWP
的最低编号的子载波。</p>
<p>传输梳齿偏移量 <span
class="math inline">\({\bar{k}}_{\mathrm{TC}}\in\left\{0,1,\ldots,K_{\mathrm{TC}}-1\right\}\)</span>
由高层参数 transmissionComb 给定。<span
class="math inline">\(n_b\)</span> 是频域位置索引。</p>
<p>SRS 是否跳频由高层参数 freqHopping 中的字段 b-hop 决定。<span
class="math inline">\(b_{\mathrm{hop}}\)</span> 取值范围 0~3。</p>
<p>如果 <span class="math inline">\(b_{\mathrm{hop}}\geq\
B_{\mathrm{SRS}}\)</span>，则 SRS 跳频关闭，频域位置索引 <span
class="math inline">\(n_b\)</span>
保持为常量（除非被重新配置）。此时，对于 SRS 资源中的全部 <span
class="math inline">\(N_{\mathrm{symb}}^{\mathrm{SRS}}\)</span> 个 OFDM
符号，<span class="math inline">\(n_b\)</span> 的值定义为：</p>
<p><span
class="math display">\[n_b=\left\lfloor\frac{4n_{\mathrm{RRC}}}{m_{\mathrm{SRS,}b}}\right\rfloor\
mod{\ N}_b\]</span></p>
<p>其中 <span class="math inline">\(n_{\mathrm{RRC}}\)</span> 由高层参数
freqDomainPosition 给定。<span
class="math inline">\(m_{\mathrm{SRS,}b}\)</span> 和 <span
class="math inline">\(N_b\)</span> 的值通过给定的 <span
class="math inline">\(C_{\mathrm{SRS}}\)</span> 和 <span
class="math inline">\(b=B_{\mathrm{SRS}}\)</span> 查 Table 6.4.1.4.3-1
得到。</p>
<p>如果 <span
class="math inline">\(b_{\mathrm{hop}}&lt;B_{\mathrm{SRS}}\)</span>，则
SRS 跳频打开，频域位置索引 <span class="math inline">\(n_b\)</span>
由下式定义：</p>
<p><span
class="math display">\[n_b=\left\{\begin{matrix}\left\lfloor\frac{4n_{\mathrm{RRC}}}{m_{\mathrm{SRS},b}}\right\rfloor\mathrm{\
mod\ }\ N_\mathrm{b}&amp;b\le
b_{\mathrm{hop}}\\\left(F_b\left(n_{\mathrm{SRS}}\right)+\left\lfloor\frac{4n_{\mathrm{RRC}}}{m_{\mathrm{SRS},b}}\right\rfloor\right)\mathrm{\
mod\ }\
N_\mathrm{b}&amp;\mathrm{otherwise}\\\end{matrix}\right.\]</span></p>
<p>其中 <span class="math inline">\(N_\mathrm{b}\)</span> 通过查 Table
6.4.1.4.3-1 得到，<span
class="math inline">\(F_b\left(n_{\mathrm{SRS}}\right)\)</span>
由下式得到：</p>
<p><span
class="math display">\[F_b(n_{\mathrm{SRS}})=\left\{\begin{matrix}(N_b/2)\left\lfloor\frac{n_{\mathrm{SRS}}mod{\Pi_{b&#39;=b_{\mathrm{hop}}}^b}N_{b&#39;}}{\Pi_{b&#39;=b_{\mathrm{hop}}}^{b-1}N_{b&#39;}}\right\rfloor+\left\lfloor\frac{n_{\mathrm{SRS}}mod{\Pi_{b&#39;=b_{\mathrm{hop}}}^b}N_{b&#39;}}{2\Pi_{b&#39;=b_{\mathrm{hop}}}^{b-1}N_{b&#39;}}\right\rfloor&amp;\mathrm{if\
}N_b\mathrm{\ even\ }\ \\\left\lfloor N_b/2\right\rfloor\left\lfloor
n_{\mathrm{SRS}}/\Pi_{b&#39;=b_{\mathrm{hop}}}^{b-1}N_{b&#39;}\right\rfloor&amp;\mathrm{if\
}N_b\mathrm{\ odd}\ \\\end{matrix}\right.\]</span></p>
<p>无论 <span class="math inline">\(N_\mathrm{b}\)</span>
取任何值，<span
class="math inline">\(N_{b_{\mathrm{hop}}}=1\)</span>。</p>
<p><span class="math inline">\(n_{\mathrm{SRS}}\)</span> 用于 SRS
传输的计数。如果高层参数 resourceType 被配置为
“aperiodic”，则在时隙内发送 <span
class="math inline">\(N_{\mathrm{symb}}^{\mathrm{SRS}}\)</span> 个符号的
SRS 资源为 <span
class="math inline">\(n_{\mathrm{SRS}}=\left\lfloor\frac{l&#39;}{R}\right\rfloor\)</span>。重复因子
<span class="math inline">\(R\le\
N_{\mathrm{symb}}^{\mathrm{SRS}}\)</span> 由高层参数 resourceMapping
中的字段 repetitionFactor 给定。</p>
<p>如果高层参数 resourceType 被配置为 “semi-persistent”或
“periodic”，则对于满足 <span
class="math inline">\(\left(N_{\mathrm{slot}}^{\mathrm{frame},\mu}n_f+n_{\mathrm{s,f}}^\mu-T_{\mathrm{offset}}\right)mod{T_{\mathrm{SRS}}}=0\)</span>
的时隙，SRS 计数器由下式给定：</p>
<p><span
class="math display">\[n_{\mathrm{SRS}}=\left(\frac{N_{\mathrm{slot}}^{\mathrm{frame},\mu}n_f+n_{\mathrm{s,f}}^\mu-T_{\mathrm{offset}}}{T_{\mathrm{SRS}}}\right)\cdot\left(\frac{N_{\mathrm{symb}}^{\mathrm{SRS}}}{R}\right)+\left\lfloor\frac{l&#39;}{R}\right\rfloor\]</span></p>
<h2 id="srs-时域资源">SRS 时域资源</h2>
<p>以时隙表示的 SRS 周期 <span
class="math inline">\(T_{\mathrm{SRS}}\)</span> 和时隙偏移量 <span
class="math inline">\(T_{\mathrm{offset}}\)</span> 根据高层参数
periodicityAndOffset-p 或 periodicityAndOffset-sp 确定。如果
resourceType = “periodic”，则对应 periodicityAndOffset-p；如果
resourceType = “semi-persistent”，则对应
periodicityAndOffset-sp。在配置的SRS资源中可用于 SRS
传输的候选时隙需要满足 <span
class="math inline">\(\left(N_{\mathrm{slot}}^{\mathrm{frame},\mu}n_f+n_{\mathrm{s,f}}^\mu-T_{\mathrm{offset}}\right)mod{T_{\mathrm{SRS}}}=0\)</span>。</p>
<h1 id="ue-探测过程">UE 探测过程</h1>
<p>UE可以被高层参数 SRS-ResourceSet 配置一个或多个 SRS 资源集。对于每个
SRS 资源集，UE 可以被高层参数 SRS-Resource 配置 <span
class="math inline">\(K\geq1\)</span> 个 SRS 资源，其中 <span
class="math inline">\(K\)</span> 的最大值由 UE 能力指示。SRS
资源集的用途由高层参数 SRS-ResourceSet 中的字段 usage 确定。</p>
<p>当高层参数 usage 被配置为 beamManagement，则在给定的时刻每个 SRS
集中只能有一个 SRS 资源，但在同一 BWP 中具有相同时域行为的不同 SRS
资源集中的 SRS 资源可以同时发送。</p>
<p>对于非周期性 SRS，DCI 字段的至少一种状态用于从已配置的 SRS
资源集中选择至少一种。</p>
<p>下列 SRS 参数可由较高层参数 SRS-Resource 半静态配置。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112116.png" /></p>
<p>UE 由高层参数 SRS-Resource 中的字段 resourceMapping 来配置 SRS
资源，该 SRS 资源位于时隙内最后 6 个符号的区域，并占用 <span
class="math inline">\(N_S\in\left\{1,2,4\right\}\)</span>
个连续符号。</p>
<p>当 PUSCH 和 SRS 在同一个时隙中发送时，则 UE只能在 PUSCH 和相应的
DM-RS 发送完之后才能发送 SRS。</p>
<p>对于配置有一个或多个 SRS 资源配置的 UE，当高层参数 SRS-Resource
中的字段 resourceType 被配置为 “periodic” 时有如下定义：</p>
<ul>
<li><p>如果配置给 UE 的高层参数spatialRelationInfo 中包含了参考
“ssb-Index”，则 UE 发送目标 SRS 资源时，将使用与接收参考信号 SSB
相同的空间域传输过滤器。</p></li>
<li><p>如果配置给 UE 的高层参数spatialRelationInfo 中包含了参考
“csi-RS-Index”，则 UE 发送目标 SRS 资源时，将使用与接收周期性 CSI-RS
或者半持续性 CSI-RS 相同的空间域传输过滤器。</p></li>
<li><p>如果配置给 UE 的高层参数spatialRelationInfo 中包含了参考
“srs”，则 UE 发送目标 SRS 资源时，将使用与接收周期性 SRS
相同的空间域传输过滤器。</p></li>
</ul>
<p>对于配置有一个或多个 SRS 资源配置的 UE，当高层参数 SRS-Resource
中的字段 resourceType 被配置为 “semi-persistent” 时有如下定义：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112117.png" /></p>
<p>如果 UE 具有激活的半持续性 SRS
资源配置，并且没有收到去激活命令，则在激活的 UL BWP 中半持续性 SRS
资源配置被认为处于激活状态，否则被认为是暂停状态。</p>
<p>对于配置有一个或多个 SRS 资源配置的 UE，当高层参数 SRS-Resource
中的字段 resourceType 被配置为 “aperiodic” 时有如下定义：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112118.png" /></p>
<p>一个 SRS 可以周期性发送、半持续性发送或非周期性发送，但在一个 SRS
资源集中的所有
SRS的时域行为都必须是同一类型。也就是说，周期性、半持续性或非周期性是
SRS 资源集的特性，而不是某个 SRS 资源的特性。</p>
<p>DCI format 0_1 和 DCI format 1_1 中的SRS request 字段指示了 Table
7.3.1.1.2-24 中被触发的 SRS 资源集。DCI format 2_3 中 2-bit 的 SRS
request 字段，如果 UE 被高层参数 srs-TPC-PDCCH-Group 设置为
“typeB”，则该字段用于指示被触发的 SRS 资源集；如果 UE 被高层参数
srs-TPC-PDCCH-Group 设置为
“typeA”，则该字段用于指示通过高层配置的一组服务小区上进行SRS传输。</p>
<h1 id="srs-的冲突处理">SRS 的冲突处理</h1>
<p>PUCCH 和 SRS 在相同载波条件下，</p>
<ul>
<li><p>当半持续和周期 SRS 与仅携带 CSI 报告的 PUCCH
被配置在相同的符号时，或者当半持续和周期 SRS 与仅携带 L1-RSRP 报告的
PUCCH 被配置在相同的符号时, UE 不应发送 SRS。</p></li>
<li><p>当半持续性 SRS 或周期性 SRS 或非周期性 SRS 被触发后，与携带
HARQ-ACK 和/或 SR 的 PUCCH 在相同符号发送时，UE 不应发送 SRS。</p></li>
<li><p>对由于与 PUCCH 重叠而不发送 SRS 的情况，仅丢弃与 PUCCH 重叠的 SRS
符号。</p></li>
<li><p>非周期性 SRS 被触发后，与携带半持续/周期 CSI
报告或仅携带半持续/周期 L1-RSRP 报告的 PUCCH 在相同符号时，UE 不应发送
PUCCH。</p></li>
</ul>
<p>在带内载波聚合或带间CA频带组合的情况下，详见协议原文：</p>
<blockquote>
<p>In case of intra-band carrier aggregation or in inter-band CA band
combination if simultaneous SRS and PUCCH/PUSCH transmissions are not
supported by UE, the UE is not expected to be configured with SRS from a
carrier and PUSCH/UL DM-RS/UL PT-RS/PUCCH formats from a different
carrier in the same symbol. In case of intra-band carrier aggregation or
in inter-band CA band combination if simultaneous SRS and PRACH
transmissions are not supported by UE, the UE shall not transmit
simultaneously SRS resource(s) from a carrier and PRACH from a different
carrier.</p>
</blockquote>
<p>如果在配置了周期/半持续 SRS 传输的 OFDM 符号上触发了由高层参数
resourceType 配置 “aperiodic”SRS资源，UE 应发送非周期 SRS
资源，仅丢弃在该符号内重叠的周期/半持续 SRS，仍然会发送不与非周期 SRS
重叠的周期/半持续 SRS 符号。</p>
<p>如果在配置有周期性 SRS 传输的OFDM符号上触发了由高层参数 resourceType
配置的“semi-persistent”的SRS资源，UE应发送半持续 SRS
资源，仅丢弃在符号内重叠的周期性 SRS，仍然发送不与半持续 SRS
资源重叠的周期 SRS符号。</p>
<p>当 UE 被高层参数 SRS-ResourceSet 中的字段 usage 配置为
“antennaSwitching”，并且根据 Table 6.2.1.2-1 配置 Y
个符号的保护周期时，如果在保护周期内 UE 被配置了 SRS，则 UE
应使用与上述相同的优先级规则。</p>
<h2 id="ue-srs-跳频过程">UE SRS 跳频过程</h2>
<p>对于给定的 SRS 资源，UE 由高层参数 SRS-Resource::resourceMapping
中的字段 repetitionFactor 配置重复因子 <span
class="math inline">\(R\in\left\{1,2,4\right\}\)</span>，其中 <span
class="math inline">\(R\le N_s\)</span>。如果未配置每个时隙内 SRS
资源内的跳频（R = Ns），每个时隙中的 SRS 资源的每个天线端口在所有 <span
class="math inline">\(N_s\)</span> 个符号中被映射到相同的 PRB
集合中的相同的子载波集合。</p>
<p>如果每个时隙的 SRS 资源内的跳频配置没有重复（R = 1），根据 SRS
跳频参数 <span class="math inline">\(B_{SRS}\)</span>， <span
class="math inline">\(C_{SRS}\)</span> 和 <span
class="math inline">\(b_{hop}\)</span>，每个时隙中 SRS
资源的每个天线端口被映射到每个 OFDM
符号中的不同子载波集合，其中对于不同的子载波集合，假定具有相同的传输梳齿。</p>
<p>当每个时隙的 SRS 资源都配置了跳频和重复（Ns = 4，R =
2）时，每个时隙中的 SRS 资源的每个天线端口都被映射到每对 R 个相邻 OFDM
符号中相同的一组子载波，并且根据 SRS 的跳频参数 <span
class="math inline">\(B_{SRS}\)</span>， <span
class="math inline">\(C_{SRS}\)</span> 和 <span
class="math inline">\(b_{hop}\)</span> 在两对间跳频。</p>
<p>UE可以被配置 Ns = 2 or 4 个相邻符号的非周期 SRS 资源并在 BWP
内进行时隙内跳频，其中当跳频配置为 <span
class="math inline">\(R=1\)</span> 时，在 <span
class="math inline">\(N_s\)</span> 个符号上以相等大小的 sub-band
来探测全跳频带宽。UE可以被配置 <span
class="math inline">\(N_s=4\)</span> 个相邻符号非周期 SRS 资源并在 BWP
内进行时隙内跳频，其中当跳频配置为R = 2时，在两对 R 个相邻的 OFDM
符号之间以相等大小的 sub-band来探测全跳频带宽。SRS
资源的每个天线端口被映射到每对 R 个相邻的 OFDM
符号中相同的子载波集合。</p>
<p>UE可以被配置 <span class="math inline">\(N_s=1\)</span>
个符号的周期或半持续 SRS 资源并在 BWP 内进行时隙间跳频，其中 SRS
资源在每个时隙中占据相同的符号位置。UE可以被配置 Ns = 2 or 4
个符号的周期或半持续 SRS 资源并在 BWP 内进行时隙内和时隙间跳频，其中N
个符号的 SRS 资源在每个时隙中占据相同的符号位置。对于 <span
class="math inline">\(N_s=4\)</span>，当跳频配置为 R = 2 时，SRS
资源的每个天线端口通过每个时隙中的资源的两对 R 个相邻的 OFDM
符号映射到不同子载波集合以支持时隙内和时隙间跳频。对于 <span
class="math inline">\(N_s=R\)</span>，当跳频被配置，SRS
资源的每个天线端口映射到每个时隙中的资源的 R 个相邻 OFDM
符号中的相同一组子载波集合以支持时隙间跳频。</p>
<h2 id="用于下行-csi-获取的-ue-探测过程">用于下行 CSI 获取的 UE
探测过程</h2>
<p>当 UE 被高层参数 SRS-ResourceSet 中的字段 usage 配置为
“antennaSwitching”，根据 UE 能力
supportedSRS-TxPortSwitch，基站可以采用如下方式中的一种为 UE
配置用于下行 CSI 获取的 SRS 资源集。在 R15 （V15.11.0） 规范中UE 能力
supportedSRS-TxPortSwitch 包括 't1r2' for 1T2R, 't2r4' for 2T4R, 't1r4'
for 1T4R, 't1r4-t2r4' for 1T4R/2T4R, 't1r1' for 1T=1R, 't2r2' for 2T=2R,
or 't4r4' for 4T=4R。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112119.png" /></p>
<ul>
<li><p>对于 1T2R，最多配置两个 SRS 资源集。一个 SRS
资源集中包含两个配置在不同 OFDM 符号的 SRS 资源，每个 SRS 资源有 1
个端口。同一个 SRS 资源集中的不同 SRS 资源使用不同的 UE
天线端口（物理天线）分别发送。当配置两个 SRS 资源集时，这两个 SRS
资源集须通过高层参数 resourceType配置为不同的资源类型。</p></li>
<li><p>对于 2T4R，最多配置带个 SRS 资源集。一个 SRS
资源集中包含两个配置在不同 OFDM 符号的 SRS 资源，每个 SRS 资源有 2
个端口，其中的一个 SRS 资源由两个 UE 天线端口（物理天线）发送，另一个
SRS 资源则从另外两个 UE 天线端口（物理天线）发送。当配置两个 SRS
资源集时，这两个 SRS 资源集须通过高层参数
resourceType配置为不同的资源类型。</p></li>
<li><p>对于 1T4R，可以配置零个或一个周期或半持续 SRS
资源集。当配置一个周期或半持续 SRS 资源集时，该资源集内包含 4 个 SRS
资源，每个 SRS 资源包含 1 个端口，不同的 SRS 资源配置在不同的 OFDM
符号上，且使用不同的 UE 天线端口（物理天线）发送。</p></li>
<li><p>对于 1T4R，可以配置零个或两个非周期 SRS 资源集。当配置两个非周期
SRS 资源集时，由于天线切换需要时间，4 个 SRS
资源不能在一个时隙内发完，因此两个非周期 SRS
资源集要在两个时隙内发送。两个 SRS 资源集共包含 4 个 SRS
资源，每个资源集各包含两个 SRS 资源或者一个 SRS 资源集包含 1 个SRS
资源，另外一个 SRS 资源集包含 3 个 SRS 资源，每个 SRS
资源包含一个端口，不同的 SRS 资源通过不同的 UE
物理天线发送。当配置两个非周期 SRS 资源集时，两个 SRS
资源集需配置相同的功率控制参数，包括 SRS-ResourceSet 中的字段 alpha, p0,
pathlossReferenceRS 和
srs-PowerControlAdjustmentStates。UE期望高层参数aperiodicSRS-ResourceTrigger的值或每个SRS-ResourceSet中AperiodicSRS-ResourceTriggerList中的条目的值相同，并且每个SRS-ResourceSet中的高层参数slotOffset的值不同
。</p></li>
<li><p>对于 1T=1R 或 2T=2R 或 4T=4R，最多配置两个 SRS 资源集。每个 SRS
资源集包含 1 个 SRS 资源，每个 SRS 资源的端口数可以为 1，2或4。</p></li>
</ul>
<p>用于天线切换的 SRS 资源集内的多个 SRS 资源两两之间需要留有 Y
个符号的保护时间间隔，在保护时间间隔内，UE 不能发送任何信号。</p>
<p>如果UE能力是“t1r4-t2r4”，则对于一个或多个 SRS 资源集中的所有 SRS
资源，UE应期望配置有相同数量的 SRS 端口（一个或两个）。</p>
<p>如果UE能力是“t1r2”，“t2r4”，“t1r4”，“t1r4-t2r4”并且在同一个时隙内高层参数
usage 为“antennaSwitching”，则 UE
不应被配置或被触发一个以上的SRS资源集。如果UE能力是 “t1r1” 或 “t2r2” 或
“t4r4”并且在同一个符号内高层参数 usage 为“antennaSwitching”，则 UE
不应被配置或被触发一个以上的 SRS 资源集。</p>
<p>Y 的值由 Table 6.2.1.2-1 给出。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112120.png" /></p>
<h1 id="低峰均比序列">低峰均比序列</h1>
<p>低峰均比序列 <span
class="math inline">\(r_{u,v}^{(\alpha,\delta)}(n)\)</span> 由基序列
<span class="math inline">\({\bar{r}}_{u,\nu}\left(n\right)\)</span>
的循环移位 <span class="math inline">\(\alpha\)</span>
根据下式定义：</p>
<p><span
class="math display">\[r_{u,v}^{\left(\alpha,\delta\right)}\left(n\right)=e^{j\alpha
n}{\bar{r}}_{u,\nu}\left(n\right), 0≤n&lt;M_{ZC}\]</span></p>
<p>其中 <span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta}\)</span>
是序列的长度。基于单个基序列，通过不同的 <span
class="math inline">\(\alpha\)</span> 和 <span
class="math inline">\(\delta\)</span> 来定义多个序列。</p>
<p>基序列 <span
class="math inline">\({\bar{r}}_{u,\nu}\left(n\right)\)</span> 分别 30
个组，其中 <span
class="math inline">\(u\in\left\{0,1,...,29\right\}\)</span>
是组号，<span class="math inline">\(v\)</span>
是某个组内的序列号。分别以下两种情况。</p>
<p><strong>情况一</strong></p>
<p>如果序列长度为 <span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta}\)</span>，<span
class="math inline">\(\frac{1}{2}\le\frac{m}{2^\delta}\le5\)</span>，则每个组只包含一个基序列（<span
class="math inline">\(v=0\)</span>）。</p>
<p><strong>情况二</strong></p>
<p>如果序列长度为 <span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta},\
6\le\frac{m}{2^\delta}\)</span>， 则每个组包含两个基序列（<span
class="math inline">\(v=0,1\)</span>）。</p>
<p>以 SRS 序列为例，SRS 序列根据带宽和 comb
的配置也有以上两种情况。以下配置属于情况一：</p>
<p>（1）SRS 带宽 4 RB，传输梳齿数目 <span
class="math inline">\(K_{\mathrm{TC}}=2\)</span>, 则 <span
class="math inline">\(\delta={log}_2\left(2\right)=1\)</span>，<span
class="math inline">\(\frac{1}{2}\le\frac{4}{2}\le5\)</span>。此时序列长度为
<span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta}=4\ast12/2=24\)</span>。</p>
<p>（2）SRS 带宽 4 RB，传输梳齿数目 <span
class="math inline">\(K_{\mathrm{TC}}=4\)</span>, 则 <span
class="math inline">\(\delta={log}_2\left(4\right)=2\)</span>，<span
class="math inline">\(\frac{1}{2}\le\frac{4}{4}\le5\)</span>。此时序列长度为
<span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta}=4\ast12/4=12\)</span>。</p>
<p>（3）SRS 带宽 8 RB，传输梳齿数目 <span
class="math inline">\(K_{\mathrm{TC}}=4\)</span>, 则 <span
class="math inline">\(\delta={log}_2\left(4\right)=2\)</span>，<span
class="math inline">\(\frac{1}{2}\le\frac{8}{4}\le5\)</span>。此时序列长度为
<span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta}=8\ast12/4=24\)</span>。</p>
<p>其他配置，如 <span class="math inline">\(K_{\mathrm{TC}}=2\)</span>
且 SRS 带宽大于等于 6RB，或 <span
class="math inline">\(K_{\mathrm{TC}}=4\)</span> 且 SRS 带宽大于等于
12RB 都属于情况二，此时序列长度 <span
class="math inline">\(M_{\mathrm{ZC}}\geq3N_{\mathrm{sc}}^{\mathrm{RB}}=36\)</span>。</p>
<h2 id="长度大于等于-36-的基序列">长度大于等于 36 的基序列</h2>
<p>大度大于等于 36 的基序列 <span
class="math inline">\({\bar{r}}_{u,\nu}\left(n\right),...,{\bar{r}}_{u,\nu}\left(M_{\mathrm{ZC}}-1\right)\)</span>
采用 Zadoff-Chu 循环扩展，并由下式定义：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112121.png" /></p>
<p>其中</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112122.png" /></p>
<p>ZC 序列长度 <span class="math inline">\(N_{\mathrm{ZC}}\)</span>
是满足 <span
class="math inline">\(N_{\mathrm{ZC}}&lt;M_{\mathrm{ZC}}\)</span>
的最大质数。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112123.png" /></p>
<p>ZC 序列的长度通常小于基序列的长度，剩余的那部分基序列由 ZC
序列循环扩展得到，首尾相接。例如基序列长度 <span
class="math inline">\(M_{\mathrm{ZC}}=36\)</span>，则 ZC 序列长度为
<span
class="math inline">\(N_{\mathrm{ZC}}=31\)</span>。通过对基序列进行循环移位可得到更多的
ZC 序列，当 <span class="math inline">\(N_{\mathrm{ZC}}=31\)</span>
时，可用的 ZC 序列有 30 个。可用的 ZC 序列数目为 <span
class="math inline">\(N_{\mathrm{ZC}}-1\)</span>。</p>
<h2 id="长度小于-36-的基序列">长度小于 36 的基序列</h2>
<p>长度为 <span
class="math inline">\(M_{\mathrm{ZC}}\in\left\{6,12,18,24\right\}\)</span>
的基序列由下式定义：</p>
<p><span
class="math display">\[{\bar{r}}_{u,\nu}\left(n\right)=\begin{matrix}e^\frac{j\phi\left(n\right)\pi}{4},&amp;0\le
n\le M_{\mathrm{ZC}}-1\\\end{matrix}\]</span></p>
<p>其中 (n) 的值由 Tables 5.2.2.2-1 ~ 5.2.2.2-4 给定。</p>
<p>长度为 <span class="math inline">\(M_{\mathrm{ZC}}=30\)</span>
的基序列由下式定义：</p>
<p><span
class="math display">\[{\bar{r}}_{u,\nu}\left(n\right)=\begin{matrix}e^{-j\frac{\pi(u+1)(n+1)(n+2)}{31}},&amp;0\le
n\le M_{\mathrm{ZC}}-1\\\end{matrix}\]</span></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112124.png" /></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112125.png" /></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112126.png" /></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112127.png" /></p>
<h1 id="为什么是-zc-序列">为什么是 ZC 序列</h1>
<p>1962 年 Zadoff 和 Frank 提出了一种循环自相关为零的多相编码（polyphase
codes），但编码的长度受限于 p^2。十年后（1972），Chu 基于 Zadoff 和
Frank
的研究成果，提出了一种新的序列构造方法，依然具有完美的零相关性，但序列长度没有限制。这种新的序列就是
Zadoff-Chu 序列。又数十年后，它应用在4G 和 5G 的参考信号中。</p>
<p>Zadoff-Chu 序列一个关键特点是经过离散傅里叶变换，生成的新序列依然是
Zadoff-Chu 序列。Zadoff-Chu
序列的另一个特点是序列在时域和频域的幅度都是恒定的。时域信号的幅度恒定有助于提高功放效率。频域信号的幅度恒定意味着序列经过任意非零循环移位与原序列零相关。这就是说，同一个
Zadoff-Chu
序列在时域上经过不同的循环移位所产生的两个序列信号之间是正交的。时域的循环移位等效于在频域上进行连续的相位旋转。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112129.png" /></p>
<p>虽然 Zadoff-Chu 序列具有以上优点，但它并不能直接在 LTE/NR
系统中被使用。一个原因是 SRS 序列长度并不是质数，另一个原因是
Zadoff-Chu序列长度较短时，没有足够的可用序列。</p>
<p>原始的 Zadoff-Chu 序列可以为任意长度，但人们往往关注 <span
class="math inline">\(N_{\mathrm{ZC}}\)</span>
为质数的情况，因为质数长度会拥有最多可用的 Zadoff-Chu 序列。也就是说，在
Zadoff-Chu序列长度 <span class="math inline">\(N_{\mathrm{ZC}}\)</span>
为质数的情况下，可以找到 <span
class="math inline">\(N_{\mathrm{ZC}}-1\)</span> 个不同的
Zadoff-Chu序列。因此 SRS 序列采用 Zadoff-Chu序列循环扩展，从长度 <span
class="math inline">\(N_{\mathrm{ZC}}\)</span> 扩展到长度 <span
class="math inline">\(M_{\mathrm{ZC}}\)</span>。SRS
序列是频域序列，由于是在频域上扩展生成，所以依然保持了完美的循环自相关特性，但在时域上会破坏
Zadoff-Chu序列原有的幅度恒定特性，因此时域幅度上会产生波动。</p>
<p>对于长度超过 36 的 SRS 序列，都会使用扩展 Zadoff-Chu
序列。对于长度小于 36 的 SRS 序列，NR
标准通过计算机穷举法，找到了一组合适的序列，这些频域上平坦的序列具有良好的时域包络特性。长度小于
36 的 SRS 序列不使用 Zadoff-Chu 序列，主要原因是找不到足够的可用
Zadoff-Chu 序列。</p>
<p>David C. Chu 在 1972 年从数学上证明了 Zadoff-Chu
序列具有完美的循环自相关特性。</p>
<p>ZC 序列根据序列长度 N 为偶或奇定义如下：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112128.png" /></p>
<p>其中 N 为任意正整数，M 为 相对于 N 的质数，<span
class="math inline">\(k=0,1,...,N-1\)</span>。</p>
<p>自相关函数 <span class="math inline">\(\left\{x_m\right\}\)</span>
定义为：</p>
<p><span
class="math display">\[x_0=\sum_{k=0}^{N-1}{a_ka_k^\ast}\]</span></p>
<p><span
class="math display">\[x_m=\sum_{k=0}^{N-m-1}{a_ka_{k+m}^\ast}+\sum_{k=N-m}^{N-1}{a_ka_{k+m-N}^\ast},\
\ j=1,2,...,N-1\]</span></p>
<p>已得到证明，无论 N 为偶或奇，ZC 序列的自相关函数 <span
class="math inline">\(x_m=0\)</span>。</p>
<p>为便于理解，可采用数值计算的方式验证 ZC
序列的零自相关性和良好的互相关性。ZC
序列具有零相关性是指，同一个基序列的不同循环移位得到任意两个序列之间的相关系数为零，如以下例子，忽略数值计算的误差，可以认为
autoCorr=0。另一方面，理论上两个不同的基序列（M1和M2不同，无循环移位）的互相关系数为
1/sqrt(N)。数值计算得到的 crossCorr=1/sqrt(63)=0.1260。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">N  = 63;</span><br><span class="line">M1 = 61;</span><br><span class="line">M2 = 59;</span><br><span class="line">m  = 5;</span><br><span class="line"> </span><br><span class="line">% 1. Zadoff-Chu</span><br><span class="line">ak1 = zeros(1,N);</span><br><span class="line">bk1 = zeros(1,N);</span><br><span class="line">for k = 0:N-1</span><br><span class="line">    ak1(k+1) = exp(1j * (M1 * pi * k * (k+1) / N));</span><br><span class="line">    bk1(k+1) = exp(1j * (M2 * pi * k * (k+1) / N));</span><br><span class="line">end</span><br><span class="line"> </span><br><span class="line">% 2. cyclic shift</span><br><span class="line">ak2 = [ak1(1, m+1:end), ak1(1, 1:m)];</span><br><span class="line"> </span><br><span class="line">% 3. autocorrelation</span><br><span class="line">autoCorr = abs(sum(ak1 .* conj(ak2)) / N)</span><br><span class="line"> </span><br><span class="line">% 4. cross correlation</span><br><span class="line">crossCorr = abs(sum(ak1 .* conj(bk1)) / N)</span><br></pre></td></tr></table></figure>
<p>Output: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">autoCorr =</span><br><span class="line"></span><br><span class="line">   4.4623e-14</span><br><span class="line"></span><br><span class="line">crossCorr =</span><br><span class="line"></span><br><span class="line">    0.1260</span><br></pre></td></tr></table></figure></p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Marshall
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://marshallcomm.cn/2020/11/21/r15_sounding_reference_signal/" title="5G Sounding Reference Signal">https://marshallcomm.cn/2020/11/21/r15_sounding_reference_signal/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/5G-NR/" rel="tag"># 5G-NR</a>
              <a href="/tags/3GPP/" rel="tag"># 3GPP</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/03/07/nr_prg/" rel="prev" title="NR PRG">
                  <i class="fa fa-chevron-left"></i> NR PRG
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/02/01/past/" rel="next" title="PAST 算法详细推导">
                  PAST 算法详细推导 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Marshall</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"marshallcomm","repo":"comments","client_id":"5292b230fffb00675d06","client_secret":"6705ad3451d389244184d486864a7dbdefb7fa38","admin_user":"marshallcomm","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"806528f6771afb8e0d54f131f020b9e1"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
