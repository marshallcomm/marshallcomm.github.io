<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Polar Code（12）B-DMC对称容量</title>
    <url>/2017/04/09/Polar-Code-12-BDMC-Symmetric-Capacity/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>任何一本信息论书籍讲到离散信道容量时都会涉及形如<span
class="math inline">\(I\left( X;Y \right)=\sum\limits_{i,j}{ { {p}_{i}}{
{p}_{ij}}\log \frac{ { {p}_{ij}}}{ {
{q}_{j}}}}\)</span>的公式。但这个公式，我理解是经过转化得来的，不是直接得到的。怎么转化呢？请继续阅读。</p>
<p>输入符号概率<span class="math inline">\({ {p}_{i}}=p\left( { {x}_{i}}
\right)\)</span>，输出符号概率<span class="math inline">\({
{q}_{j}}=q\left( { {y}_{j}}
\right)\)</span>，输入符号到输出符号的转移概率<span
class="math inline">\({ {p}_{ij}}=p\left( { {y}_{j}}|{ {x}_{i}}
\right)\)</span>，这三种概率完全地表达了一个信道。对于信道容量，第一个概念是互信息量。</p>
<span id="more"></span>
<h1 id="互信息量">互信息量</h1>
<p><br/>互信息量定义为<strong>后验概率与先验概率比值的对数</strong>。虽然有这个定义，但必须先要明确观察者的角度才能进一步确定后验概率是谁，先验概率是谁。<span
class="math inline">\(I\left( X;Y
\right)\)</span>是站在接收端的角度观察，是<span
class="math inline">\(Y\)</span>对<span
class="math inline">\(X\)</span>的平均互信息量；而<span
class="math inline">\(I\left( Y;X
\right)\)</span>是站在发送端角度观察，是<span
class="math inline">\(X\)</span>对<span
class="math inline">\(Y\)</span>的平均互信息量。我们只说第一种角度，即以接收者的视角来观察信道。</p>
<p>通常接收端可以预知信息<span
class="math inline">\(X\)</span>发出的各个符号的集合，以及它们的概率分布，也就是说发送符号概率<span
class="math inline">\(p\left( { {x}_{i}}
\right)\)</span>是<strong>先验概率</strong>。当接收端收到一个符号<span
class="math inline">\({
{y}_{j}}\)</span>后，接收端可以计算发送端消息的条件概率<span
class="math inline">\(p\left( { {x}_{i}}|{ {y}_{j}}
\right)\)</span>，这种条件概率就是<strong>后验概率</strong>。根据互信息量定义，<span
class="math inline">\({ {y}_{j}}\)</span>对<span class="math inline">\({
{x}_{i}}\)</span>的互信息量为：</p>
<p><span class="math display">\[\begin{align}
I\left( { {x}_{i}};{ {y}_{j}} \right)=\log \frac{p\left( { {x}_{i}}|{
{y}_{j}} \right)}{p\left( { {x}_{i}} \right)}
\end{align}\]</span></p>
<h1 id="平均互信息量">平均互信息量</h1>
<p><br/>只有<span class="math inline">\(I\left( { {x}_{i}};{ {y}_{j}}
\right)\)</span>是没有意义的，因为通常无法确定<span
class="math inline">\(p\left( { {x}_{i}}|{ {y}_{j}}
\right)\)</span>和<span class="math inline">\(p\left( { {x}_{i}}
\right)\)</span>的大小关系，<span class="math inline">\(I\left( {
{x}_{i}};{ {y}_{j}} \right)\)</span>不一定大于或等于0。由于发送符号<span
class="math inline">\(X\)</span>和接收符号<span
class="math inline">\(Y\)</span>都是随机变量，要探知<span
class="math inline">\(Y\)</span>对<span
class="math inline">\(X\)</span>的互信息量得用统计的方法去计算<span
class="math inline">\(I\left( { {x}_{i}};{ {y}_{j}}
\right)\)</span>的平均值，准确地说是计算<span
class="math inline">\(I\left( { {x}_{i}};{ {y}_{j}}
\right)\)</span>在发送符号集合<span
class="math inline">\(X\)</span>和接收符号集合<span
class="math inline">\(Y\)</span>上的概率加权统计平均值，这就是平均互信息量：</p>
<p><span class="math display">\[\begin{align}
I\left( X;Y \right)=\sum\limits_{i}{\sum\limits_{j}{p\left( { {x}_{i}}{
{y}_{j}} \right)}\log }\frac{p\left( { {x}_{i}}|{ {y}_{j}}
\right)}{p\left( { {x}_{i}} \right)}
\end{align}\]</span></p>
<p>其中<span class="math inline">\(p\left( { {x}_{i}}{ {y}_{j}}
\right)\)</span>是发送符号<span class="math inline">\({
{x}_{i}}\)</span>与接收符号<span class="math inline">\({
{y}_{j}}\)</span>的联合概率。</p>
<h1
id="联合概率后验概率与转移概率的关系">联合概率、后验概率与转移概率的关系</h1>
<p><span class="math display">\[\begin{align}
p\left( { {x}_{i}}{ {y}_{j}} \right)=p\left( { {x}_{i}} \right)p\left( {
{y}_{j}}|{ {x}_{i}} \right)=p\left( { {y}_{j}} \right)p\left( {
{x}_{i}}|{ {y}_{j}} \right)
\end{align}\]</span></p>
<p>这个关系式相当重要！它打通了前向与后向之间的联系。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170409/202751865.jpg"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>研究互信息量自然离不开对信道的定义。而信道是由输入符号、输出符号和转移概率三者确定的。转移概率<span
class="math inline">\(p\left( { {y}_{j}}|{ {x}_{i}}
\right)\)</span>是站在发送端的角度观察，方向是<span
class="math inline">\(X\to
Y\)</span>，因此也称为<strong>前向概率</strong>。后验概率<span
class="math inline">\(p\left( { {x}_{i}}|{ {y}_{j}}
\right)\)</span>是站在接收端的角度观察，方向是<span
class="math inline">\(Y\to
X\)</span>，因此也称为<strong>后向概率</strong>。后验概率是逆向思维，不仅难以理解而且还不易求，既然如此那就全部按正向来吧。根据关系式（3），把<strong>后验概率用转移概率来表示</strong>：</p>
<p><span class="math display">\[\begin{align}
p\left( { {x}_{i}}|{ {y}_{j}} \right)=\frac{p\left( { {x}_{i}}
\right)p\left( { {y}_{j}}|{ {x}_{i}} \right)}{p\left( { {y}_{j}}
\right)}
\end{align}\]</span></p>
<p>带入式（2）则平均互信息量<span class="math inline">\(I\left( X;Y
\right)\)</span>用转移概率可重新表示为：</p>
<p><span class="math display">\[\begin{align}
I\left( X;Y \right)=\sum\limits_{i}{\sum\limits_{j}{p\left( { {x}_{i}}
\right)p\left( { {y}_{j}}|{ {x}_{i}} \right)}\log }\frac{p\left( {
{y}_{j}}|{ {x}_{i}} \right)}{p\left( { {y}_{j}} \right)}
\end{align}\]</span></p>
<p>其中<span class="math inline">\(p\left( { {x}_{i}}
\right)\)</span>是先验概率自不必说，<span class="math inline">\(p\left(
{ {y}_{j}} \right)\)</span>是接收符号概率也可以用转移概率表示：</p>
<p><span class="math display">\[\begin{align}
p\left( { {y}_{j}} \right)=\sum\limits_{i}{p\left( { {x}_{i}}
\right)}p\left( { {y}_{j}}|{ {x}_{i}} \right)
\end{align}\]</span></p>
<p>通过式（5~6）可以看出，在信道给定的情况下，平均互信息量<span
class="math inline">\(I\left( X;Y
\right)\)</span>的大小由输入符号的概率分布<span
class="math inline">\(p\left( { {x}_{i}} \right)\)</span>来确定。</p>
<h1 id="信道容量">信道容量</h1>
<p><br/>进一步，<strong>信道容量</strong>定义为平均互信息量<span
class="math inline">\(I\left( X;Y \right)\)</span>的最大值，用符号<span
class="math inline">\(C\)</span>来表示，即</p>
<p><span class="math display">\[\begin{align}
C=\underset{p\left( { {x}_{i}} \right)}{\mathop{\max }}\,I\left( X;Y
\right)=\underset{p\left( { {x}_{i}} \right)}{\mathop{\max
}}\,\sum\limits_{i}{\sum\limits_{j}{p\left( { {x}_{i}} \right)p\left( {
{y}_{j}}|{ {x}_{i}} \right)}\log }\frac{p\left( { {y}_{j}}|{ {x}_{i}}
\right)}{\sum\limits_{i}{p\left( { {x}_{i}} \right)}p\left( { {y}_{j}}|{
{x}_{i}} \right)}
\end{align}\]</span></p>
<p>什么时候<span class="math inline">\(I\left( X;Y
\right)\)</span>取得最大值呢？根据信息论，在对称信道下，输入等概时互信息量达到最大值，该最大值即为信道容量<span
class="math inline">\(C\)</span>。在非对称信道下，也一定存在某种输入概率分布，使得互信息量<span
class="math inline">\(I\left( X;Y
\right)\)</span>最大，该最大值即为该信道的容量，而相应的输入概率分布称为最佳输入分布。当信道给定后，转移概率<span
class="math inline">\(p\left( { {y}_{j}}|{ {x}_{i}}
\right)\)</span>就固定，<span class="math inline">\(C\)</span>仅与<span
class="math inline">\(p\left( { {y}_{j}}|{ {x}_{i}}
\right)\)</span>有关，而与<span class="math inline">\(p\left( { {x}_{i}}
\right)\)</span>无关。</p>
<h1 id="b-dmc平均互信息量">B-DMC平均互信息量</h1>
<p><br/>对于一般二进制离散无记忆信道（此时先不论信道是否对称），假定信源符号以等概率发送，则有<span
class="math inline">\(p\left( 0 \right)=p\left( 1
\right)=\frac{1}{2}\)</span>，带入式（2）得到输入等概时的平均互信息量：</p>
<p><span class="math display">\[\begin{align}
I\left( X;Y \right)=\sum\limits_{i}{\sum\limits_{j}{\frac{1}{2}p\left( {
{y}_{j}}|{ {x}_{i}} \right)}\log }\frac{p\left( { {y}_{j}}|{ {x}_{i}}
\right)}{\sum\limits_{i}{p\left( { {x}_{i}} \right)}p\left( { {y}_{j}}|{
{x}_{i}} \right)}
\end{align}\]</span></p>
<p>分母展开<span class="math inline">\(\sum\limits_{i}{p\left( {
{x}_{i}} \right)}p\left( { {y}_{j}}|{ {x}_{i}}
\right)=\frac{1}{2}p\left( { {y}_{j}}|0 \right)+\frac{1}{2}p\left( {
{y}_{j}}|1
\right)\)</span>，并带入式（8）得到一般B-DMC在输入等概时的平均互信息量为：</p>
<p><span class="math display">\[\begin{align}
I\left( X;Y \right)=\sum\limits_{i}{\sum\limits_{j}{\frac{1}{2}p\left( {
{y}_{j}}|{ {x}_{i}} \right)}\log \frac{p\left( { {y}_{j}}|{ {x}_{i}}
\right)}{\frac{1}{2}p\left( { {y}_{j}}|0 \right)+\frac{1}{2}p\left( {
{y}_{j}}|1 \right)}}
\end{align}\]</span></p>
<p>由于此时还未定义这个一般B-DMC是否为对称信道，虽然假定输入等概，但此时不能确定（9）式的最大值。下面添加对称性条件。</p>
<h1 id="对称信道容量">对称信道容量</h1>
<p><br/>如果转移概率矩阵<span
class="math inline">\(\mathbf{P}\)</span>的每一行都是第一行的置换，称该矩阵是输入对称的；如果转移概率矩阵<span
class="math inline">\(\mathbf{P}\)</span>的每一列都是第一列的置换，称该矩阵是输出对称的；如果输入、输出都对称，则称该DMC为<strong>对称的DMC信道</strong>。</p>
<p>满足对称条件的B-DMC有两个典型例子：BSC和BEC。其中BSC的转移概率矩阵为</p>
<p><span class="math display">\[\begin{align}
\mathbf{P}=\left[ \begin{matrix}
   p &amp; 1-p  \\
   1-p &amp; p  \\
\end{matrix} \right]
\end{align}\]</span></p>
<p>显然式（10）的每一行、每一列都分别是第一行、第一列的置换，因此转移概率满足式（10）的信道是一种对称信道。把BSC转移概率带入式（9）得到平均互信息量</p>
<p><span class="math display">\[\begin{align}
I\left( X;Y \right)=p\log 2p+\left( 1-p \right)\log 2\left( 1-p \right)
\end{align}\]</span></p>
<p>此时的平均互信息量就是所能达到的最大值，因为式（11）是输入等概下的对称信道的平均互信息量，即对称信道的容量，也即<strong>BSC的对称容量</strong>。此时才有</p>
<p><span class="math display">\[\begin{align}
C=I\left( X;Y \right)=p\log 2p+\left( 1-p \right)\log 2\left( 1-p
\right)
\end{align}\]</span></p>
<h1 id="理解">理解</h1>
<p><br/>既然是离散信道，其输入、输出必然都是离散的。为什么输出符号是任意的？站在发送端的角度去看，发送端唯一确知的就是自己能够发什么，发送符号取值范围是{0,1}，这是明确的。我发的信号我做主，发送端只管得了自己，但它不并知道信道是什么样的，也不知道接收端能收到什么。所以对于发送端而言，信道和接收符号都是未知的、任意的。概率也仅仅表达了一种可能性。弓箭手射箭，一旦射出，箭就不由弓箭手所控制了。</p>
<p>为什么Arikan由B-DMC直接给出了对称容量？式（9）给出的就是一般B-DMC的平均互信息量，此时还没涉及对称的概念。注意，式（9）是一个不完整的计算式，它有4个转移概率值仍是未知的。因此你必须对B-DMC有进一步的定义，而此时式（9）的值则完全取决于信道类型。转移概率满足什么样的特性，它就定义了什么样的信道类型。当满足<span
class="math inline">\(P\left( 0|0 \right)=P\left( 1|1
\right)=p\)</span>、<span class="math inline">\(P\left( 1|0
\right)=P\left( 0|1
\right)=1-p\)</span>时，B-DMC就是BSC信道。对称，发0的情况和发1的情况完全相同，这就是对称。BSC是研究二元编解码最简单，最常用的信道模型。</p>
<p>研究编解码离不开具体的信道模型，只谈B-DMC是不够的，它还有4个概率值需要进一步给出定义。当进一步研究编码时不可能凭空讨论，一定要更加具体，是B-DMC下的BSC，还是B-DMC下的BEC？如此这般才构成讨论的基础。为什么一定要对称？因为它是最简单最基础的模型。定义就是定义，不需要纠结于为什么要这么定义。一上来就给出讨论的前提，在这种定义的框架下去讨论编码问题。</p>
<p>说“BSC的对称容量”、“BEC的对称容量”都没问题，因为BSC和BEC都是对称信道。说“B-DMC的对称容量”，其实是隐含地指出了B-DMC满足对称性，要么是BSC，要么是BEC。</p>
<p>BSC和BEC的相关链接：</p>
<p><a
href="http://marshallcomm.cn/2017/03/12/polar-code-5-encoding-chan-trans-prob/">Polar
Code（5）编码之信道转移概率</a></p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>MMSE 检测算法推导</title>
    <url>/2018/12/22/algorithm-mmse-detection/</url>
    <content><![CDATA[<p>考虑发送端具有 <span class="math inline">\(N_t\)</span>
根发送天线，接收端具有 <span class="math inline">\(N_r\)</span>
根接收天线，在一个时隙内信道为准静态平坦衰落情况下，接收信号可表示为</p>
<p><span class="math display">\[
\mathbf{y=Hx+n} \tag{1}
\]</span></p>
<p>其中 <span class="math inline">\(\mathbf{H} \in \mathbb{C}^{N_r
\times N_t}\)</span> 是 MIMO 信道矩阵，<span
class="math inline">\(\mathbf{x} \in \mathbb{C}^{N_t \times 1}\)</span>
是发送信号向量，<span class="math inline">\(\mathbf{n} \in
\mathbb{C}^{N_r \times 1}\)</span>
是与发送信号向量不相关的加性噪声向量，假设噪声向量均值为零。</p>
<h1 id="预备知识">预备知识</h1>
<p>向量 <span class="math inline">\(\mathbf{x}\)</span>，<span
class="math inline">\(\mathbf{n}\)</span> 有如下自相关矩阵</p>
<p><span class="math display">\[
\mathbf{R}_x = E[\mathbf{x} \mathbf{x}^H] \tag{2}
\]</span></p>
<p><span class="math display">\[
\mathbf{R}_n = E[\mathbf{n} \mathbf{n}^H] \tag{3}
\]</span></p>
<p>已假设向量 <span class="math inline">\(\mathbf{x}\)</span>，<span
class="math inline">\(\mathbf{n}\)</span> 不相关，则 <span
class="math inline">\(\mathbf{x}\)</span>，<span
class="math inline">\(\mathbf{n}\)</span> 互相关矩阵为 <span
class="math inline">\(\mathbf{0}\)</span> 矩阵</p>
<span id="more"></span>
<p><span class="math display">\[
\mathbf{R}_{xn} = E[\mathbf{x} \mathbf{n}^H] = \mathbf{0}_{N_t \times
N_r} \tag{4}
\]</span></p>
<p><span class="math display">\[
\mathbf{R}_{nx} = E[\mathbf{n} \mathbf{x}^H] = \mathbf{0}_{N_r \times
N_t} \tag{5}
\]</span></p>
<p>接收信号向量 <span class="math inline">\(\mathbf{y}\)</span>
的自相关矩阵</p>
<p><span class="math display">\[\begin{equation} \tag{6}
\begin{aligned}
\mathbf{R}_y &amp;= E\left[\mathbf{y} \mathbf{y}^H \right] \\
&amp;= E \left[ \left(\mathbf{Hx + n} \right) \left(\mathbf{Hx + n}
\right)^H \right] \\
&amp;= E \left[\mathbf{H} \mathbf{x} \mathbf{x}^H \mathbf{H}^H +
\mathbf{H} \mathbf{x} \mathbf{n}^H + \mathbf{n} \mathbf{x}^H
\mathbf{H}^H + \mathbf{n} \mathbf{n}^H \right] \\
&amp;= \mathbf{H} E\left[\mathbf{x} \mathbf{x}^H \right] + \mathbf{H}
E\left[\mathbf{x} \mathbf{n}^H \right] + E\left[\mathbf{n} \mathbf{x}^H
\right] \mathbf{H}^H + E\left[\mathbf{n} \mathbf{n}^H \right] \\
&amp;= \mathbf{H} \mathbf{R}_x \mathbf{H}^H + \mathbf{R}_n
\end{aligned}
\end{equation}\]</span></p>
<p>这些相关矩阵将在下面的推导中使用。</p>
<h1 id="mmse检测算法">MMSE检测算法</h1>
<p>接收端估计的信号为</p>
<p><span class="math display">\[
\mathbf{\hat{x}} = \mathbf{W} \mathbf{y} \tag{7}
\]</span></p>
<p>则估计信号的误差为</p>
<p><span class="math display">\[
\mathbf{e} = \mathbf{\hat{x}} - \mathbf{x} = \mathbf{W} \mathbf{y} -
\mathbf{x} \tag{8}
\]</span></p>
<p>估计信号的均方误差为</p>
<p><span class="math display">\[
\mathbf{e}_{MSE} = E \left\| \mathbf{Wy - x} \right\|^2 \tag{9}
\]</span></p>
<p><strong>MMSE
检测算法以最小均方误差为准则，最小化实际发送的符号和检测器输出估计值之间的均方误差。当
<span class="math inline">\(\mathbf{e}_{MSE}\)</span>
达到最小时，接收信号 <span class="math inline">\(\mathbf{y}\)</span>
的加权矩阵 <span class="math inline">\(\mathbf{W}\)</span> 为 <span
class="math inline">\(\mathbf{W}_{MMSE}\)</span></strong>：</p>
<p><span class="math display">\[
\mathbf{W}_{MMSE} = \mathop{\arg\min}_{\mathbf{w}} \ E\left\| \mathbf{Wy
- x} \right\|^2 \tag{10}
\]</span></p>
<p>推导 <span class="math inline">\(\mathbf{W}_{MMSE}\)</span>
有两种方法，一是利用正交性原理，能够很方便地推出结果；二是从式（9）出发，对
<span class="math inline">\(\mathbf{W}_{MMSE}\)</span>
求导，并令导函数为 0，转化为求极值问题。</p>
<h2 id="推导方法一正交性原理">推导方法一：正交性原理</h2>
<p>正交性原理：估计误差 <span class="math inline">\(\mathbf{e}\)</span>
是一个随机变量，定义代价函数为均方误差 <span
class="math inline">\(\mathbf{e}_{MSE} = E\left\| \mathbf{Wy - x}
\right\|\)</span>，则使均方误差 <span
class="math inline">\(\mathbf{e}_{MSE}\)</span> 获得最小值的条件是：</p>
<p><span class="math display">\[
E\left[ \mathbf{e}_0 \mathbf{y}^H \right] = \mathbf{0} \tag{11}
\]</span></p>
<p>此时的 <span class="math inline">\(\mathbf{e}_0\)</span>
是在均方误差意义上的最小值。这就是正交性原理。</p>
<p>将式（8）带入式（11）得</p>
<p><span class="math display">\[
E\left[ \left( \mathbf{W}_{MMSE} \mathbf{y} - \mathbf{x} \right)
\mathbf{y}^H \right] = \mathbf{0} \tag{12}
\]</span></p>
<p>下面对式（12）化简：</p>
<p><span class="math display">\[
E\left[ \mathbf{W}_{MMSE} \mathbf{y} \mathbf{y}^H - \mathbf{x}
\mathbf{y}^H \right] = \mathbf{0} \tag{13}
\]</span></p>
<p><span class="math display">\[
E\left[\mathbf{W}_{MMSE} \left( \mathbf{Hx + n} \right) \left(\mathbf{Hx
+ n}\right)^H - \mathbf{x} \left( \mathbf{Hx + n} \right)^H \right] =
\mathbf{0} \tag{14}
\]</span></p>
<p><span class="math display">\[
E\left[\mathbf{W}_{MMSE} \left( \mathbf{Hx + n} \right) \left(
\mathbf{x}^H \mathbf{H}^H + \mathbf{n}^H \right) - \mathbf{x} \left(
\mathbf{x}^H \mathbf{H}^H + \mathbf{n}^H \right) \right] = \mathbf{0}
\tag{15}
\]</span></p>
<p><span class="math display">\[
E\left[ \mathbf{W}_{MMSE} \left( \mathbf{H} \mathbf{x} \mathbf{x}^H
\mathbf{H}^H + \mathbf{H} \mathbf{x} \mathbf{n}^H + \mathbf{n}
\mathbf{x}^H \mathbf{H}^H + \mathbf{n} \mathbf{n}^H \right) -
\left(\mathbf{x} \mathbf{x}^H \mathbf{H}^H + \mathbf{x} \mathbf{n}^H
\right) \right] = \mathbf{0} \tag{16}
\]</span></p>
<p><span class="math display">\[
\mathbf{W}_{MMSE} \left( \mathbf{H} E\left[ \mathbf{x} \mathbf{x}^H
\right] \mathbf{H}^H + \mathbf{H} E\left[ \mathbf{x} \mathbf{n}^H
\right] + \left[ \mathbf{n} \mathbf{x}^H \right] \mathbf{H}^H + E\left[
\mathbf{n} \mathbf{n}^H \right] \right) - \left( \left[ \mathbf{x}
\mathbf{x}^H \right] \mathbf{H}^H + E\left[ \mathbf{x} \mathbf{n}^H
\right] \right)= \mathbf{0} \tag{17}
\]</span></p>
<p><span class="math display">\[
\mathbf{W}_{MMSE} \left( \mathbf{H} E\left[ \mathbf{x} \mathbf{x}^H
\right] \mathbf{H}^H + E\left[ \mathbf{x} \mathbf{x}^H \right]
\mathbf{H}^H \right) = \mathbf{0} \tag{18}
\]</span></p>
<p>最后导出 <span class="math inline">\(\mathbf{W}_{MMSE}\)</span>
为</p>
<p><span class="math display">\[
\mathbf{W}_{MMSE} = \mathbf{R}_x \mathbf{H}^H \left( \mathbf{H}
\mathbf{R}_x \mathbf{H}^H + \mathbf{R}_n \right)^{-1} \tag{19}
\]</span></p>
<h2 id="推导方法二矩阵求导">推导方法二：矩阵求导</h2>
<p>如果不使用正交性原理，要想找到使 <span
class="math inline">\(\mathbf{e}_{MSE}\)</span> 最小的 <span
class="math inline">\(\mathbf{W}_{MMSE}\)</span>，步骤是 step 1）对
<span class="math inline">\(\mathbf{e}_{MSE}\)</span> 求导，step 2）令
<span class="math inline">\(\mathbf{e}_{MSE}\)</span> 的导函数等于
0，并求得极值点。</p>
<p>式（9）可重写为</p>
<p><span class="math display">\[
\begin{equation} \tag{20}
\begin{aligned}
\mathbf{e}_{MMSE} &amp;= E\left\| \mathbf{Wy -x} \right\|^2 \\
&amp;= E\left\{ tr \left[ \left( \mathbf{Wy - x} \right) \left(
\mathbf{Wy - x} \right)^H \right] \right\} \\
&amp;= E\left\{ tr \left[ \mathbf{W} \mathbf{y} \mathbf{y}^H
\mathbf{W}^H - \mathbf{W} \mathbf{y} \mathbf{x}^H - \mathbf{x}
\mathbf{y}^H \mathbf{W}^H + \mathbf{x} \mathbf{x}^H \right] \right\} \\
&amp;= tr\left\{ \mathbf{W} E\left[ \mathbf{y} \mathbf{y}^H \right]
\mathbf{W}^H - \mathbf{W} E\left[ \mathbf{y} \mathbf{x}^H \right] -
E\left[ \mathbf{x} \mathbf{y}^H \right] \mathbf{W}^H + E\left[
\mathbf{x} \mathbf{x}^H \right]\right\}
\end{aligned}
\end{equation}
\]</span></p>
<p>式（20）第一项：</p>
<p><span class="math display">\[
\mathbf{W} E\left[ \mathbf{y} \mathbf{y}^H \right] \mathbf{W}^H =
\mathbf{W} \mathbf{R}_y \mathbf{W}^H \tag{21}
\]</span></p>
<p>式（20）第二项：</p>
<p><span class="math display">\[
\begin{equation} \tag{22}
\begin{aligned}
\mathbf{W} E\left[ \mathbf{y} \mathbf{x}^H \right] &amp;= \mathbf{W}
E\left[ \left( \mathbf{Hx + n} \right) \mathbf{x}^H \right] \\
&amp;= \mathbf{W} E\left[ \mathbf{H} \mathbf{x} \mathbf{x}^H  +
\mathbf{n} \mathbf{x}^H\right] \\
&amp;= \mathbf{W} \mathbf{H} \mathbf{R}_x
\end{aligned}
\end{equation}
\]</span></p>
<p>式（20）第三项：</p>
<p><span class="math display">\[
\begin{equation} \tag{23}
\begin{aligned}
E\left[ \mathbf{x} \mathbf{y}^H \right] \mathbf{W}^H &amp;= E\left[
\mathbf{x} \left( \mathbf{Hx + n} \right)^H \right] \mathbf{W}^H \\
&amp;= E\left[ \mathbf{x} \mathbf{x}^H \mathbf{H}^H + \mathbf{x}
\mathbf{n}^H \right] \mathbf{W}^H \\
&amp;= \mathbf{R}_x \mathbf{H}^H \mathbf{W}^H
\end{aligned}
\end{equation}
\]</span></p>
<p>将式（2），式（21~23）带入式（20）可得</p>
<p><span class="math display">\[
\mathbf{e}_{MSE} = tr\left\{ \mathbf{W} \mathbf{R}_y \mathbf{W}^H -
\mathbf{W} \mathbf{H} \mathbf{R}_x - \mathbf{R}_x \mathbf{H}^H
\mathbf{W}^H + \mathbf{R}_x \right\} \tag{24}
\]</span></p>
<p>对 <span class="math inline">\(\mathbf{e}_{MSE}\)</span> 求 <span
class="math inline">\(\mathbf{W}\)</span> 的偏导：</p>
<p><span class="math display">\[
\frac{\partial \mathbf{e}_{MSE} }{ \partial \mathbf{W} } = \frac{
\partial tr \left\{\mathbf{W} \mathbf{R}_y \mathbf{W}^H - \mathbf{W}
\mathbf{H} \mathbf{R}_x - \mathbf{R}_x \mathbf{H}^H \mathbf{W}^H +
\mathbf{R}_x \right\} }{ \partial \mathbf{W}} \tag{25}
\]</span></p>
<p>式（25）分子第一项的偏导为：</p>
<p><span class="math display">\[
\frac{\partial tr \left\{ \mathbf{W} \mathbf{R}_y
\mathbf{W}^H  \right\}}{ \partial \mathbf{W}} = \left( \mathbf{R}_y
\mathbf{W}^H \right)^T = \mathbf{W}^* \mathbf{R}_y^T \tag{26}
\]</span></p>
<p>式（25）分子第二项的偏导为：</p>
<p><span class="math display">\[
\frac{\partial tr \left\{ \mathbf{W} \mathbf{H} \mathbf{R}_x
\right\}}{\partial \mathbf{W}} = \left( \mathbf{H} \mathbf{R}_x
\right)^T \tag{27}
\]</span></p>
<p>式（25）分子第三项的偏导为：</p>
<p><span class="math display">\[
\frac{\partial tr \left\{ \mathbf{R}_x \mathbf{H}^H \mathbf{W}^H
\right\}}{\partial \mathbf{W}} = \mathbf{0} \tag{28}
\]</span></p>
<p>式（25）分子第四项的偏导为：</p>
<p><span class="math display">\[
\frac{\partial tr\left\{ \mathbf{R}_x \right\}}{\partial \mathbf{W}} =
\mathbf{0} \tag{29}
\]</span></p>
<p>将式（26~29）带入式（25）得</p>
<p><span class="math display">\[
\frac{\partial \mathbf{e}_{MSE}}{\partial \mathbf{W}} = \mathbf{W}^*
\mathbf{R}_y^T - \left( \mathbf{H} \mathbf{R}_x \right)^T \tag{30}
\]</span></p>
<p>令 <span class="math inline">\(\mathbf{e}_{MSE}\)</span> 导函数等于
<span class="math inline">\(\mathbf{0}\)</span></p>
<p><span class="math display">\[
\mathbf{W}^* \mathbf{R}_y^T - \left( \mathbf{H} \mathbf{R}_x \right)^T =
\mathbf{0} \tag{31}
\]</span></p>
<p>对上式等号两边同时取复共轭：</p>
<p><span class="math display">\[
\mathbf{W} \mathbf{R}_y^H = \left( \mathbf{H} \mathbf{R}_x \right)^H
\tag{32}
\]</span></p>
<p>由于自相关矩阵是 <strong>Hermitian</strong> 矩阵，即 <span
class="math inline">\(\mathbf{R}_y^H = \mathbf{R}_y\)</span>，<span
class="math inline">\(\mathbf{R}_x^H =
\mathbf{R}_x\)</span>，则上式改写为</p>
<p><span class="math display">\[
\mathbf{W} \mathbf{R}_y = \mathbf{R}_x \mathbf{H}^H \tag{33}
\]</span></p>
<p>则有</p>
<p><span class="math display">\[
\mathbf{W} = \mathbf{R}_x \mathbf{H}^H \mathbf{R}_y^{-1} \tag{34}
\]</span></p>
<p>将式（6）带入上式得</p>
<p><span class="math display">\[
\mathbf{W}_{MMSE} = \mathbf{R}_x \mathbf{H}^H \left( \mathbf{H}
\mathbf{R}_x \mathbf{H}^H + \mathbf{R}_n \right)^{-1}
\]</span></p>
<p>由此看见，用矩阵求导的方法得到的式（35）和用正交性原理得到的式（19）相同。</p>
<p>若令</p>
<p><span class="math display">\[
\mathbf{R}_x = E\left[ \mathbf{x} \mathbf{x}^H \right] = \mathbf{I}
\]</span></p>
<p><span class="math display">\[
\mathbf{R}_n = E\left[ \mathbf{n} \mathbf{n}^H \right] = \sigma^2
\mathbf{I}
\]</span></p>
<p>带入式（35）得到</p>
<p><span class="math display">\[
\mathbf{W}_{MMSE} = \mathbf{H}^H \left( \mathbf{H} \mathbf{H}^H +
\sigma^2 \mathbf{I} \right)^{-1} \tag{36}
\]</span></p>
<p>完毕。</p>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>MMSE</tag>
      </tags>
  </entry>
  <entry>
    <title>Answer-Polar Code-定义错误概率</title>
    <url>/2017/03/07/answer-polar-code-def-error-prob/</url>
    <content><![CDATA[<p><a
href="http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/">《Polar
Code（4）编码之极化信道可靠性估计》</a>提到，事件<span
class="math inline">\({ {A}_{i}}\)</span>表示序号为<span
class="math inline">\(i\)</span>的极化信道<span
class="math inline">\(W_{N}^{\left( i
\right)}\)</span>所承载的比特经过传输后接收发生错误，即</p>
<p><span class="math display">\[ { {A}_{i}}=\left\{
u_{1}^{N},y_{1}^{N}:W_{N}^{\left( i \right)}\left(
y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}} \right)&lt;W_{N}^{\left( i
\right)}\left( y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}}\oplus 1 \right) \right\}
\]</span></p>
<p>则极化信道<span class="math inline">\(W_{N}^{\left( i
\right)}\)</span>的错误概率为<span class="math inline">\(P\left( {
{A}_{i}} \right)\)</span>。</p>
<p><strong>那么事件<span class="math inline">\({
{A}_{i}}\)</span>怎么理解？</strong></p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171027/192821484.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>举个例子，假设N=2。编码器输入是<span class="math inline">\(\left(
\begin{matrix}  { {u}_{1}} \\  { {u}_{2}} \\ \end{matrix}
\right)\)</span>，编码器输出是<span class="math inline">\(\left(
\begin{matrix}  { {x}_{1}}={ {u}_{1}}\oplus { {u}_{2}} \\  { {x}_{2}}={
{u}_{2}} \\ \end{matrix}
\right)\)</span>。经过无线信道，假设接收端接收到的信号为<span
class="math inline">\(y_{1}^{2}\)</span>。</p>
<span id="more"></span>
<p>对接收端来说，<span
class="math inline">\(y_{1}^{2}\)</span>是已知量，而<span
class="math inline">\({ {u}_{i}}\)</span>是未知量。转移概率<span
class="math inline">\(W_{2}^{i}\left( y_{1}^{2}|{ {u}_{i}}
\right)\)</span>表示通过序号为<span
class="math inline">\(i\)</span>的极化信道<span
class="math inline">\(W_{N}^{\left( i \right)}\)</span>，发送为<span
class="math inline">\({ {u}_{i}}\)</span>接收为<span
class="math inline">\(y_{1}^{2}\)</span>的概率。</p>
<p><span class="math inline">\({ {u}_{i}}\)</span>和$ ( { {u}_{i}} )
$这种表达形式使得这两个值正好是互斥的：</p>
<ul>
<li><span class="math inline">\({ {u}_{i}}=0\)</span>时，有$ {
{u}_{i}}=1 $</li>
<li><span class="math inline">\({ {u}_{i}}=1\)</span>时，有$ {
{u}_{i}}=0 $</li>
</ul>
<p>二进制比特<span class="math inline">\({
{u}_{i}}\)</span>只有两种取值，无论发送“0”或“1”，由于无线信道的影响，接收端都有可能得到相同的<span
class="math inline">\(y_{1}^{2}\)</span>。那么到底是发送“0”使得接收为<span
class="math inline">\(y_{1}^{2}\)</span>，还是发送“1”使得接收为<span
class="math inline">\(y_{1}^{2}\)</span>？可以通过比较这两种情况的转移概率得到答案。</p>
<p><strong>给定<span class="math inline">\({
{u}_{1}}=0\)</span>的情况</strong></p>
<p>比较$ W_{N}^{( i )}( y_{1}<sup>{N},u_{1}</sup>{i-1}|{ {u}<em>{i}} )
<span class="math inline">\(和\)</span> W</em>{N}^{( i )}(
y_{1}<sup>{N},u_{1}</sup>{i-1}|{ {u}<em>{i}} ) <span
class="math inline">\(，也即比较\)</span> W</em>{2}^{( 1 )}( y_{1}^{2}|0
) <span class="math inline">\(和\)</span> W_{2}^{( 1 )}( y_{1}^{2}|1 )
<span class="math inline">\(。只有当\)</span> W_{2}^{( 1 )}( y_{1}^{2}|0
)&gt;W_{2}^{( 1 )}( y_{1}^{2}|1 ) <span
class="math inline">\(时，才是正确接收。左边的式子和**给定\)</span>{
{u}_{1}}=0$相一致**。</p>
<p><strong>给定<span class="math inline">\({
{u}_{1}}=1\)</span>的情况</strong></p>
<p>比较$ W_{N}^{( i )}( y_{1}<sup>{N},u_{1}</sup>{i-1}|{ {u}<em>{i}} )
<span class="math inline">\(和\)</span> W</em>{N}^{( i )}(
y_{1}<sup>{N},u_{1}</sup>{i-1}|{ {u}<em>{i}} ) <span
class="math inline">\(，也即比较\)</span> W</em>{2}^{( 1 )}( y_{1}^{2}|1
) <span class="math inline">\(和\)</span> W_{2}^{( 1 )}( y_{1}^{2}|0 )
<span class="math inline">\(。只有当\)</span> W_{2}^{( 1 )}( y_{1}^{2}|1
)&gt;W_{2}^{( 1 )}( y_{1}^{2}|0 ) <span
class="math inline">\(时，才是正确接收。左边的式子和**给定\)</span>{
{u}_{1}}=1$相一致**。</p>
<p>这两种情况是等价的。即$ W_{N}^{( i )}(
y_{1}<sup>{N},u_{1}</sup>{i-1}|{ {u}<em>{i}} )&gt;W</em>{N}^{( i )}(
y_{1}<sup>{N},u_{1}</sup>{i-1}|{ {u}<em>{i}} ) <span
class="math inline">\(时才是正确接收。反过来，当\)</span> W</em>{N}^{( i
)}( y_{1}<sup>{N},u_{1}</sup>{i-1}|{ {u}<em>{i}} )&lt;W</em>{N}^{( i )}(
y_{1}<sup>{N},u_{1}</sup>{i-1}|{ {u}<em>{i}} ) <span
class="math inline">\(时意味着接收错误，这就是事件\)</span>{
{A}</em>{i}}<span class="math inline">\(。事件\)</span>{
{A}<em>{i}}<span class="math inline">\(发生的概率就是错误概率\)</span>P(
{ {A}</em>{i}} )$。</p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
        <tag>answer</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（13）信道极化</title>
    <url>/2017/05/04/Polar-Code-13-channel-polarization/</url>
    <content><![CDATA[<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170505/114130398.jpg" title="图 1 信道${W_{4}}$" /></p>
<span id="more"></span>
<p><strong>1、</strong>
信道极化是一种现象，把它看作一种原理，而极化码编码则是对这一原理的应用。理解极化码可以分两部分，一部分是理论，一部分是应用。</p>
<p><strong>2、</strong>
从图上看，信道极化过程是一目了然的。但从数学上看，信道极化要分两个阶段，第一阶段是信道联合，第二阶段就是信道分裂。信道分裂是信道极化的一部分。</p>
<p><strong>3、</strong>
信道极化作为一种原理，它也有它的结构。它的结构就是：原本<span
class="math inline">\(N\)</span>条平行线，互不相交，谁和谁都没有联系，换句话说，是<span
class="math inline">\(N\)</span>条原始信道的独立副本；经过各种连线、模二加，连来连去，连成了现在的样子；现在是<span
class="math inline">\(N\)</span>条线彼此都有联系。这个过程就是信道联合，把原本相互独立的<span
class="math inline">\(N\)</span>条细线扭成一条粗线。</p>
<p><strong>4、</strong>
信道联合是从宏观的角度观察，把信道极化过程看作一个整体，输入是<span
class="math inline">\(N\)</span>比特，输出也是<span
class="math inline">\(N\)</span>比特。经过联合的信道总是以整体的形式表达，如联合信道<span
class="math inline">\({ {W}_{4}}:{ {X}^{4}}\to {
{Y}^{4}}\)</span>，以及联合信道的转移概率<span class="math inline">\({
{W}_{4}}\left( y_{1}^{4}|u_{1}^{4} \right)\)</span>。</p>
<p><strong>5、</strong>
但只有信道联合是不够的，你无法确知各个子信道的输入和输出是什么关系。这就需要对信道极化过程有一个微观的表达，这个微观表达是通过信道分裂过程来实现的。到信道联合这一步还看不出“极化”的概念，必须经过信道分裂才能体现出极化现象。</p>
<p><strong>6、</strong>
信道分裂使已经扭成一条粗线的联合信道又重新一条一条地展现在世人面前，就好比两条绳子打结（信道联合），然后再区分出两端谁是谁（信道分裂）。经过分裂的信道总是以单个的形式表达，如分裂子信道<span
class="math inline">\(W_{N}^{\left( i \right)}:X\to { {Y}^{N}}\times {
{X}^{i-1}}\)</span>，以及分裂子信道的转移概率<span
class="math inline">\(W_{N}^{\left( i \right)}\left(
y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}} \right)\)</span>。</p>
<p><strong>7、</strong>
宏观和微观合在一起就构成了对信道极化过程的完整表达。我们的目的不只是观其大概，更要搞清楚各个子信道，求分裂子信道的转移概率。<a
href="http://marshallcomm.cn/2017/04/09/Polar-Code-12-BDMC-Symmetric-Capacity/">《Polar
Code（12）B-DMC对称容量》</a>一文中提到，输入符号概率、输出符号概率和转移概率完整地定义了一种信道。不搞清楚各分裂子信道的转移概率就无法完成对分裂信道的定义。从以下定义式就可以看出联合信道和分裂子信道的关系了：</p>
<p><span class="math display">\[\begin{align}
W_{N}^{\left( i \right)}\left( y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}}
\right)\triangleq \sum\limits_{u_{i+1}^{N}\in { {X}^{N-i}}}{\frac{1}{ {
{2}^{N-1}}}{ {W}_{N}}\left( y_{1}^{N}|u_{1}^{N} \right)}
\end{align}\]</span></p>
<p><strong>8、</strong>
但式（1）是不易求的。观察图1，整个信道极化过程恰好是一种递归形式。因此用两个递归式来计算各个分裂子信道的转移概率：</p>
<p><span class="math display">\[\begin{align}
W_{N}^{\left( 2i-1 \right)}\left( y_{1}^{N},u_{1}^{2i-2}|{ {u}_{2i-1}}
\right)=\sum\limits_{ { {u}_{2i}}}{\frac{1}{2}W_{ {N}/{2}\;}^{\left( i
\right)}\left( y_{1}^{ {N}/{2}\;},u_{1,o}^{2i-2}\oplus u_{1,e}^{2i-2}|{
{u}_{2i-1}}\oplus { {u}_{2i}} \right)\cdot W_{ {N}/{2}\;}^{\left( i
\right)}\left( y_{ {N}/{2}\;+1}^{N},u_{1,e}^{2i-2}|{ {u}_{2i}} \right)}
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
W_{N}^{\left( 2i \right)}\left( y_{1}^{N},u_{1}^{2i-1}|{ {u}_{2i}}
\right)=\frac{1}{2}W_{ {N}/{2}\;}^{\left( i \right)}\left( y_{1}^{
{N}/{2}\;},u_{1,o}^{2i-2}\oplus u_{1,e}^{2i-2}|{ {u}_{2i-1}}\oplus {
{u}_{2i}} \right)\cdot W_{ {N}/{2}\;}^{\left( i \right)}\left( y_{
{N}/{2}\;+1}^{N},u_{1,e}^{2i-2}|{ {u}_{2i}} \right)
\end{align}\]</span></p>
<p><strong>9、</strong>
求得各个分裂子信道的转移概率有什么用？在实际编译码中并没有直接用。当我在3月12日那个时间点上写<a
href="http://marshallcomm.cn/2017/03/12/polar-code-5-encoding-chan-trans-prob/">《Polar
Code（5）编码之信道转移概率》</a>的时候，认为转移概率是有用的，并且认为在编码端和译码端都会直接使用，至少对于BEC信道计算巴氏参数时会直接使用。但随着研究的深入，尤其在研究了密度进化和高斯近似之后，对此的认识得到了更新：</p>
<ol type="1">
<li>转移概率是有用的，但并不直接使用，而是使用两个转移概率的之比的对数，即对数似然比（LLR）;</li>
<li>高斯近似法令转移概率为服从高斯分布的随机变量，并使用对数似然比，直接规避了计算（2）式和（3）式，所以转移概率的两个式子就沦为了铺路者；</li>
<li>但式（2~3）的递归形式是十分有用的，译码时计算LLR就利用这种递归形式。</li>
</ol>
<p>有关高斯近似详见<a
href="http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/">《Polar
Code（8）高斯近似》</a>，而<a
href="http://marshallcomm.cn/2017/03/12/polar-code-5-encoding-chan-trans-prob/">《Polar
Code（5）编码之信道转移概率》</a>通过分析转移概率的计算过程也能更好的理解编码过程。</p>
<p><strong>10、</strong>
编码。极化码是对信道极化原理的应用。然而编码过程又是基于另一套思路，它沿着线性分组码的编码思路，用生成矩阵的方式产生极化码。而生成矩阵的构造又体现着信道极化的原理，用递归形式来构造生成矩阵。</p>
<p>书不尽言，言不尽意。以上几点，是我对信道极化的理解。</p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>更换评论系统</title>
    <url>/2017/07/27/change-comment-system/</url>
    <content><![CDATA[<p>本博客使用了第三方评论系统，网易云跟帖将在2017年8月1日关闭，也就是说云跟帖倒闭了。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170727/101036290.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>今天更换了评论系统，朋友们可以继续留言。但遗憾是，由于新的评论系统不支持数据导入，意味着从前所有的评论数据将丢失。</p>
<p>评论系统对一个博客来说还是比较重要的，它给人们提供了交流的平台。在过去的几个月里，许多研究极化码的朋友在博客里参与讨论，我也从中获益良多。许多朋友也指出我的错误，我了解到以后也一一改正，使文章更完善。</p>
<p>感谢所有曾经参与评论的朋友。</p>
<hr />
<p>2017年8月22日更新</p>
<p>适用来必力评论系统一段时间，由于服务器在韩国，评论加载速度太慢，还是弃用了。切换到畅言评论系统，如果畅言不倒闭，今后就一直使用了。</p>
]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>Answer-Polar Code-高斯近似之$\varphi \left( x \right)$反函数</title>
    <url>/2017/11/02/answer-polar-code-ga-inverse-phix/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/">《Polar
Code（8）高斯近似》</a>中<span class="math inline">\(\varphi \left( x
\right)\)</span>的反函数，计算式（8）比较困难，而式（9）、式（10）比较容易。本文以式（9）为例详述<span
class="math inline">\(\varphi \left( x \right)\)</span>的反函数。</p>
<p><span class="math display">\[\begin{align}
{ {\varphi }_{AGA-2}}\left( x \right)=\left\{ \begin{matrix}
   { {e}^{0.0116{ {x}^{2}}-0.4212x}},\ 0&lt;x\le 7.0633  \\
   { {e}^{-0.2944x-0.3169}},\ x&gt;7.0633  \\
\end{matrix} \right.
\end{align}\]</span></p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171102/145443437.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<span id="more"></span>
<p><br/></p>
<h1 id="y_1-e0.0116-x2-0.4212xx-07.0633-的反函数">$ { {y}_{1}}={
{e}^{0.0116{ {x}^{2}}-0.4212x}},x( 0,7.0633 ] $的反函数</h1>
<p><br/></p>
<p><span class="math display">\[\begin{align}
\ln { {y}_{1}}=0.0116{ {x}^{2}}-0.4212x
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
0.0116{ {x}^{2}}-0.4212x-\ln { {y}_{1}}=0
\end{align}\]</span></p>
<p>一元二次方程的根为</p>
<p><span class="math display">\[\begin{align}
x=\frac{-b\pm \sqrt{ { {b}^{2}}-4ac}}{2a}=\frac{0.4212\pm \sqrt{ {
{0.4212}^{2}}+4\times 0.0116\times \ln { {y}_{1}}}}{2\times 0.0116}
\end{align}\]</span></p>
<p>其中<span class="math inline">\(a=0.0116,b=-0.4212,c=-\ln {
{y}_{1}}\)</span>，而$$的选取要做一番比较：</p>
<p><span class="math display">\[\begin{align}
\sqrt{ { {b}^{2}}-4ac}=\sqrt{ { {0.4212}^{2}}+4\times 0.0116\times \ln {
{y}_{1}}}
\end{align}\]</span></p>
<p>根据定义域$ x( 0,7.0633 ] <span
class="math inline">\(，得到\)</span>{ {y}<em>{1}}<span
class="math inline">\(的值域\)</span>{
{y}</em>{1}}$的范围，所以“+”号不可取。</p>
<p>若取“-”号，则有</p>
<p><span class="math display">\[0&lt;\frac{-b-\sqrt{ {
{b}^{2}}-4ac}}{2a}\le 7.0633\]</span></p>
<p>此时方程根恰好满足$ x( 0,7.0633 ] $，所以应取“-”号。</p>
<p>综上所述，一元二次方程（3）的根为</p>
<p><span class="math display">\[ \begin{align}
x=\frac{-b-\sqrt{ { {b}^{2}}-4ac}}{2a}=\frac{0.4212-\sqrt{ {
{0.4212}^{2}}+4\times 0.0116\times \ln { {y}_{1}}}}{2\times 0.0116}
\end{align}\]</span></p>
<p>即反函数为</p>
<p><span class="math display">\[ \begin{align}
{ {\varphi }^{-1}}\left( x \right)=\frac{0.4212-\sqrt{ {
{0.4212}^{2}}+4\times 0.0116\times \ln y}}{2\times 0.0116},y\in \left[
\text{0}\text{.0911},1 \right)
\end{align}\]</span></p>
<p><br/></p>
<h1 id="y_2-e-0.2944x-0.3169x-7.0633-的反函数">$ { {y}_{2}}={
{e}^{-0.2944x-0.3169}},x( 7.0633,+) $的反函数</h1>
<p><br/>根据$ x( 7.0633,+) <span class="math inline">\(，得到\)</span>{
{y}<em>{2}}<span class="math inline">\(的值域\)</span>{ {y}</em>{2}}(
)$。</p>
<p><span class="math display">\[ \begin{align}
\ln { {y}_{2}}=-0.2944x-0.3169
\end{align}\]</span></p>
<p><span class="math display">\[ \begin{align}
x=-\frac{\ln { {y}_{2}}+0.3169}{0.2944}
\end{align}\]</span></p>
<p>即反函数</p>
<p><span class="math display">\[ \begin{align}
{ {\varphi }^{-1}}\left( x \right)=-\frac{\ln y+0.3169}{0.2944},y\in
\left( \text{0,0}\text{.0911} \right)
\end{align}\]</span></p>
<p>将两段反函数合并<strong>得到<span class="math inline">\(\varphi
\left( x \right)\)</span>的反函数</strong></p>
<p><span class="math display">\[ \begin{align}
{ {\varphi }^{-1}}\left( x \right)=\left\{ \begin{matrix}
   -\frac{\ln y+0.3169}{0.2944},y\in \left( \text{0,0}\text{.0911}
\right)  \\
   \frac{0.4212-\sqrt{ { {0.4212}^{2}}+4\times 0.0116\times \ln
y}}{2\times 0.0116},y\in \left[ \text{0}\text{.0911},1 \right)  \\
\end{matrix} \right.
\end{align}\]</span></p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171102/150354891.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p><br/></p>
<h1
id="验证varphi-left-x-right和-varphi--1left-x-right是否关于yx对称">验证<span
class="math inline">\(\varphi \left( x \right)\)</span>和<span
class="math inline">\({ {\varphi }^{-1}}\left( x
\right)\)</span>是否关于y=x对称</h1>
<p><br/><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171102/150439302.png"
alt="mark" /></p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
        <tag>answer</tag>
      </tags>
  </entry>
  <entry>
    <title>2017年博文汇总</title>
    <url>/2017/12/31/archives-2017/</url>
    <content><![CDATA[<h1 id="polar-code信道编码">Polar Code信道编码</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/03/01/polar-code-1-summary/">Polar
Code（1）概述</a></p>
<p><a
href="http://marshallcomm.cn/2017/03/04/polar-code-2-encoding-principle/">Polar
Code（2）编码原理</a></p>
<p><a
href="http://marshallcomm.cn/2017/03/05/polar-code-3-encoding-example/">Polar
Code（3）编码实例</a></p>
<p><a
href="http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/">Polar
Code（4）编码之极化信道可靠性估计</a></p>
<p><a
href="http://marshallcomm.cn/2017/03/12/polar-code-5-encoding-chan-trans-prob/">Polar
Code（5）编码之信道转移概率</a></p>
<p><a
href="http://marshallcomm.cn/2017/03/13/polar-code-6-sc-decoder/">Polar
Code（6）SC译码算法</a></p>
<p><a
href="http://marshallcomm.cn/2017/03/15/polar-code-7-scl-decoder/">Polar
Code（7）SCL译码算法</a></p>
<p><a
href="http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/">Polar
Code（8）高斯近似</a></p>
<p><a
href="http://marshallcomm.cn/2017/03/18/polar-code-9-ca-scl-decoder/">Polar
Code（9）CA-SCL译码算法</a></p>
<p><a href="http://marshallcomm.cn/2017/03/21/polar-code-10-rcpp/">Polar
Code（10）速率适配的凿孔极化码</a></p>
<p><a
href="http://marshallcomm.cn/2017/04/09/Polar-Code-12-BDMC-Symmetric-Capacity/">Polar
Code（12）B-DMC对称容量</a></p>
<p><a
href="http://marshallcomm.cn/2017/05/04/Polar-Code-13-channel-polarization/">Polar
Code（13）信道极化</a></p>
<p><a
href="http://marshallcomm.cn/2017/08/24/polar-code-18-select-bitchannel/">Polar
Code（18）比特信道的选择</a></p>
<p><a
href="http://marshallcomm.cn/2017/08/26/polar-code-19-design-snr/">Polar
Code（19）当我们谈论design-snr时我们在谈论什么</a></p>
<p><a
href="http://marshallcomm.cn/2017/09/19/polar-code-20-beta-expansion/">Polar
Code（20）Beta-expansion</a></p>
<p><a
href="http://marshallcomm.cn/2017/12/25/polar-code-24-brief-summary/">Polar
Code（24）小结</a></p>
<span id="more"></span>
<h2 id="答疑">答疑</h2>
<p><a
href="http://marshallcomm.cn/2017/03/07/answer-polar-code-def-error-prob/">Answer-Polar
Code-定义错误概率</a></p>
<p><a
href="http://marshallcomm.cn/2017/11/02/answer-polar-code-ga-inverse-phix/">Answer-Polar
Code-高斯近似之φ(x)反函数</a></p>
<h1 id="polar-code-之5g标准化">Polar Code 之5G标准化</h1>
<p><a
href="http://marshallcomm.cn/2017/03/22/polar-code-11-3gpp-standard-1/">Polar
Code（11）3GPP标准化进展</a></p>
<p><a
href="http://marshallcomm.cn/2017/05/15/polar-code-14-3gpp-ran1-88b/">Polar
Code（14）3GPP RAN1#88bis</a></p>
<p><a
href="http://marshallcomm.cn/2017/05/19/polar-code-15-3gpp-ran1-89/">Polar
Code（15）3GPP RAN1#89</a></p>
<p><a
href="http://marshallcomm.cn/2017/07/01/polar-code-16-3gpp-ran1-adhoc2/">Polar
Code（16）3GPP RAN1 adhoc#2</a></p>
<p><a
href="http://marshallcomm.cn/2017/10/20/polar-code-21-3gpp-ran1-90/">Polar
Code（21）3GPP RAN1#90</a></p>
<p><a
href="http://marshallcomm.cn/2017/10/20/polar-code-22-3gpp-ran1-adhoc3/">Polar
Code（22）3GPP RAN1 adhoc#3</a></p>
<p><a
href="http://marshallcomm.cn/2017/10/20/polar-code-23-3gpp-ran1-90b/">Polar
Code（23）3GPP RAN1#90bis</a></p>
<h1 id="gpp-5g物理层规范">3GPP 5G物理层规范</h1>
<h2 id="v1.0.02017-09">v1.0.0（2017-09）</h2>
<p><a
href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">5G-NR物理层概述v1.0.0</a></p>
<p><a
href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">5G-NR物理层提供的服务v1.0.0</a></p>
<p><a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">5G-NR物理信道与调制v1.0.0</a></p>
<p><a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-ul/">5G-NR物理信道与调制-上行链路v1.0.0</a></p>
<p><a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-dl/">5G-NR物理信道与调制-下行链路v1.0.0</a></p>
<p><a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">5G-NR复用与信道编码v1.0.0</a></p>
<p><a
href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">5G-NR物理层过程（控制）v1.0.0</a></p>
<p><a
href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-index/">5G-NR物理层协议v1.0.0</a></p>
<h2 id="v1.1.02017-10">v1.1.0（2017-10）</h2>
<p><a
href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation/">5G-NR物理信道与调制v1.1.0</a></p>
<p><a
href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation-ul/">5G-NR物理信道与调制-上行链路v1.1.0</a></p>
<p><a
href="http://marshallcomm.cn/2017/10/24/nr-v110-l1-channel-modulation-dl/">5G-NR物理信道与调制-下行链路v1.1.0</a></p>
<h2 id="v2.0.02017-125g-nsa版本协议">v2.0.0（2017-12）——5G
NSA版本协议</h2>
<p><a href="http://marshallcomm.cn/2017/12/31/nr-v200-l1-index/">5G
NSA物理层协议</a></p>
<p><a
href="http://marshallcomm.cn/2017/12/17/nr-v200-l1-channel-modulation/">5G
帧结构、物理资源与物理信道</a></p>
<p><a href="http://marshallcomm.cn/2017/12/29/nr-v200-l1-ssb/">5G
SSB与小区搜索</a></p>
<p><a href="http://marshallcomm.cn/2017/12/29/nr-v200-l1-prach/">5G
PRACH与随机接入</a></p>
<p><a href="http://marshallcomm.cn/2017/12/30/nr-v200-l1-pdcch/">5G
PDCCH</a></p>
]]></content>
  </entry>
  <entry>
    <title>超材料</title>
    <url>/2022/08/11/metamaterials/</url>
    <content><![CDATA[<h2 id="超材料的定义">超材料的定义</h2>
<p>超材料（metamaterials） 是 21 世纪物理学领域出现的一个新的学术词汇<a
href="#fn1" class="footnote-ref" id="fnref1"
role="doc-noteref"><sup>1</sup></a>。拉丁语「meta-」可以表达「超出……、亚……、另类」等含义。
在 2004
年超材料尚未有一个严格的、权威的定义，但一般文献中给出的定义是具有天然材料所不具备的超常物理性质的人工复合结构或复合材料。</p>
<p>「超材料」一词的出现与一类被称为「左手材料」或「左手物质」的材料系统息息相关，狭义的
metamaterial 往往指的就是这类材料。左手材料（LHM，left-hand
materials）的思想由前苏联人 Veselago 于 1968 年首次提出。</p>
<p>左手材料具有许多独特的性质<a href="#fn2" class="footnote-ref"
id="fnref2" role="doc-noteref"><sup>2</sup></a>。例如：</p>
<blockquote>
<p>在左手材料中传播的电磁波，其能量的传输方向与相位的传输方向相反。</p>
<p>在正常材料中存在多普勒效应，而在左手材料中存在逆多普勒效应：由于相位的传输方向与能量的传输方向相反，当接收器向波源运动时所接收到的电磁波频率小于波源发出的电磁波频率。</p>
</blockquote>
<p>随着研究工作的深入，超材料的范围已经远远超出了左手材料的范围。</p>
<p>2016
年《电磁超材料术语》正式实施，成为全球第一份超材料领域的国家标准<a
href="#fn3" class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a>。在《电磁超材料术语》中超材料（metamaterials）定义为一种特种复合材料或结构,
通过对材料关键物理尺寸上进行有序结构设计,
使其获得常规材料所不具备的超常物理性质<a href="#fn4"
class="footnote-ref" id="fnref4"
role="doc-noteref"><sup>4</sup></a>。</p>
<span id="more"></span>
<h2 id="超材料的基本设计思路">超材料的基本设计思路</h2>
<p>超材料的基本设计思路是：材料中所呈现的一些物理性质往往和材料结构中的<strong>关键物理尺度</strong>有关。一个最直观的例子是晶体。晶体是自然界中物质的有序结构的一个重要形式，它的有序主要存在于<strong>原子层次</strong>，正是由于在这个尺度上的有序性调制，使晶体材料形成了一些无定型态所不具备的物理特征。由此类比，在其它层次上的有序排列则可能获得一定程度的自然界中的材料所不具备的物理性质。因此，人们可以通过各种层次的有序结构实现对各种物理量的调制，从而获得自然界中在该层次上无序或无结构的材料所不具备的物理性质<a
href="#fn5" class="footnote-ref" id="fnref5"
role="doc-noteref"><sup>5</sup></a>。</p>
<h2 id="超材料具有-3-个重要特征">超材料具有 3 个重要特征</h2>
<p>超材料
1）具有特殊人工结构，2）具有超常的物理性质，3）性质往往不主要决定于构成材料的本征性质而取决于其中的人工结构<a
href="#fn6" class="footnote-ref" id="fnref6"
role="doc-noteref"><sup>6</sup></a>。</p>
<h2 id="超材料的分类">超材料的分类</h2>
<p>依据超材料的应用领域，超材料基本上可以分为四大类：电磁超材料（electromagnetic
metamaterials）、声超材料（acoustic metamaterials）、热超材料（thermal
metamaterials）和机械超材料（mechanical metamaterials）<a href="#fn7"
class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a><a
href="#fn8" class="footnote-ref" id="fnref8"
role="doc-noteref"><sup>8</sup></a>。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20220814/image-20220813164700957.png" /></p>
<h2 id="references">References</h2>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p><a
href="https://max.book118.com/html/2015/0722/21648710.shtm">周济.
"超材料(metamaterials)":设计思想、材料体系与应用. 功能材料,
2004(z1):4.</a><a href="#fnref1" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a
href="https://max.book118.com/html/2015/0722/21648710.shtm">周济.
"超材料(metamaterials)":设计思想、材料体系与应用. 功能材料,
2004(z1):4.</a><a href="#fnref2" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a
href="http://www.xinhuanet.com/politics/2021-04/19/c_1127344990.htm">中国持续推进超材料行业标准化工作
健全标准体系</a><a href="#fnref3" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a href="https://sousepad.com/h-nd-495.html">GB_T
32005-2015 电磁超材料术语</a><a href="#fnref4" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p><a
href="https://max.book118.com/html/2015/0722/21648710.shtm">周济.
"超材料(metamaterials)":设计思想、材料体系与应用. 功能材料,
2004(z1):4.</a><a href="#fnref5" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><a
href="https://www.doc88.com/p-6951355332333.html">梅中磊, 张黎, 崔铁军.
电磁超材料研究进展. 科技导报, 2016, 34(18):13.</a><a href="#fnref6"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Fan, J. , et al. "A review of additive manufacturing of
metamaterials and developing trends." Materials Today 25(2021).<a
href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p><a
href="https://www.163.com/dy/article/GCPMRSPQ0531549P.html">华科大综述：增材制造超材料及其发展趋势（一）</a><a
href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
]]></content>
      <categories>
        <category>RIS</category>
      </categories>
  </entry>
  <entry>
    <title>信息超材料</title>
    <url>/2022/08/13/information-metamaterials/</url>
    <content><![CDATA[<h2 id="信息超材料的概念">信息超材料的概念</h2>
<p>东南大学崔铁军研究组于 2017 年在 Journal of Materials Chemistry C
的特邀论文中提出「信息超材料」的概念，涵盖了数字编码超材料、现场可编程超材料以及未来的软件化超材料和可认知超材料，是物理学与信息科学的有机融合。</p>
<p>信息超材料采用数字化方式对超材料的人工原子进行表征与标定，从而使人们可以从信息的角度来分析与设计超材料，它能直接处理数字编码信息，并可进一步对信息进行感知、理解，甚至记忆、学习，为基于超材料的电磁波调控提供了一个全新的物理平台，从而实现对信息更加灵活、实时和智能地控制。</p>
<p>信息超材料的核心是在超材料的物理空间上建立起数字空间，可将电磁学和信息科学有机地结合起来，开拓新的学科方向，产生一系列具有新体制新机理的信息系统。</p>
<span id="more"></span>
<h2 id="信息超材料的基本原理">信息超材料的基本原理</h2>
<p>数字编码表征使得信息超材料的物理特征和功能不但受物理学原理（例如几何光学、物理光学、麦克斯韦方程、近远场散射等）所支配，而且可以在超材料的物理空间上进行信息操作和数字信号处理运算。</p>
<p>崔铁军研究组提出利用香农信息熵来表征具有不同数字编码图案的信息超材料所携带的信息量，由此可通过设计不同的数字编码图案来操控信息超材料所辐射的信息量。数值仿真与理论计算表明，香农信息熵可用来准确评估信息超材料所携带信息量的大小。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20220814/image-20220813203052935.png" /></p>
<h2
id="信息超材料的应用无线通信系统">信息超材料的应用——无线通信系统</h2>
<p>由于信息超材料建立起电磁波和数字世界的桥梁，将电磁学和信息科学有机地结合在一起，因此基于信息超材料可构建全新体制的信息系统。</p>
<p>现代无线通信系统的工作原理是，先将所要传递的信息转换为数字形式的二进制码，通过数字/模拟转换，将数字信号变成中频模拟信号，再将中频模拟信号进行调制，加载到载波，经过放大和微波射频链路后通过发射天线发送出去。</p>
<p>基于信息超材料，崔铁军研究组提出了一种全新的直接辐射无线数字通信系统，极大地简化了传统通信构架，发射系统所传递的信息被加载到可编程超材料上，在馈源天线的照射下以不断变换的远场方向图的形式直接辐射到自由空间中；接收系统将处于远场区域不同位置处的接收天线所接收到的电场值汇总得到远场方向图，并通过对比远场方向图与编码序列之间的映射关系而恢复出所发送的原始信息。</p>
<p>基于信息超材料的无线通信系统新架构也引起了国内外通信领域学者的极大关注，从接收机、信道模型、路径损耗模型、能耗等多种不同角度对新机制无线通信进行了大量研究，被视为下一代无线通信的候选技术之一。</p>
<h2 id="references">References</h2>
<p>崔铁军, 吴浩天, and 刘硕. "信息超材料研究进展." 物理学报
69.15(2020):13.</p>
]]></content>
      <categories>
        <category>RIS</category>
      </categories>
  </entry>
  <entry>
    <title>5G-NR物理层概述v1.0.0</title>
    <url>/2017/09/08/nr-v100-general-description/</url>
    <content><![CDATA[<p><br/>5G-NR物理层协议由如下7个规范构成。</p>
<ul>
<li>[1] <a
href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">3GPP
TS 38.201: “NR物理层概述”</a></li>
<li>[2] <a
href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">3GPP TS
38.202: “NR物理层提供的服务”</a></li>
<li>[3] <a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">3GPP
TS 38.211: “NR物理信道与调制”</a></li>
<li>[4] <a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">3GPP
TS 38.212: “NR复用与信道编码”</a></li>
<li>[5] <a
href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">3GPP
TS 38.213: “NR物理层过程（控制）”</a></li>
<li>[6] 3GPP TS 38.214: “NR物理层过程（数据）”</li>
<li>[7] 3GPP TS 38.215: “NR物理层测量”</li>
</ul>
<p>其中[1]是概述性文档，其他六个是具体规范文档。与LTE规范不同的是，物理层提供的服务单独为一个文档，物理层过程一分为二，分为控制和数据两个部分。</p>
<span id="more"></span>
<p>本文的依据是 3GPP TS 38.200系列2017-09版本。</p>
<h1 id="nr物理层概述">NR物理层概述</h1>
<h2 id="与其他层的关系">与其他层的关系</h2>
<h3 id="总体协议架构">总体协议架构</h3>
<p><br/>本部分描述的无线接口指用户终端（UE）和网络之间的接口，包括L1，L2和L3。3GPP
TS 38.200系列规范对L1（物理层）进行描述。L2和L3的描述见TS
38.300系列规范。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/152910916.png" title="图 1 无线接口协议体系结构" /></p>
<p>图1显示的是与物理层相关的NR无线接口协议体系结构。物理层连接L2的媒体介入控制子层（MAC）、以及L3的无线资源控制（RRC）层。图中不同层/子层之间的圈表示服务接入点（SAPs）。物理层向MAC层提供传输信道。传输信道的特性通过信息在无线接入口上的传输方式确定。MAC向L2的无线链路控制（RLC）子层提供不同的逻辑信道。逻辑信道的特性通过传输信息的类型确定。</p>
<h3 id="提供给上层的服务">提供给上层的服务</h3>
<p><br/>物理层向高层提供数据传输服务，这些服务的接入是通过使用MAC子层的传输信道实现的。具体内容详见[2]。</p>
<h2 id="物理层概述">物理层概述</h2>
<h3 id="多址接入">多址接入</h3>
<p><br/>NR物理层多址接入方案基于OFDM+CP。上行链路支持DFT-s-OFDM（Discrete
Fourier
Transform-spread-OFDM）+CP。为支持成对和不成对的频谱，FDD和TDD都被支持。</p>
<p>L1基于资源块以带宽不可知的方式定义，从而允许NR
L1适用于不同频谱分配。一个资源块（RB）以给定的子载波间隔占用12个子载波。</p>
<p>一个无线帧时域为10ms，由10个子帧组成，每个子帧为1ms。一个子帧包含1个或多个相邻的时隙，每个时隙有7或14个相邻的符号。帧结构的进一步细节详见[2]。</p>
<h3 id="物理信道与调制">物理信道与调制</h3>
<p><br/>下行定义的物理信道如下：</p>
<ul>
<li>物理下行共享信道（PDSCH）</li>
<li>物理下行控制信道（PDCCH）</li>
<li>物理广播信道（PBCH）</li>
</ul>
<p>上行定义的物理信道如下：</p>
<ul>
<li>物理随机接入信道（PRACH）</li>
<li>物理上行共享信道（PUSCH）</li>
<li>物理上行控制信道（PUCCH）</li>
</ul>
<p>定义的信号包括：参考信号、主和辅同步信号</p>
<p>支持的调制方式有：</p>
<ul>
<li>下行支持QPSK，16QAM，256QAM</li>
<li>上行支持：对于OFDM+CP有QPSK, 16QAM,
64QAM，256QAM；对于DFT-s-OFDM+CP有π/2-BPSK, QPSK, 16QAM,
64QAM，256QAM</li>
</ul>
<h3 id="信道编码与交织">信道编码与交织</h3>
<p><br/>传输块的信道编码方案采用准循环LDPC（quasi-cyclic
LDPC）码，QC-LDPC采用2个BG（base graphs），每个BG
8个奇偶校验矩阵集合。One base graph is used for code blocks larger than
a certain size or with initial transmission code rate higher than a
threshold; otherwise, the other base graph is used. Before the LDPC
coding for large transport blocks, the transport block is segmented into
multiple code blocks.
对于比较大的传输块，在LDPC编码前要先传输块分割为多个码块。PBCH和控制信息的编码方案采用基于嵌套序列的极化码（Polar
coding）。支持三种速配匹配方案：Puncturing, shortening and repetition
are used for rate matching。信道编码方案的进一步细节详见[4]。</p>
<h3 id="物理层过程">物理层过程</h3>
<p><br/>涉及多个物理层过程。物理层所涵盖的此类过程有：</p>
<ul>
<li>小区搜索</li>
<li>功率控制</li>
<li>上行同步和上行定时控制</li>
<li>随机接入相关过程</li>
<li>HARQ相关过程</li>
<li>波束管理和CSI相关过程</li>
</ul>
<p>通过对物理层资源在频域、时域和功率域的控制，隐式地支持干扰协调。</p>
<h3 id="物理层测量">物理层测量</h3>
<p><br/>无线特性由UE和网络测量并上报到高层。这些措施包括，例如，测量频率内和频率间切换、RAT间切换，定时测量，RRM测量。</p>
<p>对RAT间切换的策略定义为对切换到E-UTRA的支持。</p>
<h1 id="物理层规范的文档结构">物理层规范的文档结构</h1>
<h2 id="概述">概述</h2>
<p><br/>物理层规范由一个概述文档（TS 38.201）和六个具体文档（TS
38.202和38.211-38.215）构成。通过高层的关联，物理层各部分规范之间的关系如图2所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/153052684.png" title="图 2 物理层规范各部分之间的关系" /></p>
<h2 id="ts-38.201物理层概述">TS 38.201：物理层概述</h2>
<p><br/>描述范围：</p>
<ul>
<li>物理层的内容</li>
<li>在何处查找信息</li>
</ul>
<h2 id="ts-38.202物理层提供的服务">TS 38.202：物理层提供的服务</h2>
<p><br/>描述范围是物理层提供的服务，规定以下内容：</p>
<ul>
<li>物理层的服务和功能；</li>
<li>UE的物理层模型；</li>
<li>物理信道和SRS的并行传输；</li>
<li>物理层提供的测量</li>
</ul>
<h2 id="ts-38.211物理层信道与调制">TS 38.211：物理层信道与调制</h2>
<p><br/>该部分确立物理层信道的特性，物理层信号的生成和调制，规定以下内容：</p>
<ul>
<li>上行和下行物理信道的定义；</li>
<li>帧结构和物理资源；</li>
<li>调制映射（BPSK，QPSK等）</li>
<li>OFDM符号生成；</li>
<li>加扰、调制和上变频；</li>
<li>层映射和预编码；</li>
<li>上行和下行物理共享信道；</li>
<li>上行和下行参考信号；</li>
<li>物理随机接入信道；</li>
<li>主、辅同步信号</li>
</ul>
<h2 id="ts-38.212复用和信道编码">TS 38.212：复用和信道编码</h2>
<p><br/>该部分描述传输信道和控制信道数据的处理，包括复用技术，信道编码和交织，规定以下内容：</p>
<ul>
<li>信道编码方案；</li>
<li>速率匹配；</li>
<li>上行传输信道和L1/L2控制信息的编码；</li>
<li>下行传输信道和L1/L2控制信息的编码</li>
</ul>
<h2 id="ts-38.213物理层过程控制">TS 38.213：物理层过程（控制）</h2>
<p><br/>该部分确立用于控制的物理层过程的特性，规定以下内容：</p>
<ul>
<li>同步过程；</li>
<li>上行功率控制；</li>
<li>随机接入过程；</li>
<li>用于报告控制信息的UE过程；</li>
<li>用于接收控制信息的UE过程</li>
</ul>
<h2 id="ts-38.214物理层过程数据">TS 38.214物理层过程（数据）</h2>
<p><br/>该部分确立用于数据的过程层过程的特性，规定以下内容：</p>
<ul>
<li>功率控制；</li>
<li>物理下行共享信道相关过程；</li>
<li>物理上行共享信道相关过程；</li>
</ul>
<h2 id="ts-38.215物理层测量">TS 38.215物理层测量</h2>
<p><br/>该部分确立物理层测量的特性，规定以下内容：</p>
<ul>
<li>UE/NG-RAN的控制测量；</li>
<li>对NR能力的测量</li>
</ul>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>2017-09</tag>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>电磁超材料</title>
    <url>/2022/08/12/electromagnetic-metamaterials/</url>
    <content><![CDATA[<h2 id="电磁超材料的定义">电磁超材料的定义</h2>
<p>《电磁超材料术语》将电磁超材料（electromagnetic
metamaterials）定义为具有超常电磁特性的超材料<a href="#fn1"
class="footnote-ref" id="fnref1"
role="doc-noteref"><sup>1</sup></a>。</p>
<p>具体地说，电磁超材料也称为超构材料、新型人工电磁媒质、特异媒质等，是将具有特定几何形状的亚波长尺度单元按照周期性或非周期性排布的人工结构，人们可通过设计单元参数和单元的排列方式来定制其等效材料及媒质属性，突破了传统材料在原子或分子层面难以调控的限制,
能构造出传统材料与传统技术不能或很难实现的超常媒质参数（例如负介电常数、负磁导率、负折射率及零折射率等）和/或这些参数的任意非均匀分布,
从而<strong>实现对电磁场和电磁波的自由控制</strong>,
带来全新的物理现象，例如负折射、完美成像、完美隐身、超分辨透镜、渐变折射率平板透镜、广义斯涅耳定律所控制的超常反射与透射等<a
href="#fn2" class="footnote-ref" id="fnref2"
role="doc-noteref"><sup>2</sup></a>。</p>
<span id="more"></span>
<h2
id="早期电磁超材料研究中的等效媒质理论">早期电磁超材料研究中的等效媒质理论</h2>
<p>在早期电磁超材料的研究中，<strong>等效媒质理论</strong>是基础，无论是人工电磁材料的设计分析，还是电磁参数的提取等都基于此。在简单的情况下，人工电磁材料的电磁参数可以用解析的方法进行分析，但通常无法获得解析形式，需要通过全波仿真或实验测量来研究人工电磁材料。</p>
<p>人工电磁材料的核心思想是<strong>利用人工单元结构模拟普通材料中的分子或原子</strong>，在外界电磁场的作用下，该单元产生一个等效的电偶极子或磁偶极子，出现类似材料中的极化或磁化现象。只要背景材料中的波长远远大于填充物（金属、介质）的尺度（一般大于
10 倍左右），则都可以使用等效媒质理论进行分析<a href="#fn3"
class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a>。</p>
<p>过去二十余年，超材料领域一直以等效媒质为基础，根据几何光学、物理光学、变换光学等物理原理，通过定制等效媒质参数及其分布而控制电磁波，产生一系列奇特的物理现象并推动其应用。然而在工程实际中，超材料器件往往需要由大量的结构单元构成阵列才能实现预定功能，因此基于等效媒质的功能器件体积较为庞大、构型复杂，难以应用于微波电路领域<a
href="#fn4" class="footnote-ref" id="fnref4"
role="doc-noteref"><sup>4</sup></a>。</p>
<p>中国移动发布的《6G信息超材料技术白皮书(2022)》指出等效媒质超材料属于三维结构，厚度大且不易加工，在工程应用中有很大局限性<a
href="#fn5" class="footnote-ref" id="fnref5"
role="doc-noteref"><sup>5</sup></a>。</p>
<p>近年来出现的数字编码超材料、现场可编程超材料和 <a
href="https://marshallcomm.cn/2022/08/13/information-metamaterials/">信息超材料</a>
是其中的典型代表, 有望解决上述瓶颈问题<a href="#fn6"
class="footnote-ref" id="fnref6"
role="doc-noteref"><sup>6</sup></a>。</p>
<h2
id="一种二维超材料人工电磁超表面">一种二维超材料——人工电磁超表面</h2>
<p>人工电磁超表面（metasurface）是通过人工方式加工或合成的、并具有特殊电磁性质的二维表面。通过在微小尺寸上进行几何或电磁参数设计，可以实现反射或透射相位的灵活控制，进而得到可控、特异的电磁特性，如广义斯奈尔定律、零（负）反射、负折射等。根据工作特点，人工超表面也可以分为<strong>透射型和反射型</strong>。频率选择表面、人工磁导体、人工随机表面等，本质上也都可归为人工超表面的范畴<a
href="#fn7" class="footnote-ref" id="fnref7"
role="doc-noteref"><sup>7</sup></a>。</p>
<p>超表面与早期的等效媒质材料相比具有低剖面、低成本、易加工的优点，因而在电磁领域吸引了大量关注<a
href="#fn8" class="footnote-ref" id="fnref8"
role="doc-noteref"><sup>8</sup></a>。</p>
<h2 id="references">References</h2>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://sousepad.com/h-nd-495.html">GB_T
32005-2015 电磁超材料术语</a><a href="#fnref1" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>崔铁军, 吴浩天, and 刘硕. "信息超材料研究进展." 物理学报
69.15(2020):13.<a href="#fnref2" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a
href="https://www.doc88.com/p-6951355332333.html">梅中磊, 张黎, 崔铁军.
电磁超材料研究进展. 科技导报, 2016, 34(18):13.</a><a href="#fnref3"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>崔铁军, 吴浩天, and 刘硕. "信息超材料研究进展." 物理学报
69.15(2020):13.<a href="#fnref4" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p><a
href="https://max.book118.com/html/2022/0327/5102021041004204.shtm">中国移动.
6G信息超材料技术白皮书(2022)</a><a href="#fnref5" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>崔铁军, 吴浩天, and 刘硕. "信息超材料研究进展." 物理学报
69.15(2020):13.<a href="#fnref6" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p><a
href="https://www.doc88.com/p-6951355332333.html">梅中磊, 张黎, 崔铁军.
电磁超材料研究进展. 科技导报, 2016, 34(18):13.</a><a href="#fnref7"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p><a
href="https://max.book118.com/html/2022/0327/5102021041004204.shtm">中国移动.
6G信息超材料技术白皮书(2022)</a><a href="#fnref8" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
]]></content>
      <categories>
        <category>RIS</category>
      </categories>
  </entry>
  <entry>
    <title>5G-NR物理信道与调制-下行链路v1.0.0</title>
    <url>/2017/09/09/nr-v100-l1-channel-modulation-dl/</url>
    <content><![CDATA[<p><a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/#下行链路">上接《NR物理信道与调制》下行链路</a></p>
<h1 id="下行链路">下行链路</h1>
<h2 id="概述">概述</h2>
<h3 id="物理信道概述">物理信道概述</h3>
<p><br/>下行链路物理信道对应于一组资源元素（REs）的集合，用于承载源自高层的信息。本规范定义了如下下行信道：</p>
<ul>
<li>物理下行共享信道（PDSCH）</li>
<li>物理广播信道（PBCH）</li>
<li>物理下行控制信道（PDCCH）</li>
</ul>
<h3 id="物理信号概述">物理信号概述</h3>
<p><br/>下行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下下行物理信号：</p>
<ul>
<li>解调参考信号（Demodulation reference signals，DM-RS）</li>
<li>相位跟踪参考信号（Phase-tracking reference signals，PT-RS）</li>
<li>信道状态信息参考信号（Channel-state information reference
signal，CSI-RS）</li>
<li>主同步信号（Primary synchronization signal，PSS）</li>
<li>辅同步信号（Secondary synchronization signal，SSS）</li>
</ul>
<span id="more"></span>
<h2 id="物理资源">物理资源</h2>
<p><br/>本规范定义了下列用于下行链路的天线端口：</p>
<ul>
<li>Antenna ports starting with 1000 for DM-RS associated with
PDSCH</li>
<li>Antenna ports starting with 2000 for DM-RS associated with
PDCCH</li>
<li>Antenna ports starting with 3000 for CSI-RS</li>
<li>Antenna ports starting with 4000 for SS/PBCH block transmission</li>
</ul>
<h2 id="物理信道">物理信道</h2>
<h3 id="物理下行共享信道">物理下行共享信道</h3>
<h4 id="加扰">加扰</h4>
<p><br/>对于每个码字$ q <span
class="math inline">\(，UE应假设比特块\)</span> { {b}^{(q)}}(0),...,{
{b}<sup>{(q)}}(M_{}</sup>{(q)}-1) <span
class="math inline">\(应在调制前被加扰，其中\)</span> M_{}^{(q)} <span
class="math inline">\(是在物理信道上传输的码字\)</span> q <span
class="math inline">\(的比特数，加扰后的比特块为\)</span> {
{}^{(q)}}(0),...,{ {}<sup>{(q)}}(M_{}</sup>{}-1)
$。根据如下公式进行加扰</p>
<p><span class="math display">\[ { {\tilde{b}}^{(q)}}(i)=\left( {
{b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2 \]</span></p>
<p>其中加扰序列$ { {c}^{(q)}}(i) $由2.2节给出。</p>
<h4 id="调制">调制</h4>
<p><br/>对于每个码字$ q <span
class="math inline">\(，UE应假设加扰比特块\)</span> { {}^{(q)}}(0),...,{
{}<sup>{(q)}}(M_{}</sup>{}-1) <span class="math inline">\(根据Table
7.3.1.2-1中的调制方式进行调制，具体调制方法见《NR物理信道与调制》2.1节，得到复值调制符号块\)</span>
{ {d}^{(q)}}(0),...,{ {d}<sup>{(q)}}(M_{}</sup>{}-1) $。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/195532388.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="层映射">层映射</h4>
<p><br/>UE假设每个码字的复值调制符号根据Table
7.3.1.3-1被映射到一层或多层上发送。码字$ q <span
class="math inline">\(的复值调制符号\)</span> { {d}^{(q)}}(0),...,{
{d}<sup>{(q)}}(M_{}</sup>{}-1) <span
class="math inline">\(被映射到层\)</span> x(i)={ {}^{T}} <span
class="math inline">\(，\)</span> i=0,1,...,M_{}^{}-1 <span
class="math inline">\(，其中\)</span> <span
class="math inline">\(是层数，\)</span> M_{}^{}
$是每层的调制符号数。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/200219608.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="预编码">预编码</h4>
<p><span class="math display">\[ \left[ \begin{matrix}
   { {y}^{(0)}}(i)  \\
   \vdots   \\
   { {y}^{(P-1)}}(i)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   { {x}^{(0)}}(i)  \\
   \vdots   \\
   { {x}^{(\upsilon -1)}}(i)  \\
\end{matrix} \right]
\]</span></p>
<p>where $ P=$.</p>
<h4 id="资源映射">资源映射</h4>
<p><br/>UE应假设对物理信道的传输所使用的每个天线端口，复值符号块$ {
{y}^{(p)}}(0),...,{ {y}<sup>{(p)}}(M_{}</sup>{}-1) <span
class="math inline">\(应符合38.xxx下行功率分配的规定，并且从\)</span> {
{y}^{(p)}}(0) $开始映射到REs $ ( k,l ) $，REs满足以下所有条件：</p>
<ul>
<li>它们位于分配给传输的资源块中</li>
<li>根据TS 38.214，它们被声明可用于PDSCH</li>
</ul>
<p>向没有其他用途的REs $ { {( k,l )}<em>{p,}} <span
class="math inline">\(上映射，以递增顺序先按天线端口索引\)</span> p
<span class="math inline">\(，再按分配的物理资源索引\)</span> k <span
class="math inline">\(，然后按索引\)</span> l <span
class="math inline">\(映射，索引\)</span> l <span
class="math inline">\(以TS 38.213规范的描述以\)</span> l={ {l}</em>{0}}
$为起始。</p>
<p>UE可以假设在一个PRB bundle内使用相同的预编码，一个PRB
bundle由2个或4个PRBs组成。PRB bundle基于 absolute资源格定义。</p>
<h3 id="物理下行控制信道">物理下行控制信道</h3>
<h4 id="控制信道单元">控制信道单元</h4>
<p><br/>物理下行控制信道由一个或多个控制信道单元（control-channel
elements，CCE）组成，CCE数由Table 7.3.2.1-1指示。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/202216219.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="控制资源集">控制资源集</h4>
<p><br/>一个控制资源集（Control-resource set，CORESET）由$ N_{}^{} <span
class="math inline">\(个频域RB和\)</span> N_{}^{}{ 1,2,3 } <span
class="math inline">\(个时域符号组成，\)</span> N_{}^{} <span
class="math inline">\(通过高层参数*CORESET-freq-dom*给定，\)</span>
N_{}^{} <span
class="math inline">\(通过高层参数*CORESET-time-dur*给定，其中仅当高层参数*DL-DMRS-typeA-pos*
=3时支持\)</span> N_{}^{}=3 $。</p>
<p>一个CCE由6个资源粒子组（resource-element
group，REG）组成，一个REG等于一个OFDM符号上的RB。一个CORESET
内的REGs按时域优先的方式以递增顺序编号，在CORESET内从第1个OFDM符号且最低的RB以0开始编号。</p>
<p>UE可以配置多个CORESET。每个CORESET只与一个CCE-to-REG映射关联。</p>
<p>对于一个CORESET，CCE-to-REG映射可以交织（interleaved），也可以不交织（non-
interleaved），这由高层参数<em>CORESET-Trans-type</em>来配置，并且由REG
bundles来描述：</p>
<ul>
<li>REG bundle $ i $定义为REGs $ { iL,iL+1,...,iL+L-1 } <span
class="math inline">\(，其中\)</span> L <span
class="math inline">\(是REG bundle size，REG bundle
size由高层参数*CORESET-REG-bundle-size*配置，\)</span>
i=0,1,...,{N_{}^{}}/{L};-1 $是CORESET内的REG数。</li>
<li>CCE $ j $由REG bundles $ {
f({6j}/{L};),f({6j}/{L};+1),...,f({6j}/{L};+{6}/{L};-1) } <span
class="math inline">\(组成，其中\)</span> f() $是交织器。</li>
</ul>
<p>对于非交织的CCE-to-REG映射，$ L=6 <span
class="math inline">\(且\)</span> f(j)=j $。</p>
<p>对于交织的CCE-to-REG映射，对于$ N_{}^{}=1 <span
class="math inline">\(，有\)</span> L{ 2,6 } <span
class="math inline">\(；对于\)</span> N_{}^{}{ 2,3 } <span
class="math inline">\(，有\)</span> L{ N_{}^{},6 } $。</p>
<p>UE可假设在一个REG bundle内在频域上使用相同的预编码。</p>
<h4 id="加扰-1">加扰</h4>
<h4 id="pdcch调制">PDCCH调制</h4>
<p><br/>UE应假设比特块$ (0),...,({ {M}<em>{}}-1) <span
class="math inline">\(进行QPSK调制，QPSK调制采用《NR物理信道与调制》2.1.3节所描述的方法，得到复值调制符号块\)</span>
d(0),...,d({ {M}</em>{}}-1) $。</p>
<h4 id="资源映射-1">资源映射</h4>
<p><br/>UE应假设用于监测PDCCH的CCEs中，复值符号块$ d(0),...,d({
{M}<em>{}}-1) <span class="math inline">\(乘以一个幅值因子\)</span> {
{}</em>{}} <span class="math inline">\(，然后按照先\)</span> l <span
class="math inline">\(后\)</span>k<span
class="math inline">\(的递增顺序映射到REs\)</span> { {( k,l )}_{p,}}
$。</p>
<h3 id="物理广播信道">物理广播信道</h3>
<h4 id="调制-1">调制</h4>
<p><br/>UE应假设比特块$ b(0),...,b({ {M}<em>{}}-1) <span
class="math inline">\(采用QPSK调制，QPSK调制采用《NR物理信道与调制》2.1节所描述的方法，得到复值调制符号块\)</span>
{ {d}</em>{}}(0),...,{ {d}<em>{}}({ {M}</em>{}}-1) $。</p>
<h4 id="资源映射-2">资源映射</h4>
<p><br/>资源映射在本文1.4.3节中描述。</p>
<h2 id="物理信号">物理信号</h2>
<h3 id="参考信号">参考信号</h3>
<h4 id="用于pdsch的dm-rs">用于PDSCH的DM-RS</h4>
<h5 id="序列生成">序列生成</h5>
<p><br/>UE应假设参考信号序列$ r(m) $定义为</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中伪随机序列$ c(i) $在《NR物理信道与调制》2.2节中定义。</p>
<blockquote>
<p>Note: Sequence defined on a global scale relative to (FFS) SSBlock or
RRC-configured reference point.</p>
</blockquote>
<h5 id="资源映射-3">资源映射</h5>
<p><br/>UE应假设PDSCH DM-RS根据type 1或type
2映射到REs，DM-RS的类型由高层参数<em>DL-DMRS-config-type</em>给定。</p>
<p>UE应假设序列$ r(m) $根据如下公式映射到RE</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{
{w}_{\text{f}}}\left( { {k}&#39;} \right)\cdot { {w}_{\text{t}}}\left( {
{l}&#39;} \right)\cdot r\left( 2m+{k}&#39;+{ {m}_{0}} \right) \\
\nonumber &amp; k=\left\{ \begin{array}{*{35}{l}}
   { {k}_{\text{0}}}+4m+2{k}&#39;+\Delta  &amp; \text{Configuration type
1}  \\
   { {k}_{\text{0}}}+6m+{k}&#39;+\Delta  &amp; \text{Configuration type
2}  \\
\end{array} \right. \\
\nonumber &amp; {k}&#39;=0,1 \\
\nonumber  &amp; l=\bar{l}+{l}&#39;  
\end{align}
\]</span></p>
<p>其中$ l <span class="math inline">\(定义为相对于时隙的起始，\)</span>
{ {w}<em>{}}( { {k}'} ) <span class="math inline">\(，\)</span> {
{w}</em>{}}( { {l}'} ) <span class="math inline">\(和\)</span> $由Tables
7.4.1.1.2-1 and 7.4.1.1.2-2给定。</p>
<p>时域索引$ {l}' <span
class="math inline">\(和所支持的天线端口\)</span>p<span
class="math inline">\(依赖于DM-RS duration，DM-RS duration根据Table
7.4.1.1.2-3确定。\)</span> {l} <span
class="math inline">\(依赖于高层参数*DL-DMRS-add-pos*，*DL-DMRS-add-pos*由Table
7.4.1.1.2-4给定。\)</span> { {l}_{0}} $依赖于映射类型：</p>
<ul>
<li>对于PDSCH映射类型A：如果高层参数<em>DL-DMRS-typeA-pos</em> =3则$ {
{l}<em>{0}}=3 <span class="math inline">\(，以及\)</span> {
{l}</em>{0}}=2 $</li>
<li>对于PDSCH映射类型B：$ { {l}_{0}}
$是DM-RS映射到所调度的PDSCH资源中的第1个OFDM符号</li>
</ul>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/213937051.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/214014814.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/214111058.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p>Note: More than one additional DM_RS can be configured.</p>
</blockquote>
<h4 id="用于pdsch的pt-rs">用于PDSCH的PT-RS</h4>
<h5 id="序列生成-1">序列生成</h5>
<h5 id="资源映射-4">资源映射</h5>
<p><br/>UE应假设只有当高层参数<em>DL-PTRS-present</em>指示PT-RS被使用时，并且只在用于PDSCH的RBs中呈现。</p>
<p>如果呈现，UE应假设PDSCH PT-RS根据如下公式映射到物理资源</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{PTRS}}}r(m) \\
\nonumber &amp; l={ {l}_{\text{DMRS}}}+1+{ {L}_{\text{PTRS}}}\cdot
{l}&#39; \\
\nonumber &amp; l&#39;=0,1,2,...  
\end{align}
\]</span></p>
<p>每$ { {K}_{}}
$个被调度的RBs中，当下列条件被满足时，从最低编号的RB开始调度（<em>Note:
It may not be the lowest numbers RB, FFS if an offset is
used.</em>）</p>
<ul>
<li><span
class="math inline">\(l\)</span>在用于PDSCH传输的所分配的OFDM符号内</li>
<li>RE $ ( k,l ) $不用于DM-RS</li>
</ul>
<p>其中</p>
<ul>
<li>索引<span class="math inline">\(k\)</span>是一个PRB内的子载波数</li>
<li>对于1个符号DM-RS，有$ { {l}<em>{}}={ {l}</em>{0}} <span
class="math inline">\(；对于2个符号DM-RS，有\)</span> { {l}<em>{}}={
{l}</em>{0}}+1 <span class="math inline">\(，其中\)</span> { {l}_{0}}
$由1.4.1.1.2节定义</li>
<li>$ { {K}_{}}{ 2,4 } $由[6, TS38.214]给定</li>
<li>$ { {L}_{}}{ 1,2,4 } $由[6, TS38.214]给定</li>
</ul>
<h4 id="用于pdcch的dm-rs">用于PDCCH的DM-RS</h4>
<h4 id="用于pbch的dm-rs">用于PBCH的DM-RS</h4>
<h5 id="序列生成-2">序列生成</h5>
<p><br/>UE应假设用于SS/PBCH的参考信号$ r(m) $由下式定义</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中$ c(n)
$由《NR物理信道与调制》2.2节给定。加扰序列生成应在每个SS/PBCH块的起始处通过小区ID
$ N_{}^{} <span class="math inline">\(和\)</span> { {n}_{}}
$被初始化，块时间索引由PBCH DM-RS承载。</p>
<h5 id="资源映射-5">资源映射</h5>
<p><br/>资源映射在1.4.3节中描述。</p>
<h4 id="csi-rs">CSI-RS</h4>
<h5 id="序列生成-3">序列生成</h5>
<p><br/>UE应假设参考信号序列$ r(m) $由下式定义</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中伪随机序列$ c(i) $由《NR物理信道与调制》2.2节定义。</p>
<h5 id="资源映射-6">资源映射</h5>
<p><br/>UE应假设序列$ r(m) $根据以下公式映射到物理资源</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{CSIRS}}}{
{w}_{\text{f}}}\left( { {k}&#39;} \right)\cdot { {w}_{\text{t}}}\left( {
{l}&#39;} \right)\cdot r\left( m \right) \\
\nonumber &amp; k=\bar{k}+{k}&#39; \\
\nonumber &amp; l=\bar{l}+{l}&#39;  
\end{align}
\]</span></p>
<p>但有以下例外</p>
<ul>
<li>与所配置的CORESET重叠的REs应从CSI-RS传输中排除</li>
</ul>
<p>其中<span class="math inline">\(l\)</span>定义为相对于时隙的起始，$
{k} <span class="math inline">\(和\)</span> {l} <span
class="math inline">\(由Table 7.4.1.5.2-1和\)</span> { {w}<em>{}}( {
{k}'} ),{ {w}</em>{}}( { {l}'} ){ ,,,} <span
class="math inline">\(给定。对于每个\)</span> {l} $，有长度为6的bitmap $
<span class="math inline">\(]，其中比特\)</span> { {b}<em>{i}} <span
class="math inline">\(隐含地以索引\)</span> j <span
class="math inline">\(按递增顺序指示\)</span> { {k}</em>{j}}=2i $。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/215953799.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="tracking-rs">Tracking RS</h4>
<blockquote>
<p>Note: depending on future decisions, the TRS may become a realization
of a CSI-RS in which case this section will be removed.</p>
</blockquote>
<h5 id="序列产生">序列产生</h5>
<p><br/>UE应假设参考信号序列$ r(m) $定义为</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中伪随机序列$ c(i) $由《NR物理信道与调制》2.2节定义。</p>
<h5 id="资源映射-7">资源映射</h5>
<p><br/>TRS burst由4个OFDM符号组成，并在2个连续时隙内发送。</p>
<p>UE应假设TRS在一个burst内根据以下公式映射到物理资源</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{TRS}}}r(m) \\
\nonumber &amp; k=4m+{ {k}_{0}}  
\end{align}
\]</span></p>
<p>The UE may assume that a TRS burst is quasi co-located with respect
to delay spread, average delay, Doppler shift, and Doppler spread with
the PDSCH DM-RS.</p>
<h3 id="同步信号">同步信号</h3>
<h4 id="物理层小区id">物理层小区ID</h4>
<p><br/>1008个唯一的物理层小区ID通过下式给定</p>
<p><span class="math display">\[
N_{\text{ID}}^{\text{cell}}=3N_{\text{ID}}^{\text{(1)}}+N_{\text{ID}}^{\text{(2)}}
\]</span></p>
<p>其中$ N_{}^{}{ 0,1,...,335 } <span class="math inline">\(且\)</span>
N_{}^{}{ 0,1,2 } $。</p>
<h4 id="主同步信号">主同步信号</h4>
<h5 id="序列产生-1">序列产生</h5>
<p><br/>主同步信号序列$ { {d}_{}}(n) $定义为</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; { {d}_{\text{PSS}}}\left( n \right)=1-2x\left( m
\right) \\
\nonumber &amp; m=\left( n+43N_{\text{ID}}^{\text{(2)}} \right)\bmod 127
\\
\nonumber  &amp; 0\le n&lt;127  
\end{align}
\]</span></p>
<p>其中</p>
<p><span class="math display">\[ x\left( i+7 \right)=\left( x\left( i+4
\right)+x\left( i \right) \right)\bmod 2 \]</span></p>
<p>且</p>
<p><span class="math display">\[ \left[ \begin{matrix}
   x\left( 6 \right) &amp; x\left( 5 \right) &amp; x\left( 4 \right)
&amp; x\left( 3 \right) &amp; x\left( 2 \right) &amp; x\left( 1 \right)
&amp; x\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   1 &amp; 1 &amp; 1 &amp; 0 &amp; 1 &amp; 1 &amp; 0  \\
\end{matrix} \right]
\]</span></p>
<h5 id="资源映射-8">资源映射</h5>
<p><br/>资源映射由1.4.3节描述。</p>
<h4 id="辅同步信号">辅同步信号</h4>
<h5 id="序列产生-2">序列产生</h5>
<p><br/>辅同步信号序列$ { {d}_{}}(n) $定义为</p>
<p><span class="math display">\[ \begin{align}
  \nonumber  &amp; { {d}_{\text{SSS}}}\left( n \right)=\left[ 1-2{
{x}_{0}}\left( \left( n+{ {m}_{0}} \right)\bmod 127 \right)
\right]\left[ 1-2{ {x}_{1}}\left( \left( n+{ {m}_{1}} \right)\bmod 127
\right) \right] \\
\nonumber &amp; { {m}_{0}}=15\left\lfloor
\frac{N_{\text{ID}}^{\text{(1)}}}{\text{112}} \right\rfloor
+5N_{\text{ID}}^{\text{(2)}} \\
\nonumber &amp; { {m}_{1}}=N_{\text{ID}}^{\text{(1)}}\bmod 112 \\
\nonumber &amp; 0\le n&lt;127  
\end{align}
\]</span></p>
<p>其中</p>
<p><span class="math display">\[
\begin{align}
  \nonumber  &amp; { {x}_{0}}\left( i+7 \right)=\left( { {x}_{0}}\left(
i+4 \right)+x{}_{0}\left( i \right) \right)\bmod 2 \\
\nonumber  &amp; { {x}_{1}}\left( i+7 \right)=\left( { {x}_{1}}\left(
i+1 \right)+x{}_{1}\left( i \right) \right)\bmod 2  
\end{align}
\]</span></p>
<p>且</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; \left[ \begin{matrix}
   { {x}_{0}}\left( 6 \right) &amp; { {x}_{0}}\left( 5 \right) &amp; {
{x}_{0}}\left( 4 \right) &amp; { {x}_{0}}\left( 3 \right) &amp; {
{x}_{0}}\left( 2 \right) &amp; { {x}_{0}}\left( 1 \right) &amp; {
{x}_{0}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right] \\
\nonumber &amp; \left[ \begin{matrix}
   { {x}_{1}}\left( 6 \right) &amp; { {x}_{1}}\left( 5 \right) &amp; {
{x}_{1}}\left( 4 \right) &amp; { {x}_{1}}\left( 3 \right) &amp; {
{x}_{1}}\left( 2 \right) &amp; { {x}_{1}}\left( 1 \right) &amp; {
{x}_{1}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]  
\end{align}
\]</span></p>
<h5 id="资源映射-9">资源映射</h5>
<p><br/>资源映射由1.4.3节描述。</p>
<h3 id="sspbch块">SS/PBCH块</h3>
<h4 id="sspbch块的时频结构">SS/PBCH块的时频结构</h4>
<p><br/>在时域上，一个SS/PBCH块由4个OFDM符号组成，按递增顺序从0到3编号。在频域上，一个SS/PBCH块由24个连续RBs组成，其中的子载波按递增顺序从0到287编号，以编号最低的RB为起始。</p>
<p>UE应假设为了符合[TS 38.213]中的PSS功率分配规定，符号序列$ {
{d}<em>{}}(0),...,{ {d}</em>{}}(126) <span
class="math inline">\(应乘以一个幅值因子\)</span> { {}<em>{}} <span
class="math inline">\(以构成主同步信号，并按照\)</span>k$递增的顺序映射到REs
$ { {( k,l )}</em>{p,}} <span
class="math inline">\(，其中\)</span>k<span
class="math inline">\(和\)</span>l$分别表示一个SS/PBCH块内频域和时域索引，并由Table
7.4.3.1-1给定。</p>
<p>UE应假设为了符合[TS 38.213]中的SSS功率分配规定，符号序列$ {
{d}<em>{}}(0),...,{ {d}</em>{}}(126) <span
class="math inline">\(应乘以一个幅值因子\)</span> { {}<em>{}} <span
class="math inline">\(以构成辅同步信号，并按照\)</span>k$递增的顺序映射到REs
$ { {( k,l )}</em>{p,}} <span
class="math inline">\(，其中\)</span>k<span
class="math inline">\(和\)</span>l$分别表示一个SS/PBCH块内频域和时域索引，并由Table
7.4.3.1-1给定。</p>
<p>UE应假设为了符合[TS 38.213]中的PBCH功率分配规定，复值符号序列$ {
{d}<em>{}}(0),...,{ {d}</em>{}}({ {M}<em>{}}-1) <span
class="math inline">\(应乘以一个幅值因子\)</span> { {}</em>{}}<span
class="math inline">\(以构成物理广播信道，并且从\)</span> {
{d}<em>{}}(0) $开始映射到REs $ { {( k,l )}</em>{p,}}
$，其中REs满足以下所有条件：</p>
<ul>
<li>它们不用于PBCH DM-RS</li>
</ul>
<p>向没有其他用途的REs $ { {( k,l )}_{p,}} <span
class="math inline">\(上映射，以递增顺序先按\)</span> k <span
class="math inline">\(再按\)</span> l <span
class="math inline">\(映射，其中\)</span> k <span
class="math inline">\(和\)</span>l$分别表示一个SS/PBCH块内的频域和时域索引，并由Table
7.4.3.1-1给定。</p>
<p>UE假设为了符合[TS 38.213]中的PBCH DM-RS功率分配规定，复值符号序列$ {
{r}<em>{l}}(0),...,{ {r}</em>{l}}(143) <span
class="math inline">\(应乘以一个幅值因子\)</span> <em>{}^{} <span
class="math inline">\(以构成SS/PBCH块的DM-RS，并且以递增顺序先按\)</span>k<span
class="math inline">\(后按\)</span>l$映射到REs $ { {( k,l )}</em>{p,}}
<span class="math inline">\(，其中\)</span> k <span
class="math inline">\(和\)</span>l<span
class="math inline">\(分别表示一个SS/PBCH块内的频域和时域索引，并由Table
7.4.3.1-1和\)</span> v=N_{}^{} $给定。</p>
<p>对于SS/PBCH块，UE应假设</p>
<ul>
<li>天线端口$ p=4000 $，</li>
<li>子载波间隔配置$ { 0,1,3,4 } $，且</li>
<li>对于PSS，SSS和PBCH有相同的CP长度和子载波间隔</li>
</ul>
<p>The UE may assume that SS/PBCH blocks transmitted with the same block
time index within a SS/PBCH burst set periodicity are quasi co-located
with respect to Doppler spread, Doppler shift, average gain, average
delay, and spatial Rx parameters. The UE shall not assume quasi
co-location for any other SS/PBCH block transmissions.</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/221608824.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="sspbch块的时域位置">SS/PBCH块的时域位置</h4>
<p><br/>UE应对可能的SS/PBCH块进行监测的时域位置在[TS38.213]
4.1节描述。</p>
<h1 id="相关链接">相关链接</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a>
<a
href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a>
<a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a>
<a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a>
<a
href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>2017-09</tag>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>5G-NR物理信道与调制-上行链路v1.0.0</title>
    <url>/2017/09/09/nr-v100-l1-channel-modulation-ul/</url>
    <content><![CDATA[<p><a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/#上行链路">上接《NR物理信道与调制》上行链路</a></p>
<h1 id="上行链路">上行链路</h1>
<h2 id="概述">概述</h2>
<h3 id="物理信道概述">物理信道概述</h3>
<p><br/>上行链路物理信道对应于一组资源元素（REs）的集合，用于承载源自高层的信息。本规范定义了如下上行信道：</p>
<ul>
<li>物理上行共享信道（PUSCH）</li>
<li>物理上行控制信道（PUCCH）</li>
<li>物理随机接入信道（PRACH）</li>
</ul>
<h3 id="物理信号概述">物理信号概述</h3>
<p><br/>上行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下上行物理信号：</p>
<ul>
<li>解调参考信号（Demodulation reference signals，DM-RS）</li>
<li>相位跟踪参考信号（Phase-tracking reference signals，PT-RS）</li>
<li>探测参考信号（Sounding reference signal，SRS）</li>
</ul>
<span id="more"></span>
<h2 id="物理资源">物理资源</h2>
<p><br/>本规范定义了下列用于上行链路的天线端口：</p>
<ul>
<li>Antenna ports starting with 1000 for DM-RS associated with
PUSCH</li>
<li>Antenna ports starting with 2000 for DM-RS associated with
PUCCH</li>
<li>Antenna ports starting with 3000 for SRS</li>
<li>Antenna port 4000 for PRACH</li>
</ul>
<h2 id="物理信道">物理信道</h2>
<h3 id="物理上行共享信道">物理上行共享信道</h3>
<h4 id="加扰">加扰</h4>
<p><br/>对于每个码字<span class="math inline">\(q\)</span>，比特块<span
class="math inline">\({ {b}^{(q)}}(0),...,{
{b}^{(q)}}(M_{\text{bit}}^{(q)}-1)\)</span>应当在调制前被加扰，其中<span
class="math inline">\(M_{\text{bit}}^{(q)}\)</span>是在物理信道上传输的码字<span
class="math inline">\(q\)</span>的比特数，加扰后的比特块为<span
class="math inline">\({ {\tilde{b}}^{(q)}}(0),...,{
{\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1)\)</span>。根据如下公式进行加扰</p>
<p><span class="math display">\[{ {\tilde{b}}^{(q)}}(i)=\left( {
{b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2\]</span></p>
<p>其中加扰序列<span class="math inline">\({
{c}^{(q)}}(i)\)</span>由2.2节中给定。</p>
<blockquote>
<p>注：RAN1还没有正式同意PUSCH加扰部分的内容，3.3.1.1和3.3.1.2节可能需要重新调整。</p>
</blockquote>
<h4 id="调制">调制</h4>
<p><br/>对于每个码字<span
class="math inline">\(q\)</span>，加扰比特块<span
class="math inline">\({ {\tilde{b}}^{(q)}}(0),...,{
{\tilde{b}}^{(q)}}(M_{\text{bit}}^{\text{(q)}}-1)\)</span>根据Table
6.3.1.2-1中的调制方式进行调制，具体调制方法见2.1节，得到复值调制符号块<span
class="math inline">\({ {d}^{(q)}}(0),...,{
{d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1)\)</span>。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/172437037.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="层映射">层映射</h4>
<p><br/>每个码字的复值调制符号根据Table
7.3.1.3-1最多映射到4个层。码字<span class="math inline">\(q\)</span>
的复值调制符号<span class="math inline">\({ {d}^{(q)}}(0),...,{
{d}^{(q)}}(M_{\text{symb}}^{\text{(q)}}-1)\)</span>被映射到层<span
class="math inline">\(x(i)={ {\left[ \begin{matrix}  { {x}^{(0)}}(i)
&amp; ... &amp; { {x}^{(\upsilon -1)}}(i) \\ \end{matrix}
\right]}^{T}}\)</span>，<span
class="math inline">\(i=0,1,...,M_{\text{symb}}^{\text{layer}}-1\)</span>，其中$<span
class="math inline">\(是层数，\)</span>M_{}^{}$是每层的调制符号数。</p>
<h4 id="变换预编码">变换预编码</h4>
<p><br/>如果变换预编码（transform precoding）不可用，对于层<span
class="math inline">\(\lambda =0,1,...,\upsilon -1\)</span>有<span
class="math inline">\({ {y}^{(\lambda )}}(i)={ {x}^{(\lambda
)}}(i)\)</span>。</p>
<p>如果变换预编码可用，<span class="math inline">\(\upsilon
=1\)</span>且复值符号块<span class="math inline">\({ {x}^{(0)}}(0),...,{
{x}^{(0)}}(M_{\text{symb}}^{\text{layer}}-1)\)</span>对于单层<span
class="math inline">\(\lambda =0\)</span>被分为<span
class="math inline">\({M_{\text{symb}}^{\text{layer}}}/{M_{\text{sc}}^{\text{PUSCH}}}\;\)</span>个集合，每个集合对应于一个OFDM符号。变换预编码根据如下公式进行</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; { {y}^{(0)}}(l\cdot
M_{\text{sc}}^{\text{PUSCH}}+k)=\frac{1}{\sqrt{M_{\text{sc}}^{\text{PUSCH}}}}\sum\limits_{i=0}^{M_{\text{sc}}^{\text{PUSCH}}-1}{
{ {x}^{(0)}}(l\cdot M_{\text{sc}}^{\text{PUSCH}}+i){ {e}^{-j\frac{2\pi
ik}{M_{\text{sc}}^{\text{PUSCH}}}}}} \\
\nonumber &amp; k=0,...,M_{\text{sc}}^{\text{PUSCH}}-1 \\
\nonumber &amp;
l=0,...,{M_{\text{symb}}^{\text{layer}}}/{M_{\text{sc}}^{\text{PUSCH}}}\;-1  
\end{align}\]</span></p>
<p>得到复值符号块<span class="math inline">\({ {y}^{(0)}}(0),...,{
{y}^{(0)}}(M_{\text{symb}}^{\text{layer}}-1)\)</span>。<span
class="math inline">\(M_{\text{sc}}^{\text{PUSCH}}=M_{\text{RB}}^{\text{PUSCH}}\cdot
N_{\text{sc}}^{\text{RB}}\)</span>，其中<span
class="math inline">\(M_{\text{RB}}^{\text{PUSCH}}\)</span>表示PUSCH就RB而言的带宽，并且满足</p>
<p><span class="math display">\[M_{\text{RB}}^{\text{PUSCH}}={ {2}^{ {
{\alpha }_{2}}}}\cdot { {3}^{ { {\alpha }_{3}}}}\cdot { {5}^{ { {\alpha
}_{5}}}}\le N_{\text{RB}}^{\text{UL}}\]</span></p>
<p>其中<span class="math inline">\({ {\alpha }_{2}},{ {\alpha }_{3}},{
{\alpha }_{5}}\)</span>是非负整数集合。</p>
<h4 id="预编码">预编码</h4>
<p><br/>根据如下公式对向量块<span class="math inline">\({ {\left[
\begin{matrix}  { {y}^{(0)}}(i) &amp; ... &amp; { {y}^{(\upsilon
-1)}}(i) \\ \end{matrix} \right]}^{T}}\)</span>，<span
class="math inline">\(i=0,1,...,M_{\text{symb}}^{\text{layer}}-1\)</span>进行预编码</p>
<p><span class="math display">\[\left[ \begin{matrix}
   { {z}^{(0)}}(i)  \\
   \vdots   \\
   { {z}^{(P-1)}}(i)  \\
\end{matrix} \right]=W\left[ \begin{matrix}
   { {y}^{(0)}}(i)  \\
   \vdots   \\
   { {y}^{(\upsilon -1)}}(i)  \\
\end{matrix} \right]\]</span></p>
<p>其中<span
class="math inline">\(i=0,1,...,M_{\text{symb}}^{\text{ap}}-1\)</span>，<span
class="math inline">\(M_{\text{symb}}^{\text{ap}}=M_{\text{symb}}^{\text{layer}}\)</span>。</p>
<p>对基于非码本的传输，预编码矩阵<span
class="math inline">\(W\)</span>在TS 38.214规范中得到。</p>
<p>对基于码本的传输，预编码矩阵<span
class="math inline">\(W\)</span>由Table
6.3.1.5-1给定，其中TPMI索引由调度上行传输的DCI中获得。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/180222320.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="映射到物理资源">映射到物理资源</h4>
<p><br/>为满足TS 38.213规范对PUSCH传输功率<span class="math inline">\({
{P}_{\text{PUSCH}}}\)</span>的要求，对于PUSCH传输所使用的每个天线端口，复值符号块<span
class="math inline">\({ {z}^{(p)}}(0),...,{
{z}^{(p)}}(M_{\text{symb}}^{\text{ap}}-1)\)</span>应当乘以一个幅值因子<span
class="math inline">\({ {\beta }_{\text{PUSCH}}}\)</span>，然后从<span
class="math inline">\({ {z}^{(p)}}(0)\)</span>开始依次映射到RE <span
class="math inline">\({ {\left( k,l \right)}_{p,\mu
}}\)</span>上，并且RE满足如下条件：</p>
<ul>
<li>它们位于用于传输所分配的资源中，且</li>
<li>它们不用于DM-RS相关的传输</li>
<li>they are not in the OFDM symbols used for transmission of the
associated DM-RS in case of transform precoding not enabled.</li>
</ul>
<p>If transform precoding is not enabled, the mapping to resource
elements <span class="math inline">\({ {\left( k,l \right)}_{p,\mu
}}\)</span> not reserved for other purposes shall be in increasing order
of first the antenna port index <span class="math inline">\(p\)</span>,
then the index <span class="math inline">\(k\)</span> over the assigned
physical resource blocks, and then the index <span
class="math inline">\(l\)</span>, starting with <span
class="math inline">\(l={ {l}_{0}}\)</span>.（注： <span
class="math inline">\({ {l}_{0}}\)</span> is the start of UL
transmission. Need some reference to 213/214）</p>
<h3 id="物理上行控制信道">物理上行控制信道</h3>
<p><br/>PUCCH支持多种格式，如Table
6.3.2-1所示。对于单个UE，支持采用格式0或格式2的2个PUCCH同时传输，或支持采用格式1或格式3的其中一个PUCCH与采用格式0或格式2的其中一个PUCCH同时传输。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/180832948.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="pucch格式0">PUCCH格式0</h4>
<h5 id="序列选择">序列选择</h5>
<p><br/>定义一组序列<span class="math inline">\(\left\{
\begin{matrix}  { {x}_{0}}(n) &amp; { {x}_{1}}(n) &amp; { {x}_{2}}(n)
&amp; { {x}_{3}}(n) \\ \end{matrix}
\right\}\)</span>，每组序列长度为12。</p>
<p>比特块<span class="math inline">\(b(0),...,b({
{M}_{\text{bit}}}-1)\)</span>其中<span class="math inline">\({
{M}_{\text{bit}}}\in \left\{ 1,2
\right\}\)</span>是PUCCH传输的比特数，根据下式选择序列</p>
<p><span class="math display">\[\begin{align}
\nonumber &amp; y(n)={ {x}_{j}}(n) \\
\nonumber &amp; j=\sum\nolimits_{i=0}^{ { {M}_{\text{bit}}}-1}{b(i)\cdot
{ {2}^{i}}}  
\end{align}\]</span></p>
<h5 id="映射到资源元素">映射到资源元素</h5>
<p><br/>为满足TS 38.213规范对PUCCH传输功率<span class="math inline">\({
{P}_{\text{PUCCH,0}}}\)</span>的要求，序列<span
class="math inline">\(y(n)\)</span>应当乘以一个幅值因子<span
class="math inline">\({ {\beta
}_{\text{PUCCH,0}}}\)</span>。在天线端口<span
class="math inline">\(p=2000\)</span>，先按<span
class="math inline">\(k\)</span>，再按<span
class="math inline">\(l\)</span>的递增顺序从<span
class="math inline">\(y(0)\)</span>开始映射到RE <span
class="math inline">\({ {\left( k,l \right)}_{p,\mu }}\)</span>。</p>
<h4 id="pucch格式1">PUCCH格式1</h4>
<h5 id="序列调制">序列调制</h5>
<p><br/>比特块<span class="math inline">\(b(0),...,b({
{M}_{\text{bit}}}-1)\)</span>按照2.1节所述的方法进行调制，若<span
class="math inline">\({
{M}_{\text{bit}}}=1\)</span>，则使用BPSK，若<span
class="math inline">\({
{M}_{\text{bit}}}=2\)</span>，则使用QPSK，得到一个复值符号<span
class="math inline">\(d(0)\)</span>。</p>
<p>复值符号<span
class="math inline">\(d(0)\)</span>应根据下式乘以一个序列<span
class="math inline">\(r_{u,v}^{({ {\alpha }_{p}})}(n)\)</span></p>
<p><span class="math display">\[{ {y}^{(p)}}(n)=d(0)\cdot r_{u,v}^{({
{\alpha
}_{p}})}(n),\text{          }n=0,1,...,N_{\text{seq}}^{\text{PUCCH}}-1\]</span></p>
<p>复值符号<span class="math inline">\({ {y}^{(p)}}(0),...,{
{y}^{(p)}}(N_{\text{seq}}^{\text{PUCCH}}-1)\)</span>应根据下式采用正交序列<span
class="math inline">\({
{w}_{n_{\text{oc}}^{\text{(}p\text{)}}}}(i)\)</span>进行块扩展（block-wise
spread）</p>
<p><span class="math display">\[{ {z}^{(p)}}\left( m\cdot
N_{\text{seq}}^{\text{PUCCH}}+n \right)={
{w}_{n_{\text{oc}}^{\text{(}p\text{)}}}}(m)\cdot { {y}^{(p)}}\left( n
\right)\]</span></p>
<p>其中</p>
<p><span class="math display">\[\begin{align}
\nonumber &amp; m=0,...,N_{\text{SF}}^{\text{PUCCH}}-1 \\
\nonumber &amp; n=0,...,N_{\text{seq}}^{\text{PUCCH}}-1 \\
\end{align}\]</span></p>
<h5 id="映射到物理资源-1">映射到物理资源</h5>
<p><br/>为满足TS 38.213规范对PUCCH传输功率<span class="math inline">\({
{P}_{\text{PUCCH,1}}}\)</span>的要求，序列<span class="math inline">\({
{z}^{(p)}}(n)\)</span>应当乘以一个幅值因子<span class="math inline">\({
{\beta }_{\text{PUCCH,1}}}\)</span>，序列从<span class="math inline">\({
{z}^{(p)}}(0)\)</span>开始映射到RE <span class="math inline">\({ {\left(
k,l \right)}_{p,\mu }}\)</span>，RE满足下列所有条件：</p>
<ul>
<li>它们位于用于传输的RB中，</li>
<li>它们不用于DM-RS相关的传输</li>
</ul>
<p>The mapping to resource elements <span class="math inline">\({
{\left( k,l \right)}_{p,\mu }}\)</span> not reserved for other purposes
shall be in increasing order of first the index <span
class="math inline">\(k\)</span> over the assigned physical resource
blocks, and then the index <span class="math inline">\(l\)</span>.</p>
<h4 id="pucch格式2">PUCCH格式2</h4>
<h4 id="pucch格式3">PUCCH格式3</h4>
<h4 id="pucch格式4">PUCCH格式4</h4>
<h3 id="物理随机接入信道">物理随机接入信道</h3>
<h4 id="序列生成">序列生成</h4>
<p><br/>随机接入前导<span class="math inline">\({
{x}_{u,v}}(n)\)</span>应根据下式生成</p>
<p><span class="math display">\[\begin{align}
\nonumber &amp; { {x}_{u,v}}(n)={ {x}_{u}}((n+{ {C}_{v}})\bmod {
{L}_{\text{RA}}}) \\
\nonumber &amp; { {x}_{u}}(i)={ {e}^{-j\frac{\pi ui(i+1)}{ {
{L}_{\text{RA}}}}}},i=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}\]</span></p>
<p>频域符号表示应根据下式生成</p>
<p><span class="math display">\[{ {y}_{u,v}}(n)=\sum\limits_{m=0}^{ {
{L}_{\text{RA}}}-1}{ { {x}_{u,v}}(m)\cdot { {e}^{-j\frac{2\pi mn}{ {
{L}_{\text{RA}}}}}}}\]</span></p>
<p>其中<span class="math inline">\({
{L}_{\text{RA}}}=839\)</span>或<span class="math inline">\({
{L}_{\text{RA}}}=[127or139]\)</span>根据前导格式确定，前导格式由Tables
6.3.3.1-1和6.3.3.1-2给定。</p>
<p>循环移位<span class="math inline">\({ {C}_{v}}\)</span>给定为</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; C{}_{v}=\left\{ \begin{array}{*{35}{l}}
   v{ {N}_{\text{CS}}} &amp; \text{v}=\text{0,1,}...\text{,}\left\lfloor
{ { {L}_{\text{RA}}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor -1,{
{N}_{\text{CS}}}\ne 0 &amp; \text{for unrestricted sets}  \\
   \text{0} &amp; { {N}_{\text{CS}}}=0 &amp; \text{for unrestricted
sets}  \\
   { {d}_{\text{start}}}\left\lfloor
{v}/{n_{\text{shift}}^{\text{RA}}}\; \right\rfloor +\left( v\bmod
n_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}} &amp;
v=0,1,...,w-1 &amp; \text{for restricted sets type A and B}  \\
   { { {\bar{\bar{d}}}}_{\text{start}}}+\left( v-w \right){
{N}_{\text{CS}}} &amp;
v=w,...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}-1 &amp; \text{for
restricted sets type B}  \\
   { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}+\left(
v-w-\bar{\bar{n}}_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}}
&amp;
v=w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}},...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}+\bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}-1
&amp; \text{for restricted sets type B}  \\
\end{array} \right. \\
\nonumber &amp;
w=n_{\text{shift}}^{\text{RA}}n_{\text{group}}^{\text{RA}}+\bar{n}_{\text{shift}}^{\text{RA}}  
\end{align}\]</span></p>
<p>其中<span class="math inline">\({ {N}_{\text{CS}}}\)</span>在Table
6.3.3.1-3中给定，高层参数<em>restrictedSetConfig</em>决定了受限集合的类型，6.3.3.1-1和6.3.3.1-2指示了对不同前导格式的受限集合的类型。</p>
<p>变量<span class="math inline">\({ {d}_{u}}\)</span>给定为</p>
<p><span class="math display">\[{ {d}_{u}}=\left\{
\begin{array}{*{35}{l}}
   q &amp; 0\le q&lt;{ { {L}_{\text{RA}}}}/{2}\;  \\
   { {L}_{\text{RA}}}-q &amp; \text{otherwise}  \\
\end{array} \right.\]</span></p>
<p>其中<span class="math inline">\(q\)</span>是满足<span
class="math inline">\(\left( qu \right)\bmod {
{L}_{\text{RA}}}=1\)</span>的最小非负整数。循环移位的受限集合参数依赖于<span
class="math inline">\({ {d}_{u}}\)</span>。</p>
<ul>
<li>对于${ {N}<em>{}}&lt;{ { {L}</em>{}}}/{3}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=2{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {({ {L}_{\text{RA}}}-2{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}
\]</span></p>
<ul>
<li>对于 ${ { {L}_{}}}/{3};/{2}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {({
{L}_{\text{RA}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}={ {L}_{\text{RA}}}-2{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max
\left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0
\right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}
\]</span></p>
<p>对于受限集合类型B，参数规定为：</p>
<ul>
<li>对于$ { {N}<em>{}}&lt;{ { {L}</em>{}}}/{5}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=4{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {({ {L}_{\text{RA}}}-4{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}
\]</span></p>
<ul>
<li>对于$ { { {L}_{}}}/{5};/{}; $</li>
</ul>
<p><span class="math display">\[
\begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {\left( {
{L}_{\text{RA}}}-4{ {d}_{u}} \right)}/{ { {N}_{\text{CS}}}}\;
\right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}={ {L}_{\text{RA}}}-4{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max
\left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0
\right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}
\]</span></p>
<ul>
<li>对于$ {({ {L}<em>{}}+{ {N}</em>{}})}/{4};&lt;{2{ {L}_{}}}/{7};
$</li>
</ul>
<p><span class="math display">\[
\begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {(4{
{d}_{u}}-{ {L}_{\text{RA}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=4{ {d}_{u}}-{
{L}_{\text{RA}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; { { {\bar{\bar{d}}}}_{\text{start}}}={
{L}_{\text{RA}}}-3{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\\
\nonumber &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}={
{L}_{\text{RA}}}-2{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}}+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}{
{N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( { {L}_{\text{RA}}}-3{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor
{\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}},4{ {d}_{u}}-{
{L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp;
\bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\left(
\left( 1-\min \left( 1,\bar{n}_{\text{shift}}^{\text{RA}} \right)
\right)\left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}} \right)+\min \left(
1,\bar{n}_{\text{shift}}^{\text{RA}} \right)\left( 4{ {d}_{u}}-{
{L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\right) \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor
-\bar{\bar{n}}_{\text{shift}}^{\text{RA}}  
\end{align}
\]</span></p>
<ul>
<li>对于$ {2{ {L}_{}}}/{7};/{3}; $</li>
</ul>
<p><span class="math display">\[
\begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {({
{L}_{\text{RA}}}-3{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}={ {L}_{\text{RA}}}-3{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; { { {\bar{\bar{d}}}}_{\text{start}}}={
{d}_{u}}+n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\\
\nonumber &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( 4{ {d}_{u}}-{
{L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}
\right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor
{\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}},{ {L}_{\text{RA}}}-3{
{d}_{u}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right)}/{
{ {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}
\]</span></p>
<ul>
<li>对于$ {({ {L}<em>{}}+{ {N}</em>{}})}/{3};&lt;{2{ {L}_{}}}/{5};
$</li>
</ul>
<p><span class="math display">\[
\begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {(3{
{d}_{u}}-{ {N}_{\text{ZC}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=3{ {d}_{u}}-{
{N}_{\text{ZC}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\
\nonumber &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( { {L}_{\text{RA}}}-2{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\
\nonumber &amp; \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}
\]</span></p>
<ul>
<li>对于$ {2{ {L}_{}}}/{5};/{2}; $</li>
</ul>
<p><span class="math display">\[
\begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {({
{N}_{\text{ZC}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=2({ {N}_{\text{ZC}}}-2{
{d}_{u}})+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\
\nonumber &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor {({
{L}_{\text{RA}}}-{ {d}_{u}})}/{ { {d}_{\text{start}}}}\;
\right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( 3{ {d}_{u}}-{
{L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}
\right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\
\nonumber &amp; \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}
\]</span></p>
<p>对于其他所有的$ { {d}_{u}} $值，受限集合不存在循环移位。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/190959609.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/191029404.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/191117976.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="映射到物理元素">映射到物理元素</h4>
<p><br/>前导序列应根据下式映射到物理资源</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; a_{k}^{(p,\text{RA})}={ {\beta }_{\text{PRACH}}}{
{y}_{u,v}}(k) \\
\nonumber &amp; k=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}
\]</span></p>
<p>其中$ { {}<em>{}} <span class="math inline">\(是幅值因子，为满足TS
38.213规范对PRACH传输功率\)</span> { {P}</em>{}} <span
class="math inline">\(的要求，前导序列应乘以\)</span> { {}_{}} <span
class="math inline">\(，\)</span> p=4000
$是天线端口。基带信号应根据2.3节使用Table 6.3.3.1-1或Table
6.3.3.1-2的参数生成。</p>
<h2 id="物理信号">物理信号</h2>
<h3 id="参考信号">参考信号</h3>
<h4 id="用于pusch的dm-rs">用于PUSCH的DM-RS</h4>
<h5 id="序列生成-1">序列生成</h5>
<p><br/>若对PUSCH的转换预编码不启用，则参考信号序列$ r(m)
$根据下式生成</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中伪随机序列$ c(i) $在《NR物理信道与调制》2.2节中定义。</p>
<p>若对PUSCH的转换预编码启用，则参考信息$ r(m) $根据下式生成</p>
<p><span class="math display">\[ r(m)={ {e}^{-j\frac{\pi qm(m+1)}{L}}}
\]</span></p>
<blockquote>
<p>Note: Agreement says “Support ZC-sequence for UL DFT-S-OFDM DMRS” but
unclear if this refers to the sequences in LTE (ZC-derived/computer
generated) or “pure” ZC.</p>
</blockquote>
<h5 id="资源映射">资源映射</h5>
<p><br/>PUSCH DM-RS根据type 1或type
2映射到物理资源，DM-RS的类型由高层参数<em>UL-DMRS-config-type</em>给定。</p>
<p>UE应根据以下规则将序列$ r(m) $映射到REs</p>
<ul>
<li>if transform precoding is not enabled,</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{
{w}_{\text{f}}}\left( { {k}&#39;} \right)\cdot { {w}_{\text{t}}}\left( {
{l}&#39;} \right)\cdot r\left( 2m+{k}&#39;+{ {m}_{0}} \right) \\
\nonumber &amp; k=\left\{ \begin{matrix}
   { {k}_{\text{0}}}+4m+2{k}&#39;+\Delta  &amp; \text{Configuration type
1}  \\
   { {k}_{\text{0}}}+6m+{k}&#39;+\Delta  &amp; \text{Configuration type
2}  \\
\end{matrix} \right. \\
\nonumber &amp; {k}&#39;=0,1 \\
\nonumber &amp; l=\bar{l}+{l}&#39;  
\end{align}
\]</span></p>
<ul>
<li>if transform precoding is enabled</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{
{w}_{\text{f}}}\left( { {k}&#39;} \right)\cdot { {w}_{\text{t}}}\left( {
{l}&#39;} \right)\cdot r\left( 2m+{k}&#39;+{ {m}_{0}} \right) \\
\nonumber &amp; k={ {k}_{\text{0}}}+4m+2{k}&#39;+\Delta  \\
\nonumber &amp; {k}&#39;=0,1 \\
\nonumber  &amp; l=\bar{l}+{l}&#39;  
\end{align}
\]</span></p>
<p>其中<span
class="math inline">\(l\)</span>是指相对于PUSCH传输的起始，$ {
{w}<em>{}}( { {k}'} ) <span class="math inline">\(，\)</span> {
{w}</em>{}}( { {k}'} ) <span class="math inline">\(，和\)</span>
$在Tables 6.4.1.1.2-1 and 6.4.1.1.2-2中给定。</p>
<p>时域索引$ {l}' <span
class="math inline">\(和所支持的天线端口\)</span>p$根据Table
6.4.1.1.2-3中的DM-RS duration确定。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/192118412.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/192207337.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="相位跟踪参考信号">相位跟踪参考信号</h4>
<h5 id="序列生成-2">序列生成</h5>
<h5 id="资源映射-1">资源映射</h5>
<h4 id="用于pucch的dm-rs">用于PUCCH的DM-RS</h4>
<h5 id="用于pucch格式1的dm-rs">用于PUCCH格式1的DM-RS</h5>
<h4 id="探测参考信号">探测参考信号</h4>
<h5 id="序列生成-3">序列生成</h5>
<p><br/>探测参考信号序列根据下式生成</p>
<p><span class="math display">\[ r\left( m \right)=r_{u,v}^{(\alpha
)}\left( m \right) \]</span></p>
<p>其中$ r_{u,v}^{()}( n ) $]由XXX给定。</p>
<h5 id="资源映射-2">资源映射</h5>
<p><br/>探测参考信号应在上行天线端口$ 3000+i <span
class="math inline">\(上发送，其中\)</span> i <span
class="math inline">\(是\)</span> i=0 <span
class="math inline">\(或\)</span> i=0,1 <span
class="math inline">\(或\)</span> i=0,1,2,3 $其中之一。</p>
<h1 id="相关链接">相关链接</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a>
<a
href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a>
<a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a>
<a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a>
<a
href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>2017-09</tag>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>5G-NR物理信道与调制v1.0.0</title>
    <url>/2017/09/09/nr-v100-l1-channel-modulation/</url>
    <content><![CDATA[<blockquote>
<p><strong>Marshall：</strong><a
href="http://marshallcomm.cn/tags/2017-09/">v1.0.0版本</a>已过时，5G
NR物理层规范已更新到<a
href="http://marshallcomm.cn/tags/2017-10/">v1.1.0版本</a>。</p>
</blockquote>
<h1 id="帧结构与物理资源">帧结构与物理资源</h1>
<h2 id="概述">概述</h2>
<p><br/>在本规范中，除非另有说明，在时域中的各个域的大小表示为若干时间单位<span
class="math inline">\({ {T}_{\text{s}}}={1}/{\left( \Delta { {f}_{\max
}}\cdot { {N}_{\text{f}}} \right)}\;\)</span>，其中<span
class="math inline">\(\Delta { {f}_{\max }}=480\cdot {
{10}^{3}}\)</span> Hz，<span class="math inline">\({
{N}_{\text{f}}}=4096\)</span>。常量<span class="math inline">\(\kappa
={\Delta { {f}_{\text{max}}}{ {N}_{\text{f}}}}/{\left( \Delta {
{f}_{\text{ref}}}{ {N}_{\text{f,ref}}} \right)}\;=64\)</span>，其中<span
class="math inline">\(\Delta { {f}_{\text{ref}}}=15\cdot {
{10}^{3}}\text{ Hz}\)</span>，<span class="math inline">\({
{N}_{\text{f,ref}}}=2048\)</span>。</p>
<h2 id="波形参数">波形参数</h2>
<p><br/>支持多种OFDM波形参数，如Table 4.2-1所示，其中载波带宽部分的<span
class="math inline">\(\mu\)</span>和CP由高层参数给定，下行链路由<em>DL_BWP_mu</em>和<em>DL_BWP_cp</em>给定，上行链路由<em>UL_BWP_mu</em>和<em>UL_BWP_cp</em>给定。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/155018195.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<span id="more"></span>
<h2 id="帧结构">帧结构</h2>
<h3 id="帧和子帧">帧和子帧</h3>
<p><br/>下行与上行链路传输于帧中，一帧的时域为<span
class="math inline">\({ {T}_{\text{f}}}=\left( {\Delta { {f}_{\max }}{
{N}_{\text{f}}}}/{100}\; \right)\cdot { {T}_{\text{s}}}=10\text{
ms}\)</span>，一帧包含10个子帧，每个子帧时域为<span
class="math inline">\({ {T}_{\text{sf}}}=\left( {\Delta { {f}_{\max }}{
{N}_{\text{f}}}}/{1000}\; \right)\cdot { {T}_{\text{s}}}=1\text{
ms}\)</span>。每个子帧中的连续OFDM符号数为<span
class="math inline">\(N_{\text{symb}}^{\text{subframe},\mu
}=N_{\text{symb}}^{\text{slot}}N_{\text{slot}}^{\text{subframe},\mu
}\)</span>。每帧分为两个相等大小的半帧，每个半帧包含5个子帧。</p>
<p>There is one set of frames in the uplink and one set of frames in the
downlink on a carrier.</p>
<p>来自UE的上行帧<span
class="math inline">\(i\)</span>应在UE对应的下行帧开始前<span
class="math inline">\({ {T}_{\text{TA}}}={ {N}_{\text{TA}}}{
{T}_{\text{s}}}\)</span>传输。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/155332915.png" title="Figure 4.3.1-1: Uplink-downlink timing relation" /></p>
<h3 id="时隙">时隙</h3>
<p><br/>对于子载波间隔配置<span
class="math inline">\(\mu\)</span>，时隙在子帧内按递增顺序编号<span
class="math inline">\(n_{\text{s}}^{\mu }\in \left\{
0,...,N_{\text{slot}}^{\text{subframe,}\mu }-1
\right\}\)</span>，在帧内按递增顺序编号<span
class="math inline">\(n_{\text{s,f}}^{\mu }\in \left\{
0,...,N_{\text{slot}}^{\text{frame,}\mu }-1
\right\}\)</span>。一个时隙内有<span
class="math inline">\(N_{\text{symb}}^{\text{slot}}\)</span>个连续的OFDM符号，<span
class="math inline">\(N_{\text{symb}}^{\text{slot}}\)</span>依赖于CP长度，并且由Tables
4.3.2-1和4.3.2-2给定。子帧内的起始时隙<span
class="math inline">\(n_{\text{s}}^{\mu
}\)</span>与子帧内起始OFDM符号<span
class="math inline">\(n_{\text{s}}^{\mu
}N_{\text{symb}}^{\text{slot}}\)</span>在时间上对齐。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/160156375.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/160308810.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p><strong>Agreements:</strong></p>
<ul>
<li>A slot can contain all downlink, all uplink, or {at least one
downlink part and at least one uplink part}</li>
<li>There are also agreements on various semi-static configurations with
different periodicities</li>
</ul>
</blockquote>
<h2 id="物理资源">物理资源</h2>
<h3 id="天线端口">天线端口</h3>
<p><br/>天线端口定义为，在同一天线端口上，某一符号上的信道可以由另一符号上的信道推知。</p>
<p>如果一个天线端口上某一符号传输的信道的大尺度性能可以被另一天线端口上某一符号传输的信道所推知，则这两个天线端口被称为quasi
co-located。大尺度性能包括一个或多个延时扩展，多普勒扩展，多普勒频移，平均增益，平均时延和空间接收参数。</p>
<h3 id="资源格">资源格</h3>
<p><br/>对于每种波形参数和载波，资源格由<span
class="math inline">\(N_{\text{RB,}x}^{\mu
}N_{\text{sc}}^{\text{RB}}\)</span>个子载波和<span
class="math inline">\(N_{\text{symb}}^{\text{subframe},\mu
}\)</span>个OFDM符号定义，其中<span
class="math inline">\(x\)</span>表示DL或UL，<span
class="math inline">\(N_{\text{RB,}x}^{\text{max,}\mu }\)</span>由Table
4.4.2-1给定。在不至于混淆的情况下，下标<span
class="math inline">\(x\)</span>可省略。每个天线端口<span
class="math inline">\(p\)</span>，每个子载波间隔配置<span
class="math inline">\(\mu\)</span>以及每个传输方向（上行或下行）对应一个资源格。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/161038568.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h3 id="资源元素">资源元素</h3>
<p>天线端口<span class="math inline">\(p\)</span>和子载波间隔配置<span
class="math inline">\(\mu\)</span>下的资源格中每个元素被称为资源元素（Resource
Element，RE），它用索引对<span class="math inline">\(\left( k,l
\right)\)</span>唯一地标识，其中<span
class="math inline">\(k=0,...,N_{\text{RB}}^{\mu
}N_{\text{sc}}^{\text{RB}}-1\)</span>是频域索引，<span
class="math inline">\(l\)</span>是时域符号索引。</p>
<p>天线端口<span class="math inline">\(p\)</span>和子载波间隔配置<span
class="math inline">\(\mu\)</span>下的RE <span
class="math inline">\(\left( k,l \right)\)</span>表示为<span
class="math inline">\({ {\left( k,l \right)}_{p,\mu
}}\)</span>，相应的复数值表示为<span
class="math inline">\(a_{k,l}^{(p,\mu
)}\)</span>。在不至于混淆的情况下，或在没有特定的天线端口或子载波间隔的情况下，索引<span
class="math inline">\(p\)</span>和<span
class="math inline">\(\mu\)</span>可以省略，简写为<span
class="math inline">\(a_{k,l}^{(p)}\)</span>或<span
class="math inline">\({ {a}_{k,l}}\)</span>。</p>
<p>一个资源元素（RE）分为4类：‘uplink’, ‘downlink’, ‘flexible’, or
‘reserved’。</p>
<ul>
<li>如果RE被配置为‘reserved’，
UE不应在上行链路中对该RE发送任何内容，也不对下行链路中的RE内容作出任何假设。</li>
</ul>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/161511352.png" title="Figure 4.4.3-1: Resource grid and resource block" /></p>
<h3 id="资源块">资源块</h3>
<p><br/>一个物理资源块（PRB）在频域上定义为<span
class="math inline">\(N_{\text{sc}}^{\text{RB}}=12\)</span>连续的子载波。</p>
<p>PRB在频域上从0到<span class="math inline">\(N_{\text{RB}}^{\mu
}-1\)</span>编号。频域上的PRB数<span class="math inline">\({
{n}_{\text{PRB}}}\)</span>和RE <span
class="math inline">\((k,l)\)</span>的关系由下式给定：</p>
<p><span class="math display">\[{ {n}_{\text{PRB}}}=\left\lfloor
\frac{k}{N_{\text{sc}}^{\text{RB}}} \right\rfloor \]</span></p>
<h3 id="载波带宽part">载波带宽part</h3>
<p><br/>对于给定的载波上的波形参数<span class="math inline">\({ {\mu
}_{i}}\)</span>，载波带宽part（bandwidth
part，BWP）是一组连续的PRB。BWP中的RB从0到<span
class="math inline">\(N_{\text{RB,}x}^{\mu }-1\)</span>编号，其中<span
class="math inline">\(x\)</span>表示DL或UL，with <span
class="math inline">\(N_{\text{BWP}}^{i}\)</span> being the offset
between PRB 0 in the absolute resource block grid in clause 1.4.4 and
PRB 0 in carrier bandwidth part number <span
class="math inline">\(i\)</span>。BWP中的RB数应满足<span
class="math inline">\(N_{\text{RB, }x}^{\text{min, }\mu }\le
N_{\text{RB,}x}^{\mu }\le N_{\text{RB, }x}^{\text{max, }\mu
}\)</span>，其中最小值和最大值在Table 4.4.2-1中给定。</p>
<p>下行链路中，UE可配置具有一个或多个载波BWP，所述载波BWP的子集在给带时间处于激活状态。UE不希望在BWP以外的频带接收PDSCH或PDCCH。</p>
<p>在上行链路中，UE可配置为具有一个或多个载波BWP，所述载波BWP的子集在给定时间处于激活状态。UE不希望在BWP以外的频带发送PUSCH或PUCCH。</p>
<h2 id="载波聚合">载波聚合</h2>
<p><br/>在多个小区中的传输可以被聚合，除了主小区外，最多可以使用15个辅小区。除非另有说明，本规范中的描述适用于多达16个服务小区中的每一个。</p>
<h1 id="通用函数">通用函数</h1>
<h2 id="调制映射器">调制映射器</h2>
<p><br/>调制映射器采用二进制0或1作为输入，产生复值调制符号作为输出。</p>
<h3 id="π2-bpsk">π/2-BPSK</h3>
<p><br/>对于π/2-BPSK调制，比特<span
class="math inline">\(b(i)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[x=\frac{ { {e}^{j{i\pi
}/{2}\;}}}{\sqrt{2}}\left[ \left( 1-2b(i) \right)+j\left( 1-2b(i)
\right) \right]\]</span></p>
<h3 id="bpsk">BPSK</h3>
<p><br/>对于BPSK调制，比特<span
class="math inline">\(b(i)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[x=\frac{1}{\sqrt{2}}\left[ \left(
1-2b(i) \right)+j\left( 1-2b(i) \right) \right]\]</span></p>
<h3 id="qpsk">QPSK</h3>
<p><br/>对于QPSK调制，成对比特<span
class="math inline">\(b(i),b(i+1)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[x=\frac{1}{\sqrt{2}}\left[ \left(
1-2b(i) \right)+j\left( 1-2b(i+1) \right) \right]\]</span></p>
<h3 id="qam">16QAM</h3>
<p><br/>对于16QAM调制，四位比特<span
class="math inline">\(b(i),b(i+1),b(i+2),b(i+3)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[x=\frac{1}{\sqrt{10}}\left[ \left(
1-2b(i) \right)\left( 2-\left( 1-2b(i+2) \right) \right)+j\left(
1-2b(i+1) \right)\left( 2-\left( 1-2b(i+3) \right) \right)
\right]\]</span></p>
<h3 id="qam-1">64QAM</h3>
<p><br/>对于64QAM调制，六位比特<span
class="math inline">\(b(i),b(i+1),b(i+2),b(i+3),b(i+4),b(i+5)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; x=\frac{1}{\sqrt{42}}\left[ \left( 1-2b(i)
\right)\left( 4-\left( 1-2b(i+2) \right)\left( 2-\left( 1-2b(i+4)
\right) \right) \right) \right. \\
\nonumber &amp; \ \ \ \ \ \ \left. +j\left( 1-2b(i+1) \right)\left(
4-\left( 1-2b(i+3) \right)\left( 2-\left( 1-2b(i+5) \right) \right)
\right) \right] \\
\end{align}\]</span></p>
<h3 id="qam-2">256QAM</h3>
<p><br/>对于256QAM调制，八位比特<span
class="math inline">\(b(i),b(i+1),b(i+2),b(i+3),b(i+4),b(i+5),b(i+6),b(i+7)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[\begin{align}
\nonumber &amp; x=\frac{1}{\sqrt{170}}\left[ \left( 1-2b(i)
\right)\left( 8-\left( 1-2b(i+2) \right)\left( 4-\left( 1-2b(i+4)
\right)\left( 2-\left( 1-2b(i+6) \right) \right) \right) \right) \right.
\\
\ \ \ \nonumber &amp; \left. +j\left( 1-2b(i+1) \right)\left( 8-\left(
1-2b(i+3) \right)\left( 4-\left( 1-2b(i+5) \right)\left( 2-\left(
1-2b(i+7) \right) \right) \right) \right) \right]  
\end{align}\]</span></p>
<h2 id="伪随机序列生成">伪随机序列生成</h2>
<p><br/>伪随机序列由长度为31的Gold序列定义。长度为<span
class="math inline">\({ {M}_{\text{PN}}}\)</span>的输出序列<span
class="math inline">\(c(n)\)</span>，其中<span
class="math inline">\(n=0,1,...,{
{M}_{\text{PN}}}-1\)</span>，由下式定义</p>
<p><span class="math display">\[\begin{align}
\nonumber &amp; c(n)=\left( { {x}_{1}}(n+{ {N}_{C}})+{ {x}_{2}}(n+{
{N}_{C}}) \right)\bmod 2 \\
\nonumber &amp; { {x}_{1}}(n+31)=\left( { {x}_{1}}(n+3)+{ {x}_{1}}(n)
\right)\bmod 2 \\
\nonumber &amp; { {x}_{2}}(n+31)=\left( { {x}_{2}}(n+3)+{
{x}_{2}}(n+2)+{ {x}_{2}}(n+1)+{ {x}_{2}}(n) \right)\bmod 2  
\end{align}\]</span></p>
<p>其中<span class="math inline">\({
{N}_{C}}=1600\)</span>，第一m序列应由<span class="math inline">\({
{x}_{1}}(0)=1,{
{x}_{1}}(n)=0,n=1,2,...,30\)</span>初始化。第二m序列的初始化由<span
class="math inline">\({ {c}_{\text{init}}}=\sum\nolimits_{i=0}^{30}{ {
{x}_{2}}(i)\cdot { {2}^{i}}}\)</span>表示，其值取决于序列的应用。</p>
<h2 id="ofdm基带信号生成">OFDM基带信号生成</h2>
<p><br/>对除PRACH以外的任何物理信道或信号，对于一个子帧内的OFDM符号<span
class="math inline">\(l\)</span>，天线端口<span
class="math inline">\(p\)</span>和子载波间隔配置<span
class="math inline">\(\mu\)</span>下的时间连续信号<span
class="math inline">\(s_{l}^{(p,\mu )}\left( t
\right)\)</span>定义为</p>
<p><span class="math display">\[s_{l}^{(p,\mu )}\left( t
\right)=\sum\limits_{k=-\left\lfloor N_{\text{RB}}^{\mu
}N_{\text{sc}}^{\text{RB}}/2 \right\rfloor }^{ { {\left\lceil
N_{\text{RB}}^{\mu }N_{\text{sc}}^{\text{RB}}/2 \right\rceil }^{
{}}}-1}{a_{ {k}&#39;,\bar{l}}^{(p,\mu )}\cdot { {e}^{j2\pi \left( k+{
{k}_{0}} \right)\Delta f\left( t-{ {N}_{\text{CP},\bar{l}}}\cdot {
{T}_{\text{s}}} \right)}}}\]</span></p>
<p>其中<span class="math inline">\(0\le t&lt;\left( {
{N}_{\text{u}}}+N_{\text{CP},\bar{l}}^{\mu } \right){
{T}_{\text{s}}}\)</span>且${k}'=k+/{2}; $。The value of <span
class="math inline">\({ {k}_{0}}\)</span> is such that the lowest
numbered subcarrier in a resource block for subcarrier spacing
configuration <span class="math inline">\(\mu\)</span> coincides with
the lowest numbered subcarrier in a resource block for any subcarrier
spacing configuration less than <span
class="math inline">\(\mu\)</span>.</p>
<p>子载波间隔配置<span
class="math inline">\(\mu\)</span>下的OFDM符号<span
class="math inline">\(l\)</span>的起始位置为</p>
<p><span class="math display">\[ t_{\text{start},l}^{\mu }=\left\{
\begin{array}{*{35}{l}}
   0 &amp; l=0  \\
   t_{\text{start},\bar{l}-1}^{\mu }+\left( {
{N}_{\text{u}}}+N_{\text{CP,}l-1}^{\mu } \right)\cdot { {T}_{\text{s}}}
&amp; \text{otherwise}  \\
\end{array} \right.\]</span></p>
<p>其中</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; { {N}_{\text{u}}}=2048\kappa \cdot { {2}^{-\mu }} \\
\nonumber &amp; { {N}_{\text{CP},\bar{l}}}=\left\{
\begin{array}{*{35}{l}}
   512\kappa \cdot { {2}^{-\mu }} &amp; \text{extended cyclic
prefix}  \\
   144\kappa \cdot { {2}^{-\mu }}+16\kappa  &amp; \text{normal cyclic
prefix and }l=0\text{ or }l=7  \\
   144\kappa \cdot { {2}^{-\mu }} &amp; \text{otherwise}  \\
\end{array} \right.\cdot { {2}^{\mu }} \\
\nonumber  &amp;   
\end{align}\]</span></p>
<p>对于PRACH，天线端口<span
class="math inline">\(p\)</span>下的时间连续信号<span
class="math inline">\(s_{l}^{(p,\mu )}\left( t
\right)\)</span>定义为</p>
<p><span class="math display">\[s_{l}^{(p,\mu )}\left( t
\right)=\sum\limits_{k=-\left\lfloor { {L}_{\text{RA}}}/2 \right\rfloor
}^{ { {\left\lceil { {L}_{\text{RA}}}/2 \right\rceil }^{ {}}}-1}{a_{ {
{k}&#39;}}^{(p,\text{RA})}\cdot { {e}^{j2\pi \left( k+{ {k}_{0}}
\right)\Delta { {f}_{\text{RA}}}\left( t-{ {N}_{\text{CP},l}}\cdot {
{T}_{\text{s}}} \right)}}}\]</span></p>
<p>其中<span class="math inline">\(0\le t&lt;\left( {
{N}_{\text{u}}}+N_{\text{CP},l}^{\mu } \right){
{T}_{\text{s}}}\)</span>且${k}'=k+/{2}; $。</p>
<p>一个子帧内PRACH前导的起始位置由<span
class="math inline">\(t_{\text{start}}^{\text{RA}}\)</span>给定，假设子帧始于<span
class="math inline">\(t=0\)</span>，其中</p>
<ul>
<li>对于<span class="math inline">\(\Delta { {f}_{\text{RA}}}\in \left\{
15,30,60,120 \right\}\text{ kHz}\)</span>，有<span
class="math inline">\(t_{\text{start}}^{\text{RA}}=t_{\text{start},l}^{\mu
}\)</span> for some <span class="math inline">\(l\)</span></li>
</ul>
<p><span class="math inline">\({ {L}_{\text{RA}}}\)</span>和<span
class="math inline">\({ {N}_{\text{u}}}\)</span>在3.3.3节给定，并且有${
{N}<em>{,l}}=N</em>{}^{}+n$，其中</p>
<ul>
<li>对于<span class="math inline">\(\Delta { {f}_{\text{RA}}}\in \left\{
1.25,5 \right\}\text{ kHz}\)</span>，<span
class="math inline">\(n=0\)</span></li>
<li>对于<span class="math inline">\(\Delta { {f}_{\text{RA}}}\in \left\{
15,30,60,120 \right\}\text{ kHz}\)</span>，<span
class="math inline">\(n\)</span> is the number of times the interval
<span class="math inline">\(\left[
t_{\text{start}}^{\text{RA}},t_{\text{start}}^{\text{RA}}+\left(
N_{\text{u}}^{\text{RA}}+N_{\text{CP}}^{\text{RA}} \right){
{T}_{\text{s}}} \right]\)</span> overlaps with either time instance 0 or
time instance <span class="math inline">\(\left( {\Delta { {f}_{\max }}{
{N}_{\text{f}}}}/{500}\; \right)\cdot { {T}_{\text{s}}}=0.5\text{
ms}\)</span> in a subframe</li>
</ul>
<h2 id="调制和上变频">调制和上变频</h2>
<p><br/>对于天线端口<span
class="math inline">\(p\)</span>和子载波间隔配置<span
class="math inline">\(\mu\)</span>，复值OFDM基带信号调制和上变频至载频<span
class="math inline">\({ {f}_{0}}\)</span></p>
<p><span class="math display">\[\operatorname{Re}\left\{ s_{l}^{(p,\mu
)}\left( t \right)\cdot { {e}^{j2\pi { {f}_{0}}t}} \right\}\]</span></p>
<h1 id="上行链路">上行链路</h1>
<p><br/>为避免本页面过于冗长，<a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-ul/">上行链路另起一页</a>。</p>
<h1 id="下行链路">下行链路</h1>
<p><br/>为避免本页面过于冗长，<a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation-dl/">下行链路另起一页</a>。</p>
<h1 id="相关链接">相关链接</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a>
<a
href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a>
<a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a>
<a
href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>2017-09</tag>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>5G-NR物理层协议v1.0.0</title>
    <url>/2017/09/11/nr-v100-l1-index/</url>
    <content><![CDATA[<p>3GPP 5G 物理层规范共有7个文档：</p>
<p><a
href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">3GPP
TS 38.201: “NR物理层概述”</a> <a
href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">3GPP TS
38.202: “NR物理层提供的服务”</a> <a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">3GPP
TS 38.211: “NR物理信道与调制”</a> <a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">3GPP
TS 38.212: “NR复用与信道编码”</a> <a
href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">3GPP
TS 38.213: “NR物理层过程（控制）”</a> 3GPP TS 38.214:
“NR物理层过程（数据）” 3GPP TS 38.215: “NR物理层测量”</p>
<p>本系列博文较全面地呈现了<a
href="http://marshallcomm.cn/tags/2017-09/"><strong>3GPP Rel-15 V1.0.0
(2017-09)</strong></a>版本前5份规范的各个章节。其中“NR复用与信道编码”规范只关注了与polar
code相关的比特级处理，LDPC码相关处理待日后整理。</p>
<hr />
<p>是时候开启一个新的系列了。前面已写有两个系列，一是<a
href="http://marshallcomm.cn/categories/Polar-Code/">极化码技术系列</a>
，二是<a
href="http://marshallcomm.cn/categories/3GPP-PolarCode/">极化码在3GPP标准化的进展系列</a>。今天开启的是<a
href="http://marshallcomm.cn/categories/5G-NR/">5G-NR系列</a>。</p>
<span id="more"></span>
<p>3GPP 5G标准化时间表为：</p>
<ul>
<li>2017年12月完成NSA（non-standalone）标准，并于2018年3月冻结；</li>
<li>2018年6月完成SA（standalone）标准，并于2018年9月再次冻结。</li>
</ul>
<p>如今距离NSA标准的完成只剩下3个月，9月以后的会议更加密集。</p>
<ul>
<li>2017-09-11 <strong>3GPP RAN#77</strong></li>
<li>2017-09-18 3GPP RAN1-NR#3</li>
<li>2017-10-09 3GPP RAN1#90b</li>
<li>2017-11-27 3GPP RAN1#91</li>
<li>2017-12-18 <strong>3GPP RAN#78</strong></li>
</ul>
<p>9月7日3GPP把Rel-15的7份物理层规范全部更新到 <a
href="http://marshallcomm.cn/tags/2017-09/"><strong>V1.0.0
(2017-09)</strong></a>版本，本博客对5G-NR物理层规范的跟踪就从这个版本开始。</p>
<p>这个系列的时效性很强。9月7日才更新的规范，9月11日又开RAN全会。这意味着Rel-15规范很快又会更新并填充新的内容，V1.0.0
(2017-09)版本很快就会“过时”。规范内容翻译得比较仓促，也不得不仓促，先整理了前5份文档。</p>
<p>无论是LTE、LTE-A，还是LTE-A Pro，其规范文档编号都是36.xxx系列，5G
NR则使用新的编号——38.xxx系列。</p>
<p>此时的5G-NR规范仍然只是初稿，仍有大量内容等待填充，以往内容最多的211协议目前也只不过30几页。但从目前已有的内容中，也可大致窥见到5G
NR物理层与LTE有多大的不同，又有多大的相似。</p>
<p>Marshall</p>
<p>2017年9月11日</p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>2017-09</tag>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>5G-NR物理层过程（控制）v1.0.0</title>
    <url>/2017/09/11/nr-v100-l1-procedure-control/</url>
    <content><![CDATA[<h1 id="同步过程">同步过程</h1>
<h2 id="小区搜索">小区搜索</h2>
<p><br/>小区搜索过程是UE获得和小区时间和频率同步，并检测物理层小区ID的过程。</p>
<p>为进行小区搜索，UE需接收下列同步信号：主同步信号（PSS）和辅同步信号（SSS）。主辅同步信号在TS
38.211中定义。</p>
<p>UE应假设PBCH、PSS和SSS在连续的OFDM符号内接收，并且形成SS/PBCH块。</p>
<p>对于半帧中的SS/PBCH块，候选SS/PBCH块的OFDM
符号索引号和第1个OFDM符号索引根据下列情况确定：</p>
<ul>
<li>15 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{2, 8} +
14*n。对于载波频率小于等于3 GHz，有n=0, 1。对于载波频率大于3 GHz且小于6
GHz，有n=0, 1, 2, 3。</li>
<li>30 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{4, 8, 16, 20} +
28*n。对于载波频率小于等于3 GHz，有n=0。对于载波频率大于3 GHz且小于6
GHz，有n=0, 1。</li>
<li>30 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{2, 8} +
14*n。对于载波频率小于等于3 GHz，有n=0, 1。对于载波频率大于3 GHz且小于6
GHz，有n=0, 1, 2, 3。</li>
<li>120 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{4, 8, 16, 20}
+ 28*n。对于载波频率大于6 GHz，有n=0, 1, 2, 3, 5, 6, 7, 8, 10, 11, 12,
13, 15, 16, 17, 18。</li>
<li>240 KHz子载波间隔：候选SS/PBCH块的第1个OFDM符号有索引{8, 12, 16, 20,
32, 36, 40, 44} + 56*n。对于载波频率大于6 GHz，有n=0, 1, 2, 3, 5, 6, 7,
8。</li>
</ul>
<p>一个半帧中的候选SS/PBCH块在时域上以升序从0到$ L-1 ]<span
class="math inline">\(进行编号。对于\)</span> L=4 <span
class="math inline">\(或\)</span> L&gt;4 <span
class="math inline">\(，UE应根据与每个半帧内SS/PBCH块索引一一对应的PBCH中传输的DM-RS序列索引，分别确定SS/PBCH块索引的2或3个LSB比特。对于\)</span>
L=64
$，UE应根据高层参数[<em>SSB-index-explicit</em>]确定每个半帧内SS/PBCH块索引的3
个MSB比特。</p>
<span id="more"></span>
<blockquote>
<p>注：DM-RS序列索引在TS 38.211中定义。</p>
</blockquote>
<p>UE可通过参数[<em>SSB-transmitted-SIB1</em>]被配置，SS/PBCH块索引对于与SS/PBCH块对应重叠的REs，UE不应接收其他信号或信道。UE也可通过高层参数[<em>SSB-transmitted</em>]在每个服务小区被配置，SS/PBCH块索引对于与SS/PBCH块对应重叠的REs，UE不应接收其他信号或信道。[通过[<em>SSB-transmitted</em>]配置优先于通过[<em>SSB-transmitted-SIB1</em>]配置。]</p>
<blockquote>
<p>注：May be removed and captured in 38.211。</p>
</blockquote>
<p>对于每个服务小区中SS/PBCH块的接收，UE可以在每个服务小区通过高层参数[<em>SSB-timing</em>]每半帧周期性地被配置。如果对于SS/PBCH块的接收，UE没有每半帧被周期性配置，则UE应假设以半帧为周期。UE应假设在服务小区中，对于所有SS/PBCH块，周期是相同的。</p>
<p>对于初始小区的选择，UE可以假设SS/PBCH块半帧出现的周期为2帧。</p>
<h2 id="传输定时调整">传输定时调整</h2>
<h2 id="timing-for-secondary-cell-activation-deactivation">Timing for
secondary cell activation / deactivation</h2>
<h1 id="无线链路监测">无线链路监测</h1>
<p><br/>为了向高层指示失步/同时状态，UE应监测主小区的下行无线链路质量。</p>
<p>此处暂省略300+字，具体内容详见原文档。</p>
<h1 id="链路重配置过程">[链路重配置过程]</h1>
<p><br/>在一个服务小区内为了[RSRP x
或SINR]测量，UE可以配置一组CSI-RS资源或一组SS/PBCH块索引。UE应假设SCI-RS采用非零传输功率。每个CSI-RS资源参数通过高层信令配置，这些参数包括：</p>
<ul>
<li>[资源配置]</li>
<li>[周期]</li>
<li>[天线端口]</li>
<li>[传输功率]</li>
<li>[伪随机序列生成参数]</li>
<li>[QCL参数]</li>
<li>[…]</li>
</ul>
<blockquote>
<p>[Editor’s note: For reconfiguration request, there are also no
existing agreements to describe preamble retransmissions, or the window
for the UE to receive a response, or the configuration of the CORESET
where the PDCCH scheduling the response is transmitted, etc.]</p>
</blockquote>
<h1 id="上行功率控制">上行功率控制</h1>
<h2 id="物理上行共享信道">物理上行共享信道</h2>
<h3 id="ue-behaviour">UE behaviour</h3>
<h3 id="power-headroom">Power headroom</h3>
<h2 id="物理上行控制信道">物理上行控制信道</h2>
<h3 id="ue-behaviour-1">UE behaviour</h3>
<h2 id="探测参考信号">探测参考信号</h2>
<h2 id="物理随机接入信道">物理随机接入信道</h2>
<p><br/>在时隙$ i <span
class="math inline">\(内，对于服务小区\)</span>c$，UE通过下式确定PRACH传输功率：</p>
<p><span class="math display">\[ { {P}_{\text{PRACH,c}}}(i)=\min {
{\left\{ { {P}_{\text{CMAX},c}}(i),\ { {P}_{\text{PRACH,target}}}+P{
{L}_{c}} \right\}}^{ {}}} \]</span> dBm</p>
<p>其中$ { {P}<em>{}}(i) <span class="math inline">\(是在TS
38.133中定义的服务小区\)</span>c<span
class="math inline">\(中在时隙\)</span>i<span
class="math inline">\(的UE传输功率，\)</span> { {P}</em>{}} <span
class="math inline">\(由高层参数[*preambleReceivedTargetPower*]提供，\)</span>
P{ {L}<em>{c}} <span
class="math inline">\(是UE计算对于服务小区\)</span>c<span
class="math inline">\(的路径损耗，单位为dB。为了确定\)</span> {
{P}</em>{}}(i) <span class="math inline">\(，UE计算路径损耗\)</span> P{
{L}<em>{c}} <span
class="math inline">\(。路径损耗根据SS/PBCH块得到，即\)</span> P{
{L}</em>{c}} $ = <em>SS/PBCHBlockPower</em> – higher layer filtered
RSRP，其中<em>SS/PBCHBlockPower</em>由[<em>SystemInformationBlockType1</em>]提供，RSRP在TS
38.215中定义，高层滤波器配置在TS 38.331中定义。</p>
<p>如果一个随机接入响应窗口内，如5.2小节中描述，UE不接收随机接入响应，随机接入响应包含了一个与UE发送的前导序列对应的前导ID，UE将为随后的PRACH传输确定传输功率，如果有的话。[TS
38.321]</p>
<h2 id="载波聚合">载波聚合</h2>
<h2 id="双连接">双连接</h2>
<h1 id="随机接入过程">随机接入过程</h1>
<p><br/>在进行初始化的物理随机接入过程之前，L1应该从高层接收一组SS/PBCH块索引，并且应向高层提供一组对应的RSRP测量。</p>
<p>在进行初始化的物理随机接入过程之前，L1应该从高层接收以下信息：</p>
<ul>
<li>PRACH传输参数（PRACH前导格式，用于PRACH传输的时域和频域资源）</li>
<li>用于决定小区中根序列及其在前导序列集合中的循环移位值的参数（逻辑根序列表格索引、循环移位$
N_{}^{ {}} $、集合类型（受限集合和非受限集合））</li>
</ul>
<p>从物理层来看，物理层随机接入过程包括PRACH中随机接入前导（Msg1）的发送，PDSCH（Msg2）中的随机接入响应（RAR），PUSCH中的Msg3和PDSCH中的Msg4。</p>
<blockquote>
<p>批注：Tentatively, Msg3 and Msg4 will be described as part of the RA
procedure due to various differences from PUSCH/PDSCH after RRC
connection.</p>
</blockquote>
<h2 id="随机接入前导">随机接入前导</h2>
<p><br/>L1过程通过PRACH传输请求被触发，PRACH传输由高层来配置。高层对PRACH传输的配置包括：</p>
<ul>
<li>对于PRACH传输，高层参数[<em>PRACH-config</em>]提供的配置</li>
<li>对于PRACH传输，高层参数[<em>PRACH-cell-idx</em>]提供的服务小区索引</li>
<li>前导索引，PRACH格式，$ { {P}_{}} $，相应的RA-RNTI，PRACH资源</li>
<li>[对于PRACH传输的重复次数，也作为请求的一部分由高层指示]</li>
</ul>
<p>A PRACH format is selected from the preamble sequence set for the
corresponding preamble sequence length using the preamble index.</p>
<p>在所指示的PRACH资源上，前导使用所选择的PRACH格式发送，传输功率为4.4节描述的$
{ {P}_{}} $。</p>
<h3 id="定时">定时</h3>
<h2 id="随机接入响应">随机接入响应</h2>
<p><br/>UE通过高层[TS
38.321]在一个约束窗内，采用所指示的RA-RNTI尝试检测PDCCH。窗口开始于最早的CORESET的符号。对于Type1-PDCCH公共搜索空间，UE配置了CORESET。Type1-PDCCH公共搜索空间在7.1节进行了定义，在前导序列传输的[X]个符号之后。随机接入响应窗口的长度由高层参数[<em>rar-windowlength</em>]提供。</p>
<p>如果UE在时间窗内，采用所指示的RA-RNTI和相应的DL-SCH传输块检测PDCCH，UE将传输块传递到高层。高层分析传输块并向物理层指示上行授权。如果在时间窗内，UE不检测PDCCH或相应的DL-SCH传输块，则UE过程如[TS
38.321]中的描述。</p>
<p>如果UE在时间窗内，采用所指示的RA-RNTI和相应的DL-SCH传输块检测PDCCH，高层指示[XX]比特的上行授权到物理层。这一过程被称为物理层的随机接入响应（RAR）。UE应接收PDCCH和PDSCH。作为包含[<em>SystemInformationBlockType1</em>]的PDSCH的接收，PDSCH包含了具有相同子载波间隔和相同CP的DL-SCH传输块。[XX]比特的内容，开始于MSB，结束于LSB：</p>
<p>[…]</p>
<blockquote>
<p>批注：To be completed as the contents of the UL grant in the RAR are
determined.</p>
</blockquote>
<h2 id="msg3-pusch">Msg3 PUSCH</h2>
<p><br/>对于Msg3
PUSCH传输，高层参数[<em>msg3-tp</em>]指示UE是否应用变换预编码（transform
precoding），变换预编在[TS 38.211]中描述。</p>
<p>Msg3 PUSCH传输的子载波间隔由高层参数[<em>msg3-scs</em>]提供。</p>
<p>UE应在相同的服务小区内发送PRACH和Msg3 PUSCH。</p>
<h2 id="msg4-pdsch">Msg4 PDSCH</h2>
<p><br/>Msg4 PDSCH传输的子载波间隔与PDSCH相同提供随机接入响应。</p>
<h1 id="ue-procedure-for-reporting-control-information">UE procedure for
reporting control information</h1>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/095958597.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h2 id="ue-procedure-for-harq-ack-codebook-determination">UE procedure
for HARQ-ACK codebook determination</h2>
<h3 id="cbg-based-harq-ack-codebook-determination">CBG-based HARQ-ACK
codebook determination</h3>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/100046252.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p>批注：[HARQ-ACK information bits] The actual number of bits to report
can be different – e.g. with bundling.</p>
</blockquote>
<blockquote>
<p>批注：[initial] For retransmissions, decisions are needed for
dynamic/semi-static HARQ-ACK codebook determination and for possible DCI
indications.</p>
</blockquote>
<blockquote>
<p>批注：[a] No decision currently exists for 2 TBs (e.g. same number
for both TBs, separately configured number per TB).</p>
</blockquote>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/100136656.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p>批注：[the UE determines whether or not a CBG is retransmitted based
on a corresponding value of the CBGTI field] Placeholder text – will be
modified once the specifics for the operation of the CBGTI field are
decided.</p>
</blockquote>
<blockquote>
<p>批注：[<em>cc</em>] LTE terminology for indicating semi-static
codebook (can be modified once RRC terminology is finalized). Statement
in brackets will be removed if only semi-static codebook determination
is supported for CBG-based HARQ-ACK.</p>
</blockquote>
<h2 id="ue-procedure-for-reporting-harq-ack">UE procedure for reporting
HARQ-ACK</h2>
<h3 id="harq-ack-reporting-in-physical-uplink-shared-channel">HARQ-ACK
reporting in physical uplink shared channel</h3>
<h3 id="harq-ack-reporting-in-physical-uplink-control-channel">HARQ-ACK
reporting in physical uplink control channel</h3>
<p><br/>如果UE没有配置为PUSCH和PUCCH同时传输，并且UE不传输PUSCH，且不传输CSI或positive/negative
SR，则UE应传输HARQ-ACK</p>
<ul>
<li>on PUCCH format 0 if
<ul>
<li>the transmission is over 1 symbol or 2 symbols,</li>
<li>the number of HARQ-ACK information bits is 1 or 2<br />
</li>
</ul></li>
<li>on PUCCH format 1 if
<ul>
<li>the transmission is over 4 or more symbols,</li>
<li>the number of HARQ-ACK information bits is 1 or 2<br />
</li>
</ul></li>
<li>on PUCCH format 2 if
<ul>
<li>the transmission is over 1 symbol or 2 symbols,</li>
<li>the number of HARQ-ACK information bits is more than 2<br />
</li>
</ul></li>
<li>on PUCCH format 3 if
<ul>
<li>the transmission is over 4 or more symbols,</li>
<li>the number of HARQ-ACK information bits is more than [2]</li>
</ul></li>
</ul>
<p>UE在一个时隙的$ N_{}^{,} <span
class="math inline">\(个符号上发送一个或多个PUCCH。对于PUCCH传输时隙的参考，如果UE在PDCCH上检测DCI格式，其中PDCCH通过一定数量的符号调度PDSCH的接收，这些符号的最后一个符号在时隙\)</span>n<span
class="math inline">\(内，则UE应在PUCCH传输中提供相应的HARQ-ACK信息，PUCCH在时隙\)</span>
n+k <span
class="math inline">\(上传输，其中\)</span>k$是时隙数，且通过DCI格式中的[DL-data-DL-acknowledgement]字段来指示。[DL-data-DL-acknowledgement]字段的值映射到时隙数的值，见Table
9.1.2-1中的定义。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/100506146.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p>批注：Dynamic indication of symbols within a slot or joint indication
of time/frequency/code PUCCH resources is not precluded pending specific
RAN1 agreements.</p>
</blockquote>
<h4 id="harq-ack-procedures-for-one-configured-serving-cell">HARQ-ACK
procedures for one configured serving cell</h4>
<h4
id="harq-ack-procedures-for-more-than-one-configured-serving-cell">HARQ-ACK
procedures for more than one configured serving cell</h4>
<h2 id="ue-procedure-for-reporting-sr">UE procedure for reporting
SR</h2>
<blockquote>
<p>批注：There are currently no RAN1 decisions on SR transmission
structure and possible multiplexing with HARQ-ACK/CSI</p>
</blockquote>
<h2 id="ue-procedure-for-reporting-multiple-uci-types">UE procedure for
reporting multiple UCI types</h2>
<h2 id="uci-repetition-procedure">UCI repetition procedure</h2>
<h1 id="ue-procedure-for-receiving-control-information">UE procedure for
receiving control information</h1>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/100635180.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>UE应在一个或多个激活的服务小区或BWPs上，根据相应的搜索空间，在一个或多个CORESET内监听一组PDCCH候选集，其中搜索空间是根据所监听的DCI格式译码每个PDCCH候选。</p>
<blockquote>
<p>批注：[PDCCH候选集] Can add more details later, such as per activated
cell, etc., based on respective agreements.</p>
</blockquote>
<blockquote>
<p>批注：[DCI formats] Can remain applicable for potentially mapping
multiple DCI formats to a same size (as for LTE DCI format 0 and DCI
format 1A).</p>
</blockquote>
<h2
id="ue-procedure-for-determining-physical-downlink-control-channel-assignment-in-common-search-space">UE
procedure for determining physical downlink control channel assignment
in common search space</h2>
<p><br/>UE应在下列一个或多个搜索空间内监听PDCCH候选：</p>
<ul>
<li>a Type0-PDCCH common search space for a DCI format scrambled by a
[SI-RNTI] on a primary cell</li>
<li>a Type1-PDCCH common search space for a DCI format scrambled by a
[RA-RNTI] on a primary cell</li>
<li>a Type2-PDCCH common search space for a DCI format scrambled by a
[INT-RNTI]</li>
</ul>
<p>[UE应在没有载波指示域的情况下监听PDCCH候选。]</p>
<p>如果UE通过高层配置为以[INT-RNTI]加扰的CRC译码DCI格式，UE也在[每个服务小区]配置[一组]PRBs和一组OFDM符号。如果UE以[INT-RNTI]加扰的CRC检测DCI格式，UE可以假设不在这组PRBs和OFDM符号中发送。UE通过高层参数[<em>int-PRBs-unit</em>]配置PRBs的指示粒度。UE通过高层参数[<em>int-symbols-unit</em>]配置OFDM符号的指示粒度。UE通过高层参数[<em>Num-PDCCH-cand</em>]来配置对于DCI格式的每个CCE聚合等级下的若干PDCCH候选，其中DCI格式使用[INT-RNTI]加扰的CRC。</p>
<blockquote>
<p>批注：[[INT-RNTI]加扰的CRC] Eventually, this DCI format will have a
name and will be used to remove this part.</p>
</blockquote>
<h2
id="ue-procedure-for-determining-physical-downlink-control-channel-assignment-in-ue-specific-search-space">UE
procedure for determining physical downlink control channel assignment
in UE-specific search space</h2>
<p><br/>对于每个服务小区，高层信令给UE配置$ Q $个CORESETs。对于CORESET
<span class="math inline">\(q\)</span>，$ 0q&lt;Q $，配置包括：</p>
<ul>
<li>高层参数[<em>CORESET-start-symb</em>]提供第1个OFDM符号</li>
<li>高层参数[<em>CORESET-time-duration</em>]提供若干连续的OFDM符号</li>
<li>高层参数[<em>CORESET-freq-dom</em>]提供一组RBs集合</li>
<li>高层参数[<em>CORESET-trans-type</em>]提供CCE-to-REG映射</li>
<li>对于交织的CCE-to-REG映射，高层参数[<em>CORESET-REG-bundle-size</em>]提供REG
bundle大小</li>
<li>[高层参数[<em>CORESET-QCL-ConfigId</em>]提供天线端口quasi-collocation]</li>
</ul>
<p>对于非交织的CCE-to-REG映射，REG bundle大小等于6。UE可以假设一个REG
bundle内的所有REGs上传输的PDCCH应用相同的预编码。</p>
<blockquote>
<p>批注：[对于非交织的CCE-to-REG映射，REG bundle大小等于6。] Can be
updated if additional REG bundle sizes are defined for non-interleaved
transmissions.</p>
</blockquote>
<p>每个CORESET包含一组从0到$ { {N}<em>{,q}}-1 <span
class="math inline">\(编号的CCEs，其中\)</span> { {N}</em>{,q}}
$是CORESET <span class="math inline">\(q\)</span>中的CCEs个数。</p>
<p>UE所监听的PDCCH候选集定义在PDCCH UE特定搜索空间。PDCCH
UE特定搜索空间在聚合等级$ L{ 1, 2, 4, 8 } <span
class="math inline">\(上定义为，对于CCE聚合等级\)</span>L$的一组PDCCH候选。对于一个DCI格式，UE在每个服务小区内通过高层参数[<em>Num-PDCCH-cand</em>]配置每个CCE聚合等级
下的一组PDCCH候选。</p>
<blockquote>
<p>批注：[UE特定搜索空间] Cross-carrier scheduling, including use of
different numerologies, will be captured through the search space.</p>
</blockquote>
<p>对于连续接收（non-DRX）模式操作，UE在根据$ { {W}<em>{ q}}
$个符号周期，监听CORESET <span
class="math inline">\(q\)</span>中的PDCCH候选，其中对于CORESET <span
class="math inline">\(q\)</span>的$ { {W}</em>{ q}}
$由高层参数[<em>CORESET-monitor-period</em>]配置。</p>
<blockquote>
<p>批注：[CORESET-monitor-period] Need to determine how, based on
configured periodicity, UE monitors PDCCH and whether it is a CORESET or
a search space parameter. Allowed periodicity values (symbol, slot,
etc.) are TBD (start from 1 symbol) and are to be included in RAN2
specifications (likely not visible in 38.213).</p>
</blockquote>
<p>服务小区中的UE，在UE特定的搜索空间监听PDCCH的候选，如果UE没有配置载波指示域，UE应在没有载波指示域的条件下监听PDCCH候选。服务小区中的UE，在UE
特定的搜索空间监听PDCCH的候选，如果UE配置了载波指示域，则UE应使用载波指示域监听PDCCH候选。</p>
<p>如果UE在另一个服务小区上被配置使用对应于secondary
cell的载波指示来监听PDCCH候选，UE不希望在secondary
cell上监听PDCCH候选。[对于服务小区中的UE监听PDCCH候选，UE应至少在同一个服务小区内监听PDCCH候选。]</p>
<h1 id="bandwidth-part-operation">Bandwidth part operation</h1>
<blockquote>
<p>批注：It will be attempted, as much as possible, to capture all BWP
operation aspects in this Subclause while referring to other Subclauses.
Potential overlaps will be resolved as the specifications progress.</p>
</blockquote>
<blockquote>
<p>批注：Text is subject to revisions as descriptions in 38.211 and
38.213 are aligned.</p>
</blockquote>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/101231694.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p>批注：[BWP] Regarding the CSS, he agreement for its configuration is
ambiguous. Which CSS configuration is it (e.g. is it for SIB scheduling,
for GC-PDCCH, … )? Maybe multiple CSS configurations are applicable as
in Subclause 10.1? Reference to primary cell in the agreement points to
SIB scheduling but clarification is needed for what the CSS intends to
do, whether the respective BWP is same as the BWP from initial access,
….</p>
</blockquote>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/101316284.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p>批注：[transmissions] Activation/deactivation by DCI requires further
details (e.g. it is FFS whether it is a DCI scheduling PDSCH/PUSCH in a
configured BWP ot a separate DCI). Deactivation by a timer also requires
further details (e.g. no separate specifications if it is the DRX
timer). A separate timer may be described in RRC specifications as for
the DRX timer.</p>
</blockquote>
<h1
id="configurations-and-assumptions-independent-of-physical-channels-or-signals">Configurations
and assumptions independent of physical channels or signals</h1>
<blockquote>
<p>批注：[signals] To capture reserved resources, potential LTE-NR
coexistence aspects, etc. For LTE-NR DC with single UL Tx, corresponding
agreement regarding configuration of DL-reference UL/DL configuration
affects only LTE operation, is suitable for LTE specifications, and is
not captured (unless it is extended to NR-NR DC).</p>
</blockquote>
<h1 id="相关链接">相关链接</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a>
<a
href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a>
<a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a>
<a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a></p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>2017-09</tag>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>5G-NR复用与信道编码v1.0.0</title>
    <url>/2017/09/10/nr-v100-l1-multiplexing-coding/</url>
    <content><![CDATA[<blockquote>
<p>Marshall注：本博文重点关注了与polar code相关的比特级处理。</p>
</blockquote>
<h1 id="物理信道映射">物理信道映射</h1>
<h2 id="上行">上行</h2>
<h2 id="下行">下行</h2>
<h1 id="通用流程">通用流程</h1>
<p><br/>来自MAC层/向MAC层输出的数据和控制流经过编/解码，通过无线传输链路提供传输和控制服务。信道编码方案是错误检测、错误纠正、速率匹配、交织以及传输信道或控制信息向物理信道映射/从物理信道到传输信道控制信息解析或分离的组合方案。</p>
<h2 id="crc计算">CRC计算</h2>
<p><br/>CRC计算单元的输入比特为$ { {a}<em>{0}},{ {a}</em>{1}},{
{a}<em>{2}},{ {a}</em>{3}},...,{ {a}<em>{A-1}} <span
class="math inline">\(，奇偶校验比特为\)</span> { {p}</em>{0}},{
{p}<em>{1}},{ {p}</em>{2}},{ {p}<em>{3}},...,{ {p}</em>{L-1}} <span
class="math inline">\(。\)</span> A <span
class="math inline">\(是输入序列的长度，\)</span> L
$是校验比特数目。校验比特由下列循环生成多项式之一产生：</p>
<ul>
<li>$ { {g}_{}}( D )=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{18}}+{ {D}^{17}}+{
{D}^{14}}+{ {D}^{11}}+{ {D}^{10}}+{ {D}^{7}}+{ {D}^{6}}+{ {D}^{5}}+{
{D}^{4}}+{ {D}^{3}}+D+1] <span class="math inline">\(，CRC长度\)</span>
L=24 $；</li>
<li>$ { {g}_{}}( D )=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{6}}+{ {D}^{5}}+D+1]
<span class="math inline">\(，CRC长度\)</span> L=24 $；</li>
<li>$ { {g}_{}}( D )=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{21}}+{ {D}^{20}}+{
{D}^{17}}+{ {D}^{15}}+{ {D}^{13}}+{ {D}^{12}}+{ {D}^{8}}+{ {D}^{4}}+{
{D}^{2}}+D+1] <span class="math inline">\(，CRC长度\)</span> L=24
$；</li>
<li>$ { {g}_{}}( D )=[{ {D}^{16}}+{ {D}^{12}}+{ {D}^{5}}+D+1] <span
class="math inline">\(，CRC长度\)</span> L=16 $</li>
</ul>
<span id="more"></span>
<p>编码以系统方式进行，这意味着在二元域GF（2）中，多项式：</p>
<p><span class="math display">\[ { {a}_{0}}{ {D}^{A+L-1}}+{ {a}_{1}}{
{D}^{A+L-2}}+...+{ {a}_{A-1}}{ {D}^{L}}+{ {p}_{0}}{ {D}^{L-1}}+{
{p}_{1}}{ {D}^{L-2}}+...+{ {p}_{L-2}}{ {D}^{1}}+{ {p}_{L-1}}
\]</span></p>
<p>除以相应的CRC生成多项式时，余数等于0。</p>
<p>添加CRC之后的比特序列表示为$ { {b}<em>{0}},{ {b}</em>{1}},{
{b}<em>{2}},{ {b}</em>{3}},...,{ {b}<em>{B-1}} <span
class="math inline">\(，其中\)</span> { {b}</em>{0}},{ {b}<em>{1}},{
{b}</em>{2}},{ {b}<em>{3}},...,{ {b}</em>{B-1}} <span
class="math inline">\(。\)</span> { {a}<em>{k}} <span
class="math inline">\(和\)</span> { {b}</em>{k}} $的关系如下：</p>
<p>$ { {b}<em>{k}}={ {a}</em>{k}} <span
class="math inline">\(，对于\)</span> k=0,1,2,...,A-1 $</p>
<p>$ { {b}<em>{k}}={ {p}</em>{k-A}} <span
class="math inline">\(，对于\)</span> k=A,A+1,A+2,...,A+L-1 $</p>
<h2 id="码块分段和crc添加">码块分段和CRC添加</h2>
<h3 id="ldpc码">LDPC码</h3>
<p><br/>码块分段单元的输入序列为$ { {b}<em>{0}},{ {b}</em>{1}},{
{b}<em>{2}},{ {b}</em>{3}},...,{ {b}<em>{B-1}} <span
class="math inline">\(，其中\)</span> B&gt;0 <span
class="math inline">\(]。如果\)</span> B <span
class="math inline">\(大于最大码块大小\)</span> { {K}</em>{}} <span
class="math inline">\(，则输入序列要进行分段操作，并且每个分段后的码块要添加一个\)</span>
L=24 $的CRC序列。最大码块大小为：</p>
<ul>
<li>$ { {K}_{}}=8448 $。</li>
</ul>
<p>码块总数C根据以下方法计算得到：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/224129593.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>当$ C <span class="math inline">\(时，码块分段的输出比特为\)</span> {
{c}<em>{r0}},{ {c}</em>{r1}},{ {c}<em>{r2}},{ {c}</em>{r3}},...,{
{c}<em>{r( { {K}</em>{r}}-1 )}} <span
class="math inline">\(，其中\)</span> 0r&lt;C <span
class="math inline">\(为码块号，\)</span> { {K}_{r}} <span
class="math inline">\(是码块\)</span>r$中的比特数。</p>
<p>每个码块中的比特数为（仅适用于$ C $的情况）：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/224305482.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p>注：蓝色高亮部分是华为批注：K+ and K_ are kept for now. May update
after TBS is finalized.</p>
</blockquote>
<p>在Table 5.3.2-1中所有列举的集合中找到Z的最小值，表示为$ { {Z}<em>{c}}
<span class="math inline">\(。\)</span> { {K}</em>{b}} <span
class="math inline">\(且对于LDPC BG#1有\)</span> K=22{ {Z}<em>{c}} <span
class="math inline">\(，对于LDPC BG#2有\)</span> K=10{ {Z}</em>{c}}
$。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/224439978.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h2 id="信道编码">信道编码</h2>
<h3 id="polar-coding">Polar coding</h3>
<p><br/>对于给定的码块，信道编码器的输入序列为$ { {c}<em>{0}},{
{c}</em>{1}},{ {c}<em>{2}},{ {c}</em>{3}},...,{ {c}<em>{K-1}} <span
class="math inline">\(，其中\)</span> K <span
class="math inline">\(是编码器的输入比特数。编码后的比特序列表示为\)</span>
{ {d}</em>{0}},{ {d}<em>{1}},{ {d}</em>{2}},...,{ {d}_{N-1}} <span
class="math inline">\(，其中\)</span> N={ {2}^{n}} <span
class="math inline">\(并且\)</span>n$的值由下列方法决定：</p>
<p>$ E $表示速率匹配输出序列长度，由2.4.1节给出；</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/224919697.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>比特序列$ { {c}<em>{0}},{ {c}</em>{1}},{ {c}<em>{2}},{
{c}</em>{3}},...,{ {c}<em>{K-1}} <span
class="math inline">\(采用下列方法被交织成比特序列\)</span>
c</em>{0}<sup>{'},c_{1}</sup>{'},c_{2}<sup>{'},c_{3}</sup>{'},...,c_{K-1}^{'}
$:</p>
<p>$ { { {c}'}<em>{k}}={ {c}</em>{( k )}} <span
class="math inline">\(，\)</span> k=0,1,...,K-1 $</p>
<p>其中交织pattern $ ( k ) $由下列方法确定：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/225102168.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>其中$ <em>{IL}^{}( m ) <span class="math inline">\(由Table
5.3.1-1和\)</span> K</em>{IL}^{} $给定。</p>
<blockquote>
<p>华为批注：The value of $ K_{IL}^{} $ equals to Kmax = max(140, max
DCI payload size in Rel-15 + 20) + 24. The value of $ K_{IL}^{} $ should
be the number of elements in Table 5.3.1-1, in the end. According to the
current Tabel 5.3.1-1, $ K_{IL}^{}=224 $.</p>
</blockquote>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/225628499.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p>华为批注：Contents of this table will be updated. Current working
assumption is the pattern for nFAR=21 in R1-1712167.</p>
</blockquote>
<p>Polar序列$ <em>{0}^{ { {N}</em>{}}-1}={ Q_{0}^{ {
{N}<em>{}}},Q</em>{1}^{ { {N}<em>{}}},...,Q</em>{ { {N}<em>{}}-1}^{ {
{N}</em>{}}} } <span
class="math inline">\(由Table5.3.1-2给定，其中\)</span> 0Q_{i}^{ {
{N}<em>{}}}-1 <span
class="math inline">\(表示Polar编码前的一个比特索引，其中\)</span>
i=0,1,...,N-1 <span class="math inline">\(，\)</span> { {N}</em>{}}=1024
<span class="math inline">\(。Polar序列\)</span> <em>{0}^{ {
{N}</em>{}}-1} <span class="math inline">\(按可靠性升序排列\)</span> W(
Q_{0}^{ { {N}<em>{}}} )&lt;W( Q</em>{1}^{ { {N}<em>{}}} )&lt;...&lt;W(
Q</em>{ { {N}<em>{}}-1}^{ { {N}</em>{}}} ) <span
class="math inline">\(，其中\)</span> W( Q_{i}^{ { {N}<em>{}}} ) <span
class="math inline">\(表示比特索引\)</span> Q</em>{i}^{ { {N}_{}}}
$的可靠性。</p>
<p>对任意码块编码为$ N <span
class="math inline">\(比特，都使用相同的Polar序列\)</span>
<em>{0}^{N-1}={
Q</em>{0}<sup>{N},Q_{1}</sup>{N},Q_{2}<sup>{N},...,Q_{N-1}</sup>{N} }
<span class="math inline">\(。Polar序列\)</span> <em>{0}^{N-1} <span
class="math inline">\(是Polar序列\)</span> </em>{0}^{ { {N}<em>{}}-1}
<span class="math inline">\(的子集，即值小于\)</span> N <span
class="math inline">\(的所有\)</span> Q</em>{i}^{ { {N}<em>{}}} <span
class="math inline">\(元素，并且按可靠性升序排列\)</span> W(
Q</em>{0}^{N} )&lt;W( Q_{1}^{N} )&lt;W( Q_{2}^{N} )&lt;...&lt;W(
Q_{N-1}^{N} ) $。</p>
<p>$ <em>{I}^{N} <span class="math inline">\(是Polar序列\)</span>
</em>{0}^{N-1} <span class="math inline">\(中的一组比特索引，\)</span>
<em>{F}^{N} <span class="math inline">\(是Polar序列\)</span>
</em>{0}^{N-1} <span
class="math inline">\(中其他比特的索引，其中\)</span> <em>{I}^{N} <span
class="math inline">\(和\)</span> </em>{F}^{N} <span
class="math inline">\(由2.4.1.1节给定，\)</span> | <em>{I}^{N} |=K+{
{n}</em>{PC}} <span class="math inline">\(，\)</span> | <em>{F}^{N}
|=N-| </em>{I}^{N} | <span class="math inline">\(，\)</span> { {n}_{PC}}
$是奇偶校验比特数。</p>
<p>$ { {}<em>{N}}={ {( { {}</em>{2}} )}^{n}} <span
class="math inline">\(表示矩阵\)</span> { {}<em>{2}} <span
class="math inline">\(的\)</span>n<span
class="math inline">\(次克罗内克积，其中\)</span> { {}</em>{2}}=$。</p>
<p>$ { {}<em>{j}} <span class="math inline">\(表示矩阵\)</span> {
{}</em>{N}} <span class="math inline">\(的第\)</span> j <span
class="math inline">\(行，比特索引\)</span> j=0,1,...,N-1 <span
class="math inline">\(。\)</span> w( { {}<em>{j}} ) <span
class="math inline">\(表示\)</span> { {}</em>{j}} <span
class="math inline">\(的行重，即\)</span> { {}<em>{j}} <span
class="math inline">\(中1的个数。奇偶校验比特的索引集合表示为\)</span>
</em>{PC}^{N} <span class="math inline">\(，其中\)</span> | <em>{PC}^{N}
|={ {n}</em>{PC}} <span class="math inline">\(。\)</span> ( {
{n}<em>{PC}}-n</em>{PC}^{wm} ) <span
class="math inline">\(个奇偶校验比特位于\)</span> <em>{I}^{N} <span
class="math inline">\(中的\)</span> ( { {n}</em>{PC}}-n_{PC}^{wm} )
<span class="math inline">\(个最不可靠的比特索引。其他\)</span>
n_{PC}^{wm} <span class="math inline">\(个奇偶校验比特位于\)</span>
<em>{I}^{N} <span
class="math inline">\(中行重最小的比特索引，其中\)</span> </em>{I}^{N}
<span class="math inline">\(表示\)</span> <em>{I}^{N} <span
class="math inline">\(中\)</span> ( | </em>{I}^{N} |-{ {n}<em>{PC}} )
<span class="math inline">\(个最可靠的比特索引；如果\)</span>
</em>{I}^{N} <span
class="math inline">\(中具有相同最小行重的比特索引大于\)</span>
n_{PC}^{wm} <span class="math inline">\(，则其他\)</span> n_{PC}^{wm}
<span class="math inline">\(个奇偶校验比特位于\)</span> <em>{I}^{N}
<span class="math inline">\(中可靠性最高且行重最小的\)</span>
n</em>{PC}^{wm} $个比特索引。</p>
<p>根据下列方法生成序列$ =$：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/230721744.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p>注：粉色部分为华为批注：Need further agreements on how to set the
values for frozen bits.</p>
</blockquote>
<p>通过$ = <span
class="math inline">\(编码器得到输出序列，表示为\)</span>
=$。编码在二元域GF（2）进行。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/230838961.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/230901215.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/230923898.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/230947989.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h3 id="ldpc码-1">LDPC码</h3>
<h2 id="速率匹配">速率匹配</h2>
<p><br/>Polar
code速率匹配包括子块交织、比特收集和比特交织。速率匹配的输入序列为$ {
{d}<em>{0}},{ {d}</em>{1}},{ {d}<em>{2}},...,{ {d}</em>{N-1}} <span
class="math inline">\(，输出序列表示为\)</span> { {f}<em>{0}},{
{f}</em>{1}},{ {f}<em>{2}},...,{ {f}</em>{E-1}} $。</p>
<h3 id="polar-code速率匹配">polar code速率匹配</h3>
<h4 id="子块交织">子块交织</h4>
<p><br/>编码比特$ { {d}<em>{0}},{ {d}</em>{1}},{ {d}<em>{2}},...,{
{d}</em>{N-1}} <span
class="math inline">\(就是子块交织器的输入比特。编码比特\)</span> {
{d}<em>{0}},{ {d}</em>{1}},{ {d}<em>{2}},...,{ {d}</em>{N-1}} <span
class="math inline">\(被分为32个子块。子块交织器的输出比特为\)</span> {
{y}<em>{0}},{ {y}</em>{1}},{ {y}<em>{2}},...,{ {y}</em>{N-1}}
$，用以下方式生成：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/083917955.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>其中子块交织pattern $ P( i ) $由Table 5.4.1.1-1给定。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/084010857.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>比特索引集合$ <em>{I}^{N} <span class="math inline">\(和\)</span>
</em>{F}^{N} <span class="math inline">\(由下列方法确定，其中\)</span> K
<span class="math inline">\(，\)</span> { {n}<em>{PC}} <span
class="math inline">\(和\)</span> </em>{0}^{N-1} $由2.3.1节定义：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/084158930.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="比特选择">比特选择</h4>
<p><br/><span
class="math inline">\(E\)</span>表示速率匹配输出序列的长度，速率匹配输出序列为$
{ {e}_{k}} <span class="math inline">\(，\)</span> k=0,1,2,...,E-1
$由以下方法产生：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/084308555.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="比特交织">比特交织</h4>
<p><br/>比特序列$ { {e}<em>{0}},{ {e}</em>{1}},{ {e}<em>{2}},...,{
{e}</em>{E-1}} <span
class="math inline">\(通过以下方法被交织为比特序列\)</span> {
{f}<em>{0}},{ {f}</em>{1}},{ {f}<em>{2}},...,{ {f}</em>{E-1}} $：</p>
<p>$ T <span class="math inline">\(表示满足\)</span> T( T+1 )/2E
$的最小整数；</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/084452223.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/084546055.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h3 id="ldpc-code速率匹配">LDPC code速率匹配</h3>
<h2 id="码块级联">码块级联</h2>
<h1 id="上行传输信道和控制信息">上行传输信道和控制信息</h1>
<h2 id="随机接入信道">随机接入信道</h2>
<h2 id="上行共享信道">上行共享信道</h2>
<h3 id="传输块crc添加">传输块CRC添加</h3>
<p><br/>每个上行共享信道（UL-SCH）传输块都通过一个CRC来提供错误检测。</p>
<p>使用整个传输块来计算CRC校验比特。送到L1的一个传输块的比特表示为$ {
{a}<em>{0}},{ {a}</em>{1}},{ {a}<em>{2}},{ {a}</em>{3}},...,{
{a}<em>{A-1}} <span class="math inline">\(，校验比特为\)</span> {
{p}</em>{0}},{ {p}<em>{1}},{ {p}</em>{2}},{ {p}<em>{3}},...,{
{p}</em>{L-1}} <span class="math inline">\(，其中\)</span>A<span
class="math inline">\(是传输块大小，\)</span>L<span
class="math inline">\(是校验比特数。按照TS
38.321规范中的定义，最低顺序信息比特\)</span> { {a}_{0}}
$被映射到最高有效位。</p>
<p>校验比特按照2.1节的描述进行计算并添加到UL-SCH传输块中，若$ A&gt;3824
<span class="math inline">\(则设置\)</span>L<span
class="math inline">\(为24比特，使用生成多项式\)</span> { {g}<em>{}}( D
) <span class="math inline">\(；否则设置\)</span> L <span
class="math inline">\(为16比特，使用生成多项式\)</span> { {g}</em>{}}( D
) $。</p>
<h3 id="码块分段及crc添加">码块分段及CRC添加</h3>
<p><br/>码块分段的输入比特流记为$ { {b}<em>{0}},{ {b}</em>{1}},{
{b}<em>{2}},{ {b}</em>{3}},...,{ {b}_{B-1}} <span
class="math inline">\(，其中\)</span>B$表示传输块的比特数目（包含CRC）。</p>
<p>码块分段及CRC添加根据2.2.1节中描述进行。</p>
<p>码块分段之后的比特流记为$ { {c}<em>{r0}},{ {c}</em>{r1}},{
{c}<em>{r2}},{ {c}</em>{r3}},...,{ {c}<em>{r( { {K}</em>{r}}-1 )}} <span
class="math inline">\(，其中\)</span> r <span
class="math inline">\(是码块号，\)</span> { {K}_{r}} <span
class="math inline">\(是码块\)</span> r $的比特数。</p>
<h3 id="ul-sch的信道编码">UL-SCH的信道编码</h3>
<p><br/>码块比特流送至信道编码模块。码块中的比特表示为$ { {c}<em>{r0}},{
{c}</em>{r1}},{ {c}<em>{r2}},{ {c}</em>{r3}},...,{ {c}<em>{r( {
{K}</em>{r}}-1 )}} <span class="math inline">\(，其中\)</span>r<span
class="math inline">\(是码块号，\)</span> { {K}_{r}} <span
class="math inline">\(是码块\)</span> r <span
class="math inline">\(的比特数。码块的总数表示为\)</span> C
$，每个码块根据2.3.2节的描述独立地进行LDPC编码。</p>
<p>编码之后的比特流表示为$ { {d}<em>{0}},{ {d}</em>{1}},{
{d}<em>{2}},...,{ {d}</em>{N-1}} <span
class="math inline">\(，其中对于LDPC BG#1，有\)</span> N=66{ {Z}<em>{c}}
<span class="math inline">\(；对于LDPC BG#2，有\)</span> N=50{
{Z}</em>{c}} <span class="math inline">\(。\)</span> { {Z}_{c}}
$的值由2.2.1节给定。</p>
<h3 id="速率匹配-1">速率匹配</h3>
<h3 id="码块级联-1">码块级联</h3>
<h3 id="数据和控制复用">数据和控制复用</h3>
<h3 id="信道交织">信道交织</h3>
<h2 id="上行控制信息">上行控制信息</h2>
<h3 id="pucch上的控制信息">PUCCH上的控制信息</h3>
<h4 id="uci比特序列生成">UCI比特序列生成</h4>
<blockquote>
<p>[Editor notes: This section will capture how to generate the UCI bit
stream $ { {a}<em>{0}},{ {a}</em>{1}},{ {a}<em>{2}},{ {a}</em>{3}},...,{
{a}_{A-1}} $.]</p>
</blockquote>
<h4 id="crc添加">CRC添加</h4>
<p><br/>如果UCI负载大小$ A <span
class="math inline">\(，整个负载都用于计算CRC校验比特。负载比特表示为\)</span>
{ {a}<em>{0}},{ {a}</em>{1}},{ {a}<em>{2}},{ {a}</em>{3}},...,{
{a}<em>{A-1}} <span class="math inline">\(，校验比特表示为\)</span> {
{p}</em>{0}},{ {p}<em>{1}},{ {p}</em>{2}},{ {p}<em>{3}},...,{
{p}</em>{L-1}} <span class="math inline">\(，其中\)</span>A<span
class="math inline">\(是UCI负载大小，\)</span>L$是校验比特数。</p>
<blockquote>
<p>华为注：$ { {A}_{0}} $的值有待进一步确定。</p>
</blockquote>
<p>校验比特按照2.1节的描述进行计算并添加，并设置$ L <span
class="math inline">\(为X比特，得到添加CRC后的比特序列\)</span> {
{b}<em>{0}},{ {b}</em>{1}},{ {b}<em>{2}},{ {b}</em>{3}},...,{ {b}_{B-1}}
<span class="math inline">\(，其中\)</span> B=A+L $。</p>
<blockquote>
<p>对于X的值，华为注：Depending on further agreements, different CRC
lengths may be applied for different payload sizes.</p>
</blockquote>
<blockquote>
<p>[Editor notes: need to define the relationship between $ {
{b}<em>{0}},{ {b}</em>{1}},{ {b}<em>{2}},{ {b}</em>{3}},...,{
{b}<em>{B-1}} $ and $ { {c}</em>{0}},{ {c}<em>{1}},{ {c}</em>{2}},{
{c}<em>{3}},...,{ {c}</em>{K-1}} $.]</p>
</blockquote>
<h4 id="uci的信道编码">UCI的信道编码</h4>
<p><br/>信息比特流送至信道编码模块。信息比特流表示为$ { {c}<em>{0}},{
{c}</em>{1}},{ {c}<em>{2}},{ {c}</em>{3}},...,{ {c}_{K-1}} <span
class="math inline">\(，其中\)</span> K $是比特数。</p>
<p>如果$ 12K <span
class="math inline">\(，则信息比特根据2.3.1节通过Polar进行编码，若\)</span>
E-K&gt;192 <span class="math inline">\(，则设置\)</span> { {n}<em>{}}=10
<span class="math inline">\(，\)</span> { {I}</em>{IL}}=0 <span
class="math inline">\(，\)</span> { {n}<em>{PC}}=3 <span
class="math inline">\(，\)</span> n</em>{PC}^{wm}=1 <span
class="math inline">\(； 若\)</span> E-K <span
class="math inline">\(，则设置\)</span> n_{PC}^{wm}=0 <span
class="math inline">\(，其中\)</span>E$是由3.3.1.4节给定的速率匹配输出序列长度。</p>
<blockquote>
<p>关于$ 12K $，华为批注：Need to capture the agreements for K &lt; 12
in the future.</p>
</blockquote>
<p>如果$ K&gt;22 <span
class="math inline">\(，则信息比特根据2.3.1节通过Polar进行编码，设置\)</span>
{ {n}<em>{}}=10 <span class="math inline">\(，\)</span> {
{I}</em>{IL}}=0 <span class="math inline">\(，\)</span> { {n}<em>{PC}}=0
<span class="math inline">\(，\)</span> n</em>{PC}^{wm}=0 $。</p>
<p>编码之后的比特流表示为$ { {d}<em>{0}},{ {d}</em>{1}},{ {d}<em>{2}},{
{d}</em>{3}},...,{ {d}_{N-1}} <span
class="math inline">\(，其中\)</span>N$是编码比特数。</p>
<h4 id="速率匹配-2">速率匹配</h4>
<h3 id="pusch上的控制信息">PUSCH上的控制信息</h3>
<h4 id="uci比特序列生成-1">UCI比特序列生成</h4>
<blockquote>
<p>[Editor notes: This section will capture how to generate the UCI bit
stream $ { {a}<em>{0}},{ {a}</em>{1}},{ {a}<em>{2}},{ {a}</em>{3}},...,{
{a}_{A-1}} $.]</p>
</blockquote>
<h4 id="crc添加-1">CRC添加</h4>
<p><br/>如果UCI负载大小$ A <span
class="math inline">\(，整个负载都用于计算CRC校验比特。负载比特表示为\)</span>
{ {a}<em>{0}},{ {a}</em>{1}},{ {a}<em>{2}},{ {a}</em>{3}},...,{
{a}<em>{A-1}} <span class="math inline">\(，校验比特表示为\)</span> {
{p}</em>{0}},{ {p}<em>{1}},{ {p}</em>{2}},{ {p}<em>{3}},...,{
{p}</em>{L-1}} <span class="math inline">\(，其中\)</span>A<span
class="math inline">\(是UCI负载大小，\)</span>L$是校验比特数。</p>
<blockquote>
<p>华为注：$ { {A}_{0}} $的值有待进一步确定。</p>
</blockquote>
<p>校验比特按照2.1节的描述进行计算并添加，并设置<span
class="math inline">\(L\)</span>为X比特，得到添加CRC后的比特序列$ {
{b}<em>{0}},{ {b}</em>{1}},{ {b}<em>{2}},{ {b}</em>{3}},...,{ {b}_{B-1}}
<span class="math inline">\(，其中\)</span> B=A+L $。</p>
<blockquote>
<p>对于X的值，华为注：Depending on further agreements, different CRC
lengths may be applied for different payload sizes.</p>
</blockquote>
<blockquote>
<p>[Editor notes: need to define the relationship between $ {
{b}<em>{0}},{ {b}</em>{1}},{ {b}<em>{2}},{ {b}</em>{3}},...,{
{b}<em>{B-1}} $ and $ { {c}</em>{0}},{ {c}<em>{1}},{ {c}</em>{2}},{
{c}<em>{3}},...,{ {c}</em>{K-1}} $.]</p>
</blockquote>
<h4 id="uci的信道编码-1">UCI的信道编码</h4>
<p><br/>信息比特流送至信道编码模块。信息比特流表示为$ { {c}<em>{0}},{
{c}</em>{1}},{ {c}<em>{2}},{ {c}</em>{3}},...,{ {c}_{K-1}} <span
class="math inline">\(，其中\)</span> K $是比特数。</p>
<p>如果$ 12K <span
class="math inline">\(，则信息比特根据2.3.1节通过Polar进行编码，若\)</span>
E-K&gt;192 <span class="math inline">\(，则设置\)</span> { {n}<em>{}}=10
<span class="math inline">\(，\)</span> { {I}</em>{IL}}=0 <span
class="math inline">\(，\)</span> { {n}<em>{PC}}=3 <span
class="math inline">\(，\)</span> n</em>{PC}^{wm}=1 <span
class="math inline">\(；若\)</span> E-K <span
class="math inline">\(，则设置\)</span> n_{PC}^{wm}=0 <span
class="math inline">\(，其中\)</span>E$是由3.3.2.4节给定的速率匹配输出序列长度。</p>
<blockquote>
<p>关于$ 12K $，华为批注：Need to capture the agreements for K &lt; 12
in the future.</p>
</blockquote>
<p>如果$ K&gt;22 <span
class="math inline">\(，则信息比特根据2.3.1节通过Polar进行编码，设置\)</span>
{ {n}<em>{}}=10 <span class="math inline">\(，\)</span> {
{I}</em>{IL}}=0 <span class="math inline">\(，\)</span> { {n}<em>{PC}}=0
<span class="math inline">\(，\)</span> n</em>{PC}^{wm}=0 $。</p>
<p>编码之后的比特流表示为$ { {d}<em>{0}},{ {d}</em>{1}},{ {d}<em>{2}},{
{d}</em>{3}},...,{ {d}_{N-1}} <span
class="math inline">\(，其中\)</span>N$是编码比特数。</p>
<h4 id="速率匹配-3">速率匹配</h4>
<h1 id="下行传输和控制信息">下行传输和控制信息</h1>
<h2 id="广播信息">广播信息</h2>
<p><br/>Figure
7.1-1给出了BCH传输信道的处理结构。到达编码单元的数据，每80ms最多有一个传输块，其编码流程如下：</p>
<ul>
<li>向传输块添加CRC</li>
<li>信道编码</li>
<li>速率匹配</li>
</ul>
<blockquote>
<p>华为批注：Will add the figure later.</p>
</blockquote>
<h3 id="传输块crc添加-1">传输块CRC添加</h3>
<p><br/>BCH传输块都通过CRC来进行错误检测。</p>
<p>使用整个传输块来计算CRC校验比特。（<em>华为批注：This sentence may be
updated depending on further agreements, e.g. if some PBCH payload bits
are not used to generate CRC bits.</em>）送到L1的一个传输块的比特表示为$
{ {a}<em>{0}},{ {a}</em>{1}},{ {a}<em>{2}},{ {a}</em>{3}},...,{
{a}<em>{A-1}} <span class="math inline">\(，校验比特为\)</span> {
{p}</em>{0}},{ {p}<em>{1}},{ {p}</em>{2}},{ {p}<em>{3}},...,{
{p}</em>{L-1}} <span class="math inline">\(，其中\)</span>A<span
class="math inline">\(是传输块大小，\)</span>L<span
class="math inline">\(是校验比特数。按照TS
38.321规范中的定义，最低顺序信息比特\)</span> { {a}_{0}}
$被映射到最高有效位。</p>
<p>校验比特按照2.1节的描述进行计算并添加到BCH传输块中，设置$ L <span
class="math inline">\(为24比特，使用生成多项式\)</span> { {g}<em>{}}( D
) <span class="math inline">\(，得到添加CRC后的序列为\)</span> {
{b}</em>{0}},{ {b}<em>{1}},{ {b}</em>{2}},{ {b}<em>{3}},...,{
{b}</em>{B-1}} <span class="math inline">\(，其中\)</span> B=A+L $。</p>
<blockquote>
<p>[Editor notes: need to define the relationship between and , pending
on further agreements.]</p>
</blockquote>
<h3 id="信道编码-1">信道编码</h3>
<p><br/>信息比特送至信道编码模块。信息比特表示为$ { {c}<em>{0}},{
{c}</em>{1}},{ {c}<em>{2}},{ {c}</em>{3}},...,{ {c}<em>{K-1}} <span
class="math inline">\(，其中\)</span>K<span
class="math inline">\(为比特数。它们根据2.3.1节进行Polar编码，设置\)</span>
{ {n}</em>{}}=9 <span class="math inline">\(，\)</span> { {I}<em>{IL}}=1
<span class="math inline">\(，\)</span> { {n}</em>{PC}}=0 <span
class="math inline">\(，\)</span> n_{PC}^{wm}=0 $。</p>
<p>编码之后的比特序列表示为$ { {d}<em>{0}},{ {d}</em>{1}},{
{d}<em>{2}},{ {d}</em>{3}},...,{ {d}_{N-1}} <span
class="math inline">\(，其中\)</span>N$为编码比特数。</p>
<h3 id="速率匹配-4">速率匹配</h3>
<h2 id="下行共享信道和寻呼信道">下行共享信道和寻呼信道</h2>
<h3 id="传输块crc添加-2">传输块CRC添加</h3>
<p><br/>每个传输块都通过CRC来进行错误检测。</p>
<p>使用整个传输块来计算CRC校验比特。送到L1的一个传输块的比特表示为$ {
{a}<em>{0}},{ {a}</em>{1}},{ {a}<em>{2}},{ {a}</em>{3}},...,{
{a}<em>{A-1}} <span class="math inline">\(，校验比特为\)</span> {
{p}</em>{0}},{ {p}<em>{1}},{ {p}</em>{2}},{ {p}<em>{3}},...,{
{p}</em>{L-1}} <span class="math inline">\(，其中\)</span>A<span
class="math inline">\(是传输块大小，\)</span>L<span
class="math inline">\(是校验比特数。按照TS
38.321规范中的定义，最低顺序信息比特\)</span> { {a}_{0}}
$被映射到最高有效位。</p>
<p>校验比特按照2.1节的描述进行计算并添加到UL-SCH传输块中，若$ A&gt;3824
<span class="math inline">\(，则设置\)</span> L <span
class="math inline">\(为24比特，使用生成多项式\)</span> { {g}<em>{}}( D
) <span class="math inline">\(；否则设置\)</span> L <span
class="math inline">\(为16比特，使用生成多项式\)</span> { {g}</em>{}}( D
) $。</p>
<h3 id="码块分段及crc添加-1">码块分段及CRC添加</h3>
<p><br/>码块分段的输入比特流记为$ { {b}<em>{0}},{ {b}</em>{1}},{
{b}<em>{2}},{ {b}</em>{3}},...,{ {b}_{B-1}} <span
class="math inline">\(，其中\)</span> B
$表示传输块的比特数目（包含CRC）。</p>
<p>码块分段及CRC添加根据2.2.1节中描述进行。</p>
<p>码块分段之后的比特流记为$ { {c}<em>{r0}},{ {c}</em>{r1}},{
{c}<em>{r2}},{ {c}</em>{r3}},...,{ {c}<em>{r( { {K}</em>{r}}-1 )}} <span
class="math inline">\(，其中\)</span>r<span
class="math inline">\(是码块号，\)</span> { {K}_{r}} <span
class="math inline">\(是码块\)</span>r$的比特数。</p>
<h3 id="信道编码-2">信道编码</h3>
<p><br/>码块比特流送至信道编码模块。码块中的比特表示为$ { {c}<em>{r0}},{
{c}</em>{r1}},{ {c}<em>{r2}},{ {c}</em>{r3}},...,{ {c}<em>{r( {
{K}</em>{r}}-1 )}} <span class="math inline">\(，其中\)</span>r<span
class="math inline">\(是码块号，\)</span> { {K}_{r}} <span
class="math inline">\(是码块\)</span>r<span
class="math inline">\(的比特数。码块的总数表示为\)</span> C
$，每个码块根据2.3.2节的描述独立地进行LDPC编码。</p>
<p>编码之后的比特流表示为$ { {d}<em>{0}},{ {d}</em>{1}},{
{d}<em>{2}},...,{ {d}</em>{N-1}} <span
class="math inline">\(，其中对于LDPC BG#1，有\)</span> N=66{ {Z}<em>{c}}
<span class="math inline">\(；对于LDPC BG#2，有\)</span> N=50{
{Z}</em>{c}} <span class="math inline">\(。\)</span> { {Z}_{c}}
$的值由2.2.1节给定。</p>
<h3 id="速率匹配-5">速率匹配</h3>
<h2 id="下行控制信息">下行控制信息</h2>
<p><br/>DCI传输下行和上行调度信息，对非周期CQI报告的请求，或对一个小区和RNTI的上行功率控制命令。</p>
<blockquote>
<p>华为批注：This sentence will be updated later, pending on other
agreed usages of DCI.</p>
</blockquote>
<p>Figure 7.3-1给出了DCI的处理结构。编码流程如下：</p>
<ul>
<li>信息单元复用</li>
<li>CRC添加</li>
<li>信道编码</li>
<li>速率匹配</li>
</ul>
<blockquote>
<p>华为批注：Will add the figure later.</p>
</blockquote>
<h3 id="dci格式">DCI格式</h3>
<h3 id="crc添加-2">CRC添加</h3>
<p><br/>DCI传输通过CRC进行错误检测。</p>
<p>使用整个DCI负载计算CRC校验比特。DCI负载比特表示为$ { {a}<em>{0}},{
{a}</em>{1}},{ {a}<em>{2}},{ {a}</em>{3}},...,{ {a}<em>{A-1}} <span
class="math inline">\(，校验比特表示为\)</span> { {p}</em>{0}},{
{p}<em>{1}},{ {p}</em>{2}},{ {p}<em>{3}},...,{ {p}</em>{L-1}} <span
class="math inline">\(，其中\)</span> A <span
class="math inline">\(为DCI负载比特大小，\)</span> L $为校验比特数。</p>
<p>校验比特按照2.1节的描述进行计算并添加，并设置<span
class="math inline">\(L\)</span>为24比特，使用生成多项式$ { {g}<em>{}}(
D ) <span class="math inline">\(，得到添加CRC后的比特序列\)</span> {
{b}</em>{0}},{ {b}<em>{1}},{ {b}</em>{2}},{ {b}<em>{3}},...,{
{b}</em>{B-1}} <span class="math inline">\(，其中\)</span> B=A+L $。</p>
<blockquote>
<p>[Editor notes: need to define the relationship between $ {
{b}<em>{0}},{ {b}</em>{1}},{ {b}<em>{2}},{ {b}</em>{3}},...,{
{b}<em>{B-1}} $ and $ { {c}</em>{0}},{ {c}<em>{1}},{ {c}</em>{2}},{
{c}<em>{3}},...,{ {c}</em>{K-1}} $, pending on further agreements.]</p>
</blockquote>
<h3 id="信道编码-3">信道编码</h3>
<p><br/>信息比特送至信道编码模块。信息比特表示为$ { {c}<em>{0}},{
{c}</em>{1}},{ {c}<em>{2}},{ {c}</em>{3}},...,{ {c}<em>{K-1}} <span
class="math inline">\(，其中\)</span> K <span
class="math inline">\(是信息比特数，它们根据2.3.1节进行Polar编码，并设置\)</span>
{ {n}</em>{}}=9 <span class="math inline">\(，\)</span> { {I}<em>{IL}}=1
<span class="math inline">\(，\)</span> { {n}</em>{PC}}=0 <span
class="math inline">\(，\)</span> n_{PC}^{wm}=0 $。</p>
<p>编码之后的比特序列表示为$ { {d}<em>{0}},{ {d}</em>{1}},{
{d}<em>{2}},{ {d}</em>{3}},...,{ {d}_{N-1}} <span
class="math inline">\(，其中\)</span>N$为编码比特数。</p>
<h3 id="速率匹配-6">速率匹配</h3>
<h1 id="相关链接">相关链接</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a>
<a
href="http://marshallcomm.cn/2017/09/08/nr-v100-l1-service/">NR物理层提供的服务</a>
<a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a>
<a
href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>2017-09</tag>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>5G-NR物理层提供的服务v1.0.0</title>
    <url>/2017/09/08/nr-v100-l1-service/</url>
    <content><![CDATA[<h1 id="物理层的服务和功能">物理层的服务和功能</h1>
<h2 id="概述">概述</h2>
<p><br/>物理层向高层提供数据传输服务。</p>
<p>这些服务的接入是通过使用MAC子层的传输信道实现的。</p>
<p>传输块被定义为MAC层向物理层交付的数据，反之亦然。传输块在每一个TTI内进行交付（<em>注：这句话有待进一步讨论</em>）。</p>
<span id="more"></span>
<h2 id="l1功能概述">L1功能概述</h2>
<p><br/>正如3GPP TS
38.201规范中所提到的，物理层向高层提供数据传输服务。为了提供数据传输服务，物理层预期执行以下功能：</p>
<ul>
<li>传输信道的差错检测并指示给高层</li>
<li>传输信道的前向纠错（FEC）编码/解码</li>
<li>混合自动重传请求（HARQ）软合并</li>
<li>编码的传输信道到物理信道的速率匹配</li>
<li>编码的传输信道到物理信道的映射</li>
<li>物理信道的功率加权</li>
<li>物理信道的调制和解调</li>
<li>频域和时间同步</li>
<li>无线特性测量并指示给高层</li>
<li>MIMO天线处理</li>
<li>射频处理</li>
</ul>
<p>对于每个传输信道，L1功能的建模详见2.1和2.2节。</p>
<h1 id="ue的物理层模型">UE的物理层模型</h1>
<p><br/>5G-NR物理层模型capture以下与物理层相关的特性：</p>
<ul>
<li>向下传递到物理层或从物理层上传道高层数据的结构；</li>
<li>高层能够配置物理层的方法；</li>
<li>物理层向高层提供不同的指示（错误指示，信道质量指示等）</li>
</ul>
<h2 id="上行链路模型">上行链路模型</h2>
<h3 id="上行共享信道">上行共享信道</h3>
<p><br/>上行共享信道（UL-SCH）传输的物理层模型基于PUSCH物理层处理的相应链路。如Figure
5.1.1-1所示，用蓝色突出显示的部分是高层可配置的。</p>
<ul>
<li>高层数据传到或来自物理层</li>
<li>CRC和传输块错误指示</li>
<li>FEC和速率匹配</li>
<li>数据调制</li>
<li>映射到物理资源</li>
<li>多天线处理</li>
<li>L1控制信令的支持</li>
</ul>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/153200005.png" title="Figure 5.1.1-1: Physical-layer model for UL-SCH transmission" /></p>
<h3 id="随机接入信道">随机接入信道</h3>
<p><br/>随机接入信道传输的物理层模型通过PRACH前导格式来表征。PRACH前导格式由循环前缀，前导和保护时间间隔组成。</p>
<h2 id="下行链路模型">下行链路模型</h2>
<h3 id="下行共享信道">下行共享信道</h3>
<p><br/>下行共享信道传输的物理层模型基于PDSCH物理层处理的相应链路。如Figure
5.2.1-1所示，用蓝色突出显示的部分是高层可配置的。</p>
<ul>
<li>高层数据传到或来自物理层</li>
<li>CRC和传输块错误指示</li>
<li>FEC和速率匹配</li>
<li>数据调制</li>
<li>映射到物理资源</li>
<li>多天线处理</li>
<li>L1控制信令的支持</li>
</ul>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/153239209.png" title="Figure 5.2.1-1: Physical-layer model for DL-SCH transmission" /></p>
<h3 id="广播信道">广播信道</h3>
<p><br/>广播信道传输的物理层模型由一个固定预定义的传输格式来表征。BCH每80ms一个传输块。广播信道的物理层模型基于PBCH物理层处理的相应链路，如Figure
5.2.2-1所示。</p>
<ul>
<li>高层数据传到或来自物理层</li>
<li>CRC和传输块错误指示</li>
<li>FEC和速配匹配</li>
<li>数据调制</li>
<li>映射到物理资源</li>
<li>多天线处理</li>
</ul>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/153353556.png" title="Figure 5.2.2-1: Physical-layer model for BCH transmission" /></p>
<h3 id="寻呼信道">寻呼信道</h3>
<h1
id="parallel-transmission-of-simultaneous-physical-channels-and-srs">Parallel
transmission of simultaneous Physical channels and SRS</h1>
<p><br/>This clause describes the requirements from the UE to send and
receive on multiple Physical and Transport Channels and SRS
simultaneously depending on the service capabilities and
requirements.</p>
<h2 id="上行链路">上行链路</h2>
<h2 id="下行链路">下行链路</h2>
<h1 id="物理层提供的测量">物理层提供的测量</h1>
<h2 id="ue测量">UE测量</h2>
<p><br/>UE测量的列表和定义提供在3GPP TS 38.215中。</p>
<h1 id="相关链接">相关链接</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/09/08/nr-v100-general-description/">NR物理层概述</a>
<a
href="http://marshallcomm.cn/2017/09/09/nr-v100-l1-channel-modulation/">NR物理信道与调制</a>
<a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">NR复用与信道编码</a>
<a
href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-procedure-control/">NR物理层过程（控制）</a></p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>2017-09</tag>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>5G-NR物理信道与调制-下行链路v1.1.0</title>
    <url>/2017/10/24/nr-v110-l1-channel-modulation-dl/</url>
    <content><![CDATA[<p>上接<a
href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation/#下行链路">《5G-NR物理信道与调制v1.1.0》下行链路</a></p>
<h1 id="scope">Scope</h1>
<h1 id="references">References</h1>
<h1 id="definitions-symbols-and-abbreviations">Definitions, symbols and
abbreviations</h1>
<h1 id="帧结构与物理资源">帧结构与物理资源</h1>
<h1 id="通用函数">通用函数</h1>
<h1 id="上行链路">上行链路</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation-ul/">5G-NR物理信道与调制-上行链路v1.1.0</a></p>
<h1 id="下行链路">下行链路</h1>
<h2 id="概述">概述</h2>
<h3 id="物理信道概述">物理信道概述</h3>
<p><br/>下行链路物理信道对应于一组资源粒子（REs）的集合，用于承载源自高层的信息。本规范定义了如下下行信道：</p>
<ul>
<li>物理下行共享信道（PDSCH）</li>
<li>物理广播信道（PBCH）</li>
<li>物理下行控制信道（PDCCH）</li>
</ul>
<h3 id="物理信号概述">物理信号概述</h3>
<p><br/>下行物理信号是物理层使用的但不承载任何来自高层信息的信号。本规范定义了如下下行物理信号：</p>
<ul>
<li>解调参考信号（Demodulation reference signals，DM-RS）</li>
<li>相位跟踪参考信号（Phase-tracking reference signals，PT-RS）</li>
<li>信道状态信息参考信号（Channel-state information reference
signal，CSI-RS）</li>
<li>主同步信号（Primary synchronization signal，PSS）</li>
<li>辅同步信号（Secondary synchronization signal，SSS）</li>
</ul>
<span id="more"></span>
<h2 id="物理资源">物理资源</h2>
<p><br/>当接收下行链路发送的数据时，UE应假定采用第4章定义的帧结构和物理资源。</p>
<p>定义下列天线端口用于下行链路：</p>
<ul>
<li>PDSCH相关的DM-RS使用以1000为起始的天线端口</li>
<li>PDCCH相关的DM-RS使用以2000为起始的天线端口</li>
<li>CSI-RS使用以3000为起始的天线端口</li>
<li>SS/PBCH块传输使用以4000为起始的天线端口</li>
</ul>
<h2 id="物理信道">物理信道</h2>
<h3 id="pdsch">PDSCH</h3>
<h4 id="加扰">加扰</h4>
<p><br/>对于每个码字$ q <span
class="math inline">\(，UE应假定比特块\)</span> { {b}^{(q)}}(0),...,{
{b}<sup>{(q)}}(M_{}</sup>{(q)}-1) <span
class="math inline">\(，其中\)</span> M_{}^{(q)} <span
class="math inline">\(物理信道发送的码字\)</span> q <span
class="math inline">\(的比特数，在调制之前被加扰，根据以下方式得到加扰比特块\)</span>
{ {}^{(q)}}(0),...,{ {}<sup>{(q)}}(M_{}</sup>{}-1) $</p>
<p><span class="math display">\[ { {\tilde{b}}^{(q)}}(i)=\left( {
{b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2 \]</span></p>
<p>其中加扰序列$ { {c}^{(q)}}(i) $由5.2节给定。</p>
<h4 id="调制">调制</h4>
<p><br/>对于每个码字$ q <span
class="math inline">\(，UE应假定加扰比特块\)</span> { {}^{(q)}}(0),...,{
{}<sup>{(q)}}(M_{}</sup>{}-1) <span
class="math inline">\(按照5.1节的描述进行调制，调制方案详见Table
7.3.1.2-1，得到复值调制符号块\)</span> { {d}^{(q)}}(0),...,{
{d}<sup>{(q)}}(M_{}</sup>{}-1) $。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171024/194746226.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="层映射">层映射</h4>
<p><br/>UE应假定每个码字的复值调制符号根据Table
7.3.1.3-1被映射到1个或多个层。码字$ q <span
class="math inline">\(的复值调制符号\)</span> { {d}^{(q)}}(0),...,{
{d}<sup>{(q)}}(M_{}</sup>{}-1) <span
class="math inline">\(应被映射到层\)</span> x(i)={ {}^{T}} <span
class="math inline">\(，\)</span> i=0,1,...,M_{}^{}-1 <span
class="math inline">\(，其中\)</span> <span
class="math inline">\(是层数，\)</span> M_{}^{}
$是每层的调制符号数。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171026/130637932.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171026/130648907.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="预编码">预编码</h4>
<p><br/>预编码是透明的，</p>
<p><span class="math display">\[ \left[ \begin{matrix}
   \vdots   \\
   { {y}^{(p)}}(i)  \\
   \vdots   \\
\end{matrix} \right]=\left[ \begin{matrix}
   { {x}^{(0)}}(i)  \\
   \vdots   \\
   { {x}^{(\upsilon -1)}}(i)  \\
\end{matrix} \right]
\]</span></p>
<p>其中$ P=$。</p>
<h4 id="物理资源映射">物理资源映射</h4>
<p><br/>UE应假定用于物理信道传输的每个天线端口，复值符号块$ {
{y}^{(p)}}(0),...,{ {y}<sup>{(p)}}(M_{}</sup>{}-1) <span
class="math inline">\(符合TS38.214中的下行功率分配规定，并从\)</span> {
{y}^{(p)}}(0) <span class="math inline">\(开始映射到资源粒子\)</span> (
k,l ) $，这些REs应满足下列所有条件：</p>
<ul>
<li>它们在已分配的用于传输的RB中</li>
<li>根据TS38.214中5.1.2.2.3节，它们被声明为可用于PDSCH</li>
<li>根据7.4.1.5节，它们不能用于CSI-RS</li>
<li>根据TS38.214中5.1节，它们不为SS/PBCH保留</li>
</ul>
<p>映射过程中不保留用于其他目的资源粒子$ { {( k,l )}<em>{p,}} <span
class="math inline">\(，并按递增顺序先\)</span>k<span
class="math inline">\(后\)</span>l<span
class="math inline">\(映射，起始符号\)</span> l={ {l}</em>{0}}
$根据TS38.213的描述得到。</p>
<p>UE可假定在一个PRB bundle内在频域上使用相同的预编码，1个PRB
bundle由2个或4个PRBs组成，PRB bundle基于绝对资源格进行定义。PRB
bundle大小如果由高层参数配置，那么由参数<em>PDSCH-bundle-size</em>进行配置，否则通过DCI调度传输配置。</p>
<h3 id="pdcch">PDCCH</h3>
<h4 id="控制信道单元cce">控制信道单元（CCE）</h4>
<p><br/>PDCCH有1个或多个CCE组成，如Table 7.3.2.1-1所示。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171026/132353562.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="控制资源集coreset">控制资源集（CORESET）</h4>
<p><br/>控制资源集（CORESET）在频域上由$ N_{}^{} <span
class="math inline">\(个RB组成，在时域上由\)</span> N_{}^{}{ 1,2,3 }
<span class="math inline">\(个符号组成。\)</span> N_{}^{} <span
class="math inline">\(由高层参数*CORESET-freq-dom*给定，\)</span>
N_{}^{} <span
class="math inline">\(由高层参数*CORESET-time-dur*给定。仅当高层参数*DL-DMRS-typeA-pos*
= 3时，支持\)</span> N_{}^{}=3 $。</p>
<p>1个CCE由6个REGs组成，1个REG等于1个OFDM符号上的1个RB。CORESET内的REGs按时域优先的顺序编号，从第1个OFDM符号且最低编号的RB以0开始编号。</p>
<p>UE可配置多个CORESETs，每个CORESET只与一个种CCE-to-REG映射关联。</p>
<p>在CORESET内，CCE-to-REG映射可以交织也可以不交织，这由高层参数<em>CORESET-Trans-type</em>来配置，并且由REG
bundles来描述：</p>
<ul>
<li>REG bundle <span class="math inline">\(i\)</span> 定义为一组REGs $ {
iL,iL+1,...,iL+L-1 } <span class="math inline">\(，其中REG
bundle大小\)</span> L <span
class="math inline">\(由高层参数*CORESET-REG-bundle-size*来配置，\)</span>
i=0,1,...,{N_{}^{}}/{L};-1 $是CORESET内REGs的数目。</li>
<li>CCE <span class="math inline">\(j\)</span> 由REG bundles $ {
f({6j}/{L};),f({6j}/{L};+1),...,f({6j}/{L};+{6}/{L};-1) } <span
class="math inline">\(组成，其中\)</span> f() $是交织器。</li>
</ul>
<p>对于非交织的CCE-to-REG映射，有$ L=6 <span
class="math inline">\(且\)</span> f(j)=j $。</p>
<p>对于交织的CCE-to-REG映射，对于$ N_{}^{}=1 <span
class="math inline">\(，有\)</span> L{ 2,6 } <span
class="math inline">\(；对于\)</span> N_{}^{}{ 2,3 } <span
class="math inline">\(，有\)</span> L{ N_{}^{},6 } $。</p>
<p>UE可假定</p>
<ul>
<li>如果高层参数<em>CORESET-wideband-bundle</em>没有对CORESET进行设置，那么在1个REG
bundle内的频域上使用相同的预编码</li>
<li>如果高层参数<em>CORESET-wideband-bundle</em>对CORESET进行了设置，那么在整个CORESET内的频域上使用相同的预编码</li>
</ul>
<h4 id="加扰-1">加扰</h4>
<h4 id="调制-1">调制</h4>
<p><br/>UE应假定比特块$ (0),...,({ {M}<em>{}}-1) <span
class="math inline">\(按照5.1.3节的描述进行QPSK调制，得到复值调制符号块\)</span>
d(0),...,d({ {M}</em>{}}-1) $。</p>
<h4 id="物理资源映射-1">物理资源映射</h4>
<p><br/>UE应假定复值调制符号块$ d(0),...,d({ {M}<em>{}}-1) <span
class="math inline">\(乘以一个幅值因子\)</span> { {}</em>{}} <span
class="math inline">\(，并在用于监测PDCCH的CCEs上先\)</span> l <span
class="math inline">\(后\)</span>k<span
class="math inline">\(按递增顺序映射到资源粒子\)</span> { {( k,l
)}_{p,}} $。</p>
<h3 id="pbch">PBCH</h3>
<h4 id="加扰-2">加扰</h4>
<p><br/>UE应假定比特块$ { {b}^{(q)}}(0),...,{
{b}<sup>{(q)}}(M_{}</sup>{(q)}-1) <span
class="math inline">\(，其中\)</span> { {M}<em>{}} <span
class="math inline">\(是PBCH发送的比特数，应根据以下方式在调制之前进行加扰，得到加扰比特块\)</span>
(0),...,({ {M}</em>{}}-1) $</p>
<p><span class="math display">\[ { {\tilde{b}}^{(q)}}(i)=\left( {
{b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2 \]</span></p>
<p>其中加扰序列$ { {c}^{(q)}}(i) $由5.2节给定。</p>
<h4 id="调制-2">调制</h4>
<p><br/>UE应假定比特块$ (0),...,({ {M}<em>{}}-1) <span
class="math inline">\(按照5.1节的描述进行QPSK调制，得到复值调制符号块\)</span>
{ {d}</em>{}}(0),...,{ {d}<em>{}}({ {M}</em>{}}-1) $。</p>
<h4 id="物理资源映射-2">物理资源映射</h4>
<p><br/>物理资源映射在7.4.3节中描述。</p>
<h2 id="物理信号">物理信号</h2>
<h3 id="参考信号">参考信号</h3>
<h4 id="pdsch-dm-rs">PDSCH DM-RS</h4>
<h5 id="序列生成">序列生成</h5>
<p><br/>UE应假定参考信号序列$ r(m) $定义为</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中伪随机序列$ c(i) $在5.2节中定义。</p>
<h5 id="物理资源映射-3">物理资源映射</h5>
<p><br/>UE应假定PDSCH
DM-RS根据高层参数<em>DL-DMRS-config-type</em>给定的类型1或类型2进行物理资源映射。</p>
<p>UE应假定序列$ r(m) $根据以下方式进行物理资源映射</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{
{w}_{\text{f}}}\left( { {k}&#39;} \right)\cdot { {w}_{\text{t}}}\left( {
{l}&#39;} \right)\cdot r\left( 2m+{k}&#39;+{ {m}_{0}} \right) \\
\nonumber &amp; k=\left\{ \begin{array}{*{35}{l}}
   { {k}_{\text{0}}}+4m+2{k}&#39;+\Delta  &amp; \text{Configuration type
1}  \\
   { {k}_{\text{0}}}+6m+{k}&#39;+\Delta  &amp; \text{Configuration type
2}  \\
\end{array} \right. \\
\nonumber &amp; {k}&#39;=0,1 \\
\nonumber  &amp; l=\left\{ { {l}_{0}},\bar{l} \right\}+{l}&#39;  
\end{align}
\]</span></p>
<p>其中$ { {w}<em>{}}( { {k}'} ) <span class="math inline">\(，\)</span>
{ {w}</em>{}}( { {l}'} ) <span class="math inline">\(和\)</span>
$由Tables 7.4.1.1.2-1和7.4.1.1.2-2给定。</p>
<p>第1个DM-RS符号的参考点<span class="math inline">\(l\)</span>和位置$ {
{l}_{0}} $依赖于映射类型（mapping type）：</p>
<ul>
<li>对于PDSCH映射类型A：
<ul>
<li>$ l $定义为起始时隙</li>
<li>如果高层参数<em>DL-DMRS-typeA-pos</em> = 3，则$ { {l}<em>{0}}=3
<span class="math inline">\(；否则，\)</span> { {l}</em>{0}}=2 $</li>
</ul></li>
<li>对于PDSCH映射类型B:
<ul>
<li>$ l $定义为被调度的PDSCH资源的起始</li>
<li>$ { {l}_{0}}=0 $</li>
</ul></li>
</ul>
<p>附加的DM-RS符号的位置由
和时隙内最后一个用于PDSCH的OFDM符号确定，详见Tables
7.4.1.1.2-3和7.4.1.1.2-4。</p>
<p>时域索引$ {l}' <span
class="math inline">\(和所支持的天线端口\)</span> p
$根据<em>DL-DMRS-len</em>和Table 7.4.1.1.2-5得到。</p>
<p>在未给定CSI-RS或TRS配置的情况下，UE应假定PDSCH
DM-RS和SS/PBCH块是关于多普勒频移、平均时延、时延扩展和空间RX准共定位的（quasi
co-located）。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171026/135602719.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171026/135635903.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171026/135708921.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171026/135739647.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171026/135803943.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="pdsch-pt-rs">PDSCH PT-RS</h4>
<h5 id="序列生成-1">序列生成</h5>
<h5 id="物理资源映射-4">物理资源映射</h5>
<p><br/>UE应假定仅当高层参数<em>DL-PTRS-presen</em>t指示PT-RS被使用时，PT-RS仅呈现在用于PDSCH的RB中。</p>
<p>如果PT-RS呈现，UE应假定PDSCH PT-RS按以下方式映射到物理资源</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{PTRS}}}r(m) \\
\nonumber &amp; l={ {l}_{\text{DMRS}}}+1+{ {L}_{\text{PTRS}}}\cdot
{l}&#39; \\
\nonumber &amp; l&#39;=0,1,2,...  
\end{align}
\]</span></p>
<p>在每$ { {K}_{}}
$个被调度的RBs中，当满足下列条件时，PT-RS在最低编号的被调度的RB上传输</p>
<ul>
<li>$ l $在被分配的用于传输PDSCH的OFDM符号内</li>
<li>资源粒子$ ( k,l ) $不用于DM-RS</li>
</ul>
<p>其中</p>
<ul>
<li><span class="math inline">\(k\)</span>是RB内的子载波索引</li>
<li>对于1个符号的DM-RS，有$ { {l}<em>{}}={ {l}</em>{0}} <span
class="math inline">\(；对于2个符号的DM-RS，有\)</span> { {l}<em>{}}={
{l}</em>{0}}+1 <span class="math inline">\(，其中\)</span> { {l}_{0}}+1
$在7.4.1.1.2中定义</li>
<li>$ { {K}_{}}{ 2,4 } $由TS38.214给定</li>
<li>$ { {L}_{}}{ 1,2,4 } $由TS38.214给定</li>
</ul>
<h4 id="pdcch-dm-rs">PDCCH DM-RS</h4>
<h5 id="序列生成-2">序列生成</h5>
<p><br/>UE应假定参考信号序列$ r(m) $定义为</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中伪随机序列$ c(i) $在5.2节中定义。</p>
<h5 id="物理资源映射-5">物理资源映射</h5>
<p><br/>UE应假定序列$ r(m) $根据以下方式映射到物理资源</p>
<p><span class="math display">\[ a_{k,l}^{(p,\mu )}={ {\beta
}_{\text{DMRS}}}\cdot r\left( m \right) \]</span></p>
<p>其中$ k=1,5,9 <span class="math inline">\(，\)</span> l=0
$分别是在一组REGs内的频域和时域索引，这组REGs等于</p>
<ul>
<li>如果高层参数<em>CORESET-wideband-bundle</em>没有对CORESET进行设置，那么这组REGs是UE尝试译码的构成PDCCH的REGs</li>
<li>如果高层参数<em>CORESET-wideband-bundle</em>对CORESET进行了设置，那么这组REGs是UE尝试译码的在整个CORESET内的所有REGs</li>
</ul>
<h4 id="pbch-dm-rs">PBCH DM-RS</h4>
<h5 id="序列生成-3">序列生成</h5>
<p><br/>UE应假定用于SS/PBCH块的参考信号序列$ r(m) $定义为</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中$ c(n)
$由5.2节给定。加扰序列生成器应在每个SS/PBCH块的开始处通过小区ID $
N_{}^{} <span class="math inline">\(和\)</span> { {n}_{}}
$被初始化，SS/PBCH块时间索引由PBCH DM-RS承载。</p>
<h5 id="物理资源映射-6">物理资源映射</h5>
<p><br/>物理资源映射在7.4.3节中定义。</p>
<h4 id="csi-rs">CSI-RS</h4>
<h5 id="序列生成-4">序列生成</h5>
<p><br/>UE应假定参考信号序列$ r(m) $定义为</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中伪随机序列$ c(i) $在5.2节中定义。</p>
<h5 id="物理资源映射-7">物理资源映射</h5>
<p><br/>对于每个CSI-RS成员配置，UE应假定序列$ r(m)
$按以下方式映射到物理资源</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{CSIRS}}}{
{w}_{\text{f}}}\left( { {k}&#39;} \right)\cdot { {w}_{\text{t}}}\left( {
{l}&#39;} \right)\cdot r\left( m \right) \\
\nonumber&amp; k=\bar{k}+{k}&#39; \\
\nonumber&amp; l=\bar{l}+{l}&#39;  
\end{align}
\]</span></p>
<p>下列情况除外</p>
<ul>
<li>与所配置的CORESET重叠的REs应从CSI-RS发送中排除</li>
</ul>
<p>$ {k}' <span class="math inline">\(和\)</span> {l}' $由Table
7.4.1.5.2-1和 $ { {w}<em>{}}( { {k}'} ),{ {w}</em>{}}( { {l}'} ){ ,,,}
$确定。</p>
<p>时域位置$ l <span class="math inline">\(定义为起始时隙，其中\)</span>
{l}{ 5,6,12,13 } <span
class="math inline">\(是时隙内CSI-RS的起始符号位置，\)</span> {l}
$由高层参数<em>CSI-RS-ResourceMapping</em>配置。</p>
<p>除单端口之外，频域位置由位图$ or<span
class="math inline">\(通过高层参数*CSI-RS-ResourceMapping*给定，Table
7.4.1.5.2-1中的\)</span> { {k}<em>{i}} <span
class="math inline">\(对应于位图中从\)</span> { {b}</em>{0}} <span
class="math inline">\(开始的第\)</span>i<span
class="math inline">\(个集合点，\)</span> { {k}<em>{i}} <span
class="math inline">\(的值由\)</span> { {k}</em>{i}}=f( i ) <span
class="math inline">\(给定，其中\)</span> f( i ) <span
class="math inline">\(是第\)</span>i$个集合点的位图中的比特号。CSI-RS频域位置在所配置的PRBs上重复。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171026/141325803.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="trs">TRS</h4>
<h5 id="序列生成-5">序列生成</h5>
<p><br/>UE应假定参考信号序列$ r(m) $定义为</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中伪随机序列$ c(i) $在5.2节中定义。</p>
<h5 id="物理资源映射-8">物理资源映射</h5>
<p><br/>TRS（tracking reference signal）
burst由4个OFDM符号组成，在2个连续时隙内发送。</p>
<p>UE应假定TRS在1个burst中根据以下方式映射到物理资源</p>
<p><span class="math display">\[ \begin{align}
\nonumber  &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{TRS}}}r(m) \\
\nonumber  &amp; k=4m+{ {k}_{0}}  
\end{align}
\]</span></p>
<p>The UE may assume that a TRS burst is quasi co-located with respect
to delay spread, average delay, Doppler shift, and Doppler spread with
the PDSCH DM-RS.</p>
<h3 id="同步信号">同步信号</h3>
<h4 id="物理层小区id">物理层小区ID</h4>
<p><br/>NR有1008个唯一的物理层小区ID，根据下式得到</p>
<p><span class="math display">\[
N_{\text{ID}}^{\text{cell}}=3N_{\text{ID}}^{\text{(1)}}+N_{\text{ID}}^{\text{(2)}}
\]</span></p>
<p>其中$ N_{}^{}{ 0,1,...,335 } <span class="math inline">\(且\)</span>
N_{}^{}{ 0,1,2 } $。</p>
<h4 id="pss">PSS</h4>
<h5 id="序列生成-6">序列生成</h5>
<p><br/>主同步信号序列$ { {d}_{}}(n) $定义为</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; { {d}_{\text{PSS}}}\left( n \right)=1-2x\left( m
\right) \\
\nonumber &amp; m=\left( n+43N_{\text{ID}}^{\text{(2)}} \right)\bmod 127
\\
\nonumber &amp; 0\le n&lt;127  
\end{align}
\]</span></p>
<p>其中</p>
<p><span class="math display">\[ x\left( i+7 \right)=\left( x\left( i+4
\right)+x\left( i \right) \right)\bmod 2 \]</span></p>
<p>且</p>
<p><span class="math display">\[ \left[ \begin{matrix}
   x\left( 6 \right) &amp; x\left( 5 \right) &amp; x\left( 4 \right)
&amp; x\left( 3 \right) \nonumber &amp; x\left( 2 \right) &amp; x\left(
1 \right) &amp; x\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   1 &amp; 1 &amp; 1 &amp; 0 &amp; 1 &amp; 1 &amp; 0  \\
\end{matrix} \right]
\]</span></p>
<h5 id="物理资源映射-9">物理资源映射</h5>
<p><br/>物理资源映射在7.4.3节描述。</p>
<h4 id="sss">SSS</h4>
<h5 id="序列生成-7">序列生成</h5>
<p><br/>辅同步信号序列$ { {d}_{}}(n) $定义为</p>
<p><span class="math display">\[ \begin{align}
\nonumber  &amp; { {d}_{\text{SSS}}}\left( n \right)=\left[ 1-2{
{x}_{0}}\left( \left( n+{ {m}_{0}} \right)\bmod 127 \right)
\right]\left[ 1-2{ {x}_{1}}\left( \left( n+{ {m}_{1}} \right)\bmod 127
\right) \right] \\
\nonumber  &amp; { {m}_{0}}=15\left\lfloor
\frac{N_{\text{ID}}^{\text{(1)}}}{\text{112}} \right\rfloor
+5N_{\text{ID}}^{\text{(2)}} \\
\nonumber &amp; { {m}_{1}}=N_{\text{ID}}^{\text{(1)}}\bmod 112 \\
\nonumber &amp; 0\le n&lt;127  
\end{align}
\]</span></p>
<p>其中</p>
<p><span class="math display">\[ \begin{align}
\nonumber  &amp; { {x}_{0}}\left( i+7 \right)=\left( { {x}_{0}}\left(
i+4 \right)+x{}_{0}\left( i \right) \right)\bmod 2 \\
\nonumber  &amp; { {x}_{1}}\left( i+7 \right)=\left( { {x}_{1}}\left(
i+1 \right)+x{}_{1}\left( i \right) \right)\bmod 2  
\end{align}
\]</span></p>
<p>且</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; \left[ \begin{matrix}
   { {x}_{0}}\left( 6 \right) &amp; { {x}_{0}}\left( 5 \right) &amp; {
{x}_{0}}\left( 4 \right) &amp; { {x}_{0}}\left( 3 \right) &amp; {
{x}_{0}}\left( 2 \right) &amp; { {x}_{0}}\left( 1 \right) &amp; {
{x}_{0}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right] \\
\nonumber  &amp; \left[ \begin{matrix}
   { {x}_{1}}\left( 6 \right) &amp; { {x}_{1}}\left( 5 \right) &amp; {
{x}_{1}}\left( 4 \right) &amp; { {x}_{1}}\left( 3 \right) &amp; {
{x}_{1}}\left( 2 \right) &amp; { {x}_{1}}\left( 1 \right) &amp; {
{x}_{1}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]  
\end{align}
\]</span></p>
<h5 id="物理资源映射-10">物理资源映射</h5>
<p><br/>物理资源映射在7.4.3节描述。</p>
<h3 id="sspbch-block">SS/PBCH Block</h3>
<h4 id="sspbch块的时频域结构">SS/PBCH块的时频域结构</h4>
<p><br/>在时域上，1个SS/PBCH块由4个OFDM符号组成，在SS/PBCH块内符号按增序从0到3编号，其中PSS、SSS、PBCH以及和PBCH相关的DM-RS位于不同的符号，详见Table
7.4.3.1-1。</p>
<p>在频域上，1个SS/PBCH块由288个连续子载波组成，在SS/PBCH块内子载波按增序从0到287编号。SS/PBCH块内的子载波<span
class="math inline">\(k\)</span>对应于资源块$ n_{}^{} <span
class="math inline">\(的子载波\)</span> n_{}<sup>{}N_{}</sup>{}+{
{k}<em>{0}} <span class="math inline">\(，其中\)</span> { {k}</em>{0}}{
... } $。</p>
<p>对于1个SS/PBCH块，UE应假定</p>
<ul>
<li>天线端口$ p=4000 $</li>
<li>子载波间隔配置$ { 0,1,3,4 } $</li>
<li>PSS、SSS和PBCH具有相同的CP长度和子载波间隔</li>
</ul>
<p>UE应假定在SS/PBCH burst set内的同一块时间索引下发送的SS/PBCH
blocks是关于多普勒扩展、多普勒频移、平均增益、平均时延和空间RX参数准共定位的。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171026/142651702.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h5 id="sspbch块内pss的映射">SS/PBCH块内PSS的映射</h5>
<p><br/>UE应假定PSS符号序列$ { {d}<em>{}}(0),...,{ {d}</em>{}}(126)
<span class="math inline">\(乘以一个幅值因子\)</span> { {}<em>{}} <span
class="math inline">\(，以符合TS38.213对PSS功率分配的规定，并按\)</span>k<span
class="math inline">\(的递增顺序映射到资源粒子\)</span> { {( k,l
)}</em>{p,}} <span class="math inline">\(，其中\)</span>k<span
class="math inline">\(和\)</span>l<span class="math inline">\(在Table
7.4.3.1-1中给定，\)</span>k<span
class="math inline">\(和\)</span>l$分别表示SS/PBCH块内的频域和时域索引。</p>
<h5 id="sspbch块内sss的映射">SS/PBCH块内SSS的映射</h5>
<p><br/>UE应假定SSS符号序列$ { {d}<em>{}}(0),...,{ {d}</em>{}}(126)
<span class="math inline">\(乘以一个幅值因子\)</span> { {}<em>{}} <span
class="math inline">\(，以符合TS38.213对SSS功率分配的规定，并按\)</span>k<span
class="math inline">\(的递增顺序映射到资源粒子\)</span> { {( k,l
)}</em>{p,}} <span class="math inline">\(，其中\)</span>k<span
class="math inline">\(和\)</span>l<span class="math inline">\(在Table
7.4.3.1-1中给定，\)</span>k<span
class="math inline">\(和\)</span>l$分别表示SS/PBCH块内的频域和时域索引。</p>
<h5 id="sspbch块内pbch的映射">SS/PBCH块内PBCH的映射</h5>
<p><br/>UE应假定PBCH复值符号序列$ { {d}<em>{}}(0),...,{ {d}</em>{}}({
{M}<em>{}}-1) <span class="math inline">\(乘以一个幅值因子\)</span> {
{}</em>{!!!!}} <span
class="math inline">\(，以符合TS38.213对PBCH功率分配的规定，并从\)</span>
{ {d}<em>{}}(0) <span class="math inline">\(开始映射到资源粒子\)</span>
{ {( k,l )}</em>{p,}} $，这些REs满足下列条件：</p>
<ul>
<li>它们不用于PBCH DM-RS</li>
</ul>
<p>映射过程中不保留用于其他目的资源粒子$ { {( k,l )}_{p,}} <span
class="math inline">\(，并按递增顺序先\)</span> k <span
class="math inline">\(后\)</span>l<span
class="math inline">\(映射，其中\)</span>k<span
class="math inline">\(和\)</span>l$分别是SS/PBCH块内的频域和时域索引，并由Table
7.4.3.1-1给定。</p>
<p>UE应假定SS/PBCH块的DM-RS复值符号序列$ { {r}<em>{l}}(0),...,{
{r}</em>{l}}(143) <span class="math inline">\(乘以一个幅值因子\)</span>
<em>{}^{} <span class="math inline">\(，以符合TS38.213对PBCH
DM-RS功率分配的规定，并按递增顺序先\)</span> k <span
class="math inline">\(后\)</span>l<span
class="math inline">\(映射到资源粒子\)</span> { {( k,l )}</em>{p,}}
<span class="math inline">\(，其中\)</span>k<span
class="math inline">\(和\)</span>l<span
class="math inline">\(分别是SS/PBCH块内的频域和时域索引，并由Table
7.4.3.1-1给定，其中\)</span> v=N_{}^{} $。</p>
<h4 id="sspbch块的时域位置">SS/PBCH块的时域位置</h4>
<p><br/>UE应对可能的时域位置上的SS/PBCH块进行监测，在TS38.213中描述。</p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
        <tag>2017-10</tag>
      </tags>
  </entry>
  <entry>
    <title>5G-NR物理信道与调制-上行链路v1.1.0</title>
    <url>/2017/10/23/nr-v110-l1-channel-modulation-ul/</url>
    <content><![CDATA[<p>上接<a
href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation/#上行链路">《5G-NR物理信道与调制v1.1.0》上行链路</a></p>
<h1 id="scope">Scope</h1>
<h1 id="references">References</h1>
<h1 id="definitions-symbols-and-abbreviations">Definitions, symbols and
abbreviations</h1>
<h1 id="帧结构与物理资源">帧结构与物理资源</h1>
<h1 id="通用函数">通用函数</h1>
<h1 id="上行链路">上行链路</h1>
<h2 id="概述">概述</h2>
<h3 id="物理信道概述">物理信道概述</h3>
<p><br/>上行链路物理信道对应于一组资源粒子（REs）的集合，用于承载源自高层的信息。本规范定义了如下上行信道：</p>
<ul>
<li>物理上行共享信道（PUSCH）</li>
<li>物理上行控制信道（PUCCH）</li>
<li>物理随机接入信道（PRACH）</li>
</ul>
<h3 id="物理信号概述">物理信号概述</h3>
<p><br/>上行物理信号是物理层使用的，但不承载任何来自高层信息的信号。本规范定义了如下上行物理信号：</p>
<ul>
<li>解调参考信号（Demodulation reference signals，DM-RS）</li>
<li>相位跟踪参考信号（Phase-tracking reference signals，PT-RS）</li>
<li>探测参考信号（Sounding reference signal，SRS）</li>
</ul>
<span id="more"></span>
<h3 id="物理资源">物理资源</h3>
<p><br/>当UE进行上行传输时，使用的帧结构和物理资源在第4章定义。</p>
<p>定义下列天线端口用于上行链路：</p>
<ul>
<li>PUSCH相关的DMRS使用以1000为起始的天线端口</li>
<li>PUCCH相关的DMRS使用以2000为起始的天线端口</li>
<li>SRS使用以3000为起始的天线端口</li>
<li>PRACH使用天线端口4000</li>
</ul>
<h2 id="物理信道">物理信道</h2>
<h3 id="pusch">PUSCH</h3>
<h4 id="加扰">加扰</h4>
<p><br/>对于每个码字$ q <span class="math inline">\(，比特块\)</span> {
{b}^{(q)}}(0),...,{ {b}<sup>{(q)}}(M_{}</sup>{(q)}-1) <span
class="math inline">\(在调制之前应当被加扰，其中\)</span> M_{}^{(q)}
<span class="math inline">\(是在物理信道上传输的码字\)</span> q <span
class="math inline">\(的比特数。加扰的比特块\)</span> {
{}^{(q)}}(0),...,{ {}<sup>{(q)}}(M_{}</sup>{}-1) $由下式得到</p>
<p><span class="math display">\[ { {\tilde{b}}^{(q)}}(i)=\left( {
{b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2 \]</span></p>
<p>其中加扰序列$ { {c}^{(q)}}(i) $在5.2节给定。</p>
<h4 id="调制">调制</h4>
<p><br/>对于每个码字$ q <span
class="math inline">\(，加扰比特块\)</span> { {}^{(q)}}(0),...,{
{}<sup>{(q)}}(M_{}</sup>{}-1) <span
class="math inline">\(应按照5.1节所描述的方法进行调制，调制方案见Table
6.3.1.2-1，得到复值调制符号块\)</span> { {d}^{(q)}}(0),...,{
{d}<sup>{(q)}}(M_{}</sup>{}-1) $。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/184452630.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="层映射">层映射</h4>
<p><br/>每个码字的复值调制符号根据Table
7.3.1.3-1应被映射到至多4个层。码字$ q <span
class="math inline">\(的复值调制符号\)</span> { {d}^{(q)}}(0),...,{
{d}<sup>{(q)}}(M_{}</sup>{}-1) <span
class="math inline">\(应被映射到层\)</span> x(i)={ {}^{T}} <span
class="math inline">\(，\)</span> i=0,1,...,M_{}^{}-1 <span
class="math inline">\(，其中\)</span> <span
class="math inline">\(是层数，\)</span> M_{}^{}
$是每层的调制符号数。</p>
<h4 id="tf预编码">TF预编码</h4>
<p><br/>如果不启用TF预编码（transform precoding），对于每个$ ,1,...,
<span class="math inline">\(有\)</span> { {y}^{()}}(i)={ {x}^{()}}(i)
$。</p>
<p>如果启用TF预编码，此时$ <span class="math inline">\(，则单层\)</span>
<span class="math inline">\(下复值符号块\)</span> { {x}^{(0)}}(0),...,{
{x}<sup>{(0)}}(M_{}</sup>{}-1) <span
class="math inline">\(被分为\)</span> {M_{}<sup>{}}/{M_{}</sup>{}};
$个集，每个集对应1个OFDM符号。TF预编码由下列方法得到</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; { {y}^{(0)}}(l\cdot
M_{\text{sc}}^{\text{PUSCH}}+k)=\frac{1}{\sqrt{M_{\text{sc}}^{\text{PUSCH}}}}\sum\limits_{i=0}^{M_{\text{sc}}^{\text{PUSCH}}-1}{
{ {x}^{(0)}}(l\cdot M_{\text{sc}}^{\text{PUSCH}}+i){ {e}^{-j\frac{2\pi
ik}{M_{\text{sc}}^{\text{PUSCH}}}}}} \\
\nonumber &amp; k=0,...,M_{\text{sc}}^{\text{PUSCH}}-1 \\
\nonumber &amp;
l=0,...,{M_{\text{symb}}^{\text{layer}}}/{M_{\text{sc}}^{\text{PUSCH}}}\;-1  
\end{align}
\]</span></p>
<p>得到复值符号块$ { {y}^{(0)}}(0),...,{ {y}<sup>{(0)}}(M_{}</sup>{}-1)
<span class="math inline">\(。\)</span> M_{}<sup>{}=M_{}</sup>{}N_{}^{}
<span class="math inline">\(，其中\)</span> M_{}^{}
$表示PUSCH带宽（RB），应满足</p>
<p><span class="math display">\[M_{RB}^{PUSCH}={ {2}^{ { {\alpha
}_{2}}}}\cdot { {3}^{ { {\alpha }_{3}}}}\cdot { {5}^{ { {\alpha
}_{5}}}}\]</span></p>
<p>其中$ { {}<em>{2}},{ {}</em>{3}},{ {}_{5}} $是非负整数集。</p>
<h4 id="预编码">预编码</h4>
<p><br/>矢量块$ { {}^{T}} <span class="math inline">\(，\)</span>
i=0,1,...,M_{}^{}-1 $应根据下式进行预编码</p>
<p><span class="math display">\[ \left[ \begin{matrix}
   { {z}^{(0)}}(i)  \\
   \vdots   \\
   { {z}^{(P-1)}}(i)  \\
\end{matrix} \right]=W\left[ \begin{matrix}
   { {y}^{(0)}}(i)  \\
   \vdots   \\
   { {y}^{(\upsilon -1)}}(i)  \\
\end{matrix} \right]
\]</span></p>
<p>其中，$ i=0,1,...,M_{}^{}-1 <span class="math inline">\(，\)</span>
M_{}<sup>{}=M_{}</sup>{} $。</p>
<p>对基于非码本的传输，预编码矩阵$ W
$根据TS38.214中6.1.1节的描述得到。</p>
<p>对基于码本的传输，预编码矩阵$ W $由Table 6.3.1.5-1给定，其中TPMI
index从调度上行传输的DCI中获得。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/185715105.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/185758254.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="物理资源映射">物理资源映射</h4>
<p><br/>对于PUSCH传输所使用的每个天线端口，复值符号块$ {
{z}^{(p)}}(0),...,{ {z}<sup>{(p)}}(M_{}</sup>{}-1) <span
class="math inline">\(应乘以一个幅值因子\)</span> { {}<em>{}} <span
class="math inline">\(，以符合TS38.213对发送功率\)</span> { {P}</em>{}}
<span class="math inline">\(的规定，并且从\)</span> { {z}^{(p)}}(0)
<span class="math inline">\(开始映射到资源粒子\)</span> { {( k,l
)}_{p,}} $。这些REs满足下列条件：</p>
<ul>
<li>这些REs存在于用于传输的已分配的资源中，</li>
<li>如果启用TF预编码，they are not in the OFDM symbols used for
transmission</li>
<li>如果不启用TF预编码，they are not in the OFDM symbols used for
transmission of the associated DM-RS</li>
</ul>
<p>如果不启用TF预编码，或者如果是TF预编码但不进行跳频，那么对于其他目的的资源粒子$
{ {( k,l )}<em>{p,}} <span
class="math inline">\(映射是不进行保留的，资源映射顺序为先天线端口\)</span>
p <span class="math inline">\(，再频域子载波索引\)</span> k <span
class="math inline">\(，然后是时域符号索引\)</span> l <span
class="math inline">\(，初始值\)</span> l={ {l}</em>{0}} $。</p>
<h3 id="pucch">PUCCH</h3>
<p><br/>PUCCH支持多种格式，如Table
6.3.2-1所示。对于单个UE，支持采用格式0或格式2的2个PUCCH同时传输，或支持采用格式1或格式3的其中一个PUCCH与采用格式0或格式2的其中一个PUCCH同时传输。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/193240943.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="pucch格式0">PUCCH格式0</h4>
<h5 id="序列选择">序列选择</h5>
<br/>定义一组序列$ {
<span class="math display">\[\begin{matrix}
   { {x}_{0}}(n) &amp; { {x}_{1}}(n) &amp; { {x}_{2}}(n) &amp; {
{x}_{3}}(n)  \\
\end{matrix}\]</span>
<p>} $，每组序列长度为12。</p>
<p>比特块$ b(0),...,b({ {M}<em>{}}-1) <span
class="math inline">\(，其中\)</span> { {M}</em>{}}{ 1,2 }
$是PUCCH发送的比特数，应根据下列方法选择发送序列</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; y(n)={ {x}_{j}}(n) \\
\nonumber &amp; j=\sum\nolimits_{i=0}^{ { {M}_{\text{bit}}}-1}{b(i)\cdot
{ {2}^{i}}}  
\end{align}
\]</span></p>
<h5 id="物理资源映射-1">物理资源映射</h5>
<p><br/>序列$ y(n) <span
class="math inline">\(应乘以一个幅值因子\)</span> { {}<em>{}} <span
class="math inline">\(，以符合TS38.213对发送功率\)</span> { {P}</em>{}}
<span class="math inline">\(的规定，并且从\)</span> y(0) <span
class="math inline">\(开始映射到资源粒子\)</span>开始映射到资源粒子<span
class="math inline">\(，在天线端口\)</span> p=2000 <span
class="math inline">\(上，按递增顺序先\)</span>k<span
class="math inline">\(后\)</span>l$映射。</p>
<h4 id="pucch格式1">PUCCH格式1</h4>
<h5 id="序列调制">序列调制</h5>
<p><br/>比特块$ b(0),...,b({ {M}<em>{}}-1) <span
class="math inline">\(应按5.1节的描述进行调制，若\)</span> {
{M}</em>{}}=1 <span class="math inline">\(则使用BPSK，若\)</span> {
{M}_{}}=2 <span class="math inline">\(则使用QPSK，得到复值符号\)</span>
d(0) $。</p>
<p>复值符号$ d(0) <span
class="math inline">\(按如下方式乘以序列\)</span> r_{u,v}^{({
{}_{p}})}(n) $</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; y(n)=d(0)\cdot r_{u,v}^{(\alpha )}(n) \\
\nonumber &amp; n=0,1,...,{ {N}_{\text{seq}}}-1  
\end{align}
\]</span></p>
<p>复值符号块$ y(0),...,y({ {N}<em>{}}-1) <span
class="math inline">\(应根据如下方式使用正交序列\)</span> {
{w}</em>{i}}(m) $进行块扩展（block-wise spread）</p>
<p><span class="math display">\[ \begin{align}
\nonumber  &amp; z\left( {m}&#39;{ {N}_{\text{seq}}}{
{N}_{\text{SF}}}+m{ {N}_{\text{seq}}}+n \right)={ {w}_{i}}(m)\cdot
y\left( n \right) \\
\nonumber &amp; n=0,1,...,{ {N}_{\text{seq}}}-1 \\
\nonumber  &amp; m=0,1,...,N_{\text{SF}}^{ { {m}&#39;}}-1 \\
\nonumber  &amp; {m}&#39;=\left\{ \begin{array}{*{35}{l}}
   0 &amp; \text{no frequency hopping}  \\
   0,1 &amp; \text{frequency hopping enabled}  \\
\end{array} \right.  
\end{align}
\]</span></p>
<p>其中$ { {N}<em>{}}=N</em>{}^{} $。</p>
<p>正交序列$ { {w}_{i}}(m) $在Table 6.3.2.2.1-1中给定。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/193946445.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h5 id="物理资源映射-2">物理资源映射</h5>
<p><br/>序列$ { {z}^{(p)}}(n) <span
class="math inline">\(应乘以一个幅值因子\)</span> { {}<em>{}} <span
class="math inline">\(，以符合TS38.213对发送功率\)</span> { {P}</em>{}}
<span class="math inline">\(的规定，并从\)</span> { {z}^{(p)}}(0) <span
class="math inline">\(开始映射到资源粒子\)</span> { {( k,l )}_{p,}}
$，这些REs应满足下列条件：</p>
<ul>
<li>它们在被分配的用于传输的RB中</li>
<li>它们不能被DM-RS所使用</li>
</ul>
<p>映射过程中不保留用于其他目的资源粒子$ { {( k,l )}_{p,}} <span
class="math inline">\(，在天线端口\)</span> p=2000 <span
class="math inline">\(上，按递增顺序先\)</span> k <span
class="math inline">\(后\)</span> l $映射。</p>
<h4 id="pucch格式2">PUCCH格式2</h4>
<h5 id="加扰-1">加扰</h5>
<p><br/>比特块$ b(0),...,b(M_{}^{ {}}-1) <span
class="math inline">\(，其中\)</span> M_{}^{ {}} <span
class="math inline">\(是物理信道发送的比特数，应在调制前按如下方式被加扰，得到加扰比特块\)</span>
(0),...,({ {M}_{}}-1) $</p>
<p><span class="math display">\[ { {\tilde{b}}^{(q)}}(i)=\left( {
{b}^{(q)}}(i)+{ {c}^{(q)}}(i) \right)\bmod 2 \]</span></p>
<p>其中加扰序列$ { {c}^{(q)}}(i) $由5.2节给定。</p>
<h5 id="调制-1">调制</h5>
<p><br/>加扰比特块$ (0),...,({ {M}<em>{}}-1) <span
class="math inline">\(应按5.1节的描述进行QPSK调制，得到复值调制符号块\)</span>
d(0),...,d({ {M}</em>{}}-1) $。</p>
<h5 id="物理资源映射-3">物理资源映射</h5>
<p><br/>调制符号块$ d(0),...,d({ {M}<em>{}}-1) <span
class="math inline">\(应乘以一个幅值因子\)</span> { {}</em>{}} <span
class="math inline">\(，以符合TS38.213对发送功率\)</span> { {P}<em>{}}
<span class="math inline">\(的规定，并从\)</span> d(0) <span
class="math inline">\(开始映射到资源粒子\)</span> { {( k,l )}</em>{p,}}
$，这些REs应满足下列条件：</p>
<ul>
<li>它们在被分配的用于传输的RB中</li>
<li>它们不能被DM-RS所使用</li>
</ul>
<p>映射过程中不保留用于其他目的资源粒子$ { {( k,l )}_{p,}} <span
class="math inline">\(，在天线端口\)</span> p=2000 <span
class="math inline">\(上，按递增顺序先\)</span> k <span
class="math inline">\(后\)</span> l $映射。</p>
<h4 id="pucch格式3">PUCCH格式3</h4>
<h3 id="prach">PRACH</h3>
<h4 id="序列生成">序列生成</h4>
<p><br/>随机接入前导$ { {x}_{u,v}}(n) $按如下方式生成</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; { {x}_{u,v}}(n)={ {x}_{u}}((n+{ {C}_{v}})\bmod {
{L}_{\text{RA}}}) \\
\nonumber &amp; { {x}_{u}}(i)={ {e}^{-j\frac{\pi ui(i+1)}{ {
{L}_{\text{RA}}}}}},i=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}
\]</span></p>
<p>频域表示按以下方式生成</p>
<p><span class="math display">\[ { {y}_{u,v}}(n)=\sum\limits_{m=0}^{ {
{L}_{\text{RA}}}-1}{ { {x}_{u,v}}(m)\cdot { {e}^{-j\frac{2\pi mn}{ {
{L}_{\text{RA}}}}}}} \]</span></p>
<p>其中$ { {L}<em>{}}=839 <span class="math inline">\(或\)</span> {
{L}</em>{}}=139 <span
class="math inline">\(，并根据随机接入前导格式来确定，详见Tables
6.3.3.1-1 and 6.3.3.1-2。循环移位\)</span> { {C}_{v}} $为</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; C{}_{v}=\left\{ \begin{array}{*{35}{l}}
   v{ {N}_{\text{CS}}} &amp; \text{v}=\text{0,1,}...\text{,}\left\lfloor
{ { {L}_{\text{RA}}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor -1,{
{N}_{\text{CS}}}\ne 0 &amp; \text{for unrestricted sets}  \\
   \text{0} &amp; { {N}_{\text{CS}}}=0 &amp; \text{for unrestricted
sets}  \\
   { {d}_{\text{start}}}\left\lfloor
{v}/{n_{\text{shift}}^{\text{RA}}}\; \right\rfloor +\left( v\bmod
n_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}} \nonumber &amp;
v=0,1,...,w-1 &amp; \text{for restricted sets type A and B}  \\
   { { {\bar{\bar{d}}}}_{\text{start}}}+\left( v-w \right){
{N}_{\text{CS}}} &amp;
v=w,...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}-1 &amp; \text{for
restricted sets type B}  \\
   { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}+\left(
v-w-\bar{\bar{n}}_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}}
&amp;
v=w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}},...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}+\bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}-1
&amp; \text{for restricted sets type B}  \\
\end{array} \right. \\
\nonumber  &amp;
w=n_{\text{shift}}^{\text{RA}}n_{\text{group}}^{\text{RA}}+\bar{n}_{\text{shift}}^{\text{RA}}  
\end{align}
\]</span></p>
<p>其中$ { {N}_{}} $由Tables
6.3.3.1-3到6.3.3.1-5给定，高层参数<em>restrictedSetConfig</em>决定受限集合类型，Tables
6.3.3.1-1和6.3.3.1-2指示不同前导格式下所支持的受限集合类型。</p>
<p>$ { {d}_{u}} $的值为</p>
<p><span class="math display">\[ { {d}_{u}}=\left\{
\begin{array}{*{35}{l}}
   q &amp; 0\le q&lt;{ { {L}_{\text{RA}}}}/{2}\;  \\
   { {L}_{\text{RA}}}-q &amp; \text{otherwise}  \\
\end{array} \right.
\]</span></p>
<p>其中$ q <span class="math inline">\(是满足\)</span> ( qu )=1 <span
class="math inline">\(的最小非负整数。循环移位的受限集合参数依赖于\)</span>
{ {d}_{u}} $。</p>
<p>对于受限集合类型A，参数由下式给定：</p>
<ul>
<li>对于$ { {N}<em>{}}&lt;{ { {L}</em>{}}}/{3}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=2{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber  &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {({ {L}_{\text{RA}}}-2{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}
\]</span></p>
<ul>
<li>对于$ { { {L}_{}}}/{3};/{2}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {({
{L}_{\text{RA}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}={ {L}_{\text{RA}}}-2{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max
\left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0
\right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}
\]</span></p>
<p>对于受限集合类型B，参数由下式给定：</p>
<ul>
<li>对于$ { {N}<em>{}}&lt;{ { {L}</em>{}}}/{5}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=4{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {({ {L}_{\text{RA}}}-4{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}
\]</span></p>
<ul>
<li>对于$ { { {L}_{}}}/{5};/{}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {\left( {
{L}_{\text{RA}}}-4{ {d}_{u}} \right)}/{ { {N}_{\text{CS}}}}\;
\right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}={ {L}_{\text{RA}}}-4{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber  &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max
\left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0
\right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}
\]</span></p>
<ul>
<li>对于$ {({ {L}<em>{}}+{ {N}</em>{}})}/{4};&lt;{2{ {L}_{}}}/{7};
$</li>
</ul>
<p><span class="math display">\[ \begin{align}
\nonumber   &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {(4{
{d}_{u}}-{ {L}_{\text{RA}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber  &amp; { {d}_{\text{start}}}=4{ {d}_{u}}-{
{L}_{\text{RA}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber  &amp; { { {\bar{\bar{d}}}}_{\text{start}}}={
{L}_{\text{RA}}}-3{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\\
\nonumber  &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}={
{L}_{\text{RA}}}-2{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}}+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}{
{N}_{\text{CS}}} \\
\nonumber  &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber  &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( { {L}_{\text{RA}}}-3{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber  &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor
{\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}},4{ {d}_{u}}-{
{L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber  &amp;
\bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\left(
\left( 1-\min \left( 1,\bar{n}_{\text{shift}}^{\text{RA}} \right)
\right)\left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}} \right)+\min \left(
1,\bar{n}_{\text{shift}}^{\text{RA}} \right)\left( 4{ {d}_{u}}-{
{L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\right) \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor
-\bar{\bar{n}}_{\text{shift}}^{\text{RA}}  
\end{align}
\]</span></p>
<ul>
<li>对于$ {2{ {L}_{}}}/{7};/{3}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {({
{L}_{\text{RA}}}-3{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}={ {L}_{\text{RA}}}-3{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; { { {\bar{\bar{d}}}}_{\text{start}}}={
{d}_{u}}+n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\\
\nonumber &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( 4{ {d}_{u}}-{
{L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}
\right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor
{\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}},{ {L}_{\text{RA}}}-3{
{d}_{u}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right)}/{
{ {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}
\]</span></p>
<ul>
<li>对于$ {({ {L}<em>{}}+{ {N}</em>{}})}/{3};&lt;{2{ {L}_{}}}/{5};
$</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {(3{
{d}_{u}}-{ {N}_{\text{ZC}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=3{ {d}_{u}}-{
{N}_{\text{ZC}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\
\nonumber &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( { {L}_{\text{RA}}}-2{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\
\nonumber &amp; \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}
\]</span></p>
<ul>
<li>对于$ {2{ {L}_{}}}/{5};/{2}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {({
{N}_{\text{ZC}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=2({ {N}_{\text{ZC}}}-2{
{d}_{u}})+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\
\nonumber &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor {({
{L}_{\text{RA}}}-{ {d}_{u}})}/{ { {d}_{\text{start}}}}\;
\right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( 3{ {d}_{u}}-{
{L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}
\right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\
\nonumber &amp; \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}
\]</span></p>
<p>对于其他所有的$ { {d}_{u}} $值，受限集合则不存在循环移位。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/200450560.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/200548356.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/200639881.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/200723042.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/200800085.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="物理资源映射-4">物理资源映射</h4>
<p><br/>前导序列应根据以下方式应到到物理资源</p>
<p><span class="math display">\[ \begin{align}
\nonumber  &amp; a_{k}^{(p,\text{RA})}={ {\beta }_{\text{PRACH}}}{
{y}_{u,v}}(k) \\
\nonumber &amp; k=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}
\]</span></p>
<p>其中$ { {}<em>{}} <span
class="math inline">\(是幅值因子，用以满足TS38.213对发送功率\)</span> {
{P}</em>{}} <span class="math inline">\(的规定，\)</span> p=4000
$是天线端口。基带信号根据5.3节并使用Table 6.3.3.1-1或Table
6.3.3.1-2中的参数生成。</p>
<h2 id="物理信号">物理信号</h2>
<h3 id="参考信号">参考信号</h3>
<h4 id="pusch-dm-rs">PUSCH DM-RS</h4>
<h5 id="序列生成-1">序列生成</h5>
<p><br/>如果PUSCH不启用TF预编码，则参考信号序列$ r(m)
$应根据以下方式生成</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中伪随机序列$ c(i) $在5.2节中定义。</p>
<p>如果PUSCH启用TF预编码，则参考信号序列$ r(m) $应根据以下方式生成</p>
<p><span class="math display">\[ { {r}^{(p)}}\left( m
\right)=r_{u,v}^{(\alpha )}\left( m \right) \]</span></p>
<p>其中$ { {r}^{(p)}}( m )=r_{u,v}^{()}( m ) $在5.3节中给定。</p>
<h5 id="物理资源映射-5">物理资源映射</h5>
<p><br/>PUSCH
DM-RS应根据高层参数<em>UL-DMRS-config-type</em>所配置的类型1或类型2进行物理资源映射。</p>
<p>UE应根据以下方式将序列$ r(m) $映射到物理资源：</p>
<ul>
<li>如果不启用TF预编码，</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{
{w}_{\text{f}}}\left( { {k}&#39;} \right)\cdot { {w}_{\text{t}}}\left( {
{l}&#39;} \right)\cdot r\left( 2m+{k}&#39;+{ {m}_{0}} \right) \\
\nonumber &amp; k=\left\{ \begin{matrix}
   { {k}_{\text{0}}}+4m+2{k}&#39;+\Delta  &amp; \text{Configuration type
1}  \\
   { {k}_{\text{0}}}+6m+{k}&#39;+\Delta  &amp; \text{Configuration type
2}  \\
\end{matrix} \right. \\
\nonumber &amp; {k}&#39;=0,1 \\
\nonumber &amp; l=\left\{ { {l}_{0}},\bar{l} \right\}+{l}&#39;  
\end{align}
\]</span></p>
<ul>
<li>如果启用TF预编码，</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; a_{k,l}^{(p,\mu )}={ {\beta }_{\text{DMRS}}}{
{w}_{\text{t}}}\left( { {l}&#39;} \right)\cdot r_{u,v}^{(\alpha )}\left(
2m+{k}&#39;+{ {m}_{0}} \right) \\
\nonumber &amp; k={ {k}_{\text{0}}}+4m+2{k}&#39;+\Delta  \\
\nonumber &amp; {k}&#39;=0,1 \\
\nonumber &amp; l=\left\{ { {l}_{0}},\bar{l} \right\}+{l}&#39;  
\end{align}
\]</span></p>
<p>其中$ { {w}<em>{}}( { {k}'} ) <span class="math inline">\(、\)</span>
{ {w}</em>{}}( { {l}'} ) <span class="math inline">\(和\)</span>
$由Tables 6.4.1.1.2-1和6.4.1.1.2-2给定。</p>
<p>$ l <span class="math inline">\(是PUSCH传输的起始符号，\)</span> {
{l}_{0}} $是DM-RS的第1个符号。</p>
<p>附加的DM-RS符号的位置由$ {l}
$和时隙内最后一个用于PUSCH的OFDM符号确定，详见Tables
6.4.1.1.2-3和6.4.1.1.2-4。</p>
<p>时域索引$ {l}' <span
class="math inline">\(和所支持的天线端口\)</span> p
$根据<em>UL-DMRS-len</em>和Table 6.4.1.1.2-5确定。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171024/082322325.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171024/082356056.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171024/082436027.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171024/082509888.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171024/084919864.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h4 id="pt-rs">PT-RS</h4>
<h5 id="序列生成-2">序列生成</h5>
<h5 id="物理资源映射-6">物理资源映射</h5>
<h4 id="pucch-dm-rs">PUCCH DM-RS</h4>
<h5 id="pucch格式1-dm-rs">PUCCH格式1 DM-RS</h5>
<h6 id="序列生成-3">序列生成</h6>
<p><br/>参考信号序列定义为</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; r\left( {m}&#39;{ {N}_{\text{seq}}}{
{N}_{\text{SF}}}+m{ {N}_{\text{seq}}}+n \right)={ {w}_{i}}(m)\cdot
r_{u,v}^{(\alpha )}\left( n \right) \\
\nonumber &amp; n=0,1,...,{ {N}_{\text{seq}}}-1 \\
\nonumber &amp; m=0,1,...,N_{\text{SF}}^{ { {m}&#39;}}-1 \\
\nonumber &amp; {m}&#39;=\left\{ \begin{array}{*{35}{l}}
   0 &amp; \text{no frequency hopping}  \\
   0,1 &amp; \text{frequency hopping enabled}  \\
\end{array} \right.  
\end{align}
\]</span></p>
<p>其中$ { {N}<em>{}}=N</em>{}^{} <span
class="math inline">\(。正交序列\)</span> { {w}_{i}}(m) $由Table
6.3.2.2.1-1给定。</p>
<h6 id="物理资源映射-7">物理资源映射</h6>
<p><br/>参考信号序列应乘以一个幅值因子$ <em>{}^{} <span
class="math inline">\(，以符合TS38.213对发送功率\)</span> P</em>{}^{}
<span class="math inline">\(并在时隙内在天线端口\)</span> p <span
class="math inline">\(上，按以下方式从\)</span> r(0) <span
class="math inline">\(开始映射到资源粒子\)</span> (k,l) $</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; a_{k,l}^{(p,\mu )}=\beta
_{\text{DMRS}}^{\text{PUCCH1}}r(m) \\
\nonumber &amp; l=0,2,4,...  
\end{align}
\]</span></p>
<p>其中$ l=0 $对应于PUCCH发送的第1个OFDM符号。</p>
<h5 id="pucch格式2-dm-rs">PUCCH格式2 DM-RS</h5>
<h6 id="序列生成-4">序列生成</h6>
<p><br/>参考信号序列$ r(m) $应按以下方式生成</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中伪随机序列$ c(i) $在5.2节定义。</p>
<h6 id="物理资源映射-8">物理资源映射</h6>
<p><br/>参考信号序列应乘以一个幅值因子$ <em>{}^{} <span
class="math inline">\(，以符合TS38.213对发送功率\)</span> P</em>{}^{}
<span class="math inline">\(的规定，并在时隙内在天线端口\)</span> p
<span class="math inline">\(上，按以下方式从\)</span> r(0) <span
class="math inline">\(开始映射到资源粒子\)</span> (k,l) $</p>
<p><span class="math display">\[ \begin{align}
\nonumber  &amp; a_{k,l}^{(p,\mu )}=\beta
_{\text{DMRS}}^{\text{PUCCH2}}r(m) \\
\nonumber &amp; k=3m+1  
\end{align}
\]</span></p>
<p>其中$ k $是指相对于发送PUCCH所使用的最低编号的RB。</p>
<h4 id="srs">SRS</h4>
<h5 id="序列生成-5">序列生成</h5>
<p><br/>探测参考信号序列应按以下方式生成</p>
<p><span class="math display">\[ \begin{align}
\nonumber   &amp; { {r}^{(p)}}\left( n \right)=r_{u,v}^{(\alpha )}\left(
n \right) \\
\nonumber  &amp; 0\le n\le 272\cdot N_{\text{sc}}^{\text{RB}}  
\end{align}
\]</span></p>
<p>其中$ r_{u,v}^{()}( n ) $由5.2.2节给定。</p>
<h5 id="物理资源映射-9">物理资源映射</h5>
<p><br/>根据TS38.214中6.2.1节，当SRS发送时，序列$ { {r}^{(p)}}( n )
<span class="math inline">\(应乘以一个幅值因子\)</span> { {}<em>{}}
<span
class="math inline">\(，以符合TS38.213对发送功率的规定，并在时隙内在天线端口\)</span>
p <span class="math inline">\(上，按以下方式从\)</span> r</em>{}^{p}(0)
<span class="math inline">\(开始映射到资源粒子\)</span> (k,l) $</p>
<p><span class="math display">\[ a_{ {
{K}_{\text{TC}}}k&#39;+k_{0}^{(p)},l}^{(p)}=\left\{
\begin{array}{*{35}{l}}
   \frac{1}{\sqrt{ { {N}_{\text{ap}}}}}{ {\beta
}_{\text{SRS}}}r_{SRS}^{(p)}(k&#39;) &amp; k&#39;=0,1,\ldots
,M_{\text{sc},b}^{\text{RS}}-1  \\
   0 &amp; \text{otherwise}  \\
\end{array} \right.
\]</span></p>
<p>其中$ { {N}_{}}{ 1,2,4 } $是用于发送SRS的天线端口数。</p>
<p>探测参考信号应在上行天线端口$ 3000+i <span
class="math inline">\(上发送，其中\)</span> i <span
class="math inline">\(是\)</span> i=0 <span
class="math inline">\(，\)</span> i=0,1 <span
class="math inline">\(或\)</span> i=0,1,2,3 $之一。</p>
<p>$ k_{0}^{(p)} <span class="math inline">\(是天线端口\)</span> p
$上的SRS频域起始位置。SRS序列长度为</p>
<p><span class="math display">\[ M_{\text{sc,}b}^{\text{RS}}={ {
{m}_{\text{SRS,}b}}N_{\text{sc}}^{\text{RB}}}/{ { {K}_{\text{TC}}}}\;
\]</span></p>
<p>其中$ b={ {B}<em>{}} <span class="math inline">\(和\)</span> {
{m}</em>{b}} $由Table 5.5.3.2-1给定。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171024/083715829.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h1 id="下行链路">下行链路</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/10/24/nr-v110-l1-channel-modulation-dl/">5G-NR物理信道与调制-下行链路v1.1.0</a></p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
        <tag>2017-10</tag>
      </tags>
  </entry>
  <entry>
    <title>5G-NR物理信道与调制v1.1.0</title>
    <url>/2017/10/23/nr-v110-l1-channel-modulation/</url>
    <content><![CDATA[<blockquote>
<p><strong>Marshall：</strong>5G NR物理层规范已更新到<a
href="http://marshallcomm.cn/tags/2017-10/">v1.1.0版本</a>，本文整理了38.211规范v1.1.0版，同时宣告<a
href="http://marshallcomm.cn/tags/2017-09/">v1.0.0版本</a>过时。</p>
</blockquote>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/151427236.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h1 id="scope">Scope</h1>
<h1 id="references">References</h1>
<h1 id="definitions-symbols-and-abbreviations">Definitions, symbols and
abbreviations</h1>
<h1 id="帧结构与物理资源">帧结构与物理资源</h1>
<h2 id="概述">概述</h2>
<p><br/>在本规范中，除非另有说明，时域中各个域的大小表示为若干时间单位<span
class="math inline">\({ {T}_{\text{c}}}={1}/{\left( \Delta { {f}_{\max
}}\cdot { {N}_{\text{f}}} \right)}\;\)</span>，其中<span
class="math inline">\(\Delta { {f}_{\max }}=480\cdot { {10}^{3}}\text{
Hz}\)</span>，<span class="math inline">\({
{N}_{\text{f}}}=4096\)</span>。常数<span class="math inline">\(\kappa ={
{ {T}_{\text{s}}}}/{ { {T}_{\text{c}}}}\;=64\)</span>，其中<span
class="math inline">\({ {T}_{\text{s}}}={1}/{\left( \Delta {
{f}_{\text{ref}}}\cdot { {N}_{\text{f,ref}}} \right)}\;\)</span>，<span
class="math inline">\(\Delta { {f}_{\text{ref}}}=15\cdot {
{10}^{3}}\text{ Hz}\)</span>，<span class="math inline">\({
{N}_{\text{f,ref}}}=2048\)</span>。</p>
<blockquote>
<p><span class="math inline">\({
{T}_{\text{s}}}\)</span>是LTE的采样间隔，为了不引起混淆，NR的采样间隔用新的符号<span
class="math inline">\({ {T}_{c}}\)</span>命名，<span
class="math inline">\({ {T}_{c}}=64{ {T}_{s}}\)</span>。</p>
</blockquote>
<span id="more"></span>
<h2 id="波形参数">波形参数</h2>
<p><br/>如Table 4.2-1所示，NR支持多种OFDM波形参数。部分载波带宽（carrier
bandwidth part）的$
$和CP由高层参数给定，其中下行链路由<em>DL_BWP_mu</em>和<em>DL_BWP_cp</em>给定，上行链路由<em>UL_BWP_mu</em>和<em>UL_BWP_cp</em>给定。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/143031394.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p><strong>Marshall：</strong>NR支持多种子载波间隔，当$
$时即为LTE的参数配置，也就是说LTE的参数配置是NR的一个特例。</p>
</blockquote>
<h2 id="帧结构">帧结构</h2>
<h3 id="帧和子帧">帧和子帧</h3>
<p><br/>下行与上行链路传输于帧中，一帧的时域为$ { {T}<em>{}}=( {}/{100};
)=10 <span
class="math inline">\(，一帧包含10个子帧，每个子帧时域为\)</span> {
{T}</em>{}}=( {}/{1000}; )=1 <span
class="math inline">\(。每个子帧内连续的OFDM符号数为\)</span>
N_{}<sup>{,}=N_{}</sup>{}N_{}^{,}
$。每帧分为两个相等大小的半帧，每个半帧包含5个子帧，即半帧0由子帧0-4组成，半帧1由子帧5-9组成。</p>
<p>在一个载波上有一组帧用于上行链路，有一组帧用于下行链路。</p>
<p>来自UE的上行帧<span
class="math inline">\(i\)</span>应在UE对应的下行帧开始前$ { {T}<em>{}}={
{N}</em>{}}{ {T}_{}} $传输。</p>
<h3 id="时隙">时隙</h3>
<p><br/>对于子载波间隔配置$ <span
class="math inline">\(，时隙在子帧内按递增顺序编号为\)</span> n_{}^{}{
0,...,N_{}^{}-1 } <span
class="math inline">\(，在帧内按递增顺序编号为\)</span> n_{}^{}{
0,...,N_{}^{}-1 } <span class="math inline">\(。一个时隙内有\)</span>
N_{}^{} <span class="math inline">\(个连续的OFDM符号，其中\)</span>
N_{}^{} <span class="math inline">\(的值依赖于CP长度，CP长度由Tables
4.3.2-1 and 4.3.2-2给定。一个子帧内的起始时隙\)</span> n_{}^{} <span
class="math inline">\(与这个子帧内起始OFDM符号\)</span>n_{}<sup>{}N_{}</sup>{}$在时间上对齐。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/143556228.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/143622401.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p><strong>Marshall：</strong>一个帧是10ms，一个子帧是1ms，一个子帧内的时隙数是不定的，而一个时隙内的符号数是固定的，因此一个子帧内的符号数是不定的。这里唯一变化的参数就是时隙数，而时隙数是根据子载波间隔配置$
<span class="math inline">\(来确定的。追溯到源头，是由于\)</span>
$的不同配置，带来了上述参数的变化。</p>
</blockquote>
<h2 id="物理资源">物理资源</h2>
<h3 id="天线端口">天线端口</h3>
<p><br/>天线端口定义为，在同一个天线端口上，传输某一符号的信道可以从传输另一个符号的信道推知。</p>
<p>若在一个天线端口上传输的某一符号的信道的大尺度特性，可以从另一个天线端口上传输的某一符号的信道推知，则这两个天线端口被称为是准共定位（quasi
co-located，QCL）的。大尺度特性包括一个或多个时延扩展，多普勒频移，平均增益，平均时延，空间Rx参数。</p>
<h3 id="资源格">资源格</h3>
<p><br/>对于给定的波形参数和子载波间隔配置，资源格定义为$
N_{x}<sup>{}N_{}</sup>{} <span
class="math inline">\(个频域子载波和\)</span> N_{}^{,} <span
class="math inline">\(个时域OFDM符号，其中\)</span> N_{x}^{} <span
class="math inline">\(由Table 4.4.2-1给定，\)</span> x <span
class="math inline">\(表示DL（downlink）或UL（uplink）。在不会产生混淆时，下标\)</span>
x <span class="math inline">\(可省略。每个天线端口\)</span> p <span
class="math inline">\(、每个子载波间隔配置\)</span>
$以及每个传输方向（上行或下行），对应一个资源格。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/143930833.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h3 id="资源粒子">资源粒子</h3>
<p><br/>对于天线端口$ p <span
class="math inline">\(和子载波间隔配置\)</span> <span
class="math inline">\(，资源格中的每个元素被称为资源粒子，并且由索引对\)</span>
( k,l ) <span class="math inline">\(唯一地标识，其中\)</span> k <span
class="math inline">\(是频域索引，\)</span> l $是时域符号索引。</p>
<p>天线端口$ p <span class="math inline">\(和子载波间隔配置\)</span>
<span class="math inline">\(下的资源粒子表示为\)</span> { {( k,l
)}<em>{p,}} <span class="math inline">\(，其对应的复数值为\)</span>
a</em>{k,l}^{(p,)} <span
class="math inline">\(。在不会产生混淆时，或在没有指定某一天线端口或子载波间隔时，索引\)</span>
p <span class="math inline">\(和\)</span> <span
class="math inline">\(可以省略，表示为\)</span> a_{k,l}^{(p)} <span
class="math inline">\(或\)</span> { {a}_{k,l}} $。</p>
<p>一个资源粒子可分为“上行链路”、“下行链路”、“灵活”或“保留”。</p>
<ul>
<li>如果一个资源粒子被配置为“保留”，UE不应在上行链路资源粒子中传输任何数据，也不应假设下行链路资源粒子中有任何内容。</li>
</ul>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/144316598.png" title="Figure 4.4.3-1: Resource grid and resource block" /></p>
<h3 id="资源块">资源块</h3>
<p><br/>在频域内，物理资源块定义为$ N_{}^{}=12 $连续的子载波。</p>
<p>在频域内，物理资源块从0到$ N_{}^{}-1 <span
class="math inline">\(进行编号。在频域内，物理资源块号\)</span> {
{n}_{}} $与资源粒子 的关系如下：</p>
<p><span class="math display">\[ { {n}_{\text{PRB}}}=\left\lfloor
\frac{k}{N_{\text{sc}}^{\text{RB}}} \right\rfloor  \]</span></p>
<h3 id="部分载波带宽">部分载波带宽</h3>
<p><br/>对于给定载波上的给定波形参数$ { {}<em>{i}} <span
class="math inline">\(，部分载波带宽（Carrier bandwidth
part）定义为一个物理资源块（在4.4.4中定义）的连续子集。BWP中的资源块从0到\)</span>
N</em>{x}^{}-1 <span class="math inline">\(进行编号，其中\)</span> x
<span class="math inline">\(表示DL（downlink）或UL（uplink）。\)</span>
N_{}^{i} <span
class="math inline">\(是4.4.4节中绝对资源块格栅中的PRB0与编号为\)</span>i<span
class="math inline">\(的部分载波载波带宽中的PRB0之间的偏移。一个BWP内的资源块数应满足\)</span>
N_{x}<sup>{}N_{x}</sup>{}N_{x}^{} $，其中最小与最大值由Table
4.4.2-1给定。</p>
<p>在下行链路，UE可以配置一个或多个BWP，并且可以在指定的时间对下行BWP进行激活。在激活的BWP之外，UE不会接收PDSCH或PDCCH。</p>
<p>在上行链路，UE可以配置一个或多个BWP，并且可以在指定的时间对上行BWP进行激活。在激活的BWP之外，UE不会接收PUSCH或PUCCH。</p>
<h2 id="载波聚合">载波聚合</h2>
<p><br/>多个小区的传输可以被聚合起来，除了主小区之外最多可聚合15个次级小区。除非另有说明，本规范中的描述适用于多达16个服务小区中的每一个。</p>
<h1 id="通用函数">通用函数</h1>
<h2 id="调制映射器">调制映射器</h2>
<p><br/>调制映射器采用二进制0或1作为输入，产生复值调制符号作为输出。</p>
<h3 id="π2-bpsk">π/2-BPSK</h3>
<p><br/>对于π/2-BPSK调制，比特<span
class="math inline">\(b(i)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[x=\frac{ { {e}^{j{i\pi
}/{2}\;}}}{\sqrt{2}}\left[ \left( 1-2b(i) \right)+j\left( 1-2b(i)
\right) \right]\]</span></p>
<h3 id="bpsk">BPSK</h3>
<p><br/>对于BPSK调制，比特<span
class="math inline">\(b(i)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[x=\frac{1}{\sqrt{2}}\left[ \left(
1-2b(i) \right)+j\left( 1-2b(i) \right) \right]\]</span></p>
<h3 id="qpsk">QPSK</h3>
<p><br/>对于QPSK调制，成对比特<span
class="math inline">\(b(i),b(i+1)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[x=\frac{1}{\sqrt{2}}\left[ \left(
1-2b(i) \right)+j\left( 1-2b(i+1) \right) \right]\]</span></p>
<h3 id="qam">16QAM</h3>
<p><br/>对于16QAM调制，四位比特<span
class="math inline">\(b(i),b(i+1),b(i+2),b(i+3)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[x=\frac{1}{\sqrt{10}}\left[ \left(
1-2b(i) \right)\left( 2-\left( 1-2b(i+2) \right) \right)+j\left(
1-2b(i+1) \right)\left( 2-\left( 1-2b(i+3) \right) \right)
\right]\]</span></p>
<h3 id="qam-1">64QAM</h3>
<p><br/>对于64QAM调制，六位比特<span
class="math inline">\(b(i),b(i+1),b(i+2),b(i+3),b(i+4),b(i+5)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; x=\frac{1}{\sqrt{42}}\left[ \left( 1-2b(i)
\right)\left( 4-\left( 1-2b(i+2) \right)\left( 2-\left( 1-2b(i+4)
\right) \right) \right) \right. \\
\nonumber &amp; \ \ \ \ \ \ \left. +j\left( 1-2b(i+1) \right)\left(
4-\left( 1-2b(i+3) \right)\left( 2-\left( 1-2b(i+5) \right) \right)
\right) \right] \\
\end{align}\]</span></p>
<h3 id="qam-2">256QAM</h3>
<p><br/>对于256QAM调制，八位比特<span
class="math inline">\(b(i),b(i+1),b(i+2),b(i+3),b(i+4),b(i+5),b(i+6),b(i+7)\)</span>根据下式映射为复值调制符号<span
class="math inline">\(x\)</span></p>
<p><span class="math display">\[\begin{align}
\nonumber &amp; x=\frac{1}{\sqrt{170}}\left[ \left( 1-2b(i)
\right)\left( 8-\left( 1-2b(i+2) \right)\left( 4-\left( 1-2b(i+4)
\right)\left( 2-\left( 1-2b(i+6) \right) \right) \right) \right) \right.
\\
\ \ \ \nonumber &amp; \left. +j\left( 1-2b(i+1) \right)\left( 8-\left(
1-2b(i+3) \right)\left( 4-\left( 1-2b(i+5) \right)\left( 2-\left(
1-2b(i+7) \right) \right) \right) \right) \right]  
\end{align}\]</span></p>
<h2 id="序列生成">序列生成</h2>
<h3 id="伪随机序列生成">伪随机序列生成</h3>
<p><br/>伪随机序列由长度为31的Gold序列定义。输出序列$ c(n) <span
class="math inline">\(长度为\)</span> { {M}<em>{}} <span
class="math inline">\(，其中\)</span> n=0,1,...,{ {M}</em>{}}-1 <span
class="math inline">\(，\)</span> c(n) $由下式定义</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; c(n)=\left( { {x}_{1}}(n+{ {N}_{C}})+{ {x}_{2}}(n+{
{N}_{C}}) \right)\bmod 2 \\
\nonumber &amp; { {x}_{1}}(n+31)=\left( { {x}_{1}}(n+3)+{ {x}_{1}}(n)
\right)\bmod 2 \\
\nonumber &amp; { {x}_{2}}(n+31)=\left( { {x}_{2}}(n+3)+{
{x}_{2}}(n+2)+{ {x}_{2}}(n+1)+{ {x}_{2}}(n) \right)\bmod 2  
\end{align}
\]</span></p>
<p>其中$ { {N}<em>{C}}=1600 <span
class="math inline">\(，第一m序列应由\)</span> { {x}</em>{1}}(0)=1,{
{x}<em>{1}}(n)=0,n=1,2,...,30 <span
class="math inline">\(初始化。第二m序列由\)</span> {
{c}</em>{}}=<em>{i=0}^{30}{ { {x}</em>{2}}(i)}
$进行初始化，其值取决于序列的应用。</p>
<h3 id="zc序列生成">ZC序列生成</h3>
<p><br/>序列$ r_{u,v}^{(,)}(n) <span
class="math inline">\(由基序列\)</span> { _{u,v}}(n) <span
class="math inline">\(根据下式的循环移位\)</span> $得到：</p>
<p><span class="math display">\[ r_{u,v}^{(\alpha ,\delta
)}(n)=\begin{matrix}
   { {e}^{j\alpha \left( n+\delta \frac{\omega \bmod 2}{2} \right)}}{ {
{\bar{r}}}_{u,v}}(n), &amp; 0\le n&lt;{ {M}_{\text{ZC}}}  \\
\end{matrix}-1
\]</span></p>
<p>其中$ { {M}<em>{}}={mN</em>{}^{}}/{ { {2}^{}}}; <span
class="math inline">\(是序列长度，且\)</span> 1mN_{}^{} <span
class="math inline">\(。多个序列由基序列根据不同的\)</span> <span
class="math inline">\(和\)</span> $值来得到。</p>
<p>基序列$ { <em>{u,v}}(n) <span
class="math inline">\(被分为若干组，\)</span> u{ 0,1,...,29 } <span
class="math inline">\(是分组号，\)</span> v <span
class="math inline">\(是组内基序列号。每个组包含一个长度为\)</span> {
{M}</em>{}}=mN_{}^{} <span class="math inline">\(的基序列（\)</span> v=0
<span class="math inline">\(）且\)</span> 1m <span
class="math inline">\(，和两个长度为\)</span> { {M}<em>{}}=mN</em>{}^{}
<span class="math inline">\(的基序列（\)</span> v=0,1 <span
class="math inline">\(）且\)</span> 6mN_{}^{} <span
class="math inline">\(。基序列\)</span> { <em>{u,v}}(0),...,{
</em>{u,v}}({ {M}<em>{}}-1) <span
class="math inline">\(的定义依赖于序列长度\)</span> { {M}</em>{}}
$。</p>
<h4 id="长度大于等于-3n_-的基序列">长度大于等于$ 3N_{}^{} $的基序列</h4>
<p><br/>对于$ { {M}<em>{}}3N</em>{}^{} <span
class="math inline">\(，基序列\)</span> { <em>{u,v}}(0),...,{
</em>{u,v}}({ {M}_{}}-1) $为</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; { { {\bar{r}}}_{u,v}}(n)={ {x}_{q}}\left( n\bmod {
{N}_{\text{ZC}}} \right) \\
\nonumber &amp; { {x}_{q}}\left( m \right)={ {e}^{-j\frac{\pi qm\left(
m+1 \right)}{ { {N}_{\text{ZC}}}}}}  
\end{align}
\]</span></p>
<p>其中</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; q=\left\lfloor \bar{q}+{1}/{2}\; \right\rfloor +v\cdot
{ {(-1)}^{\left\lfloor 2\bar{q} \right\rfloor }} \\
\nonumber &amp; \bar{q}={ {N}_{\text{ZC}}}\cdot {(u+1)}/{31}\; \\
\end{align}
\]</span></p>
<p>长度$ { {N}<em>{}} <span class="math inline">\(为满足\)</span> {
{N}</em>{}}&lt;{ {M}_{}} $的最大素数。</p>
<h4 id="长度小于-3n_-的基序列">长度小于$ 3N_{}^{} $的基序列</h4>
<p><br/>对于$ { {M}<em>{}}={ {N}</em>{}} <span
class="math inline">\(和\)</span> { {M}<em>{}}=2{ {N}</em>{}}
$，基序列为</p>
<p><span class="math display">\[ { {\bar{r}}_{u,v}}(n)=\begin{matrix}
   { {e}^{j{\phi (n)\pi }/{4}\;}}, &amp; 0\le n\le {
{M}_{\text{ZC}}}-1  \\
\end{matrix}
\]</span></p>
<p>其中$ (n) $的值由Tables 5.5.1.2-1 and 5.5.1.2-2给定。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/145910963.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171023/150000105.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h2 id="ofdm基带符号生成">OFDM基带符号生成</h2>
<p><br/>时域连续序号$ s_{l}^{(p,)}( t ) <span
class="math inline">\(是天线端口\)</span> p <span
class="math inline">\(和子载波间隔配置\)</span> <span
class="math inline">\(下，在一个子帧内的第\)</span> l
$个OFDM符号。OFDM符号用于除PRACH之外的任何物理信道或物理信号，定义为</p>
<p><span class="math display">\[ s_{ {\bar{l}}}^{(p,\mu )}\left( t
\right)=\sum\limits_{k=-\left\lfloor N_{\text{RB}}^{\mu
}N_{\text{sc}}^{\text{RB}}/2 \right\rfloor }^{ { {\left\lceil
N_{\text{RB}}^{\mu }N_{\text{sc}}^{\text{RB}}/2 \right\rceil }^{
{}}}-1}{a_{ {k}&#39;,l}^{(p,\mu )}\cdot { {e}^{j2\pi \left( k+{ {k}_{0}}
\right)\Delta f\left( t-{ {N}_{\text{CP},l}}{ {T}_{\text{c}}} \right)}}}
\]</span></p>
<p>其中$ 0t&lt;( { {N}<em>{}}+N</em>{,{l}}^{} ){ {T}<em>{}} <span
class="math inline">\(且\)</span> {k}'=k+/{2}; <span
class="math inline">\(。\)</span> { {k}</em>{0}} <span
class="math inline">\(是在子载波间隔配置\)</span> <span
class="math inline">\(下，一个RB内最低编号的子载波，并且与任何小于\)</span>
$的配置下的RB内最低编号的子载波相一致。</p>
<p>子载波间隔配置$ <span
class="math inline">\(下，一个子帧内OFDM符号\)</span> l
$的起始位置为</p>
<p><span class="math display">\[ t_{\text{start},l}^{\mu }=\left\{
\begin{array}{*{35}{l}}
   0 &amp; l=0  \\
   t_{\text{start},l-1}^{\mu }+\left( {
{N}_{\text{u}}}+N_{\text{CP,}l-1}^{\mu } \right)\cdot { {T}_{\text{c}}}
&amp; \text{otherwise}  \\
\end{array} \right.
\]</span></p>
<p>其中</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; { {N}_{\text{u}}}=2048\kappa \cdot { {2}^{-\mu }} \\
  \nonumber &amp; { {N}_{\text{CP},l}}=\left\{ \begin{array}{*{35}{l}}
   512\kappa \cdot { {2}^{-\mu }} &amp; \text{extended cyclic
prefix}  \\
   144\kappa \cdot { {2}^{-\mu }}+16\kappa  &amp; \text{normal cyclic
prefix and }l=0\text{ or }l=7  \\
   144\kappa \cdot { {2}^{-\mu }} &amp; \text{otherwise}  \\
\end{array} \right.\cdot { {2}^{\mu }}  
\end{align}
\]</span></p>
<p>时域连续符号$ s_{l}^{(p,)}( t ) <span
class="math inline">\(是天线端口\)</span> p
$上用于传输PRACH的符号，定义为</p>
<p><span class="math display">\[ s_{l}^{(p,\mu )}\left( t
\right)=\sum\limits_{k=-\left\lfloor { {L}_{\text{RA}}}/2 \right\rfloor
}^{ { {\left\lceil { {L}_{\text{RA}}}/2 \right\rceil }^{ {}}}-1}{a_{ {
{k}&#39;}}^{(p,\text{RA})}\cdot { {e}^{j2\pi \left( k+{ {k}_{0}}
\right)\Delta { {f}_{\text{RA}}}\left( t-N_{\text{CP},l}^{\text{RA}}{
{T}_{\text{c}}} \right)}}} \]</span></p>
<p>其中$ 0t&lt;( { {N}<em>{}}+N</em>{,l}^{} ){ {T}_{}} <span
class="math inline">\(且\)</span> {k}'=k+/{2}; $。</p>
<p>一个子帧内PRACH前导的起始位置定义为$ t_{}^{} <span
class="math inline">\(，假设子帧在\)</span> t=0 $时刻开始，</p>
<ul>
<li>对于$ { 15,30,60,120 } <span
class="math inline">\(，对于符号\)</span> l <span
class="math inline">\(有\)</span> t_{}<sup>{}=t_{,l}</sup>{} $</li>
</ul>
<p>$ { {L}<em>{}} <span class="math inline">\(和\)</span> { {N}</em>{}}
<span class="math inline">\(由6.3.3节和\)</span>
N_{,l}<sup>{}=N_{}</sup>{}+n$给定，其中</p>
<ul>
<li>对于$ { 1.25,5 } <span class="math inline">\(，有\)</span> n=0
$</li>
<li>对于$ { 15,30,60,120 } <span class="math inline">\(，\)</span>n$ is
the number of times the interval $ $ overlaps with either time instance
0 or time instance $ ( {}/{2000}; )=0.5 $ in a subframe.</li>
</ul>
<h2 id="调制和上变频">调制和上变频</h2>
<p><br/>对于天线端口$ p <span
class="math inline">\(和子载波间隔配置\)</span> <span
class="math inline">\(，复值OFDM基带信号调制和上变频至载频\)</span> {
{f}_{0}} $：</p>
<p><span class="math display">\[ \operatorname{Re}\left\{ s_{l}^{(p,\mu
)}\left( t \right)\cdot { {e}^{j2\pi { {f}_{0}}t}} \right\}
\]</span></p>
<h1 id="上行链路">上行链路</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/10/23/nr-v110-l1-channel-modulation-ul/">5G-NR物理信道与调制-上行链路v1.1.0</a></p>
<h1 id="下行链路">下行链路</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/10/24/nr-v110-l1-channel-modulation-dl/">5G-NR物理信道与调制-下行链路v1.1.0</a></p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
        <tag>2017-10</tag>
      </tags>
  </entry>
  <entry>
    <title>5G 帧结构、物理资源与物理信道</title>
    <url>/2017/12/17/nr-v200-l1-channel-modulation/</url>
    <content><![CDATA[<h1 id="scope">Scope</h1>
<h1 id="references">References</h1>
<h1 id="definitions-symbols-and-abbreviations">Definitions, symbols and
abbreviations</h1>
<h1 id="帧结构与物理资源">帧结构与物理资源</h1>
<h2 id="概述">概述</h2>
<p><br/>在本规范中，除非另有说明，时域中各个域的大小表示为若干时间单位$
{ {T}<em>{}}={1}/{( )}; <span class="math inline">\(，其中\)</span> =480
<span class="math inline">\(，\)</span> { {N}</em>{}}=4096 <span
class="math inline">\(。常量\)</span> ={ { {T}<em>{}}}/{ {
{T}</em>{}}};=64 <span class="math inline">\(，其中\)</span> {
{T}<em>{}}={1}/{( )}; <span class="math inline">\(，\)</span> =15 <span
class="math inline">\(，\)</span> { {N}</em>{}}=2048 $。</p>
<h2 id="参数集">参数集</h2>
<p><br/>如Table 4.2-1所示，NR支持多种OFDM参数集。部分载波带宽（carrier
bandwidth part，BWP）的$$和CP由高层参数给定，其中下行链路由
<em>DL_BWP_mu</em> 和 <em>DL_BWP_cp</em> 给定，上行链路由
<em>UL_BWP_mu</em> 和 <em>UL_BWP_cp</em> 给定。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171217/103110923.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<span id="more"></span>
<h2 id="帧结构">帧结构</h2>
<h3 id="帧和子帧">帧和子帧</h3>
<p><br/>一帧的时域为$ { {T}<em>{}}=( {}/{100}; )=10 <span
class="math inline">\(，一帧包含10个子帧，每个子帧时域为\)</span> {
{T}</em>{}}=( {}/{1000}; )=1 <span
class="math inline">\(。每个子帧内连续的OFDM符号数为\)</span>
N_{}<sup>{,}=N_{}</sup>{}N_{}^{,}
$。每帧分为两个相等大小的半帧，每个半帧包含5个子帧，即半帧0由子帧0-4组成，半帧1由子帧5-9组成。</p>
<p>根据[38.133]，来自UE的上行帧应在UE对应的下行帧开始前传输。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171217/103249131.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h3 id="时隙">时隙</h3>
<p><br/>对于子载波间隔配置$<span
class="math inline">\(，时隙在子帧内按递增顺序编号为\)</span> n_{}^{}{
0,...,N_{}^{}-1 } <span
class="math inline">\(，在帧内按递增顺序编号为\)</span> n_{}^{}{
0,...,N_{}^{}-1 } <span class="math inline">\(。一个时隙内有\)</span>
N_{}^{} <span class="math inline">\(个连续的OFDM符号，其中\)</span>
N_{}^{} $的值取决于CP长度，CP长度由Tables 4.3.2-1 and
4.3.2-2给定。一个子帧内的起始时隙与这个子帧内起始OFDM符号在时间上对齐。</p>
<p>时隙内的OFDM符号被分为“downlink”（在Table
4.3.2-3中表示为D）、“flexible”（表示为X）或“uplink”（表示为U）。</p>
<p>在下行时隙，UE应假定下行传输仅发生在downlink符号或flexible符号。</p>
<p>在上行时隙，UE应仅在uplink符号或flexible符号发送。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171217/103550091.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171217/103613538.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171217/103715352.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171217/103753007.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171217/103829112.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h2 id="物理资源">物理资源</h2>
<h3 id="天线端口">天线端口</h3>
<p><br/>天线端口定义为，在同一个天线端口上，传输某一符号的信道可以从传输另一个符号的信道推知。</p>
<p>若在一个天线端口上传输的某一符号的信道的大尺度特性，可以从另一个天线端口上传输的某一符号的信道推知，则这两个天线端口被称为是<strong>准共定位（quasi
co-located，QCL）</strong>的。大尺度特性包括一个或多个时延扩展，多普勒扩展，多普勒频移，平均增益，平均时延，空间Rx参数。</p>
<h3 id="资源格">资源格</h3>
<p><br/>对于每个参数集和载波，资源格（Resource grid）定义为$
N_{x}<sup>{}N_{}</sup>{} <span class="math inline">\(个子载波和\)</span>
N_{}^{,} <span class="math inline">\(个OFDM符号，起始公共资源块（common
resource block）\)</span> N_{}^{,} <span
class="math inline">\(由高层信令指示。表示DL（downlink）或UL（uplink），在不会产生混淆时，下标可省略。每个天线端口\)</span>
p <span
class="math inline">\(、每个子载波间隔配置\)</span>$以及每个传输方向（上行或下行），对应一个资源格。</p>
<h3 id="资源粒子">资源粒子</h3>
<p><br/>天线端口$ p <span
class="math inline">\(和子载波间隔配置\)</span><span
class="math inline">\(的资源格中的每个元素被称为资源粒子（resource
element），并且由索引对\)</span> { {( k,l )}<em>{p,}} <span
class="math inline">\(唯一地标识，其中\)</span> k <span
class="math inline">\(是频域索引，\)</span> l <span
class="math inline">\(是时域符号索引。资源粒子\)</span> { {( k,l
)}</em>{p,}} <span class="math inline">\(对应的复数值为\)</span>
a_{k,l}^{(p,)} <span
class="math inline">\(。在不会产生混淆时，或在没有指定某一天线端口或子载波间隔时，索引\)</span>
p <span class="math inline">\(和\)</span><span
class="math inline">\(可以省略，表示为\)</span> a_{k,l}^{(p)} <span
class="math inline">\(或\)</span> { {a}_{k,l}} $。</p>
<h3 id="资源块">资源块</h3>
<h4 id="概述-1">概述</h4>
<p><br/>资源块（resource block）定义为$ N_{}^{}=12
$个连续频域子载波。</p>
<h4 id="参考资源块">参考资源块</h4>
<p><br/>参考资源块（reference resource
block）在频域上从0开始编号。参考资源块0的子载波0对于所有的子载波配置
是公共的，也被称为“参考点A”，并且用作其他资源块格的公共参考点。参考点A从以下高层参数获得</p>
<ul>
<li><em>PRB-index-DL-common</em> for a PCell downlink</li>
<li><em>PRB-index-UL-common</em> for a PCell uplink</li>
<li><em>PRB-index-DL-Dedicated</em> for an SCell downlink</li>
<li><em>PRB-index-UL-Dedicated</em> for an SCell uplink</li>
<li><em>PRB-index-SUL-common</em> for a supplementary uplink</li>
</ul>
<h4 id="公共资源块">公共资源块</h4>
<p><br/>公共资源块（common resource block）在子载波间隔配置$<span
class="math inline">\(的频域上从0开始编号。子载波间隔配置\)</span>$下的公共资源块0的子载波0与“参考点A”一致。</p>
<p>对于子载波间隔配置$<span
class="math inline">\(，频域上的公共资源块号\)</span> { {n}_{}} <span
class="math inline">\(与资源粒子\)</span> (k,l) $的关系为</p>
<p><span class="math display">\[ n_{\text{CRB}}^{\mu }=\left\lfloor
\frac{k}{N_{\text{sc}}^{\text{RB}}} \right\rfloor  \]</span></p>
<p>其中$ k <span
class="math inline">\(是相对于子载波间隔配置\)</span>$下的资源格0的子载波0定义的。</p>
<h4 id="物理资源块">物理资源块</h4>
<p><br/>物理资源块（physical resource block）在BWP中定义，编号为从0到$
N_{i}^{}-1 <span class="math inline">\(，其中\)</span> i $是BWP数。在BWP
$ i $内，PRB与CRB的关系为</p>
<p><span class="math display">\[ { {n}_{\text{CRB}}}=n_{\text{PRB}}^{
{}}+N_{\text{BWP,}i}^{\text{start}} \]</span></p>
<p>其中$ N_{i}^{} $是BWP相对于公共资源块0的起始资源块。</p>
<h4 id="虚拟资源块">虚拟资源块</h4>
<p><br/>虚拟资源块（virtual resource block）在BWP中定义，编号为从0到$
N_{i}^{}-1 <span class="math inline">\(，其中\)</span> i $是BWP数。</p>
<h3 id="bwp">BWP</h3>
<p><br/>BWP是在给定参数集和给定载波上的一组连续的物理资源块。BWP的起始位置$
N_{i}^{} <span class="math inline">\(和资源块数\)</span> N_{i}^{}&gt;0
<span class="math inline">\(应满足\)</span>
0N_{i}<sup>{}&lt;N_{x}</sup>{} $。</p>
<p>UE可以在下行链路中被配置多达四个BWP，并且在给定时间内只有一个DL
BWP处于激活状态。UE不应在激活的BWP之外接收PDSCH，PDCCH，CSI-RS或TRS。</p>
<p>UE可以在上行链路中被配置多达四个BWP，并且在给定时间内只有一个UL
BWP处于激活状态。如果UE配置有辅助（supplementary）上行链路，则UE可以在辅助上行链路中另外配置多达四个BWP，并且在给定时间内只有一个辅助UL
BWP处于激活状态。UE不应在激活的BWP之外传输PUSCH或PUCCH。</p>
<h2 id="载波聚合">载波聚合</h2>
<p><br/>多个小区的传输可以被聚合起来，除了主小区之外最多可聚合15个次级小区。除非另有说明，本规范中的描述适用于多达16个服务小区中的每一个。</p>
<h1 id="通用函数">通用函数</h1>
<h1 id="上行链路">上行链路</h1>
<h2 id="概述-2">概述</h2>
<h3 id="物理信道概述">物理信道概述</h3>
<ul>
<li>物理上行共享信道（PUSCH）</li>
<li>物理上行控制信道（PUCCH）</li>
<li>物理随机接入信道（PRACH）</li>
</ul>
<h3 id="物理信号概述">物理信号概述</h3>
<ul>
<li>解调参考信号（DM-RS）</li>
<li>相位跟踪参考信号（PT-RS）</li>
<li>探测参考信号（SRS）</li>
</ul>
<h2 id="物理资源-1">物理资源</h2>
<p><br/>当UE进行上行传输时，使用的帧结构和物理资源在第4章定义。</p>
<p>定义下列天线端口用于上行链路：</p>
<ul>
<li>PUSCH相关的DMRS使用以1000为起始的天线端口</li>
<li>PUCCH相关的DMRS使用以2000为起始的天线端口</li>
<li>PRACH使用天线端口4000</li>
</ul>
<h1 id="下行链路">下行链路</h1>
<h2 id="概述-3">概述</h2>
<h3 id="物理信道概述-1">物理信道概述</h3>
<ul>
<li>物理下行共享信道（PDSCH）</li>
<li>物理广播信号（PBCH）</li>
<li>物理下行控制信道（PDCCH）</li>
</ul>
<h3 id="物理信号概述-1">物理信号概述</h3>
<ul>
<li>解调参考信号（DM-RS）</li>
<li>相位跟踪参考信号（PT-RS）</li>
<li>信道状态信号参考信号（CSI-RS）</li>
<li>主同步信号（PSS）</li>
<li>辅同步信号（SSS）</li>
</ul>
<h2 id="物理资源-2">物理资源</h2>
<p><br/>当接收下行链路发送的数据时，UE应假定采用第4章定义的帧结构和物理资源。</p>
<p>定义下列天线端口用于下行链路：</p>
<ul>
<li>PDSCH相关的DM-RS使用以1000为起始的天线端口</li>
<li>PDCCH相关的DM-RS使用以2000为起始的天线端口</li>
<li>CSI-RS使用以3000为起始的天线端口</li>
<li>SS/PBCH块传输使用以4000为起始的天线端口</li>
</ul>
<blockquote>
<p>本文参考3GPP TS38.211 V2.0.0 (2017-12)</p>
</blockquote>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
        <tag>2017-12</tag>
      </tags>
  </entry>
  <entry>
    <title>5G NSA物理层协议</title>
    <url>/2017/12/31/nr-v200-l1-index/</url>
    <content><![CDATA[<h1 id="nsa">NSA</h1>
<p><br/><strong>5G NSA物理层规范——v2.0.0（201712）</strong></p>
<p><a
href="http://marshallcomm.cn/2017/12/17/nr-v200-l1-channel-modulation/">5G
帧结构、物理资源与物理信道</a></p>
<p><a href="http://marshallcomm.cn/2017/12/29/nr-v200-l1-ssb/">5G
SSB与小区搜索</a></p>
<p><a href="http://marshallcomm.cn/2017/12/29/nr-v200-l1-prach/">5G
PRACH与随机接入</a></p>
<p><a href="http://marshallcomm.cn/2017/12/30/nr-v200-l1-pdcch/">5G
PDCCH</a></p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
        <tag>2017-12</tag>
      </tags>
  </entry>
  <entry>
    <title>5G PDCCH</title>
    <url>/2017/12/30/nr-v200-l1-pdcch/</url>
    <content><![CDATA[<h1 id="pdcch">PDCCH</h1>
<h2 id="cce">CCE</h2>
<p><br/>PDCCH由一个或多个控制信道单元（control-channel
element，CCE）组成，见Table 7.3.2.1-1。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171230/110738019.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h2 id="coreset">CORESET</h2>
<p><br/>控制资源集（control-resource set，CORESET）由$ N_{}^{} <span
class="math inline">\(个频域RBs和\)</span> N_{}^{}{ 1,2,3 } <span
class="math inline">\(个时域符号组成，\)</span> N_{}^{} <span
class="math inline">\(的值由高层参数 *CORESET-freq-dom* 给定，\)</span>
N_{}^{} <span class="math inline">\(的值由高层参数 *CORESET-time-dur*
给定，其中仅当高层参数 *DL-DMRS-typeA-pos=3* 时才支持\)</span> N_{}^{}=3
$。</p>
<p>1个CCE由6个资源粒子组（resource-element
group，REG）组成，1个REG等于1个OFDM符号上的1个RB。CORESET内的REGs以时域优先的方式按升序编号，从CORESET中第1个OFDM符号且编号最小的RB以0开始编号。</p>
<p>UE可配置多个CORESETs，每个CORESET仅对应一种CCE-to-REG映射。</p>
<p>CORESET中CCE-to-REG映射可以是交织的或非交织的，这由高层参数
<em>CORESET-CCE-REG-mapping-type</em> 来配置，并且由REG捆绑（REG
bundle）来描述：</p>
<ul>
<li>REG bundle $ i $ 定义为一组REGs $ { iL,iL+1,...,iL+L-1 } <span
class="math inline">\(，其中\)</span> L <span
class="math inline">\(是REG bundle大小，\)</span>
i=0,1,...,{N_{}^{}}/{L};-1 <span class="math inline">\(，且\)</span>
N_{}<sup>{}=N_{}</sup>{}N_{}^{} $是CORESET中REG的数目；</li>
<li>CCE $ j $由一组REG bundles $ {
f({6j}/{L};),f({6j}/{L};+1),...,f({6j}/{L};+{6}/{L};-1) } <span
class="math inline">\(组成，其中\)</span> f() $是交织器</li>
</ul>
<p>对于非交织CEE-to-REG映射，$ L=6 <span
class="math inline">\(且\)</span> f(j)=j $。</p>
<p>对于交织CEE-to-REG映射，当$ N_{}^{}=1 <span
class="math inline">\(时，有\)</span> L{ 2,6 } <span
class="math inline">\(；当\)</span> N_{}^{}{ 2,3 } <span
class="math inline">\(时，有\)</span> L{ N_{}^{},6 } <span
class="math inline">\(，其中\)</span> L
$由高层参数<em>CORESET-REG-bundle-size</em>配置。交织器定义为</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; f(j)=\left( rC+c+{ {n}_{\text{shift}}} \right)\bmod
\left( {N_{\text{REG}}^{\text{CORESET}}}/{L}\; \right) \\
\nonumber &amp; j=cR+r \\
\nonumber  &amp; r=0,1,...,R-1 \\
\nonumber &amp; c=0,1,...,C-1 \\
\nonumber &amp; C=\left\lceil {N_{\text{REG}}^{\text{CORESET}}}/{\left(
LR \right)}\; \right\rceil   
\end{align}
\]</span></p>
<p>其中$ R{ 2,3,6 } $由高层参数 <em>CORESET-interleaver-size</em>
给定，且</p>
<ul>
<li>$ { {n}<em>{}} $是物理层小区ID $ N</em>{}^{} $ 的函数</li>
<li>$ { {n}_{}}{ 0,1,...,274 } $是高层参数 <em>CORESET-shift-index</em>
的函数</li>
</ul>
<p>UE可假定（频域预编码颗粒度）</p>
<ul>
<li>如果高层参数 <em>CORESET-precoder-granularity</em>
等于CORESET-REG-bundle-size，则在REG
bundle中，在频域上使用相同的预编码；</li>
<li>如果高层参数 <em>CORESET-precoder-granularity</em>
等于CORESET频域大小，则在CORESET中的连续RBs内的所有REGs中，在频域上使用相同的预编码</li>
</ul>
<p>对于PBCH配置的CORESET，$ L=6 $。</p>
<span id="more"></span>
<h2 id="加扰">加扰</h2>
<p><br/>UE应假定比特块$ b(0),...,b(M_{}^{ {}}-1) <span
class="math inline">\(在调制前进行加扰，其中\)</span> M_{}^{ {}} <span
class="math inline">\(是PDCCH传输的比特数，加扰后的比特块为\)</span>
(0),...,(M_{}^{ {}}-1) $</p>
<p><span class="math display">\[ \tilde{b}(i)=\left( b(i)+c(i)
\right)\bmod 2 \]</span></p>
<p>其中扰码序列$ c(i) $在38.211的5.2.1节给定。</p>
<h2 id="调制">调制</h2>
<p><br/>UE应假定比特块$ (0),...,({ {M}<em>{}}-1) <span
class="math inline">\(采用QPSK调制，得到复值调制符号块\)</span>
d(0),...,d({ {M}</em>{}}-1) $。QPSK调制见38.211的5.1.3节。</p>
<h2 id="物理资源映射">物理资源映射</h2>
<p><br/>在用于所监测的PDCCH的REGs中，UE应假定复值符号块$ d(0),...,d({
{M}<em>{}}-1) <span class="math inline">\(乘以幅值因子\)</span> {
{}</em>{}} <span class="math inline">\(，并按照先\)</span> k <span
class="math inline">\(再\)</span> l <span
class="math inline">\(的递增顺序依次映射到资源粒子\)</span> { {( k,l
)}_{p,}} $。</p>
<h1 id="ue接收控制信息的过程">UE接收控制信息的过程</h1>
<p><br/>如果UE配置了辅小区群（Secondary Cell
Group，SCG），则UE应对主小区群（Master Cell
Group，MCG）和SCG应用本章所描述的过程</p>
<ul>
<li>当这一过程应用于<strong>MCG</strong>时，本章所提及的‘secondary
cell’，‘secondary cells’，‘serving cell’，‘serving
cells’是分别属于<strong>MCG</strong>的secondary cell，secondary
cells，serving cell，serving cells。</li>
<li>当这一过程应用于<strong>SCG</strong>时，本章所提及的‘secondary
cell’，‘secondary cells’，‘serving cell’，‘serving
cells’是分别属于<strong>SCG</strong>的secondary cell，secondary
cells（不包括PSCell），serving cell，serving cells。本章所提及的‘primary
cell’指的是SCG的PSCell。</li>
</ul>
<p>UE将根据对应的搜索空间，监测每个激活的服务小区上激活的DL
BWP上的一个或多个CORESET（控制资源集）中的一组PDCCH候选。监测搜索空间意味着UE根据所监测的DCI格式对每个PDCCH候选进行译码。</p>
<p>UE可以通过高层参数 <em>SSB-periodicity-serving-cell</em>
配置用于在服务小区中发送SSB的半帧的周期。如果UE接收到
<em>SSB-transmitted-SIB1</em> 但未接收到 <em>SSB-transmitted</em>
，并且如果用于PDCCH接收的RE与对应于由 <em>SSB-transmitted-SIB1</em>
指示的SSB索引的RE重叠，则UE通过排除与由 <em>SSB-transmitted-SIB1</em>
指示的SSB索引相对应的RE来接收PDCCH。如果UE接收到
<em>SSB-transmitted</em> ，并且如果用于PDCCH接收的RE与对应于由
<em>SSB-transmitted</em> 指示的SSB索引的RE重叠，则UE通过排除与
<em>SSB-transmitted</em> 所指示的SSB索引相对应的RE来接收PDCCH。</p>
<h2 id="确定pdcch分配的ue过程">确定PDCCH分配的UE过程</h2>
<p><br/>PDCCH搜索空间定义为UE监测的一组PDCCH候选。搜索空间可以是公共搜索空间（CSS）或UE特定搜索空间（USS）。UE将在以下一个或多个搜索空间中的连续接收时隙中监测PDCCH候选</p>
<ul>
<li>在PCell上，CRC通过SI-RNTI加扰的DCI格式的Type0-PDCCH公共搜索空间</li>
<li>在PCell上，CRC通过SI-RNTI加扰的DCI格式的Type0A-PDCCH公共搜索空间</li>
<li>在PCell上，CRC通过RA-RNTI或TC-RNTI或C-RNTI加扰的DCI格式的Type1-PDCCH公共搜索空间</li>
<li>在PCell上，CRC通过P-RNTI加扰的DCI格式的Type2-PDCCH公共搜索空间</li>
<li>在PCell上，CRC通过INT-RNTI或SFI-RNTI或TPC-PUSCH-RNTI或TPC-PUCCH-RNTI或TPC-SRS-RNTI或C-RNTI或CS-RNTI(s)加扰的DCI格式的Type3-PDCCH公共搜索空间</li>
<li>CRC通过C-RNTI或CS-RNTI(s)加扰的DCI格式的UE特定搜索空间</li>
</ul>
<p>通过用于PDCCH接收的高层参数 <em>RMSI-PDCCH-Config</em> 和
<em>RMSI-sc</em>
提供的子载波间隔，为UE提供用于Type0-PDCCH公共搜索空间的CORESET的配置。UE确定Type0-PDCCH公共搜索空间的CORESET和监测时机。Type0-PDCCH公共搜索空间由表10.1-1中给出的CCE聚合等级和每个CCE聚合等级的候选数量来定义。</p>
<p>UE可假定与Type0-PDCCH和Type2-PDCCH公共搜索空间中的PDCCH接收和相应的PDSCH接收相关联的DM-RS天线端口，以及与SSB接收相关联的DM-RS天线端口是关于延迟扩展，多普勒扩展，多普勒频移，平均延迟和空间Rx参数QCL的。</p>
<p>Type0A-PDCCH或Type-2
PDCCH公共搜索空间的CORESET与Type0-PDCCH公共搜索空间的CORESET相同。UE通过高层参数
<em>osi-SearchSpace</em>
获得Type0A-PDCCH公共搜索空间的配置。UE通过高层参数
<em>paging-SearchSpace</em> 获得Type2-PDCCH公共搜索空间的配置。</p>
<p>用于Type0A-PDCCH或Type1-PDCCH或Type-2公共搜索空间的PDCCH子载波间隔和CP长度与用于Type0-PDCCH公共搜索空间的PDCCH相同。</p>
<p>UE可假定与Type0A-PDCCH公共搜索空间中的PDCCH接收相关联的DM-RS天线端口和与SSB接收相关联的DM-RS天线端口是关于延迟扩展，多普勒扩展，多普勒频移，平均延迟和空间Rx参数QCL的。</p>
<p>UE可假定在Type1-PDCCH公共搜索空间中，与PDCCH接收和相应的PDSCH接收相关联的DM-RS天线端口，和相应的PRACH相关联的SSB接收的DM-RS天线端口是QCL的。</p>
<p>如果SIB1中的参数 <em>PDCCH-DMRS-Scrambling-ID</em>
未提供用于Type0A-PDCCH或Type1-PDCCH或Type-2
PDCCH公共搜索空间的DM-RS加扰序列初始化的值，则该加扰序列初始化值为小区ID。</p>
<p>如果UE被配置用于DL BWP操作，则公共搜索空间的上述配置适用于初始激活DL
BWP。除了初始激活DL BWP以外，UE可另外为PCell上的每个DL
BWP配置Type0-PDCCH，Type0A-PDCCH，Type1-PDCCH或Type2-PDCCH公共搜索空间的CORESET。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/132155978.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>对于一个服务小区，高层信令为UE提供$ P
$个CORESET。对于映射有UE特定搜索空间，Type2-PDCCH或Type3-PDCCH公共搜索空间的CORESET
$ P <span class="math inline">\(，\)</span> 0p&lt;P
$，高层信令提供：</p>
<ul>
<li>高层参数 <em>CORESET-ID</em> 提供的CORESET索引；</li>
<li>高层参数 <em>PDCCH-DMRS-Scrambling-ID</em>
提供的DM-RS加扰序列初始化值；</li>
<li>高层参数 <em>CORESET-time-duration</em> 提供的连续符号数目；</li>
<li>高层参数 <em>CORESET-freq-dom</em> 提供的RB数目；</li>
<li>高层参数 <em>CORESET-CCE-to-REG-mapping-type</em>
提供的CCE-to-REG映射类型；</li>
<li>高层参数 <em>CORESET-REG-bundle-size</em>
提供的CCE-to-REG交织映射下的REG bundle大小；</li>
<li>高层参数 <em>CORESET-shift-index</em> 提供的REG
bundle交织器的循环移位；</li>
<li>天线端口QCL（高层参数TCI-StatesPDCCH提供的一组天线端口QCLs）指示用于PDCCH接收的DM-RS天线端口的QCL信息;</li>
<li>通过高层参数 <em>TCI-PresentInDCI</em> 指示由CORESET $ p
$中通过PDCCH发送的DCI format1_0或DCI
format1_1的传输配置指示（TCI）字段的存在或不存在</li>
</ul>
<p>对于在服务小区的DL BWP中设置的每个CORESET，相应的高层参数
<em>CORESET-freq-dom</em>
提供了一个位图（bitmap）。该bitmap的比特与若干非重叠的PRB组具有一对一映射，其中每个PRB组有6个PRBs。带宽为$
N_{}^{} <span class="math inline">\(个PRBs的DL
BWP中的PRB索引按升序编号，其中第一组的第一个PRB的索引为\)</span> 6/{6};
$。</p>
<p>如果UE没有从 <em>TCI-StatesPDCCH</em>
提供的一组天线端口QCL中接收到天线端口QCL的指示，则UE假定UE特定搜索空间中与PDCCH接收相关联的DM-RS天线端口与PBCH接收相关联的DM-RS天线端口关于延迟扩展，多普勒扩展，多普勒频移，平均延迟和空间Rx参数是QCL的。</p>
<p>对于UE被配置为在Type0-PDCCH公共搜索空间之外的搜索空间中监测PDCCH的每个服务小区，UE配置如下：</p>
<ul>
<li>高层参数 <em>search-space-config</em> 提供的搜索空间集的数目；</li>
<li>对于CORESET <span class="math inline">\(p\)</span>中的每个搜索空间集
<ul>
<li>高层参数 <em>Common-search-space-flag</em>
提供的所述搜索空间集为公共搜索空间集或UE特定搜索空间集的指示；</li>
<li>每个CCE聚合等级<span
class="math inline">\(L\)</span>下的PDCCH候选数目$ M_{p}^{(L)}
$，其中聚合等级1、2、4、8、16分别由高层参数
<em>Aggregation-level-1</em>、<em>Aggregation-level-2</em>、<em>Aggregation-level-4</em>、<em>Aggregation-level-8</em>
和 <em>Aggregation-level-16</em> 指示。</li>
<li>高层参数 <em>Monitoring-periodicity-PDCCH-slot</em>
提供的PDCCH监测周期$ { {k}_{p}} $个时隙</li>
<li>高层参数 <em>Monitoring-symbols-PDCCH-within-slot</em>
提供的PDCCH在时隙内的监测模式，用于指示PDCCH监测时隙内CORESET的第一个符号</li>
</ul></li>
</ul>
<p>UE根据时隙内的PDCCH监测周期，PDCCH监测偏移和PDCCH监测模式来确定PDCCH监测时机。</p>
<p>CCE聚合等级$ L{ 1, 2, 4, 8, 16 } <span
class="math inline">\(下的PDCCH UE特定搜索空间\)</span> S_{ {
{k}_{p}}}^{(L)} <span
class="math inline">\(定义为一组CCE聚合等级为\)</span>L$的PDCCH候选。</p>
<p>如果UE为服务小区配置了高层参数 <em>CrossCarrierSchedulingConfig</em>
，则载波指示域的值有对应的 <em>CrossCarrierSchedulingConfig</em>
的值指示。</p>
<p>对于UE在UE特定搜索空间上监测PDCCH候选的服务小区，如果UE没有配置载波指示域，则UE应在无载波指示域条件下监测PDCCH候选。对于UE在UE特定搜索空间上监测PDCCH候选的服务小区，如果UE配置有载波指示域，则UE将在具有载波指示域条件下监测PDCCH候选。</p>
<p>如果UE被配置为监测具有与另一个服务小区中的SCell相对应的载波指示域的PDCCH候选，则UE不期望监测SCell上的PDCCH候选。对于UE监测PDCCH候选的服务小区，UE至少要监测同一个服务小区的PDCCH候选。</p>
<p>对于CORESET <span
class="math inline">\(p\)</span>，与载波指示域的值对应的服务小区的搜索空间的PDCCH候选所对应的CCEs由下式给出：</p>
<p><span class="math display">\[ L\cdot \left\{ \left( { {Y}_{p,{
{k}_{p}}}}+\left\lfloor \frac{ { {m}_{ { {n}_{CI}}}}\cdot {
{N}_{\text{CCE},p}}}{L\cdot M_{p,\text{max}}^{(L)}} \right\rfloor +{
{n}_{CI}} \right)\bmod \left\lfloor { { {N}_{\text{CCE},p}}}/{L}\;
\right\rfloor  \right\}+i \]</span></p>
<p>其中</p>
<p>对于任何公共搜索空间，$ { {Y}<em>{p,{ {k}</em>{p}}}}=0 $；</p>
<p>对于UE特定搜索空间，$ { {Y}<em>{p,{ {k}</em>{p}}}}=( { {A}<em>{p}} )D
<span class="math inline">\(，\)</span> { {Y}</em>{p,-1}}={ {n}<em>{}}
<span class="math inline">\(，\)</span> { {A}</em>{0}}=39827 <span
class="math inline">\(，\)</span> { {A}_{1}}=39829 <span
class="math inline">\(，\)</span> D=65537 $；</p>
<p>$ i=0,,,,L-1 $；</p>
<p>如果UE配置有监测PDCCH的服务小区的载波指示域，则$ { {n}<em>{CI}} <span
class="math inline">\(是载波指示域的值；否则，\)</span> {
{n}</em>{CI}}=0 $（包括任何公共搜索空间）；</p>
<p>$ { {N}<em>{,p}} $是CORESET <span
class="math inline">\(p\)</span>内的CCE数量，编号从0到$ {
{N}</em>{,p}}-1 $；</p>
<p>$ { {m}<em>{ { {n}</em>{CI}}}}=0,,...,,M_{p,{ {n}<em>{CI}}}^{(L)}-1
<span class="math inline">\(，其中\)</span> M</em>{p,{
{n}<em>{CI}}}^{(L)} <span
class="math inline">\(是UE被配置为监测\)</span> { {n}</em>{CI}} <span
class="math inline">\(对应的服务小区的聚合等级\)</span>L$的PDCCH候选的数量；</p>
<p>对于任何公共搜索空间，$ M_{p,}<sup>{(L)}=M_{p,0}</sup>{(L)} $；</p>
<p>对于UE特定搜索空间，$ M_{p,}^{(L)} <span
class="math inline">\(是\)</span> M_{p,{ {n}_{CI}}}^{(L)}
$的最大值，</p>
<p>$ M_{p,}^{(L)} $是CORESET <span
class="math inline">\(p\)</span>中CCE聚合等级<span
class="math inline">\(L\)</span>的所有配置$ { {n}<em>{CI}} <span
class="math inline">\(值的所有对应DCI格式的\)</span> M</em>{p,{
{n}_{CI}}}^{(L)} $的最大值；</p>
<p>RNTI的值$ { {n}_{}} $在38.212和38.214中定义。</p>
<p>UE配置为在DCI格式大小具有载波指示域和由C-RNTI加扰的CRC的服务小区中监测PDCCH候选，PDCCH候选对于DCI格式大小可以具有载波指示域的一个或多个可能值，应假定具有DCI格式大小的PDCCH候选可以在对应于DCI格式大小的载波指示域的任何可能值的任何PDCCH
UE特定搜索空间中的服务小区中被发送。</p>
<h1
id="监测type0-pdcch公共搜索空间的ue过程">监测Type0-PDCCH公共搜索空间的UE过程</h1>
<p><br/>UE从表13-1至表13-8中描述的 <em>RMSI-PDCCH-Config</em>
的前4个比特中确定Type0-PDCCH公共搜索空间的CORESET的连续RB的数量和连续符号的数量；如表13-9至表13-13中所述，从
<em>RMSI-PDCCH-Config</em> 的后4位确定PDCCH监测时机，其中，$ <span
class="math inline">\(和\)</span> { {n}<em>{}} <span
class="math inline">\(分别是CORESET的SFN和时隙，\)</span> <span
class="math inline">\(和\)</span> { {n}</em>{}}
$分别是SSB的SFN和时隙。</p>
<p>表13-1至表13-8中的偏移量是根据CORESET的子载波间隔定义的，该偏移量是SSB的最小RB索引与用于Type0-PDCCH公共搜索空间的CORESET的最小RB索引之间的差值。表13-1至13-8中的条件A或条件B分别对应于SSB
RBs和Type0-PDCCH公共搜索空间的CORESET RBs之间的PRG
[38.214]对齐或不对齐的情况。</p>
<p>对于第一个SSB和CORESET复用模式，UE在两个连续时隙$ { { {n}<em>{}},,{
{n}</em>{}}+1 } <span
class="math inline">\(上监测Type0-PDCCH公共搜索空间中的PDCCH。对于具有索引\)</span>i<span
class="math inline">\(的SSB，UE决定第一个时隙的索引\)</span> {
{n}<em>{}} <span
class="math inline">\(位于一定的系统帧号（SFN），且\)</span> {
{n}</em>{}}=( O+iM )N_{}^{,} <span class="math inline">\(。若\)</span>
/{N_{}^{,}}; <span class="math inline">\(，则该系统帧号满足\)</span> =0
<span class="math inline">\(；若\)</span> /{N_{}^{,}}; <span
class="math inline">\(，则该系统帧号满足\)</span> =1 $。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/135655440.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/135734082.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/135823895.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/135853964.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/140008216.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/140121486.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/140208704.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/140245627.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/140336520.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/140439064.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/140920630.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/140959705.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/141044288.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171231/141110766.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
        <tag>2017-12</tag>
      </tags>
  </entry>
  <entry>
    <title>5G PRACH与随机接入</title>
    <url>/2017/12/29/nr-v200-l1-prach/</url>
    <content><![CDATA[<h1 id="prach">PRACH</h1>
<h2 id="序列生成">序列生成</h2>
<p><br/>随机接入前导$ { {x}_{u,v}}(n) $应根据以下方式生成</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; { {x}_{u,v}}(n)={ {x}_{u}}((n+{ {C}_{v}})\bmod {
{L}_{\text{RA}}}) \\
\nonumber  &amp; { {x}_{u}}(i)={ {e}^{-j\frac{\pi ui(i+1)}{ {
{L}_{\text{RA}}}}}},i=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}
\]</span></p>
<p>从而进一步生成频域表示</p>
<p><span class="math display">\[ { {y}_{u,v}}(n)=\sum\limits_{m=0}^{ {
{L}_{\text{RA}}}-1}{ { {x}_{u,v}}(m)\cdot { {e}^{-j\frac{2\pi mn}{ {
{L}_{\text{RA}}}}}}} \]</span></p>
<p>其中$ { {L}<em>{}}=839 <span class="math inline">\(或\)</span> {
{L}</em>{}}=139 <span
class="math inline">\(取决于表6.3.3.1-1和6.3.3.1-2给定的PRACH前导格式。序列号\)</span>
u $根据表6.3.3.1-3和6.3.3.1-4由高层参数 <em>PRACHRootSequenceIndex</em>
获得。</p>
<span id="more"></span>
<p>循环移位$ { {C}_{v}} $为</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; C{}_{v}=\left\{ \begin{array}{*{35}{l}}
   v{ {N}_{\text{CS}}} &amp; \text{v}=\text{0,1,}...\text{,}\left\lfloor
{ { {L}_{\text{RA}}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor -1,{
{N}_{\text{CS}}}\ne 0 &amp; \text{for unrestricted sets}  \\
   \text{0} &amp; { {N}_{\text{CS}}}=0 &amp; \text{for unrestricted
sets}  \\
   { {d}_{\text{start}}}\left\lfloor
{v}/{n_{\text{shift}}^{\text{RA}}}\; \right\rfloor +\left( v\bmod
n_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}} \nonumber &amp;
v=0,1,...,w-1 &amp; \text{for restricted sets type A and B}  \\
   { { {\bar{\bar{d}}}}_{\text{start}}}+\left( v-w \right){
{N}_{\text{CS}}} &amp;
v=w,...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}-1 &amp; \text{for
restricted sets type B}  \\
   { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}+\left(
v-w-\bar{\bar{n}}_{\text{shift}}^{\text{RA}} \right){ {N}_{\text{CS}}}
&amp;
v=w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}},...,w+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}+\bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}-1
&amp; \text{for restricted sets type B}  \\
\end{array} \right. \\
\nonumber &amp;
w=n_{\text{shift}}^{\text{RA}}n_{\text{group}}^{\text{RA}}+\bar{n}_{\text{shift}}^{\text{RA}}  
\end{align} \]</span></p>
<p>其中$ { {N}_{}} $由表6.3.3.1-5到6.3.3.1-7提供，高层参数
<em>restrictedSetConfig</em>
决定限制集类型（非限制集，限制集A，限制集B），表6.3.3.1-1和6.3.3.1-2指示不同前导格式所支持的限制集类型。</p>
<p>变量$ { {d}_{u}} $为</p>
<p><span class="math display">\[ { {d}_{u}}=\left\{
\begin{array}{*{35}{l}}
   q &amp; 0\le q&lt;{ { {L}_{\text{RA}}}}/{2}\;  \\
   { {L}_{\text{RA}}}-q &amp; \text{otherwise}  \\
\end{array} \right.
\]</span></p>
<p>其中<span class="math inline">\(q\)</span>是满足$ ( qu )=1 <span
class="math inline">\(的最小非负整数。循环移位的限制集参数取决于\)</span>
{ {d}_{u}} $的值。</p>
<p>对于限制集A，参数给定为</p>
<ul>
<li>for $ { {N}<em>{}}&lt;{ { {L}</em>{}}}/{3}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=2{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {({ {L}_{\text{RA}}}-2{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}
\]</span></p>
<ul>
<li>for $ { { {L}_{}}}/{3};/{2}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {({
{L}_{\text{RA}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}={ {L}_{\text{RA}}}-2{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max
\left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0
\right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}
\]</span></p>
<p>对于限制集B，参数给定为</p>
<ul>
<li>for $ { {N}<em>{}}&lt;{ { {L}</em>{}}}/{5}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=4{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{L}_{\text{RA}}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {({ {L}_{\text{RA}}}-4{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}})}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right)  
\end{align}
\]</span></p>
<ul>
<li>for $ { { {L}_{}}}/{5};/{}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {\left( {
{L}_{\text{RA}}}-4{ {d}_{u}} \right)}/{ { {N}_{\text{CS}}}}\;
\right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}={ {L}_{\text{RA}}}-4{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\min \left( \max
\left( \left\lfloor {({ {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0
\right),n_{\text{shift}}^{\text{RA}} \right)  
\end{align}
\]</span></p>
<ul>
<li>for $ {({ {L}<em>{}}+{ {N}</em>{}})}/{4};&lt;{2{ {L}_{}}}/{7};
$</li>
</ul>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {(4{
{d}_{u}}-{ {L}_{\text{RA}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=4{ {d}_{u}}-{
{L}_{\text{RA}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; { { {\bar{\bar{d}}}}_{\text{start}}}={
{L}_{\text{RA}}}-3{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\\
\nonumber &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}={
{L}_{\text{RA}}}-2{ {d}_{u}}+n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}}+\bar{\bar{n}}_{\text{shift}}^{\text{RA}}{
{N}_{\text{CS}}} \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( { {L}_{\text{RA}}}-3{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor
{\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}},4{ {d}_{u}}-{
{L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp;
\bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=\left\lfloor {\left(
\left( 1-\min \left( 1,\bar{n}_{\text{shift}}^{\text{RA}} \right)
\right)\left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}} \right)+\min \left(
1,\bar{n}_{\text{shift}}^{\text{RA}} \right)\left( 4{ {d}_{u}}-{
{L}_{\text{RA}}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\right) \right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor
-\bar{\bar{n}}_{\text{shift}}^{\text{RA}}  
\end{align}
\]</span></p>
<ul>
<li>for $ {2{ {L}_{}}}/{7};/{3}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {({
{L}_{\text{RA}}}-3{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}={ {L}_{\text{RA}}}-3{
{d}_{u}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; { { {\bar{\bar{d}}}}_{\text{start}}}={
{d}_{u}}+n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}}+\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}}
\\
\nonumber &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( 4{ {d}_{u}}-{
{L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}
\right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=\left\lfloor
{\min \left( { {d}_{u}}-n_{\text{group}}^{\text{RA}}{
{d}_{\text{start}}},{ {L}_{\text{RA}}}-3{
{d}_{u}}-\bar{n}_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \right)}/{
{ {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}
\]</span></p>
<ul>
<li>for $ {({ {L}<em>{}}+{ {N}</em>{}})}/{3};&lt;{2{ {L}_{}}}/{5};
$</li>
</ul>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {(3{
{d}_{u}}-{ {N}_{\text{ZC}}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=3{ {d}_{u}}-{
{N}_{\text{ZC}}}+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\
\nonumber &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor { {
{d}_{u}}}/{ { {d}_{\text{start}}}}\; \right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( { {L}_{\text{RA}}}-2{
{d}_{u}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}} \right)}/{ {
{N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\
\nonumber &amp; \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}
\]</span></p>
<ul>
<li>for $ {2{ {L}_{}}}/{5};/{2}; $</li>
</ul>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; n_{\text{shift}}^{\text{RA}}=\left\lfloor {({
{N}_{\text{ZC}}}-2{ {d}_{u}})}/{ { {N}_{\text{CS}}}}\; \right\rfloor  \\
\nonumber &amp; { {d}_{\text{start}}}=2({ {N}_{\text{ZC}}}-2{
{d}_{u}})+n_{\text{shift}}^{\text{RA}}{ {N}_{\text{CS}}} \\
\nonumber &amp; { { {\bar{\bar{d}}}}_{\text{start}}}=0 \\
\nonumber  &amp; { { {\bar{\bar{\bar{d}}}}}_{\text{start}}}=0 \\
\nonumber &amp; n_{\text{group}}^{\text{RA}}=\left\lfloor {({
{L}_{\text{RA}}}-{ {d}_{u}})}/{ { {d}_{\text{start}}}}\;
\right\rfloor  \\
\nonumber &amp; \bar{n}_{\text{shift}}^{\text{RA}}=\max \left(
\left\lfloor {\left( 3{ {d}_{u}}-{
{L}_{\text{RA}}}-n_{\text{group}}^{\text{RA}}{ {d}_{\text{start}}}
\right)}/{ { {N}_{\text{CS}}}}\; \right\rfloor ,0 \right) \\
\nonumber &amp; \bar{\bar{n}}_{\text{shift}}^{\text{RA}}=0 \\
\nonumber &amp; \bar{\bar{\bar{n}}}_{\text{shift}}^{\text{RA}}=0  
\end{align}
\]</span></p>
<p>对于所有其他$ { {d}_{u}} $的值，限制集中无循环移位。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/112954192.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/113036188.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/113143413.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/113251910.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/113318908.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/113341808.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/113400040.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/113418389.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h2 id="物理资源映射">物理资源映射</h2>
<p><br/>前导序列应根据以下方式映射到物理资源</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; a_{k}^{(p,\text{RA})}={ {\beta }_{\text{PRACH}}}{
{y}_{u,v}}(k) \\
\nonumber &amp; k=0,1,...,{ {L}_{\text{RA}}}-1  
\end{align}
\]</span></p>
<p>其中与声明为“保留”的资源重叠的物理资源应计入映射过程但不用于传输，$ {
{}_{}} <span class="math inline">\(是幅值因子，天线端口\)</span> p=4000
<span
class="math inline">\(。基带信号的产生应按照38.211的5.3节进行，使用表6.3.3.1-1或表6.3.3.1-2中的参数，\)</span>
{k} $由表6.3.3.2-1给出。</p>
<p>随机接入前导只能根据表6.3.3.2-2的高层参数
<em>PRACHConfigurationIndex</em>
给定的时间和频率资源上进行传输。该表取决于38.101中定义的FR1或FR2（频率范围FR的定义见本文附录）以及频谱类型。为了表中的时隙编号的目的，应该假定下面的子载波间隔：</p>
<ul>
<li>$ 15 $用于PRACH前导格式0-3</li>
<li>$ 15 <span
class="math inline">\(用于PRACH前导格式A1，A2，A3，B1，B2，B3，B4，C0，C2，其中\)</span>
$是PRACH子载波间隔配置</li>
</ul>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/150255196.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/150334167.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/150402629.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/150424741.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h1 id="随机接入过程">随机接入过程</h1>
<p><br/>在开始物理随机接入过程之前，L1必须从高层接收一组SSB索引，并且应该向高层提供相应的一组RSRP测量值。</p>
<p>在开始物理随机接入过程之前，L1应从高层接收以下信息：</p>
<ul>
<li>物理随机接入信道（PRACH）传输参数（用于PRACH传输的PRACH前导格式，时间资源和频率资源）的配置。</li>
<li>用于确定PRACH前导序列集合中的根序列及其循环移位的参数（逻辑根序列索引表，循环移位（
）和集合类型（非限制集，限制集A或限制集B））</li>
</ul>
<p>从物理层的角度来看，L1随机接入过程包括PRACH中的随机接入前导（Msg1）的传输，PDSCH（Msg2）中的随机接入响应（RAR），Msg3
PUSCH和PDSCH中的竞争解决（Msg4）。</p>
<p>如果UE没有被配置有两个UL载波，并且通过“PDCCH
order”向UE发起随机接入过程，则随机接入前导传输与由高层发起的随机接入前导传输具有相同的子载波间隔。</p>
<p>如果UE配置有针对服务小区的两个UL载波，并且UE检测到“PDCCH
order”，则UE使用检测到的“PDCCH
order”的UL/SUL指示域的值来确定用于对应的随机接入前导传输的UL载波，和随机接入前导传输与UE被配置用于对应UL载波的子载波间隔。</p>
<h2 id="随机接入前导">随机接入前导</h2>
<p><br/>L1过程在高层请求PRACH传输时被触发。PRACH传输的高层配置包括以下内容：</p>
<ul>
<li>用于PRACH传输的配置[TS38.211]</li>
<li>前导索引，前导子载波间隔，$ { {P}_{}}
$，相应的RA-RNTI和PRACH资源</li>
</ul>
<p>在所指示的PRACH资源上，使用所选择的PRACH格式和发送功率$ { {P}_{}}
$发送前导序列。</p>
<p>UE确定传输周期<span class="math inline">\(i\)</span>服务小区<span
class="math inline">\(c\)</span>载波<span
class="math inline">\(f\)</span>上的PRACH的传输功率为：</p>
<p><span class="math display">\[ { {P}_{\text{PRACH,}f,c}}(i)=\min {
{\left\{ { {P}_{\text{CMAX},f,c}}(i),\ { {P}_{\text{PRACH,target}}}+P{
{L}_{f,c}} \right\}}^{ {}}}  dBm\]</span></p>
<p>其中$ { {P}<em>{f,c}}(i) <span
class="math inline">\(是在38.101中定义的传输周期\)</span>i<span
class="math inline">\(服务小区\)</span>c<span
class="math inline">\(载波\)</span>f<span
class="math inline">\(上的UE发送功率，\)</span> { {P}</em>{}} <span
class="math inline">\(是由高层参数 *preambleReceivedTargetPower*
提供的PRACH目标接收功率，\)</span> P{ {L}_{f,c}} <span
class="math inline">\(是由UE计算的服务小区\)</span>c<span
class="math inline">\(载波\)</span>f$上的路径损耗，以dB为单位计算为<em>referenceSignalPower</em>——高层滤波器RSRP，其中RSRP在38.215中定义，高层滤波器的配置则在38.331中定义。<em>referenceSignalPower</em>
等于 <em>SS-PBCHBlockPower</em>，其中 <em>SS-PBCHBlockPower</em>
由SIB1提供。</p>
<p>如果UE发送PRACH以传送链路重配置请求，如38.213第6章所述，$ { {P}_{}}
$由高层参数<em>preambleReceivedTargetPower-BFR</em>提供。</p>
<p>如果在随机接入响应窗口内，如2.2节所述，若UE未收到包含着与UE发送的前导序列相对应的前导ID的随机接入响应，则UE应当确定后续PRACH传输的传输功率（如果有的话，如38.321所述）。</p>
<h2 id="随机接入响应rar">随机接入响应（RAR)</h2>
<p><br/>对PRACH响应的传输，UE在高层（38.321）控制的窗口期间尝试检测具有相应RA-RNTI的PDCCH。窗口从Type1-PDCCH公共搜索空间的最早的CORESET的第一个符号开始，也即在前导序列传输的最后一个符号之后$
{ {/{ { {T}<em>{sf}}}; }^{ {}}}/{( N</em>{}<sup>{}N_{}</sup>{} )};
$个符号。基于Type0-PDCCH公共搜索空间的子载波间隔和CP，窗口长度的时隙数由高层参数
<em>rar-WindowLength</em> 提供。</p>
<p>如果UE在窗口内检测到具有对应的RA-RNTI的PDCCH和相应的DL-SCH传输块，则UE将传输块传递到高层。高层针对与PRACH传输相关联的随机接入前导标识（RAPID）解析传输块，并且如果RAPID被识别，则向物理层指示上行授权。UE应接收PDCCH和PDSCH，其中PDSCH包含的DL-SCH传输块具有与PDCCH
Type0-PDCCH公共搜索空间的接收相同的子载波间隔和相同的循环前缀，并且与DM-RS天线端口具有QCL性质（38.214）。</p>
<p>除非UE已配置子载波间隔，否则UE使用与提供RAR的PDSCH相同的子载波间隔以接收后续的PDSCH。</p>
<p>如果UE在窗口内未检测到PDDCH或对应的DL-SCH传输块，则UE过程如38.321中所述。</p>
<h2 id="msg3-pusch">Msg3 PUSCH</h2>
<p><br/>高层参数 <em>msg3-tp</em> 向UE指示UE是否应当对Msg3
PUSCH传输应用变换预编码（如38.211中所述）。</p>
<p>Msg3 PUSCH传输的子载波间隔由高层参数 <em>msg3-scs</em>
提供。UE将在同一个服务小区上发送PRACH和Msg3 PUSCH。</p>
<p>用于Msg3 PUSCH传输的UL BWP由SIB1指示。</p>
<h1 id="附录">附录</h1>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/151344428.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p>本文参考3GPP TS38.211 V2.0.0 (2017-12)</p>
</blockquote>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
        <tag>2017-12</tag>
      </tags>
  </entry>
  <entry>
    <title>5G SSB与小区搜索</title>
    <url>/2017/12/29/nr-v200-l1-ssb/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>在5G
NR中，主同步信号（PSS）、辅同步信号（SSS）和PBCH共同构成一个SSB（SS/PBCH
block），SSB在时域上共占用4个OFDM符号，频域共占用240个子载波（20个PRB）。本文分别介绍PSS、SSS、PBCH、SSB以及小区搜索。</p>
<h1 id="同步信号ss">同步信号（SS）</h1>
<h2 id="物理层小区id">物理层小区ID</h2>
<p><br/>1008个唯一的物理层小区ID根据如下公式确定</p>
<p><span class="math display">\[
N_{\text{ID}}^{\text{cell}}=3N_{\text{ID}}^{\text{(1)}}+N_{\text{ID}}^{\text{(2)}}
\]</span></p>
<p>其中$ N_{}^{}{ 0,1,...,335 } <span class="math inline">\(，\)</span>
N_{}^{}{ 0,1,2 } $。</p>
<span id="more"></span>
<h2 id="主同步信号pss">主同步信号（PSS）</h2>
<h3 id="序列生成">序列生成</h3>
<p>PSS序列$ { {d}_{}}(n) $根据如下公式生成</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; { {d}_{\text{PSS}}}\left( n \right)=1-2x\left( m \right)
\\
\nonumber &amp; m=\left( n+43N_{\text{ID}}^{\text{(2)}} \right)\bmod 127
\\
\nonumber &amp; 0\le n&lt;127  
\end{align}
\]</span></p>
<p>其中</p>
<p><span class="math display">\[ x\left( i+7 \right)=\left( x\left( i+4
\right)+x\left( i \right) \right)\bmod 2 \]</span></p>
<p>且</p>
<p><span class="math display">\[ \left[ \begin{matrix}
   x\left( 6 \right) &amp; x\left( 5 \right) &amp; x\left( 4 \right)
&amp; x\left( 3 \right) &amp; x\left( 2 \right) &amp; x\left( 1 \right)
&amp; x\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   1 &amp; 1 &amp; 1 &amp; 0 &amp; 1 &amp; 1 &amp; 0  \\
\end{matrix} \right]
\]</span></p>
<h3 id="物理资源映射">物理资源映射</h3>
<p><br/>物理资源映射见本文SSB。</p>
<h2 id="辅同步信号sss">辅同步信号（SSS）</h2>
<h3 id="序列生成-1">序列生成</h3>
<p><br/>SSS序列$ { {d}_{}}(n) $根据如下公式生成</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; { {d}_{\text{SSS}}}\left( n \right)=\left[ 1-2{
{x}_{0}}\left( \left( n+{ {m}_{0}} \right)\bmod 127 \right)
\right]\left[ 1-2{ {x}_{1}}\left( \left( n+{ {m}_{1}} \right)\bmod 127
\right) \right] \\
\nonumber &amp; { {m}_{0}}=15\left\lfloor
\frac{N_{\text{ID}}^{\text{(1)}}}{\text{112}} \right\rfloor
+5N_{\text{ID}}^{\text{(2)}} \\
\nonumber &amp; { {m}_{1}}=N_{\text{ID}}^{\text{(1)}}\bmod 112 \\
\nonumber &amp; 0\le n&lt;127  
\end{align}
\]</span></p>
<p>其中</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; { {x}_{0}}\left( i+7 \right)=\left( { {x}_{0}}\left(
i+4 \right)+x{}_{0}\left( i \right) \right)\bmod 2 \\
\nonumber &amp; { {x}_{1}}\left( i+7 \right)=\left( { {x}_{1}}\left( i+1
\right)+x{}_{1}\left( i \right) \right)\bmod 2  
\end{align}
\]</span></p>
<p>且</p>
<p><span class="math display">\[ \begin{align}
  \nonumber &amp; \left[ \begin{matrix}
   { {x}_{0}}\left( 6 \right) &amp; { {x}_{0}}\left( 5 \right) &amp; {
{x}_{0}}\left( 4 \right) &amp; { {x}_{0}}\left( 3 \right) &amp; {
{x}_{0}}\left( 2 \right) &amp; { {x}_{0}}\left( 1 \right) &amp; {
{x}_{0}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right] \\
  \nonumber &amp; \left[ \begin{matrix}
   { {x}_{1}}\left( 6 \right) &amp; { {x}_{1}}\left( 5 \right) &amp; {
{x}_{1}}\left( 4 \right) &amp; { {x}_{1}}\left( 3 \right) &amp; {
{x}_{1}}\left( 2 \right) &amp; { {x}_{1}}\left( 1 \right) &amp; {
{x}_{1}}\left( 0 \right)  \\
\end{matrix} \right]=\left[ \begin{matrix}
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]  
\end{align}
\]</span></p>
<h3 id="物理资源映射-1">物理资源映射</h3>
<p><br/>物理资源映射见“SSB的时域结构”一节。</p>
<h1 id="物理广播信道pbch">物理广播信道（PBCH）</h1>
<h2 id="加扰">加扰</h2>
<p><br/>UE应假定比特块$ b(0),...,b(M_{}^{ {}}-1) <span
class="math inline">\(在调制前进行加扰，其中\)</span> { {M}<em>{}} <span
class="math inline">\(是PBCH传输的比特数，加扰后的比特块为\)</span>
(0),...,({ {M}</em>{}}-1) $</p>
<p><span class="math display">\[ \tilde{b}(i)=\left( b(i)+c(i+v{
{M}_{\text{bit}}}) \right)\bmod 2 \]</span></p>
<p>其中扰码序列$ c(i) <span
class="math inline">\(由38.211的5.2节给定。扰码序列应在每个SSB的开始时根据\)</span>
{ {c}<em>{}}=N</em>{}^{} $进行初始化</p>
<ul>
<li>对于$ { {L}_{}}=4 <span class="math inline">\(，\)</span> v
$是SSB索引的2个最低有效位</li>
<li>对于$ { {L}<em>{}}=8 <span class="math inline">\(或\)</span> {
{L}</em>{}}=64 <span class="math inline">\(，\)</span> v $是SSB索引的3
个最低有效位</li>
</ul>
<p>其中$ { {L}_{}}
$是38.104给出的特定频带的SS/PBCH周期中的SSB的最大数目。</p>
<h2 id="调制">调制</h2>
<p><br/>UE应假定比特块$ (0),...,({ {M}<em>{}}-1) <span
class="math inline">\(采用QPSK调制，得到复值调制符号块\)</span> {
{d}</em>{}}(0),...,{ {d}<em>{}}({ {M}</em>{}}-1)
$，QPSK见38.211的5.1.3节。</p>
<h2 id="物理资源映射-2">物理资源映射</h2>
<p><br/>物理资源映射见“SSB的时域结构”一节。</p>
<h1 id="解调参考信号dm-rs">解调参考信号（DM-RS）</h1>
<h2 id="序列生成-2">序列生成</h2>
<p><br/>UE应假定SSB的参考信号序列$ r(m) $定义为</p>
<p><span class="math display">\[ r(m)=\frac{1}{\sqrt{2}}\left( 1-2\cdot
c(2m) \right)+j\frac{1}{\sqrt{2}}\left( 1-2\cdot c(2m+1) \right)
\]</span></p>
<p>其中加扰序列$ c(n) $在38.211的5.2节定义。扰码序列生成器应在每个SSB
机会的开始处进行初始化</p>
<p><span class="math display">\[ \begin{align}
\nonumber &amp; { {c}_{\text{init}}}={ {2}^{11}}\left( { {
{\bar{i}}}_{\text{SSB}}}+1 \right)\left( \left\lfloor
{N_{\text{ID}}^{\text{cell}}}/{\text{4}}\; \right\rfloor +1 \right)+{
{2}^{6}}\left( { { {\bar{i}}}_{\text{SSB}}}+1 \right)+\left(
N_{\text{ID}}^{\text{cell}}\bmod 4 \right) \\
\nonumber &amp; { { {\bar{i}}}_{\text{SSB}}}=4{
{i}_{\text{SSB}}}+n{}_{\text{hf}} \\
\end{align}
\]</span></p>
<p>其中</p>
<ul>
<li>若$ { {L}<em>{}}=4 <span class="math inline">\(，则\)</span> {
{n}</em>{}} <span class="math inline">\(是发送PBCH的半帧数目，\)</span>
{ {i}_{}} $是SSB索引的2个LSB比特</li>
<li>若$ { {L}<em>{}}=8 <span class="math inline">\(或\)</span> {
{L}</em>{}}=64 <span class="math inline">\(，则\)</span> { {n}<em>{}}=0
<span class="math inline">\(，\)</span> { {i}</em>{}}
$是SSB索引的3个LSB比特</li>
</ul>
<p>其中$ { {L}_{}} $是特定带宽下的SSB周期中SSB的最大数量。</p>
<h2 id="物理资源映射-3">物理资源映射</h2>
<p><br/>物理资源映射见“SSB的时域结构”一节。</p>
<h1 id="ssb">SSB</h1>
<h2 id="ssb的时域结构">SSB的时域结构</h2>
<p><br/>在时域上，1个SSB由4个OFDM符号组成，符号在SSB内从0到3增序编号。如表7.4.3.1-1所示，PSS、SSS、PBCH及其DM-RS占用不同的符号。</p>
<p>在频域上，1个SSB由240个连续子载波组成，子载波在SSB内从0到239增序编号。$
k <span class="math inline">\(和\)</span> l <span
class="math inline">\(分别表示SSB内的频域索引和时域索引。UE可假定表7.4.3.1-1中的“Set
to 0”的资源粒子（RE）被设置为零。SSB的子载波0对应于公共资源块\)</span>
N_{}^{} <span class="math inline">\(的子载波\)</span> { {k}<em>{0}}
<span class="math inline">\(，其中\)</span> N</em>{}^{} $由高层参数
<em>offset-ref-low-scs-ref-PRB</em> 得到。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/094753857.png" title="图 1 SS/PBCH block时频域结构" /></p>
<p>与SSB部分或完全重叠的任何公共资源块应当被视为被占用，并且不被用于PDSCH或PDCCH传输。UE可假定不用于SS/PBCH传输的资源粒子，将部分重叠的公共资源的一部分设置为零。</p>
<p>对于SSB，UE应假定</p>
<ul>
<li>天线端口$ p=4000 $，</li>
<li>PSS、SSS和PBCH具有相同的CP长度和子载波间隔，</li>
<li>对于SSB type A，$ { {k}<em>{0}}{ ... } <span
class="math inline">\(，\)</span> { {k}</em>{0}}{ ... } <span
class="math inline">\(，\)</span> N_{}^{}
$是就15kHz子载波间隔而言的表示，</li>
<li>对于SSB type B，$ { {k}<em>{0}}{ ... } <span
class="math inline">\(，\)</span> { } <span
class="math inline">\(，\)</span> N</em>{}^{}
$是就60kHz子载波间隔而言的表示</li>
</ul>
<p>UE可假定相同的块索引所发送的SSB关于多普勒扩展，多普勒频移，平均增益，平均延迟和空间Rx参数是准共同定位（quasi
co-located，QCL）的。对于任何其他SSB传输，UE不应假定QCL。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/095600758.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h3 id="ssb中的pss映射">SSB中的PSS映射</h3>
<p><br/>UE应假定组成PSS的符号序列$ { {d}<em>{}}(0),...,{
{d}</em>{}}(126) <span class="math inline">\(乘以幅值因子\)</span> {
{}<em>{}} <span class="math inline">\(，以符合TS
38.213中规定的PSS功率分配。符号序列按\)</span> k $增序映射到RE $ { {(
k,l )}</em>{p,}} <span class="math inline">\(，其中\)</span> k <span
class="math inline">\(和\)</span> l
$由表7.4.3.1-1给定，分为表示SSB中的频域索引和时域索引。</p>
<h3 id="ssb中的sss映射">SSB中的SSS映射</h3>
<p><br/>UE应假定组成PSS的符号序列$ { {d}<em>{}}(0),...,{
{d}</em>{}}(126) <span class="math inline">\(乘以幅值因子\)</span> {
{}<em>{!!!!}} <span class="math inline">\(，并按\)</span> k
$增序映射到RE $ { {( k,l )}</em>{p,}} <span
class="math inline">\(，其中\)</span> k <span
class="math inline">\(和\)</span> l
$由表7.4.3.1-1给定，分为表示SSB内的频域索引和时域索引。</p>
<h3 id="ssb中的pbch和dm-rs映射">SSB中的PBCH和DM-RS映射</h3>
<p><br/>UE应假定组成PBCH的符号序列$ { {d}<em>{}}(0),...,{ {d}</em>{}}({
{M}<em>{}}-1) <span class="math inline">\(乘以幅值因子\)</span> {
{}</em>{!!!!}} <span class="math inline">\(，以符合TS
38.213中规定的PBCH功率分配。符号序列从\)</span> { {d}<em>{}}(0)
$开始映射到RE $ { {( k,l )}</em>{p,}} $，并满足下列条件：</p>
<ul>
<li>这些RE不用于PDCCH DM-RS</li>
</ul>
<p>对于不为PBCH DM-RS保留的RE的映射，按递增顺序先$ k <span
class="math inline">\(后\)</span>l<span
class="math inline">\(映射，其中\)</span> k <span
class="math inline">\(和\)</span>l$分别是SSB内的频域和时域索引，并由表7.4.3.1-1给定。</p>
<p>UE应假定SSB的DM-RS复值符号序列$ { {r}<em>{l}}(0),...,{
{r}</em>{l}}(143) <span class="math inline">\(乘以幅值因子\)</span>
<em>{}^{ {}} <span
class="math inline">\(，以符合TS38.213中规定的PBCH功率分配，并按递增顺序先\)</span>k<span
class="math inline">\(后\)</span>l<span
class="math inline">\(映射到资源粒子\)</span> { {( k,l )}</em>{p,}}
<span class="math inline">\(，其中\)</span>k<span
class="math inline">\(和\)</span>l$分别是SSB内的频域和时域索引，并由Table
7.4.3.1-1给定，其中 <span
class="math inline">\(v=N_{\text{ID}}^{\text{cell}}\bmod
4\)</span>。</p>
<h2 id="ssb的时域位置">SSB的时域位置</h2>
<p><br/>在下一章描述UE将监测的可能的SSB时域位置。</p>
<h1 id="小区搜索">小区搜索</h1>
<p><br/>小区搜索是UE获取与小区的时间和频率同步，并检测该小区的物理层小区ID的过程。</p>
<p>UE接收以下同步信号（SS）以执行小区搜索：TS38.211中定义的主同步信号（PSS）和辅同步信号（SSS）。</p>
<p>UE应假定PBCH、PSS和SSS在连续的符号中接收，并形成SS/PBCH
block（如TS38.211中所定义）。UE应假定SSS和PBCH DM-RS具有相同的EPRE。</p>
<p>对于具有SSB的半帧，候选SSB的数目和第一个符号索引位置根据SSB的子载波间隔确定如下：</p>
<ul>
<li>Case A - 15 kHz子载波间隔：候选SSB的第一个符号的索引为{2, 8} +
14*n。对于载频小于或等于3 GHz的情况，n=0,1。对于载频大于3
GHz且小于或等于6 GHz的情况，n=0,1,2,3。</li>
<li>CaseB - 30 kHz子载波间隔：候选SSB的第一个符号的索引为{4, 8, 16, 20}
+ 28*n。对于载频小于或等于3 GHz的情况，n=0。对于载频大于3
GHz且小于或等于6 GHz的情况，n=0,1。</li>
<li>Case C - 30 kHz子载波间隔：候选SSB的第一个符号的索引为{2, 8} +
14*n。对于载频小于或等于3 GHz的情况，n=0,1。对于载频大于3
GHz且小于或等于6 GHz的情况，n=0,1,2,3。</li>
<li>Case D - 120 kHz子载波间隔：候选SSB的第一个符号的索引为{4, 8, 16,
20} + 28*n。对于载频大于6 GHz的情况，n=0, 1, 2, 3, 5, 6, 7, 8, 10, 11,
12, 13, 15, 16, 17, 18。</li>
<li>Case E - 240 kHz子载波间隔：候选SSB的第一个符号的索引为{8, 12, 16,
20, 32, 36, 40, 44} + 56*n。对于载频对于6 GHz的情况，n=0, 1, 2, 3, 5, 6,
7, 8。</li>
</ul>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/101842369.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/101923796.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>半帧中的候选SSB索引在时间上从0到$ L-1 <span
class="math inline">\(升序编号。在PBCH中发送的DM-RS序列的索引与每半帧中的SSB索引形成一一映射，若\)</span>
L=4 <span
class="math inline">\(，则UE应从DM-RS序列索引中确定半帧中SSB索引的2个低有效位；若\)</span>
L&gt;4 <span
class="math inline">\(，则UE应从DM-RS索引中确定半帧中SSB索引的3个低有效位。若\)</span>
L=64 $，UE应从高层参数 <em>SSB-index-explicit</em>
确定每半帧中的SSB索引的3个高有效位。</p>
<p>UE可以通过参数 <em>SSB-transmitted-SIB1</em>
得到配置，UE不应接收与SSB对应的RE重叠的RE中的其他信号或信道的SSB索引。UE也可以通过高层参数
<em>SSB-transmitted</em>
按照每个服务小区得到配置，UE不应接收与SSB对应的RE重叠的RE中的其他信号或信道的SSB索引。
<em>SSB-transmitted</em> 的配置覆盖 <em>SSB-transmitted-SIB1</em>
的配置。UE可以通过高层参数 <em>SSB-timing</em>
为每个服务小区配置用于接收每个服务小区的SSB的半帧的周期。如果UE没有配置接收SSB的半帧的周期，则UE将假定周期为半帧。UE应该假定服务小区中的所有SSB的周期是相同的。</p>
<p>对于初始小区选择，UE可假定具有SSB的半帧以2个帧为周期。</p>
<p>对于没有发送SSB的服务小区，UE基于服务小区的小区群的PCell或PSCell上的SSB的接收来获取与服务小区的时间和频率同步。</p>
<blockquote>
<p>本文参考3GPP TS38.211 V2.0.0 (2017-12)</p>
</blockquote>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
        <tag>2017-12</tag>
      </tags>
  </entry>
  <entry>
    <title>NR PRG</title>
    <url>/2020/03/07/nr_prg/</url>
    <content><![CDATA[<h2 id="prg">PRG</h2>
<p>PRG（Precoding Resource Block
Group）是预编码资源块组，由一组频域连续的 RB 组成，这些连续的 RB
具有相同的预编码。</p>
<p>PRG size 的确定涉及到 a) UE能力，b) RRC配置，c) UE 所调度的连续 PRB
数目。</p>
<h3 id="dynamicprb-bundlingdl">dynamicPRB-BundlingDL</h3>
<p><strong><em>dynamicPRB-BundlingDL</em></strong> 用于指示 UE
是否支持基于 DCI 来指示 PDSCH 接收的 PRG size。</p>
<p>如果 gNB 收到 UE 上报的 Phy-ParametersCommon ::
dynamicPRB-BundlingDL，则表明 UE 支持基于 DCI 来指示 PDSCH 接收的 PRG
size。</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dynamicPRB-BundlingDL        ENUMERATED &#123;supported&#125;           OPTIONAL,</span><br></pre></td></tr></table></figure>
<h3 id="prb-bundlingtype">prb-BundlingType</h3>
<p>PDSCH-Config :: prb-BundlingType 用于RRC配置PRG size。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">prb-BundlingType            CHOICE &#123;</span><br><span class="line">​    staticBundling             SEQUENCE &#123;</span><br><span class="line">​      bundleSize               ENUMERATED &#123; n4, wideband &#125;                 OPTIONAL  -- Need S</span><br><span class="line">​    &#125;,</span><br><span class="line">​     dynamicBundling           SEQUENCE &#123;</span><br><span class="line">​      bundleSizeSet1             ENUMERATED &#123; n4, wideband, n2-wideband, n4-wideband &#125;    OPTIONAL,  -- Need S</span><br><span class="line">​      bundleSizeSet2             ENUMERATED &#123; n4, wideband &#125;                 OPTIONAL  -- Need S</span><br><span class="line">​    &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">prb-BundlingType</span><br><span class="line">Indicates the PRB bundle type and bundle size(s) (see TS 38.214 [19], clause 5.1.2.3). If *dynamic* is chosen, the actual *bundleSizeSet1 or bundleSizeSet2* to use is indicated via DCI. Constraints on *bundleSize(Set)* setting depending on *vrb-ToPRB-Interleaver* and *rbg-Size* settings are described in TS 38.214 [19], clause 5.1.2.3. If a *bundleSize(Set)* value is absent, the UE applies the value *n2*.</span><br></pre></td></tr></table></figure>
<h3 id="consecutively-scheduled-bandwidth-in-frequency">consecutively
scheduled bandwidth in frequency</h3>
<p>UE所调度的连续 PRB 数目将与 (BWP size)/2 进行比较。</p>
<h2 id="prg-size">PRG size</h2>
<p>PRG size 有 {n2, n4, wideband} 三种可能，具体配置策略如下。</p>
<p>对于 DCI format 1_0 调度的 PDSCH ，固定配置为 <strong>PRG size =
n2</strong>。</p>
<p>对于 DCI format 1_1 调度的 PDSCH，PRG size如下：</p>
<ol type="a">
<li>如果 UE 没有 dynamicPRB-BundlingDL 能力，则 gNB 只能采用 RRC
静态配置 PRG size。此时 prb-BundlingType为staticBundling。</li>
</ol>
<ul>
<li>如果配置 bundleSize = n4，则 <strong>PRG size = n4</strong></li>
<li>如果配置 bundleSize = wideband，则 <strong>PRG size =
wideband</strong></li>
</ul>
<ol start="2" type="a">
<li>如果UE有 dynamicPRB-BundlingDL 能力，则 gNB 可采用 1）RRC + DCI
动态配置 PRG size，或 2）RRC静态配置 PRG size。</li>
</ol>
<ul>
<li>1）RRC + DCI 动态配置，此时 prb-BundlingType 为 dynamicBundling。
<ul>
<li>DCI 字段 <em>PRB bundling size indicator</em> 用一个 bit 来指示
bundleSizeSet1 或 bundleSizeSet2 。值为 1 表示使用 bundleSizeSet1，值为
0 表示使用 bundleSizeSet2。
<ul>
<li>bundleSizeSet1 = {n4, wideband, n2-wideband, n4-wideband}</li>
<li>bundleSizeSet2 = {n4, wideband}</li>
</ul></li>
<li>如果 DCI 字段 <em>PRB bundling size indicator</em>
指示bundleSizeSet1
<ul>
<li>如果配置 bundleSizeSet1 = n4，则 <strong>PRG size = n4</strong></li>
<li>如果配置 bundleSizeSet1 = wideband，则 <strong>PRG size =
wideband</strong></li>
<li>如果配置 bundleSizeSet1 = n2-wideband，则
<ul>
<li>如果 UE 所调度的连续 PRB 数目 &gt; (BWP size)/2，则 <strong>PRG size
= wideband</strong>；否则，<strong>PRG size = n2</strong>。</li>
</ul></li>
<li>如果配置 bundleSizeSet1 = n4-wideband，则
<ul>
<li>如果 UE 所调度的连续 PRB 数目 &gt; (BWP size)/2，则<strong>PRG size
= wideband</strong>；否则，<strong>PRG size = n4</strong>。</li>
</ul></li>
</ul></li>
<li>如果 DCI 字段 <em>PRB bundling size indicator</em>
指示bundleSizeSet2
<ul>
<li>如果配置 bundleSizeSet2 = n4，则 <strong>PRG size = n4</strong></li>
<li>如果配置 bundleSizeSet2 = wideband，则 <strong>PRG size =
wideband</strong></li>
</ul></li>
</ul></li>
<li>2）RRC 静态配置，同 a</li>
</ul>
<ol start="3" type="a">
<li><p>如有 gNB 没有配置 bundleSize(Set)，则默认 <strong>PRG size =
n2</strong>。</p></li>
<li><p>PRG size限制条件</p></li>
</ol>
<ul>
<li>如果RBG = 2 或 vrb-ToPRB-Interleaver = n2，则 <strong>不能配置PRG
size = n4</strong>。</li>
</ul>
<p>Note: 当 PRG size 配置为 wideband 时，意味着 PRG size 等于 UE
所调度的连续 PRB 数目，分配给 UE 的资源必须是连续的 PRB。在这些连续的
PRB 上使用相同的预编码。</p>
<h3 id="references">References</h3>
<ul>
<li>3GPP Spec. 38.211</li>
<li>3GPP Spec. 38.212</li>
<li>3GPP Spec. 38.214</li>
<li>3GPP Spec. 38.331</li>
<li>3GPP Spec. 38.306</li>
</ul>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>5G-NR</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（1）概述</title>
    <url>/2017/03/01/polar-code-1-summary/</url>
    <content><![CDATA[<p>2016年11月18日，在美国内华达州里诺召开的3GPP RAN1
#87次会议，确定<strong>Polar Code</strong>作为5G
<strong>eMBB</strong>（增强移动宽带）场景下<strong>控制信道</strong>编码方案。</p>
<p>2008年，Erdal
Arikan在国际信息论ISIT会议上首次提出了<strong>信道极化（Channel
Polarization）</strong>的概念；2009年在“IEEE Transaction on Information
Theory”期刊上发表了一篇长达23页的论文更加详细地阐述了信道极化，并基于信道极化给出了一种新的编码方式，名称为<strong>极化码（Polar
Code）</strong>。极化码具有确定性的构造方法，并且是已知的唯一一种能够被严格证明“达到”信道容量的信道编码方法。</p>
<span id="more"></span>
<p>从代数编码和概率编码的角度来说，极化码具备了两者各自的特点。首先，只要给定编码长度，极化码的编译码结构就唯一确定了，而且可以通过生成矩阵的形式完成编码过程，这一点和代数编码的常见思维是一致的。其次，极化码在设计时并没有考虑最小距离特性，而是利用了<strong>信道联合（Channel
Combination）与信道分裂（Channel
Splitting）</strong>的过程来选择具体的编码方案，而且在译码时也是采用概率算法，这一点比较符合概率编码的思想。</p>
<p>对于长度为<span class="math inline">\(N={2^{n}}\)</span>（<span
class="math inline">\(n\)</span>为任意正整数）的极化码，它利用信道<span
class="math inline">\(W\)</span>的N个独立副本，进行信道联合和信道分裂，得到新的N个分裂之后的信道<span
class="math inline">\(\left\{ W_{N}^{\left( 1 \right)},W_{N}^{\left( 2
\right)},...,W_{N}^{\left( N \right)}
\right\}\)</span>。随着码长N的增加，分裂之后的信道将向两个极端发展：其中一部分分裂信道会趋近于完美信道，即信道容量趋近于1的无噪声信道；而另一部分分裂信道会趋近于完全噪声信道，即信道容量趋近于0的信道。假设原信道<span
class="math inline">\(W\)</span>的二进制输入对称容量记作<span
class="math inline">\(I\left(W\right)\)</span>，那么当码长N趋近于无穷大时，信道容量趋近于1的分裂信道比例约为<span
class="math inline">\(K=N\times I\left( W
\right)\)</span>，而信道容量趋近于0的比例约为<span
class="math inline">\(N\times \left( 1-I\left( W \right)
\right)\)</span>。对于信道容量为1的可靠信道，可以直接放置消息比特而不采用任何编码，即相当于编码速率为<span
class="math inline">\(R=1\)</span>；而对于信道容量为0的不可靠信道，可以放置发送端和接收端都事先已知的冻结比特，即相当于编码速率为<span
class="math inline">\(R=0\)</span>。那么当码长$N<span
class="math inline">\(时，极化码的可达编码速率\)</span>R=NI(W)/N=I(W)$，即在理论上，极化码可以被证明是可达信道容量的。</p>
<p>在极化码编码时，首先要区分出N个分裂信道的可靠程度，即哪些属于可靠信道，哪些属于不可靠信道。对各个极化信道的可靠性进行度量常用的有三种方法：<strong>巴氏参数</strong>（Bhattacharyya
Parameter）法、<strong>密度进化</strong>（Density
Evolution，DE）法和<strong>高斯近似</strong>（Gaussian
Approximation）法：</p>
<ol type="1">
<li>最初，极化码采用巴氏参数<span class="math inline">\(Z\left( W
\right)\)</span>来作为每个分裂信道的可靠性度量，<span
class="math inline">\(Z\left( W
\right)\)</span>越大表示信道的可靠程度越低。当信道<span
class="math inline">\(W\)</span>是二元删除信道（Binary Erasure
Channel，BEC）时，每个<span class="math inline">\(Z\left( W_{N}^{\left(
i \right)} \right)\)</span>都可以采用递归的方式计算出来，复杂度为<span
class="math inline">\(O\left( N\log N
\right)\)</span>。然而，对于其他信道，如二进制输入对称信道（Binary-input
Symmeric Channel，BSC）或者二进制输入加性高斯白噪声信道（Binary-input
Additive White Gaussian Channel，BAWGNC）并不存在准确的能够计算<span
class="math inline">\(Z\left( W_{N}^{\left( i \right)}
\right)\)</span>的方法。</li>
<li>因此，Mori等人提出了一种采用密度进化方法跟踪每个子信道概率密度函数（Probability
Density
Function，PDF），从而估计每个子信道错误概率的方法。这种方法适用于所有类型的二进制输入离散无记忆信道（Binary-input
Discrete Memoryless Channel，B-DMC）信道。</li>
<li>在大多数研究场景下，信道编码的传输信道模型均为BAWGNC信道。在BAWGNC信道下，可以将密度进化中的对数似然比（Likelihood
Rate，LLR）的概率密度函数用一族方差为均值2倍的高斯分布来近似，从而简化成了对一维均值的计算，大大降低计算量，这种对DE的简化计算即为高斯近似。</li>
</ol>
<p>参考文献： [1] Arikan E. Channel polarization: A method for
constructing capacity-achieving codes[C]// IEEE International Symposium
on Information Theory. IEEE, 2008:1173-1177. [2] Arikan E. Channel
Polarization: A Method for Constructing Capacity-Achieving Codes for
Symmetric Binary-Input Memoryless Channels[J]. IEEE Transactions on
Information Theory, 2008, 55(7):3051-3073. [3] 陈凯.
极化编码理论与实用方案研究[D]. 北京邮电大学, 2014.</p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（10）速率适配的凿孔极化码</title>
    <url>/2017/03/21/polar-code-10-rcpp/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>Arikan发明极化码时给出了编码算法和SC译码算法，后来的研究者提出SCL和CA-SCL译码算法对SC算法进行了改进，使译码性能得到提升。但不要忘记这些编译码算法都对码长有限定条件，即码长必须满足2的幂次方：<span
class="math inline">\(N={ {2}^{n}}\)</span>。虽然当码长<span
class="math inline">\(N\)</span>固定时，信息比特长度<span
class="math inline">\(K\)</span>可以任意取值，编码速率<span
class="math inline">\(R={K}/{N}\;\)</span>也能随之自由变化。但在信息比特长度一定的情况下，要通过调整码长而调整编码速率就无法实现了。从实际角度出发，我们更希望设计一对编译码器能够在不改变基本的编译码结构的情况下，使码长和编码速率都能够自适应调节。在设计速率可变的编码时，凿孔是一种普遍采用的方法。</p>
<span id="more"></span>
<h1 id="速率适配的凿孔极化码">速率适配的凿孔极化码</h1>
<p><br/>对于速率适配的凿孔极化（rate-compatible punctured
polar，RCPP）码，如何凿孔以及如何缩短码长是关键问题。极化码的凿孔方案大致分为两类：第一类方案，在编码端凿掉一些比特，但译码端没有这些凿孔比特的先验信息，因此译码端把这些比特信道被视为容量为0的信道。这类方案被称为“C0”（capacity-zero）凿孔模式<sup>[1]</sup>。第二类方案，凿孔比特是编、译码器事先知道的，因此这些比特信道被视为容量为1的信道。这类方案被称为“C1”（capacity-one）凿孔模式。本文介绍一种准均匀凿孔算法属于C0凿孔模式。</p>
<h1 id="准均匀凿孔算法">准均匀凿孔算法</h1>
<p><br/>在速率适配极化码框架下，文献[2]提出准均匀凿孔（Quasi-uniform
Puncturing，QUP）算法。</p>
<h2 id="rcpp方案">RCPP方案</h2>
<p><br/>基于CRC辅助译码的速率适配极化码（RCPP）方案如图1所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170321/183817210.jpg" title="图 1 RCPP coding and CRC-aided decoding scheme" /></p>
<p>在发送端，首先<span
class="math inline">\(k\)</span>个信息比特输入CRC单元，添加<span
class="math inline">\(m\)</span>个校验比特，输出比特数为<span
class="math inline">\(K=k+m\)</span>。然后<span
class="math inline">\(K\)</span>比特源序列经过Polar编码器输出<span
class="math inline">\(N\)</span>个比特的编码序列。之后输入凿孔单元，被凿掉<span
class="math inline">\(N-M\)</span>个比特后，最终得到<span
class="math inline">\(M\)</span>比特的凿孔极化码。速率适配凿孔极化（RCPP）码方案的编码速率定义为<span
class="math inline">\(R={K}/{M}\;\)</span>。</p>
<p>RCPP码由长度为<span class="math inline">\(N\)</span>的母码（Parent
Code）利用凿孔向量（Puncturing Vector）得到：</p>
<p><span class="math display">\[\mathbf{p}=\left( { {p}_{1}},{
{p}_{1}},...,{ {p}_{N}} \right)\]</span></p>
<p>其中<span class="math inline">\({ {p}_{i}}\in \left\{ 0,1
\right\}\)</span>，<span
class="math inline">\(i=1,2,...,N\)</span>，取值为0的<span
class="math inline">\({ {p}_{i}}\)</span>指示凿孔比特位置。</p>
<p>由于被凿掉的比特并未实际传输，但接收端可以将这些凿孔比特信道视为容量为0的信道，也即凿孔比特可视为被传输了，只是被传输在容量为0的信道上。因此接收端不需要改变SCL译码结构，而是直接将凿孔比特信道对应的对数似然比（LLR）设置为全零。假设信道模型为BAWGN信道，根据高斯近似，<span
class="math inline">\(M\)</span>个实际传输的比特信道，其LLR服从<span
class="math inline">\(\left( m_{N}^{\left( i \right)},2m_{N}^{\left( i
\right)} \right)\)</span>高斯分布；而<span
class="math inline">\(N-M\)</span>个凿孔比特信道未用于实际传输，但可以把这些信道视为LLR服从<span
class="math inline">\(\left( 0,0 \right)\)</span>的高斯信道。</p>
<h2 id="qup算法">QUP算法</h2>
<p><br/>母码码长为<span class="math inline">\(N={
{2}^{n}}\)</span>，凿孔比特数为<span class="math inline">\({
{N}_{p}}=N-M\)</span>，凿孔向量<span
class="math inline">\(\mathbf{p}\)</span>是二进制向量，取值为0的元素指示凿孔比特位置。QUP算法描述如下：</p>
<p><strong>stage1）</strong>初始化向量<span
class="math inline">\(\mathbf{p}\)</span>为全1，设置前<span
class="math inline">\({ {N}_{p}}\)</span>个元素为0；
<strong>stage2）</strong>对向量<span
class="math inline">\(\mathbf{p}\)</span>实施比特反转排序（bit-reversal
permutation）操作，从而得到凿孔向量。</p>
<h2 id="qup算法举例">QUP算法举例</h2>
<p><br/>对于<span class="math inline">\(N=8,M=5,{
{N}_{p}}=3\)</span>的例子。初始化向量为<span
class="math inline">\(\mathbf{p}=\left( 00011111
\right)\)</span>，经过比特反转排序后的向量即为所求凿孔向量<span
class="math inline">\(\mathbf{p}=\left( 01010111
\right)\)</span>。其中序号为1，3，5的位置为凿孔比特位置。</p>
<h1 id="对qup算法的理解">对QUP算法的理解</h1>
<p><br/>对于速率适配的凿孔极化码，<span
class="math inline">\(N\)</span>不再表示码长，而是表示母码长度，实际的Polar编码码长则为<span
class="math inline">\(M\)</span>，<span
class="math inline">\(M\)</span>比特中仍然包含信息比特和冻结比特，其中信息比特数为<span
class="math inline">\(K\)</span>，冻结比特数为<span
class="math inline">\(M-K\)</span>。信息比特又包含<span
class="math inline">\(k\)</span>个原始信息比特和<span
class="math inline">\(m\)</span>个CRC校验比特。</p>
<p>在编码端，首先还是利用巴氏参数或密度进化或高斯近似法估计信道错误概率，从而得到信息比特位置集<span
class="math inline">\(A\)</span>和冻结比特位置集<span
class="math inline">\({ {A}^{c}}\)</span>，<span
class="math inline">\(\left| A \right|=K\)</span>，<span
class="math inline">\(\left| { {A}^{c}}
\right|=M-K\)</span>。编码速率为<span
class="math inline">\(R={K}/{M}\;\)</span>。</p>
<p>凿孔向量<span
class="math inline">\(\mathbf{p}\)</span>是凿孔比特数<span
class="math inline">\({
{N}_{p}}\)</span>的函数，只要收发双方约定好凿孔比特数<span
class="math inline">\({ {N}_{p}}\)</span>，那么<span
class="math inline">\(\mathbf{p}\)</span>对于编译码器就都是已知的。译码时仍然按照深度为<span
class="math inline">\(d=0,1,...,N\)</span>的码树来进行CA-SCL译码，得到<span
class="math inline">\(N\)</span>比特的估计序列。最后再根据凿孔向量<span
class="math inline">\(\mathbf{p}\)</span>凿掉相应的<span
class="math inline">\({ {N}_{p}}\)</span>个比特，最后输出<span
class="math inline">\(M\)</span>比特的估计序列。</p>
<h1 id="参考文献">参考文献</h1>
<p><br/>[1] Niu K, Dai J, Chen K, et al. Rate-Compatible Punctured Polar
Codes: Optimal Construction Based on Polar Spectra[J]. 2016. [2] Niu K,
Chen K, Lin J R. Beyond turbo codes: Rate-compatible punctured polar
codes[C]// IEEE International Conference on Communications. IEEE,
2013:3423-3427.</p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>PAST 算法详细推导</title>
    <url>/2022/02/01/past/</url>
    <content><![CDATA[<p>本文源于《矩阵分析与应用》的这样一句话：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20220201/image-20220131075538766.png" /></p>
<p>如何运用矩阵求逆引理得到 PAST
算法，书中省略了推导过程。今尝试推导如下。</p>
<p>考虑特征子空间的跟踪与更新问题，「投影逼近」是解决此问题的一个方法。将特征子空间的确定当作一个无约束最优化问题来求解，称为「投影逼近子空间跟踪」（Projection
Approximation Subspace Tracking，PAST）。</p>
<p>特征子空间的跟踪与更新问题转化为以 J(W) 为目标函数的极小化问题</p>
<p><span class="math display">\[
J(W) = E \left\{ \| x - WW^Hx \|^2 \right\}
\]</span></p>
<p>其中，<span class="math inline">\(x\)</span> 是 <span
class="math inline">\(n \times 1\)</span> 观测数据向量，<span
class="math inline">\(W\)</span> 是 <span class="math inline">\(n \times
r\)</span> 矩阵。求矩阵 <span class="math inline">\(W\)</span>
使得目标函数达到全局极小点 <span
class="math inline">\(\text{min}J(W)\)</span> 。</p>
<p>已被证明，当 <span class="math inline">\(W\)</span>
的列向量张成的子空间等于信号子空间时，目标函数 <span
class="math inline">\(J(W)\)</span>
达到全局极小点。所谓「子空间跟踪」其跟踪的就是能够使 <span
class="math inline">\(W\)</span> 成为信号子空间的 <span
class="math inline">\(W\)</span>。</p>
<h2 id="什么是信号子空间">什么是信号子空间</h2>
<p>何种情况下 <span class="math inline">\(W\)</span>
会成为信号子空间？这与 PAST
算法本身无关，而属于子空间分析方法中的内容。在子空间分析中，观测数据向量
<span class="math inline">\(x\)</span> 的自相关矩阵表示为 <span
class="math inline">\(R = E\{xx^H\}\)</span>，对相关矩阵进行特征值分解
<span class="math inline">\(R = U \Sigma U^H\)</span>。矩阵 <span
class="math inline">\(U\)</span> 的列向量分为两个部分 <span
class="math inline">\(U = [U_S, U_G] = [u_1, u_2, ..., u_r, u_{r+1},
..., u_n]\)</span>。自相关矩阵的 <span class="math inline">\(r\)</span>
个主特征向量 <span class="math inline">\(U_S = [u_1, u_2, ...,
u_r]\)</span>
张成的子空间即为<strong>观测数据空间的信号子空间</strong>，剩余的 <span
class="math inline">\(n-r\)</span> 个次特征向量 <span
class="math inline">\(U_G = [u_{r+1}, ..., u_n]\)</span>
张成的子空间即为<strong>观测数据空间的噪声子空间</strong>。</p>
<span id="more"></span>
<h2 id="信号子空间与投影矩阵">信号子空间与投影矩阵</h2>
<p>信号子空间与噪声子空间是正交的，即有 <span
class="math inline">\(\text{Span}\{u_1, u_2, ..., u_r\} \perp
\text{Span}\{u_{r+1}, ..., u_n\}\)</span>。由于 <span
class="math inline">\(U\)</span> 是酉矩阵，因此有</p>
<p><span class="math display">\[
UU^H = U_S U_S^H + U_G U_G^H = I
\]</span></p>
<p>定义<strong>信号子空间上的投影矩阵</strong>为</p>
<p><span class="math display">\[
P_S = U_S (U_S^H U_S)^{-1} U_S^H
\]</span> 只有当满足正交性约束条件 <span class="math inline">\(U_S^H U_S
= I\)</span> 时，信号子空间上的投影矩阵可简化为 <span
class="math inline">\(P_S = U_S U_S^H\)</span>。于是，<span
class="math inline">\(P_Sx = U_S U_S^Hx\)</span> 为向量 <span
class="math inline">\(x\)</span> 在信号子空间上的投影。</p>
<p>同理，定义<strong>噪声子空间上的投影矩阵</strong>为</p>
<p><span class="math display">\[
P_G = U_G (U_G^H U_G)^{-1} U_G^H
\]</span> 只有当满足正交性约束条件 <span class="math inline">\(U_G^H U_G
= I\)</span> 时，噪声子空间上的投影矩阵可简化为 <span
class="math inline">\(P_G = U_G U_G^H\)</span>。于是，<span
class="math inline">\(P_Gx = U_G U_G^Hx\)</span> 为向量 <span
class="math inline">\(x\)</span> 在噪声子空间上的投影。</p>
<p>由于信号子空间与噪声子空间具有正交关系，因此 <span
class="math inline">\(P_S\)</span> 和 <span
class="math inline">\(P_G\)</span> 互为正交投影矩阵，即 <span
class="math inline">\(P_S + P_G = I\)</span>。因此 <span
class="math inline">\(P_G = (I - P_S)x\)</span> 还表示向量 <span
class="math inline">\(x\)</span>
在信号子空间上的<strong>正交投影</strong>。</p>
<p>另有如下子空间分析的引理，其中 <span
class="math inline">\(P_{H_1}\)</span> 是到子空间 <span
class="math inline">\(H_1\)</span> 的投影矩阵，<span
class="math inline">\(P_{H_2}\)</span> 是到子空间 <span
class="math inline">\(H_2\)</span> 的投影矩阵。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20220201/image-20220131125829051.png" /></p>
<p>此引理表明，若一个矩阵等于另一个矩阵右乘一个正交矩阵，则这两个矩阵等价或张成相同的列空间。这就引出了第二个约束条件，即齐次性约束条件。</p>
<h2 id="极小化问题解的形式">极小化问题解的形式</h2>
<p>对于目标函数 <span class="math inline">\(J(W)\)</span>，若矩阵 <span
class="math inline">\(W\)</span> 满足 1）正交性约束条件 <span
class="math inline">\(W^H W = I\)</span>，2）齐次性约束条件 <span
class="math inline">\(J(W) = J(WQ)\)</span>，其中 <span
class="math inline">\(Q\)</span> 为 <span class="math inline">\(r \times
r\)</span> 任意正交矩阵，则极小化问题 <span
class="math inline">\(\text{min} J(W)\)</span> 的解不是一个 <span
class="math inline">\(W\)</span> 矩阵，而是由 <span
class="math inline">\(WQ\)</span> 组成的矩阵集合。</p>
<h2 id="从子空间分析到-past-算法">从子空间分析到 PAST 算法</h2>
<p>PAST 算法给出了求解极小化问题 <span class="math inline">\(\text{min}
J(W)\)</span> 的方法。已被证明，当且仅当 <span class="math inline">\(W =
U_r Q\)</span>，其中 <span class="math inline">\(Q\)</span> 是 <span
class="math inline">\(r \times r\)</span> 任意酉矩阵，而 <span
class="math inline">\(U_r\)</span> 是 <span class="math inline">\(n
\times r\)</span> 矩阵，其 <span class="math inline">\(r\)</span>
个列向量是自相关矩阵 <span class="math inline">\(R = E\{xx^H\}\)</span>
的 <span class="math inline">\(r\)</span> 个主特征向量，则 <span
class="math inline">\(W\)</span>
的列向量张成的子空间为信号子空间，此时目标函数 <span
class="math inline">\(J(W)\)</span> 达到全局极小值。</p>
<p>更重要的是，这一结论的得出并不事先假定有任何约束条件，而是在目标函数
<span class="math inline">\(J(W)\)</span> 达到极小值时自动满足
1）正交性约束条件 <span class="math inline">\(W^H W =
I\)</span>，2）齐次性约束条件 <span class="math inline">\(J(W) =
J(WQ)\)</span>。这就是为什么说，原本具有正交性约束和齐次性的极小化问题可以等价为一个无约束的最优化问题。如此一来，求极小化问题
<span class="math inline">\(\text{min} J(W)\)</span>
的解即转化为求自相关矩阵的 <span class="math inline">\(r\)</span>
个主特征向量。</p>
<p>然而在实际应用中，自相关矩阵是随时间变化的，其特征值和特征向量也是随时间变化的。跟踪时变信号子空间
<span class="math inline">\(W\)</span>
的一个办法是采用递推最小二乘法。</p>
<h2 id="past-算法推导">PAST 算法推导</h2>
<p>定义指数加权的目标函数 <span class="math display">\[
\begin{equation} \tag{1}
\begin{aligned}
J_1(W(t)) &amp;= \sum_{i = 1}^{t} \beta^{t - i} \|x(i) -
W(t)W^H(t)x(i)\|^2 \\
&amp;=  \sum_{i = 1}^{t} \beta^{t - i} \|x(i) - W(t)y(i)\|^2
\end{aligned}
\end{equation}
\]</span></p>
<p>其中，<span class="math inline">\(y(i) = W(t) x(i)\)</span>。</p>
<p>由自适应滤波理论知，极小化问题 <span class="math inline">\(\text{min}
J_1(W)\)</span> 的最优解为维纳滤波器。</p>
<p><span class="math display">\[
W(t) = C_{xy}(t) C_{yy}^{-1}(t) \tag{2}
\]</span></p>
<p>其中，互相关矩阵 <span class="math inline">\(C_{xy}(t)\)</span>
和自相关矩阵 <span class="math inline">\(C_{yy}(t)\)</span>
可以递推得到</p>
<p><span class="math display">\[
C_{xy}(t) = \sum_{i = 1}^{t} \beta^{t - i} x(i) y^H(t) = \beta C_{xy}(t
- 1) + x(t) y^H(t) \tag{3}
\]</span></p>
<p><span class="math display">\[
C_{yy}(t) = \sum_{i = 1}^{t} \beta^{t - i} y(i) y^H(t) = \beta C_{yy}(t
- 1) + y(t) y^H(t) \tag{4}
\]</span></p>
<p>对式（4）应用矩阵求逆引理，令</p>
<p><span class="math display">\[
\begin{equation} \tag{5}
\begin{aligned}
A &amp;= C_{yy}(t) \\
B^{-1} &amp;= \beta C_{yy}(t - 1) \\
C &amp;=  y(t) \\
D &amp;= 1
\end{aligned}
\end{equation}  
\]</span></p>
<p>则相关矩阵的逆矩阵为</p>
<p><span class="math display">\[
C_{yy}^{-1}(t) = \beta^{-1} C_{yy}^{-1}(t - 1) -  \frac{\beta^{-1}
C_{yy}^{-1}(t - 1)  y(t) · \beta^{-1} y^H(t) C_{yy}^{-1}(t - 1)}{1 +
\beta^{-1} y^H(t) C_{yy}^{-1}(t - 1) y(t)} \tag{6}
\]</span></p>
<p>令 <span class="math inline">\(P(t) =
C_{yy}^{-1}(t)\)</span>，则上式可重写为</p>
<p><span class="math display">\[
P(t) = \beta^{-1} P(t - 1) - \frac{\beta^{-1} P(t - 1) y(t)}{1 +
\beta^{-1} y^H(t) P(t - 1) y(t)} · \beta^{-1} y^H(t) P(t - 1) \tag{7}
\]</span></p>
<p>令</p>
<p><span class="math display">\[
g(t) = \frac{\beta^{-1} P(t - 1) y(t)}{1 + \beta^{-1} y^H(t) P(t - 1)
y(t)} \tag{8}
\]</span></p>
<p>带入式（7）可得</p>
<p><span class="math display">\[
P(t) = \beta^{-1} P(t - 1) -  \beta^{-1}  g(t) y^H(t) P(t-1) \tag{9}
\]</span></p>
<p>另外整理式（8）可得</p>
<p><span class="math display">\[
\begin{equation} \tag{10}
\begin{aligned}
g(t) &amp;= \beta^{-1} P(t - 1) y(t) - \beta^{-1} g(t) y^H(t) P(t - 1)
y(t) \\
&amp;= [\beta^{-1} P(t - 1) - \beta^{-1} g(t) y^H(t) P(t - 1)] y(t) \\
&amp;= P(t) y(t)
\end{aligned}
\end{equation}
\]</span></p>
<p>式（8~10）导出了增益向量 <span class="math inline">\(g(t) = P(t)
y(t)\)</span>，后面将会再次用到它。现继续整理式（7）得</p>
<p><span class="math display">\[
P(t) = \beta^{-1} P(t - 1) - \frac{P(t - 1) y(t)}{\beta + y^H(t) P(t -
1) y(t)} · \beta^{-1} y^H(t) P(t - 1) \tag{11}
\]</span></p>
<p>令 <span class="math inline">\(h(t) = P(t - 1)
y(t)\)</span>，由于自相关矩阵是 Hermitian 矩阵，亦有 <span
class="math inline">\(h^H(t) = y^H(t) P(t -
1)\)</span>，则上式可重写为</p>
<p><span class="math display">\[
P(t) = \beta^{-1} P(t - 1) -  \beta^{-1} \frac{h(t)}{\beta + y^H(t)
h(t)} h^H(t) \tag{12}
\]</span></p>
<p>令 <span class="math inline">\(\alpha(t) = \beta + y^H(t)
h(t)\)</span>，则式（12）可重写为</p>
<p><span class="math display">\[
P(t) = \beta^{-1} [P(t - 1) - h(t) h^H(t) / \alpha(t)] \tag{13}
\]</span></p>
<p>式（11 ~ 13）导出了自相关矩阵的逆矩阵 <span
class="math inline">\(P(t)\)</span> 的计算式。</p>
<p>下面使用 <span class="math inline">\(P(t) = C_{yy}^{-1}(t)\)</span>
和式（3）将式（2）重写为</p>
<p><span class="math display">\[
\begin{equation} \tag{14}
\begin{aligned}
W(t) &amp;= C_{xy}(t) C_{yy}^{-1}(t)  \\
&amp;= C_{xy}(t) P(t) \\
&amp;= [\beta C_{xy}(t - 1) + x(t) y^H(t)] P(t) \\
&amp;= \beta C_{xy}(t -1) P(t)  +  x(t) y^H(t) P(t)
\end{aligned}
\end{equation}
\]</span> 将式（13）带入上式右边第一项得</p>
<p><span class="math display">\[
\begin{equation} \tag{15}
\begin{aligned}
W(t) &amp;= \beta C_{xy}(t -1)\{\beta^{-1} [P(t - 1) - h(t) h^H(t) /
\alpha(t)]\}   +  x(t) y^H(t) P(t)\\
&amp;= C_{xy}(t - 1) P(t - 1)  - C_{xy}(t - 1) h(t) h^H(t) /
\alpha(t)  + x(t) y^H(t) P(t) \\
&amp;= C_{xy}(t - 1) P(t - 1)  - C_{xy}(t - 1) P(t - 1) y(t) h^H(t)  /
\alpha(t)  + x(t) y^H(t) P(t) \\
&amp;= W(t -1) - W(t -1) y(t) h^H(t)  / \alpha(t) +  x(t) y^H(t) P(t)
\end{aligned}
\end{equation}
\]</span></p>
<p>前面由式（10）导出增益向量 <span class="math inline">\(g(t) = P(t)
y(t)\)</span>，等式两边同时取共轭转置有</p>
<p><span class="math display">\[
g^H(t) = y^H(t) P^H(t) = y^H(t) P(t) \tag{16}
\]</span></p>
<p>此外由式（12）可导出增益向量的另一种计算式</p>
<p><span class="math display">\[
g(t) = h(t) / \alpha(t) \tag{17}
\]</span></p>
<p>对上式两边同时取共轭转置有</p>
<p><span class="math display">\[
g^H(t) = h^H(t) / \alpha(t) = [h(t) / \alpha(t)]^H \tag{18}
\]</span></p>
<p>将式（16）和式（18）带入式（15）有</p>
<p><span class="math display">\[
\begin{equation} \tag{19}
\begin{aligned}
W(t) &amp;=  W(t -1) - W(t -1) y(t) g^H(t) + x(t) g^H(t) \\
&amp;= W(t -1) + [x(t) - W(t -1) y(t)] g^H(t) \\
&amp;= W(t -1) + e(t) g^H(t) \\
&amp;= W(t -1) + e(t) [h(t) / \alpha(t)]^H
\end{aligned}
\end{equation}
\]</span></p>
<p>其中</p>
<p><span class="math display">\[
e(t) = x(t) - W(t -1) y(t) \tag{20}
\]</span></p>
<p>整理以上各式得到 PAST 算法核心计算式如下：</p>
<p><span class="math inline">\(y(i) = W^H(t) x(i)\)</span></p>
<p><span class="math inline">\(h(t) = P(t - 1) y(t)\)</span></p>
<p><span class="math inline">\(\alpha(t) = \beta + y^H(t)
h(t)\)</span></p>
<p><span class="math inline">\(g(t) = h(t) / \alpha(t)\)</span></p>
<p><span class="math inline">\(P(t) = \beta^{-1} [P(t - 1) - h(t) h^H(t)
/ \alpha(t)]\)</span></p>
<p><span class="math inline">\(e(t) = x(t) - W(t -1) y(t)\)</span></p>
<p><span class="math inline">\(W(t) = W(t -1) + e(t) [h(t) /
\alpha(t)]^H\)</span></p>
<p>上述过程也是 RLS 滤波器计算过程，而使用 RLS 方法来递归地计算
PAST，其关键一步是用 <span class="math inline">\(W^H(i -1) x(i)\)</span>
来替代 <span class="math inline">\(W^H(t) x(i)\)</span>，于是有 <span
class="math inline">\(y(t) = W^H(t - 1) x(t)\)</span>。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20220201/image-20220201110216312.png" /></p>
<h2 id="附-1矩阵求逆引理">附 1：矩阵求逆引理</h2>
<p>设 A 和 B 是两个 M x M 正定阵，它们之间的关系为</p>
<p><span class="math display">\[
\mathbf{A} = \mathbf{B}^{-1} + \mathbf{C} \mathbf{D}^{-1} \mathbf{C}^H
\]</span></p>
<p>其中 D 是 N x N 正定阵，C 是 M x N 矩阵。根据矩阵求逆引理，A
的逆矩阵表示为</p>
<p><span class="math display">\[
\mathbf{A}^{-1} = \mathbf{B} - \mathbf{BC} \left(\mathbf{D} +
\mathbf{C}^HBC \right)^{-1} \mathbf{C}^H \mathbf{B}
\]</span></p>
<h2 id="附-2维纳滤波器">附 2：维纳滤波器</h2>
<p>PAST 算法源于子空间分析中的极小化问题 <span
class="math inline">\(\text{min} J(W)\)</span>
，同时也可视为求解最优线性 FIR 滤波器问题，因此 PAST
算法的实现可利用维纳滤波器的结论。</p>
<p>维纳霍夫方程的矩阵形式表示为</p>
<p><span class="math display">\[
\mathbf{R w_o} = \mathbf{p}
\]</span></p>
<p>其中 <span class="math inline">\(\mathbf{R} = \mathbb{E}
[\mathbf{uu^H}]\)</span> 为滤波器抽头输入向量的自相关矩阵，<span
class="math inline">\(\mathbf{p} = \mathbb{E} [\mathbf{u}(n)
d^*(n)]\)</span> 为滤波器输入向量 <span
class="math inline">\(\mathbf{u}\)</span> 与期望响应 <span
class="math inline">\(d(n)\)</span> 的互相关向量。</p>
<p>最优线性 FIR 滤波器抽头权向量为</p>
<p><span class="math display">\[
\mathbf{w_o} = \mathbf{R}^{-1}  \mathbf{p}
\]</span></p>
<h2 id="references">References</h2>
<p>张贤达. 矩阵分析与应用（第2版）. 清华大学出版社, 2013.</p>
]]></content>
      <categories>
        <category>PAST</category>
      </categories>
  </entry>
  <entry>
    <title>Polar Code（14）3GPP RAN1#88bis</title>
    <url>/2017/05/15/polar-code-14-3gpp-ran1-88b/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>RAN1#87次会议已将Polar
code确定为eMBB场景下控制信道的信道编码，因此3GPP对极化码的讨论并不是在单纯地讨论编码理论，而是在讨论极化码在5G
NR控制信道框架下的应用。所以随着3GPP对极化码讨论的深入，关于极化码达成的结论会自然地和控制信道的特性结合在一起。也就是说，你所看到的3GPP关于极化码达成的结论，未必是Polar
code本身应该具有的，但它一定是<strong>5G NR控制信道下的Polar
code</strong>应该具有的。所以仍然有必要把学术界研究的极化码与工程界研究的极化码做个区分。</p>
<p>言归正传，从3GPP
RAN1#88bis次会议开始，对极化码的讨论分为两个部分：一是Code
construction，二是Sequence design。</p>
<span id="more"></span>
<h1 id="code-construction">Code construction</h1>
<p><br/>Code construction讨论的是编码结构，犹如一个盒子，<span
class="math inline">\(k\)</span>比特输入，<span
class="math inline">\(N\)</span>比特输出。只要这个盒子的内部结构确定，输入任意<span
class="math inline">\(k\)</span>个信息比特，都可以得到<span
class="math inline">\(N\)</span>比特的极化码编码序列。这个编码结构简略地说就是“<strong>J+J'检错比特
+ basic polar</strong>”的控制信道编码结构。J
bits是CRC，主要用于错误检测，但也可以用于辅助译码。J'
bits用于辅助译码。</p>
<p>根据Arikan的结论，极化码在码长趋于无穷长时，由于信道极化完全而能够达到香农容量。但实际的码长是有限长的，采用SC/SCL译码算法并不能达到理想的译码性能。添加一些检错比特以辅助译码，则能够以较低的复杂度提高译码检错能力，从而提高译码性能。3GPP所讨论的主要是基于辅助的极化码方案，目前有CRC-polar、PC-polar和Hash-polar三种方案，甚至是它们的组合。所以J'
bits可以是CRC或PC或Hash code，或它们的组合。</p>
<p>此外，极化码编码结构要考虑Early
termination，在不降低BLRE性能或增加时延的前提下，不必等到译出全部比特才去判断该码字是否正确，而是在译出一部分比特的时候就可以提前发现错误。这样做的好处，一是在译码过程中能够尽早发现译码错误，减少译码复杂度；二是对于控制信道可以减少盲检测的数量。</p>
<h1 id="sequence-design">Sequence design</h1>
<p><br/>Sequence
design涉及极化码信息比特和冻结比特位置的选择问题。对极化码而言，由于信道极化特性，某些比特位置（子信道）总是比其他比特位置更可靠。构造极化码时，需要一个基于可靠性度量的比特位置顺序序列（ordered
sequence），指示信息比特和检错比特放置在可靠性较高的比特位置上，冻结比特放置在可靠性较低的比特位置上。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170529/094419143.jpg" title="The structure of Polar codes for NR" /></p>
<p>上图红色方框表示的序列就是ordered sequence。有了“<strong>J+J'检错比特
+ basic
polar</strong>”的编码结构，加上指示信息比特/冻结比特位置的<strong>ordered
sequence</strong>，最后加上<strong>速率匹配方案</strong>以突破码长<span
class="math inline">\(N\)</span>必须为2的幂次方的限制，最终构成了一套适用于NR-PDCCH的极化码编码方案。</p>
<p>关于Sequence design，本次会议并没有达成任何实质性结论。</p>
]]></content>
      <categories>
        <category>3GPP_PolarCode</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（15）3GPP RAN1#89</title>
    <url>/2017/05/19/polar-code-15-3gpp-ran1-89/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>3GPP标准化会议于5月15~19日在杭州召开。本周在杭州参加3GPP RAN1
#89次会议，亲历了5G标准化进程中的一个时间点。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170529/095532334.JPG" title="3GPP RAN1#89 主会场（杭州）" /></p>
<span id="more"></span>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170529/095722749.JPG" title="3GPP RAN1#89 信道编码分会场" /></p>
<p>本文简要介绍polar code在3GPP 5G NR讨论的最新进展。</p>
<h1 id="code-construction">Code construction</h1>
<p><br/>本周召开的RAN1 #89会议，<strong>关于Code
construction达成的结论为：</strong></p>
<p><strong>对于下行链路：</strong></p>
<ul>
<li>J'的长度为3或6（下次会议再进一步做出选择）；</li>
<li>若J'=6，工作假设：J+J'bits以分布式的方式分布（在编码结构中支持Early
termination）（不排除非分布式的方式）；</li>
<li>若J'=3，J+J'bits是否采用分布式的方式分布（在编码结构中支持Early
termination）有待进一步研究。</li>
</ul>
<p>在编码结构中，J+J'bits以分布式的方式插入到信息比特中以实现Early
termination的方案： - 支持者：DCM, Nokia, HW, ZTE, CATT, IDC, CL, NEC,
Mediatek, Accelercomm, Spreadtrum - 反对者：Intel, LG, QC, Eri, Sams,
Fuji, ETRI, Tsofun, IAESI</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170529/100741806.PNG"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h1 id="sequence-design">Sequence design</h1>
<p><br/><strong>关于Sequence design本次会议达成的结论为：</strong></p>
<ul>
<li><strong>工作假设（1）</strong>：一个母码长度对应一个single fixed
sequence，以提供信息比特和冻结比特的选择</li>
<li>多个不同母码长度对应着一个固定序列（fixed
sequences）的集合，这些固定序列来源于“single reference mother code
size”，
<ul>
<li>单参考母码长度的最大值为512或64（下次会议进一步确定）。</li>
<li>如果修改上述<strong>工作假设（1）</strong>，使得对于最大母码长度存在多于一个的序列，则由其他母码长度派生出额外的序列集合。</li>
</ul></li>
<li>选择序列时，至少考虑已知的CCE大小，如果可能，考虑到典型的有效载荷。</li>
</ul>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170529/101358568.JPG"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h1 id="rate-matching">Rate matching</h1>
<p><br/><strong>关于速率匹配方案RAN1今后使用的术语：</strong></p>
<p><strong>Puncturing</strong>：凿孔比特是指那些不传输的编码比特，接收端对于这些不传输的比特是<strong>未知的</strong>，相应的LLR被设置为0；</p>
<p><strong>Shortening</strong>：将输入比特设定为已知，接收端对于这些不传输的比特是<strong>已知的</strong>，相应的LLR设置为一个较大的值。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170529/101526024.JPG"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>关于这两种凿孔方案有必要再交代一下。博文<a
href="http://marshallcomm.cn/2017/03/21/polar-code-10-rcpp/">《Polar
Code（10）速率适配的凿孔极化码》</a>中提到过，极化码的凿孔方案分为两类：一类被称为“C0”（capacity-zero）凿孔模式，就是RAN1在此定义的Puncturing方案；另一类被称为“C1”（capacity-one）凿孔模式，就是RAN1在此定义的Shortening方案。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170529/101624100.JPG"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170529/101659864.JPG"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p><strong>本次会议关于速率匹配达成的结论：</strong></p>
<p>码块分段之后（如果有的话）： - <span
class="math inline">\(K\)</span>是信息比特数（包括CRC） - <span
class="math inline">\(M\)</span>是传输的编码比特数 - <span
class="math inline">\({
{N}_{DM}}\)</span>是满足2的幂次方并且大于等于<span
class="math inline">\(M\)</span>的最小值 - <span class="math inline">\({
{N}_{M}}\)</span>是 - <span class="math inline">\({ {
{N}_{DM}}}/{2}\;\)</span>，如果<span class="math inline">\(M&lt;\beta *{
{ {N}_{DM}}}/{2}\;\)</span>且<span class="math inline">\({K}/{M}\;&lt;{
{R}_{repthr}},1\le \beta &lt;2\)</span>（准确的$<span
class="math inline">\(有待进一步研究；不排除\)</span><span
class="math inline">\(是\)</span>{ {N}<em>{DM}}<span
class="math inline">\(的函数）  - 否则，\)</span>{ {N}</em>{DM}}$ -
<span class="math inline">\({
{R}_{repthr}}\)</span>的值有待进一步研究；不排除<span
class="math inline">\({ {R}_{repthr}}=0\)</span> - <span
class="math inline">\({
{N}_{R}}\)</span>是满足2的幂次方并且大于等于<span
class="math inline">\({K}/{ { {R}_{\min }}}\;\)</span>的最小值 - <span
class="math inline">\({ {R}_{\min }}\)</span>是所支持的最小码率 - <span
class="math inline">\(\sim {1}/{12\le }\;{ {R}_{\min }}\le \sim
{1}/{5}\;\)</span>，准确值有待进一步研究 - <span class="math inline">\({
{N}_{\max }}\)</span>是所支持的最大母码长度 - 母码长度<span
class="math inline">\(N\)</span>由<span class="math inline">\(\min
\left( { {N}_{M}},{ {N}_{R}},{ {N}_{\max }} \right)\)</span>确定 -
当<span
class="math inline">\(M&gt;N\)</span>时，采用重复（<strong>Repetition</strong>）编码
- 当<span class="math inline">\(M&lt;N\)</span>时，采用Puncturing or
Shortening： -
低码率时采用<strong>Puncturing</strong>，例如当码率小于等于<span
class="math inline">\({ {R}_{psthr}}\)</span>时，和或其他条件 -
高码率时采用<strong>Shortening</strong>，例如当码率大于<span
class="math inline">\({ {R}_{psthr}}\)</span>时，和或其他条件 - <span
class="math inline">\({ {R}_{psthr}}\)</span>的值有待进一步研究</p>
]]></content>
      <categories>
        <category>3GPP_PolarCode</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（11）3GPP标准化进展</title>
    <url>/2017/03/22/polar-code-11-3gpp-standard-1/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>时间终于来到了2017年，我的文章也终于要追上3GPP 5G
NR标准化的进展了。自2016年11月3GPP RAN1 #87会议确定5G
eMBB场景控制信道编码为Polar Code后，2017年1月在美国斯波坎市召开的3GPP
RAN1 #AH1_NR会议上继续讨论了Polar
Code设计议题。紧接着，2月（上个月）在希腊雅典召开了RAN1
#88次会议；3月（本月）在克罗地亚召开了RAN #75次全会，5G的研究阶段（Study
Item，SI）结束，继而开启工作阶段（Work
Item）；4月（下个月）3日又将在美国召开RAN1
#88b会议。5G的推进速度其实比外界想象得要快得多。</p>
<span id="more"></span>
<h1 id="ran1-ah1_nr">RAN1 #AH1_NR</h1>
<h2 id="polar-code描述方法">Polar Code描述方法</h2>
<p><br/>2017年1月召开的RAN1 #AH1_NR会议上统一了Polar
Code描述方法。一直以来Polar Code有两种等价的描述方法。</p>
<ul>
<li><strong>Description #1</strong>：实施比特反转（bit
reversal）的编码。也就是Arikan最初发明的编码方法。我的文章也一直采用这种描述方法，见<a
href="http://marshallcomm.cn/2017/03/04/polar-code-2-encoding-principle/">《Polar
Code（2）编码原理》</a>图1~3。</li>
<li><strong>Description #2</strong>：不进行比特反转（bit
reversal）的编码。这是最近比较流行的描述方法。为了便于各公司进行Polar
Code设计，消除混淆，应当统一描述方法。</li>
</ul>
<p><strong>会议同意了Description
#2的描述</strong>，并把这种描述称为“<strong>basic
polar</strong>”。注意，这并不影响Polar
code其他方面的设计，如凿孔模式的设计、冻结比特模式的设计等。basic
polar描述如下：</p>
<ul>
<li>Polar编码器输出为 <span
class="math display">\[x_{0}^{N-1}=u_{0}^{N-1}{ {G}_{N}}\]</span></li>
</ul>
<p><span class="math inline">\({ {G}_{N}}\)</span>是N维的生成矩阵</p>
<ul>
<li><p><span class="math display">\[{ {G}_{2}}=\left[ \begin{matrix}
1 &amp; 0  \\
1 &amp; 1  \\
\end{matrix} \right]\]</span></p></li>
<li><p><span class="math display">\[{ {G}_{N}}={ {F}^{\otimes
n}}\]</span></p></li>
</ul>
<p>其中<span class="math inline">\(N={ {2}^{n}},n\ge 1\)</span></p>
<ul>
<li><span class="math display">\[F=\left[ \begin{matrix}
1 &amp; 0  \\
1 &amp; 1  \\
\end{matrix} \right]\]</span></li>
</ul>
<p><span class="math inline">\({ {F}^{\otimes n}}\)</span>是矩阵<span
class="math inline">\(F\)</span>的n次克罗内克积</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170322/171402368.gif"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170322/171428130.gif"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170322/171437427.gif"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h2 id="最大母码长度范围">最大母码长度范围</h2>
<p><br/>Polar Code最大母码长度<span class="math inline">\(N={
{2}^{n}}\)</span>确定了以下范围：</p>
<ul>
<li>下行控制信息：<span class="math inline">\(256\le { {N}_{\max
,DCI}}\le 1024\)</span></li>
<li>上行控制信息：<span class="math inline">\(1024\le { {N}_{\max
,UCI}}\le 2048\)</span></li>
<li>准确值将在RAN1 #88会议进一步确定</li>
</ul>
<h2 id="评估方法和可选编码方案">评估方法和可选编码方案</h2>
<p><br/>从RAN1
#86b开始，华为就提出了基于奇偶校验（parity-check）的Polar编译码方案，即PC-Polar。#87会议虽然确定控制信道采用Polar
Code，但还没确定究竟采用哪一种Polar
Code。目前争论的焦点主要集中在CA-Polar和PC-Polar上。会议同意了以下评估方法和二选一的编码方案：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170322/172144658.jpg"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h1 id="ran1-88">RAN1 #88</h1>
<h2 id="确定最大母码长度">确定最大母码长度</h2>
<ul>
<li>下行控制信息：<span class="math inline">\({ {N}_{\max
,DCI}}=512\)</span></li>
<li>上行控制信息：<span class="math inline">\({ {N}_{\max
,UCI}}=1024\)</span></li>
</ul>
<h2 id="编码方案">编码方案</h2>
<p><br/>本次会议决定，把Alt.1和Alt.2两种可选方案进一步做了融合：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170322/172334924.jpg"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h1 id="小结">小结</h1>
<p><br/>截止目前，Polar
Code上下行控制信息编码的母码长度确定了。性能评估指标一个是BLER，一个是FAR。编码方案仍会在下一次会议（4月）中进一步讨论。</p>
<h1 id="参考文献">参考文献</h1>
<p><br/>[1] Draft_Minutes_report_RAN1#AH1_NR_v010 [2]
Draft_Minutes_report_RAN1#88_v010</p>
]]></content>
      <categories>
        <category>3GPP_PolarCode</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（16）3GPP RAN1 adhoc#2</title>
    <url>/2017/07/01/polar-code-16-3gpp-ran1-adhoc2/</url>
    <content><![CDATA[<p>3GPP RAN1 ad hoc#2会议于6月27~30日在青岛召开。关于Polar
Code达成如下结论：</p>
<h1 id="code-construction">Code construction</h1>
<p><br/> <img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170704/102252079.png"
alt="mark" /></p>
<span id="more"></span>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170704/102419678.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h1 id="sequence-design">Sequence design</h1>
<p><br/> <img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170704/102453611.png"
alt="mark" /></p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170704/102504190.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
]]></content>
      <categories>
        <category>3GPP_PolarCode</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（18）比特信道的选择</title>
    <url>/2017/08/24/polar-code-18-select-bitchannel/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>本文源于<a
href="http://marshallcomm.cn/2017/03/13/polar-code-6-sc-decoder/">《Polar
Code（6）SC译码算法》</a>评论区的讨论，受到启发后重新梳理了关于巴氏参数法、高斯近似、degign-snr的认识。</p>
<h1 id="极化码构造原则">极化码构造原则</h1>
<p><br/>Arikan在论文[1]指出极化码构造原则：</p>
<blockquote>
<p><strong>Polar code construction rule</strong>. To construct an <span
class="math inline">\(\left( N,K \right)\)</span> polar code for a B-DMC
<span class="math inline">\(W\)</span>, we select <span
class="math inline">\(A\)</span> as the subset of indices <span
class="math inline">\(A\subset \left\{ 1,...,N \right\}\)</span> such
that <span class="math inline">\(\left| A \right|=K\)</span> and for
each <span class="math inline">\(i\in A\)</span>, the value <span
class="math inline">\(Z\left( W_{N}^{\left( i \right)} \right)\)</span>
is among the smallest <span class="math inline">\(K\)</span> values in
the set <span class="math inline">\(\left\{ Z\left( W_{N}^{\left( i
\right)} \right):j=1,...,N \right\}\)</span>. The choice of the frozen
vector <span class="math inline">\(f_{1}^{\left| { {A}^{c}}
\right|}\)</span> is unspecified; any choice <span
class="math inline">\(\left( A,f_{1}^{\left| { {A}^{c}} \right|}
\right)\)</span> defines a polar code.</p>
</blockquote>
<span id="more"></span>
<p>巴氏参数<span class="math inline">\(Z\left( W
\right)\)</span>，对任意B-DMC <span class="math inline">\(W\)</span>
定义为：</p>
<p><span class="math display">\[\begin{align}
Z\left( W \right)=\sum\limits_{y\in Y}{\sqrt{W\left( y|0 \right)W\left(
y|1 \right)}}
\end{align}\]</span></p>
<p><span class="math inline">\(Z\left( W \right)\)</span>与信道容量<span
class="math inline">\(I\left( W_{N}^{\left( i \right)}
\right)\)</span>成反比，<span class="math inline">\(I\left(
W_{N}^{\left( i \right)} \right)\)</span>越大，<span
class="math inline">\(Z\left( W_{N}^{\left( i \right)}
\right)\)</span>越小。信道极化的特性是，一部分子信道的容量趋于1，一部分子信道的容量趋于0。构造极化码时自然要选择容量较大的子信道来放置信息比特，也就是选择<span
class="math inline">\(Z\left( W_{N}^{\left( i \right)}
\right)\)</span>最小的<span
class="math inline">\(K\)</span>个子信道。这就是Arikan定义的极化码构造原则。但问题是巴氏参数如何计算？</p>
<h1 id="巴氏参数的计算">巴氏参数的计算</h1>
<p><br/>在B-DMC <span class="math inline">\(W\)</span> 下，有结论：</p>
<p><span class="math display">\[\begin{align}
Z\left( W_{2N}^{\left( 2i-1 \right)} \right)\le 2Z\left( W_{N}^{\left( i
\right)} \right)-Z{ {\left( W_{N}^{\left( i \right)} \right)}^{2}}
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
Z\left( W_{2N}^{\left( 2i \right)} \right)\text{=}Z{ {\left(
W_{N}^{\left( i \right)} \right)}^{2}}
\end{align}\]</span></p>
<p>当且仅当<span
class="math inline">\(W\)</span>是BEC时，式（2）等号成立。</p>
<p>在BEC下，信道转移概率<span class="math inline">\(W_{N}^{\left( i
\right)}\)</span>可由BEC的删除概率得到：</p>
<p><span class="math display">\[\begin{align}
\varepsilon _{2k}^{\left( 2j-1 \right)}=2\varepsilon _{k}^{\left( j
\right)}-{ {\left[ \varepsilon _{k}^{\left( j \right)} \right]}^{2}}
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
\varepsilon _{2k}^{\left( 2j \right)}\text{=}{ {\left[ \varepsilon
_{k}^{\left( j \right)} \right]}^{2}}
\end{align}\]</span></p>
<p>递归初始值为$_{1}^{( 1 )}=$。</p>
<p>注意此时信道条件已经由B-DMC缩小到BEC。<span
class="math inline">\(Z\left( W_{N}^{\left( i \right)}
\right)\)</span>由<span class="math inline">\(W_{N}^{\left( i
\right)}\)</span>得到，而<span class="math inline">\(W_{N}^{\left( i
\right)}\)</span>由$<span
class="math inline">\(得到。**那么\)</span>$从何而来？答案是自己给定。**这和实际不相符啊，在实际的信道编码中怎么自己给定？这个问题先存疑，先叙述后面的内容。</p>
<p>只有在BEC时，才能按照式（1）求解巴氏参数。不是BEC的情况下，式（2）是不等式，没办法精确求解。这就是为什么说巴氏参数法不适用于非BEC信道。但此路不通，可以绕着走。</p>
<h1 id="巴氏参数界">巴氏参数界</h1>
<p><br/>观察不等式（2），<span class="math inline">\(Z\left(
W_{2N}^{\left( 2i-1 \right)} \right)\)</span>的上界是<span
class="math inline">\(2Z\left( W_{N}^{\left( i \right)} \right)-Z{
{\left( W_{N}^{\left( i \right)}
\right)}^{2}}\)</span>,只有当BEC信道时达到上界。换句话说，式（2<sub>3）表达的是巴氏参数界。式（1</sub>5）是按正向思维的推导，得出了巴氏参数界。下面就是逆向思维的应用了。巴氏参数界有如此良好的特性，这正是我们所需要的。</p>
<p>不用搭梯子，直接空降。直接利用巴氏参数界的结论，是对巴氏参数计算的一种简化，跳出了BEC的限制条件，让它适用于更广泛的信道。这就是论文[2]关于PCC-0所说的：</p>
<blockquote>
<p>A pair of <strong>upper bounds</strong> on the Bhattacharyya
parameters of bit-channels evolve as simply as <span
class="math inline">\(\left\{ z,z \right\}\to \left\{ 2z-{ {z}^{2}},{
{z}^{2}} \right\}\)</span> at each polarizing transform <span
class="math inline">\(F\)</span>. Due to its
<strong>simplicity</strong>, this construction has been widely used, and
produced good polar codes.</p>
</blockquote>
<p>看来重要的是利用这个结论，使计算得到简化。否则，按正向思维从式（1）到式（5），对于其他信道而言，计算不等式将是非常麻烦的。</p>
<p>有文献说“巴氏参数”只适用于BEC信道，这是对的。脱离了BEC，等号就是不能成立，就是不能计算。正向思维受阻。</p>
<p>有文献说“巴氏参数界”适用于BWAGN信道，这也是对的。直接利用结论，对巴氏参数的计算进行简化，照样可以计算。简化思维突破限制。</p>
<p>这两种说法都对，但说的不是一回事。后者是前者的演进（evolution）。</p>
<h1 id="高斯近似">高斯近似</h1>
<p><br/>比特信道的选择，除了利用巴氏参数，更广泛采用的是高斯近似法。三个递归式：</p>
<p><span class="math display">\[\begin{align}
m_{2N}^{\left( 2i\text{-}1 \right)}={ {\varphi }^{-1}}\left( 1-{ {\left[
1-\varphi \left( m_{N}^{\left( i \right)} \right) \right]}^{2}} \right)
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
m_{2N}^{\left( 2i \right)}=2m_{N}^{\left( i \right)}
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
m_{1}^{\left( 1 \right)}={2}/{ { {\sigma }^{2}}}\;
\end{align}\]</span></p>
<p>这里有两个高斯随机变量，一个是原始信道，一个LLR。LLR是所要构造的高斯随机变量，满足方差是均值的2倍。即LLR的方差由其均值m得到，其均值m由式（6~8）递归得到。其中<span
class="math inline">\({ {\sigma
}^{2}}\)</span>是原始信道的方差。<strong>那么<span
class="math inline">\({ {\sigma
}^{2}}\)</span>从何而来？答案是自己给定。</strong></p>
<p>前面说巴氏参数计算的时候，$<span
class="math inline">\(就需要自己给定；而高斯近似法，\)</span>{
{}^{2}}$也需要自己给定。这些参数共同点，都是原始信道的参数。极化码必须要事先假定原始信道参数，在每个瞬间，无线信道参数都可能不同，使用不同原始信道参数得到的极化码也不同。这就是极化码的特点。因此论文[2]说：</p>
<blockquote>
<p>An important characteristic of polar codes is their
<strong>non-universality</strong>. That is, different polar codes are
generated depending on the specified value of signal-to-noise ratio
(SNR), known as the <strong>design-SNR</strong>. A change in operating
SNR is possible in practice but a change in code according to SNR is not
desirable. Therefore we wish to construct a polar code at one design-SNR
and use it for a range of possible SNRs.</p>
</blockquote>
<p>在实际信道中SNR就是变化的，但根据每一种SNR来改变编码则是困难的。我们不希望由于无线信道的不断变化而在编码时做出频繁地调整，因此作者提出在design-SNR的框架下，能够实现“一对多”，即一个design-SNR值能够适用于在一定范围内变化的SNR。这篇论文的目的就是找到最优的design-SNR值。</p>
<h1 id="design-snr">design-snr</h1>
<p><br/>design-snr用于极化码的设计，它和实际信道的SNR不是一回事，而是“一对多”的关系。希望用一个design-snr适配于一定范围的SNR。design-snr有如下定义：</p>
<p><span class="math display">\[\begin{align}
design-snr=R\cdot \frac{ { {E}_{b}}}{ { {N}_{0}}}=\frac{K}{N}\cdot
\frac{ { {E}_{b}}}{ { {N}_{0}}}
\end{align}\]</span></p>
<p>文献[2]在design-snr的框架下，分别对以下4种算法重新进行了定义：</p>
<blockquote>
<p>Algorithm PCC-0 : The Bhattacharyya bounds Algorithm PCC-1 : The
Monte-Carlo estimation Algorithm PCC-2 : The full TPM estimation
Algorithm PCC-3 : The Gaussian approximation</p>
</blockquote>
<p>design-snr不是通过计算得来的，而是直接给定。作者指出，最优design-snr是码率、码长和构造算法的函数。得到最优design-snr并不容易，作者是通过搜索算法进行大量的仿真试验，得到了这四种构造算法分别对应的最优design-snr：</p>
<blockquote>
<p>PCC-0 @ 0dB PCC-1 @ 1dB PCC-2 @ -1.5917dB PCC-3 @ -1.5917dB</p>
</blockquote>
<p>也就是说，design-snr是基于大量仿真的经验值。在各自最优的design-snr下，四种算法的BER性能非常接近，性能都非常好。根据这个经验值，使用不同的构造方法，选择对应的最优design-snr值即可。</p>
<p>这是个“一劳永逸”的办法，一次性完成比特信道的选择，此后无论信道SNR环境如何变化（当然也是在一定范围内变化），都按照这个最优design-snr来安排比特位置。当选用其中一种算法后，决定design-snr的因素就只剩下码率和码长。在实际编码中，可在发送端和接收端都建立一张二维列表，根据不同的码率和码长，选用相应的design-snr。当然这张表格中的值都是基于大量仿真结果的经验值。</p>
<p>把SNR与编码的强相关变成弱相关，直至变成不相关。把极化码的非通用性向着通用性方向改造。这是对极化编码非常重要的简化。</p>
<h1 id="总结">总结</h1>
<p><br/>design-snr和高斯近似是一个比较好的极化码构造方案。你只需要考虑把<span
class="math inline">\({ {\sigma
}^{2}}\)</span>构造为design-snr的函数，设定了一个design-snr，就意味着设定了<span
class="math inline">\({ {\sigma }^{2}}\)</span>。</p>
<p>论文[2]的重要意义在于，design-snr可以与实际信道的SNR解耦。起初极化码的确要考虑实际信道的SNR，但现在有了design-snr，那么在比特信道选择阶段就可以不必过于关注SNR的变化。这张design-snr表格的值只与码率和码长有关，但这些值是基于大量仿真的经验值。论文[2]仅给出了一种码率和码长（R=0.5，N=2048）条件下的<strong>最优design-snr</strong>。不同的码率和码长，其值应该是有所不同的。</p>
<p>design-snr已经是相当程度上的简化操作，让编码和译码器不必每时每刻都关注SNR，而只关注design-snr。</p>
<h1 id="参考文献">参考文献</h1>
<p><br/>[1] Arikan E. Channel polarization: A method for constructing
capacity-achieving codes[C]//Information Theory, 2008. ISIT 2008. IEEE
International Symposium on. IEEE, 2008: 1173-1177. [2] Vangala H,
Viterbo E, Hong Y. A comparative study of polar code constructions for
the AWGN channel[J]. arXiv preprint arXiv:1501.02473, 2015.</p>
<h1 id="相关链接">相关链接</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/03/13/polar-code-6-sc-decoder/">Polar
Code（6）SC译码算法</a> <a
href="http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/">Polar
Code（8）高斯近似</a> <a
href="http://marshallcomm.cn/2017/08/26/polar-code-19-design-snr/">Polar
Code（19）当我们谈论design-snr时我们在谈论什么</a></p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（19）当我们谈论design-snr时我们在谈论什么</title>
    <url>/2017/08/26/polar-code-19-design-snr/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>本文对论文“A Comparative Study of Polar Code Constructions for
the AWGN Channel”进行解读。</p>
<h1 id="极化码构造">极化码构造</h1>
<p><br/>论文首先锁定了讨论的范围是<strong>极化码构造</strong>。极化码是线性分组码，极化码的码长N一旦确定，其生成矩阵随之确定；此时，比特信道的选择就完全地定义了一个极化码，不同的比特信道位置，其对应的编码结果不同。因此将比特信道的选择过程称为<strong>“极化码构造”（polar
code construction）</strong>。</p>
<span id="more"></span>
<p>极化码构造对于有限码长的最佳性能至关重要。极化码的构造在理论上有明确地定义，无非是从N个比特信道中选择最可靠的K个子信道。但现实的挑战是，你怎么知道哪些子信道是最可靠的？——极化信道的可靠性估计。于是引出了许多估计方法，如巴氏参数界法、蒙特卡洛估计法、TPM估计法、高斯近似法。</p>
<h1 id="design-snr">design-snr</h1>
<p><br/>极化码有个重要特性就是它的<strong>非普遍性（non-universality）</strong>。不同的极化码在给定的不同SNR下是不同的。实际的无线信道，其SNR是可能变化的。但我们不希望编码总是跟着信道SNR变化。因此我们希望有一个“一劳永逸”的解决方案，只设定一个SNR值，让它能够适用于一定范围内变化的SNR。这个SNR值被称为design-snr。</p>
<p>那么design-snr值究竟是多少呢？它等于多少时才使极化码性能达到最优呢？能够使极化码性能最优的design-snr就是the
best design-snr。本论文的目的，就是找到the best design-snr。</p>
<p>作者指出极化码性能取决于三个因素，码率、码长和码构造算法。这意味着不同的码率、不同的码长、不同的码构造算法，the
best
design-snr也可能不同。再进一步明确本论文的目的，在规定的码率和码长（R=0.5，N=2048）下，分别找到不同码构造算法对应的最优design-snr。</p>
<h1 id="the-best-design-snr">the best design-snr</h1>
<p><br/>怎么找？作者给出了一个搜索算法，其实就是试数法。假如我们感兴趣的SNR范围是{S1,S2,…,Sm}。令design-snr依次取每一个Si值，看看在哪个Si下，对应的码构造算法性能最优。使性能最优的那个Si值就是我们要找的the
best design-snr。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170826/163041818.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>如上图所示，高斯近似法在N=2048，R=0.5的条件下，性能最好的是那条蓝色实线，其对应的design-snr=-1.5917dB。这就是要找的the
best design-snr。</p>
<p>也就是说，在感兴趣的SNR={-1.5917,0,1,2,…,10}dB中，使高斯近似法性能达到最优的design-snr=-1.5917dB。So,
-1.5917 dB is the best design-snr for GA.</p>
<p>反过来看，这个最佳design-snr对大多范围内的SNR有效呢？上图的横坐标是EbN0，纵坐标是BER。如果要使BER性能达到10-3以下，在给定最佳design-snr下，EbN0大约只需2.4dB。</p>
<p>对需要满足的BER性能指标，所需EbN0越小越好。而众多感兴趣的SNR值中，只有在最佳design-snr下，所需EbN0是最小的。换句话说，如果所用的
design-snr不是最佳design-snr，要满足一定的BER性能，所需要的EbN0就要更大一些，这意味着对信道条件的要求更苛刻一些。</p>
<p><span class="math inline">\(SNR=\frac{ { {E}_{s}}}{ {
{N}_{0}}}=R\cdot \frac{ { {E}_{b}}}{ { {N}_{0}}}\)</span></p>
<p>写成dB形成：</p>
<p><span class="math inline">\(SNR\left( dB \right)=EbN0\left( dB
\right)+10\log 10\left( R \right)\)</span></p>
<p><span class="math inline">\(SNR\left( dB \right)=2.4+10\log 10\left(
0.5 \right)=-0.6dB\)</span></p>
<p>也就是说，对于高斯近似法，在最佳design-snr=-1.5917dB下，要达到BER=10-3的性能，所需SNR只要-0.6dB。换言之，对于高斯近似法，要达到BER=10-3的性能，对于N=2048，R=0.5，只要信道SNR大于-0.6dB，这个最佳design-snr值就是适用的。</p>
<p>如此看来，design-snr意义非凡。</p>
<h1 id="参考文献">参考文献</h1>
<p><br/>[1] Vangala H, Viterbo E, Hong Y. A comparative study of polar
code constructions for the AWGN channel[J]. arXiv preprint
arXiv:1501.02473, 2015.</p>
<h1 id="相关链接">相关链接</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/08/24/polar-code-18-select-bitchannel/">Polar
Code（18）比特信道的选择</a></p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（17）高斯近似（2）</title>
    <url>/2017/08/04/polar-code-17-gaussian-approximation2/</url>
    <content><![CDATA[<p>“假设全零发送”，这个看似简单以至于在许多论文里都一笔带过的假设，却引发了最近的一段思考。</p>
<p>从基本的高斯信道说起，对于一个BAWGN信道，其接收符号<span
class="math inline">\(y\)</span>表示为：</p>
<p><span class="math display">\[\begin{align}
y=s+z
\end{align}\]</span></p>
<p>其中<span class="math inline">\(z\)</span>为服从<span
class="math inline">\(N\left( 0,{ {\sigma }^{2}}
\right)\)</span>的高斯白噪声，<span
class="math inline">\(s\)</span>为调制符号，调制方式采用BPSK。<span
class="math inline">\(s=1-2x\)</span>或者<span
class="math inline">\(s=2x-1\)</span>取决于怎样定义BPSK映射。若定义BPSK映射规则为：</p>
<p><span class="math display">\[\begin{align}
s=\left\{ \begin{matrix}
   +1,\ \ x=0  \\
   -1,\ \ x=1  \\
\end{matrix} \right.
\end{align}\]</span></p>
<p>其中<span class="math inline">\(x\in \left\{ 0,1
\right\}\)</span>为编码比特，则接收符号<span
class="math inline">\(y\)</span>重写为：</p>
<p><span class="math display">\[\begin{align}
y=\left( 1-2x \right)+z
\end{align}\]</span></p>
<span id="more"></span>
<p>下面考察接收符号<span
class="math inline">\(y\)</span>的对数似然比LLR：</p>
<p><span class="math display">\[\begin{align}
LLR\left( y \right)=\ln \frac{p\left( y|x=0 \right)}{p\left( y|x=1
\right)}=\ln \frac{\frac{1}{\sqrt{2\pi { {\sigma }^{2}}}}{ {e}^{-\frac{
{ {\left[ y-\left( 1-2x \right) \right]}^{\ 2}}}{2{ {\sigma
}^{2}}}|x=0}}}{\frac{1}{\sqrt{2\pi { {\sigma }^{2}}}}{
{e}^{-\frac{\left[ y-\left( 1-2x \right) \right]{ {\ }^{2}}}{2{ {\sigma
}^{2}}}|x=1}}}=\frac{2}{ { {\sigma }^{2}}}y
\end{align}\]</span></p>
<p>接收符号<span class="math inline">\(y\)</span>是服从<span
class="math inline">\(N\left( a,{ {\sigma }^{2}}
\right)\)</span>的高斯随机变量，<span class="math inline">\(a=E\left( y
\right)\)</span>为<span class="math inline">\(y\)</span>的均值，而<span
class="math inline">\(LLR\left( y
\right)\)</span>也是一个高斯随机变量，其均值和方差取决于接收符号<span
class="math inline">\(y\)</span>的均值和方差。</p>
<p><span class="math inline">\(y\)</span>因<span
class="math inline">\(z\)</span>是随机变量而成为随机变量，<span
class="math inline">\(LLR\left( y \right)\)</span>又因<span
class="math inline">\(y\)</span>是随机变量而成为随机变量。已知<span
class="math inline">\(z\sim N\left( 0,{ {\sigma }^{2}}
\right)\)</span>。</p>
<p>文献[1]指出信道输出的均值与调制方式有关，在BPSK下，<span
class="math inline">\(y\)</span>的均值<span class="math inline">\(a=\pm
1\)</span>。但文献[2]指出<span class="math inline">\(y\sim N\left( 0,{
{\sigma }^{2}} \right)\)</span>，可见<span
class="math inline">\(y\)</span>的均值为0。那么<span
class="math inline">\(y\)</span>的均值到底是多少？</p>
<p>我在8月份思考这个问题的时候也正是卡在这里。虽然我给出了自己的解释，现在看来，过去的解释有些荒诞。现在重新回到原点，博文暂时加上<a
href="http://marshallcomm.cn/tags/%E5%AD%98%E7%96%91/">存疑</a>的标签。</p>
<p>#参考文献 <br/>[1] 吴道龙. 极化码构造与译码算法研究[D].
西安电子科技大学, 2016. [2] 陈凯. 极化编码理论与实用方案研究[D].
北京邮电大学, 2014.</p>
<h1 id="相关链接">相关链接：</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/">《Polar
Code（4）编码之极化信道可靠性估计》</a> <a
href="http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/">《Polar
Code（8）高斯近似》</a></p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
        <tag>存疑</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（2）编码原理</title>
    <url>/2017/03/04/polar-code-2-encoding-principle/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>在<a
href="http://marshallcomm.cn/2017/03/01/polar-code-1-summary/">《Polar
Code（1）概述》</a>中建立了Polar Code初步印象，本文将详细阐述Polar
Code编码原理。Polar
Code是通过引入信道极化概念而构建的。信道极化分为两个阶段，分别是信道联合和信道分裂。通过信道的联合与分裂，各个子信道的对称容量将呈现两级分化的趋势：随着码长（也就是联合信道数）<span
class="math inline">\(N\)</span>的增加，一部分子信道的容量趋于1，而其余子信道的容量趋于0。Polar
Code正是利用这一信道极化的现象，在容量趋于1的<span
class="math inline">\(K\)</span>个子信道上传输消息比特，在其余子信道上传输冻结比特（即收发双方已知的固定比特，通常设置为全零）。由此构成的编码即为Polar
Code，码率为<span class="math inline">\({K}/{N}\;\)</span>。</p>
<h1 id="预备知识">预备知识</h1>
<p><br/>一个二进制输入离散无记忆信道（B-DMC）可表示为<span
class="math inline">\(W:X\to Y\)</span>，<span
class="math inline">\(X\)</span>是输入符号集合，<span
class="math inline">\(Y\)</span>是输出符号集合，转移概率为<span
class="math inline">\(W\left( y|x \right),x\in X,y\in
Y\)</span>。由于信道是二进制输入，集合<span
class="math inline">\(X=\left\{ 0,1 \right\}\)</span>；<span
class="math inline">\(Y\)</span>和<span class="math inline">\(W\left(
y|x \right)\)</span>是任意值。对信道<span
class="math inline">\(W\)</span>的<span
class="math inline">\(N\)</span>次使用后的信道可表示为<span
class="math inline">\({W^{N}}\)</span>，则信道<span
class="math inline">\({W^{N}}:{X^{N}}\to
{Y^{N}}\)</span>的转移概率为<span class="math inline">\({W^{N}}\left(
y_1^{N}|x_{1}^{N} \right)=\prod\nolimits_{i=1}^{N}{W\left( y|x
\right)}\)</span>。</p>
<span id="more"></span>
<p>对于一个B-DMC <span
class="math inline">\(W\)</span>，有两个重要的信道参数：</p>
<p>对称容量（Symmetric Capacity）</p>
<p><span class="math display">\[I\left( W \right)\triangleq
\sum\limits_{y\in Y}{\sum\limits_{x\in X}{\frac{1}{2}}}W\left( y|x
\right)\log \frac{W\left( y|x \right)}{\frac{1}{2}W\left( y|0
\right)+\frac{1}{2}W\left( y|1 \right)}\]</span></p>
<p>巴氏参数（Bhattacharyya Parameter）</p>
<p><span class="math display">\[Z\left( W \right)\triangleq
\sum\limits_{y\in Y}{\sqrt{W\left( y|0 \right)W\left( y|1
\right)}}\]</span></p>
<p><span class="math inline">\(I\left( W
\right)\)</span>是对信道速率的度量，<span class="math inline">\(Z\left(
W \right)\)</span>对信道可靠性的度量。<span
class="math inline">\(I\left( W \right)\)</span>是信道<span
class="math inline">\(W\)</span>在等概率输入下的可靠传输时的最大速率；而<span
class="math inline">\(Z\left( W \right)\)</span>是信道<span
class="math inline">\(W\)</span>只传输0或1下的最大似然判决错误概率的上限。</p>
<p><span class="math inline">\(I\left( W \right)\)</span>与<span
class="math inline">\(Z\left( W \right)\)</span>的取值范围均为<span
class="math inline">\(\left[ 0,1
\right]\)</span>。由于对数以2为底，因此码率和信道容量的单位为bit。<span
class="math inline">\(I\left( W \right)\)</span>与<span
class="math inline">\(Z\left( W
\right)\)</span>满足这样的关系：且仅当<span
class="math inline">\(Z\left( W \right)\approx 0\)</span>时，<span
class="math inline">\(I\left( W \right)\approx 1\)</span>；当且仅当<span
class="math inline">\(Z\left( W \right)\approx 1\)</span>时，<span
class="math inline">\(I\left( W \right)\approx 0\)</span>。</p>
<p>当<span class="math inline">\(W\)</span>为对称信道时，<span
class="math inline">\(I\left( W
\right)\)</span>等于香农容量。所谓信道对称，即满足：对于任意<span
class="math inline">\(y\in Y\)</span>，有<span
class="math inline">\(W\left( y|0 \right)=W\left( -y|1
\right)\)</span>。二进制对称信道（Binary Symmetric
Channel，BSC）和二进制删除信道（Binary Erasure
Channel，BEC）都是满足对称性的B-DMC。具体地说，对于<span
class="math inline">\(Y=\left\{ 0,1 \right\}\)</span>，满足<span
class="math inline">\(W\left( 0|0 \right)=W\left( 1|1
\right)\)</span>且<span class="math inline">\(W\left( 1|0
\right)=W\left( 0|1 \right)\)</span>的B-DMC是为BSC。对于<span
class="math inline">\(y\in Y\)</span>，满足<span
class="math inline">\(W\left( y|0 \right)W\left( y|1
\right)=0\)</span>或<span class="math inline">\(W\left( y|0
\right)=W\left( y|1 \right)\)</span>的B-DMC是为BEC。对于BEC，符号<span
class="math inline">\(y\)</span>称为删除符号（Erasure Symbol）。</p>
<p>行向量<span class="math inline">\(\left( {a_{1}},...,{a_{N}}
\right)\)</span>在这里简写为<span
class="math inline">\(a_{1}^{N}\)</span>。对于给定的行向量<span
class="math inline">\(a_{1}^{N}\)</span>，其子向量表示为<span
class="math inline">\(a_{i}^{j},1\le i,j\le N\)</span>，且<span
class="math inline">\(i\le j\)</span>。对于给定的<span
class="math inline">\(a_{1}^{N}\)</span>和<span
class="math inline">\(A\subset \left\{ 1,...,N
\right\}\)</span>，记<span
class="math inline">\({a_{A}}\)</span>表示子向量<span
class="math inline">\(\left( {a_{i}}:i\in A \right)\)</span>。记<span
class="math inline">\(a_{1,o}^{j}\)</span>表示奇数索引的子向量 <span
class="math inline">\(\left( {a_{k}}:1\le k\le j;\begin{matrix}  k &amp;
odd \\ \end{matrix} \right)\)</span>，记<span
class="math inline">\(a_{1,e}^{j}\)</span>表示偶数索引的子向量<span
class="math inline">\(\left( {a_{k}}:1\le k\le j;\begin{matrix}  k &amp;
even \\ \end{matrix} \right)\)</span>。例如，对于向量<span
class="math inline">\(a_{1}^{5}=\left( 5,4,6,2,1
\right)\)</span>，有<span class="math inline">\(a_{2}^{4}=\left( 4,6,2
\right)\)</span>，<span class="math inline">\(a_{1,e}^{5}=\left( 4,2
\right)\)</span>，<span class="math inline">\(a_{1,o}^{4}\left( 5,6
\right)\)</span>。全零向量则记为<span
class="math inline">\(0_{1}^{N}\)</span>。</p>
<p>在此所讨论的向量、矩阵的运算均是在二元域上的运算，即GF（2）。记$<span
class="math inline">\(为模2加，记\)</span><span
class="math inline">\(为克罗内克积（Kronecker
Power）。记\)</span>{A<sup>{n}}<span
class="math inline">\(表示\)</span>A<span
class="math inline">\(的\)</span>n<span
class="math inline">\(次克罗内克积，有递归式\)</span>{A</sup>{n}}=A,n<span
class="math inline">\(，并且定义\)</span>{A^{}}=$。</p>
<p>记<span class="math inline">\(\left| A \right|\)</span>表示集合<span
class="math inline">\(A\)</span>中元素的个数。记<span
class="math inline">\({1_{A}}\)</span>表示集合<span
class="math inline">\(A\)</span>的指示函数，若<span
class="math inline">\(x\in A\)</span>，则<span
class="math inline">\({1_{A\left( x \right)}}=1\)</span>；若<span
class="math inline">\(x\notin A\)</span>，则<span
class="math inline">\({1_{A\left( x \right)}}=0\)</span>。</p>
<h1 id="信道极化">信道极化</h1>
<p><br/>信道极化分为两个阶段：信道联合阶段（Channel
Combining）和信道分裂（Channel Splitting）阶段。</p>
<h2 id="信道联合">信道联合</h2>
<p><br/>在这一阶段，联合B-DMC <span
class="math inline">\(W\)</span>的<span
class="math inline">\(N\)</span>个独立副本，通过递归方式产生一个向量信道<span
class="math inline">\({W_{N}}:{X^{N}}\to {Y^{N}}\)</span>，其中<span
class="math inline">\(N\)</span>为2的幂次<span
class="math inline">\(N={2^{n}},n\ge 0\)</span>。递归开始于第0级（<span
class="math inline">\(n=0\)</span>），只使用<span
class="math inline">\(W\)</span>的1个副本，并定义<span
class="math inline">\({W_{1}}\triangleq W\)</span>。第1级（<span
class="math inline">\(n=1\)</span>）递归联合了2个独立副本，如图1所示，得到向量信道<span
class="math inline">\({W_{2}}:{X^{2}}\to
{Y^{2}}\)</span>，其转移概率为</p>
<p><span class="math display">\[{W_{2}}\left(
{y_{1}},{y_{2}}|{u_{1}},{u_{2}} \right)=W\left( {y_{1}}|{u_{1}}\oplus
{u_{2}} \right)W\left( {y_{2}}|{u_{2}} \right)\]</span></p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170305/175817308.png" title="图 1 信道${W_{2}}$" /></p>
<p>第2级（<span
class="math inline">\(n=2\)</span>）递归如图2所示，联合信道<span
class="math inline">\({W_{2}}\)</span>的2个独立副本得到信道<span
class="math inline">\({W_{4}}:{X^{4}}\to
{Y^{4}}\)</span>，其转移概率为</p>
<p><span class="math display">\[{W_{4}}\left( y_{1}^{4}|u_{1}^{4}
\right)={W_{2}}\left( y_{1}^{2}|{u_{1}}\oplus {u_{2}},{u_{3}}\oplus
{u_{4}} \right){W_{2}}\left( y_{3}^{4}|{u_{2}},{u_{4}}
\right)\]</span></p>
<p>在图2中，<span class="math inline">\({R_{4}}\)</span>是完成从<span
class="math inline">\(\left( {s_{1}},{s_{2}},{s_{3}},{s_{4}}
\right)\)</span>到<span class="math inline">\(v_{1}^{4}=\left(
{s_{1}},{s_{3}},{s_{2}},{s_{4}}
\right)\)</span>的置换操作（排序）。从信道<span
class="math inline">\({W_{4}}\)</span>的输入<span
class="math inline">\({W^{4}}\)</span>的输入的映射<span
class="math inline">\(u_{1}^{4}\to x_{1}^{4}\)</span>可用公式表示为<span
class="math inline">\(x_{1}^{4}=u_{1}^{4}{G_{4}}\)</span>，<span
class="math inline">\({G_{4}}=\left[ \begin{matrix}  1 &amp; 0 &amp; 0
&amp; 0 \\  1 &amp; 0 &amp; 1 &amp; 0 \\  1 &amp; 1 &amp; 0 &amp; 0
\\  1 &amp; 1 &amp; 1 &amp; 1 \\ \end{matrix}
\right]\)</span>。因此<span
class="math inline">\({W_{4}}\)</span>和<span
class="math inline">\({W^{4}}\)</span>的转移概率有关系式<span
class="math inline">\({W_{4}}\left( y_{1}^{4}|u_{1}^{4}
\right)={W^{4}}\left( y_{1}^{4}|u_{1}^{4}{G_{4}} \right)\)</span>。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170305/191031392.png" title="图 2 信道${W_{4}}$" /></p>
<p>图3所示为递归结构的一般形式。<span
class="math inline">\({W_{N/{2}\;}}\)</span>的2个独立副本联合产生信道<span
class="math inline">\({W_{N}}\)</span>。输入向量<span
class="math inline">\(u_{1}^{N}\)</span>进入信道<span
class="math inline">\({W_{N}}\)</span>，首先被转换为<span
class="math inline">\(s_{1}^{N}\)</span>：<span
class="math inline">\({s_{2i-1}}={u_{2i-1}}\oplus
{u_{2i}}\)</span>，<span
class="math inline">\({s_{2i}}={u_{2i}}\)</span>，<span
class="math inline">\(1\le i\le {N}/{2}\;\)</span>。<span
class="math inline">\({R_{N}}\)</span>表示比特反转排序操作，输入为<span
class="math inline">\(s_{1}^{N}\)</span>，输出为<span
class="math inline">\(v_{1}^{N}=\left(
{s_{1}},{s_{3}},...,{s_{N-1}},{s_{2}},{s_{4}},...,{s_{N}}
\right)\)</span>。<span
class="math inline">\(v_{1}^{N}\)</span>则成为2个<span
class="math inline">\({W_{N/{2}\;}}\)</span>独立副本的输入。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170305/192049297.png" title="图 3 信道${W_{N}}$的递归结构" /></p>
<p>映射<span class="math inline">\(u_{1}^{N}\to
v_{1}^{N}\)</span>是二元域GF（2）上的线性变换。<span
class="math inline">\(u_{1}^{N}\to x_{1}^{N}\)</span>是由复合信道<span
class="math inline">\({W_{N}}\)</span>的输入到原始信道<span
class="math inline">\({W^{N}}\)</span>的输入的映射，其映射过程也是线性变换。因此有<span
class="math inline">\(x_{1}^{N}=u_{1}^{N}{G_{N}}\)</span>。称<span
class="math inline">\({G_{N}}\)</span>为<span
class="math inline">\(N\)</span>维生成矩阵。信道<span
class="math inline">\({W_{N}}\)</span>和<span
class="math inline">\({W^{N}}\)</span>的转移概率有如下关系：</p>
<p><span class="math display">\[{W_{N}}\left( y_{1}^{N}|u_{1}^{N}
\right)={W^{N}}\left( y_{1}^{N}|u_{1}^{N}{G_{N}} \right)\]</span></p>
<p>其中<span class="math inline">\(y_{1}^{N}\in {Y^{N}},u_{1}^{N}\in
{X^{N}}\)</span>。</p>
<h2 id="信道分裂">信道分裂</h2>
<p><br/>这是信道极化的第二阶段。将信道联合构成的复合信道<span
class="math inline">\({W_{N}}\)</span>分裂为<span
class="math inline">\(N\)</span>个二进制输入的坐标信道（Coordinate
Channels）<span class="math inline">\(W_{N}^{\left( i \right)}:X\to
{Y^{N}}\times {X^{i-1}},1\le i\le N\)</span>，定义其转移概率为</p>
<p><span class="math display">\[W_{N}^{\left( i \right)}\left(
y_{1}^{N},u_{1}^{i-1}|{u_{i}} \right)\triangleq
\sum\limits_{u_{i+1}^{N}\in {X^{N-i}}}{\frac{1}{2^{N-1}}{W_{N}}\left(
y_{1}^{N}|u_{1}^{N} \right)}\]</span></p>
<p>其中<span class="math inline">\(\left( y_{1}^{N},u_{1}^{i-1}
\right)\)</span>表示<span class="math inline">\(W_{N}^{\left( i
\right)}\)</span>的输出，而<span
class="math inline">\({u_{i}}\)</span>表示<span
class="math inline">\(W_{N}^{\left( i \right)}\)</span>的输入。</p>
<p>奇序分裂子信道和偶序分裂子信道的转移概率由两个递归式得到。对任何<span
class="math inline">\(n\ge 0,N={2^{n}},1\le i\le
{N}/{2}\;\)</span>，有</p>
<p><span class="math display">\[W_{N}^{\left( 2i-1 \right)}\left(
y_{1}^{N},u_{1}^{2i-2}|{u_{2i-1}}
\right)=\sum\limits_{u_{2i}}{\frac{1}{2}W_{N/{2}\;}^{\left( i
\right)}\left( y_{1}^{N/{2}\;},u_{1,o}^{2i-2}\oplus
u_{1,e}^{2i-2}|{u_{2i-1}}\oplus {u_{2i}} \right)\cdot
W_{N/{2}\;}^{\left( i \right)}\left(
y_{N/{2}\;+1}^{N},u_{1,e}^{2i-2}|{u_{2i}} \right)}\]</span></p>
<p><span class="math display">\[W_{N}^{\left( 2i \right)}\left(
y_{1}^{N},u_{1}^{2i-1}|{u_{2i}} \right)=\frac{1}{2}W_{N/{2}\;}^{\left( i
\right)}\left( y_{1}^{N/{2}\;},u_{1,o}^{2i-2}\oplus
u_{1,e}^{2i-2}|{u_{2i-1}}\oplus {u_{2i}} \right)\cdot
W_{N/{2}\;}^{\left( i \right)}\left(
y_{N/{2}\;+1}^{N},u_{1,e}^{2i-2}|{u_{2i}} \right)\]</span></p>
<h2 id="信道极化定理">信道极化定理</h2>
<p><br/><strong>定理1</strong>：对任意B-DMC <span
class="math inline">\(W\)</span>与任意<span class="math inline">\(\delta
\in \left( 0,1 \right)\)</span>，当<span
class="math inline">\(N\)</span>以2的幂次趋近于无穷大时，极化信道<span
class="math inline">\(W_{N}^{\left( i \right)}\)</span>中，满足<span
class="math inline">\(I\left( W_{N}^{\left( i \right)} \right)\in \left(
1-\delta ,1 \right]\)</span>的信道数占总信道数<span
class="math inline">\(N\)</span>的比例趋于<span
class="math inline">\(I\left( W \right)\)</span>；满足<span
class="math inline">\(I\left( W_{N}^{\left( i \right)} \right)\in \left[
0,\delta \right)\)</span>的信道所占的比例趋于<span
class="math inline">\(1-I\left( W \right)\)</span>。</p>
<p><strong>定理2</strong>：对任意B-DMC <span
class="math inline">\(W\)</span>，<span class="math inline">\(I\left( W
\right)&gt;0\)</span>，且对任意<span class="math inline">\(R&lt;I\left(
W \right)\)</span>，存在一个序列集合<span
class="math inline">\({A_{N}}\subset \left\{ 1,...,N \right\},N\in
\left\{ 1,2,...,{2^{n}},... \right\}\)</span>，对所有<span
class="math inline">\(i\in {A_{N}}\)</span>有<span
class="math inline">\(\left| {A_{N}} \right|\ge NR\)</span>且<span
class="math inline">\(Z\left( W_{N}^{\left( i \right)} \right)\le
O\left( {N^{-5/{4}\;}} \right)\)</span>。</p>
<h1 id="极化编码">极化编码</h1>
<p><br/>利用极化现象构建的编码可以达到对称容量<span
class="math inline">\(I\left( W \right)\)</span>，称为极化编码（Polar
Coding）。极化编码的基本思想是：只在<span class="math inline">\(Z\left(
W_{N}^{\left( i \right)} \right)\)</span>近于0的坐标信道<span
class="math inline">\(W_{N}^{\left( i
\right)}\)</span>上发送数据比特。极化码具有一般的二元线性分组码的基本编码要素，因而可以通过显示地写出其生成矩阵来完成编码：</p>
<p><span class="math display">\[x_{1}^{N}=u_{1}^{N}{G_{N}}\]</span></p>
<p>其中<span
class="math inline">\(u_{1}^{N}\)</span>为原始比特序列，<span
class="math inline">\(x_{1}^{N}\)</span>为编码后的比特序列，<span
class="math inline">\({G_{N}}\)</span>为生成矩阵，码长为<span
class="math inline">\(N={2^{n}}\)</span>。</p>
<p>极化编码步骤：</p>
<ol type="1">
<li>极化信道可靠性估计</li>
<li>比特混合</li>
<li>构造生成矩阵</li>
</ol>
<h2 id="极化信道可靠性估计">极化信道可靠性估计</h2>
<p><br/>对于BEC，Arikan给出的方法是计算巴氏参数</p>
<p><span class="math display">\[Z\left( W_{N}^{\left( i \right)}
\right)=\sum\limits_{y_{1}^{N}\in {Y^{N}}}{\sum\limits_{u_{1}^{i-1}\in
{X^{i-1}}}{\sqrt{W_{N}^{\left( i \right)}\left( y_{1}^{N},u_{1}^{i-1}|0
\right)W_{N}^{\left( i \right)}\left( y_{1}^{N},u_{1}^{i-1}|1
\right)}}}\]</span></p>
<p><span class="math inline">\(Z\left( W_{N}^{\left( i \right)}
\right)\)</span>越小，相应的对称容量<span class="math inline">\(I\left(
W_{N}^{\left( i \right)} \right)\)</span>越大；反之，<span
class="math inline">\(Z\left( W_{N}^{\left( i \right)}
\right)\)</span>越大，说明该信道越不可靠。</p>
<p>对于非BEC，如BSC信道或AWGNC，不能得到精确的巴氏参数，需要采用密度进化或高斯近似法估计信道的可靠性，详见<a
href="http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/">《Polar
Code（4）编码之极化信道可靠性估计》</a>。</p>
<h2 id="比特混合">比特混合</h2>
<p><br/>在这一步的规则是：选择可靠性最大的<span
class="math inline">\(K\)</span>个分裂子信道传输消息比特，其他分裂子信道传输冻结比特。这一步的输出即为编码的原始比特<span
class="math inline">\(u_{1}^{N}\)</span>。</p>
<p>对于BEC来说，选择巴氏参数最小的<span
class="math inline">\(K\)</span>个子信道放置消息比特。</p>
<h2 id="构造生成矩阵">构造生成矩阵</h2>
<p><br/>生成矩阵表示为</p>
<p><span class="math display">\[{G_{N}}\text{=}{B_{N}}{F^{\otimes
n}}\]</span></p>
<p>其中<span class="math inline">\({F^{\otimes
n}}\)</span>表示对矩阵<span class="math inline">\(F=\left[
\begin{matrix}  1 &amp; 0 \\  1 &amp; 1 \\ \end{matrix}
\right]\)</span>的<span
class="math inline">\(n\)</span>次克罗内克积，有递归式<span
class="math inline">\({F^{\otimes n}}\text{=}F\otimes {F^{\otimes \left(
n-1 \right)}}\)</span>。<span
class="math inline">\({B_{N}}\)</span>是排序矩阵，用以完成比特反序重排操作。所有比特反序重排，就是将每个原序列的十进制序号<span
class="math inline">\(i\in \left\{ 1,2,...,N
\right\}\)</span>按二进制表示为<span class="math inline">\(\left( i-1
\right)\to \left( {b_{n}},{b_{n-1}},...,{b_{1}}
\right)\)</span>，其中<span
class="math inline">\({b_{n}}\)</span>为最高有效位；再将该二进制序列反序，得到<span
class="math inline">\(\left( {b_{1}},{b_{2}},...,{b_{n}}
\right)\)</span>；最后以<span
class="math inline">\({b_{1}}\)</span>为最高有效位重新按十进制表示成<span
class="math inline">\(\left( {b_{1}},{b_{2}},...,{b_{n}} \right)\to
\left( j-1 \right)\)</span>，令输出序列的第<span
class="math inline">\(j\)</span>个元素取值为原序列的第<span
class="math inline">\(i\)</span>个元素。<span
class="math inline">\({B_{N}}\)</span>的递归式定义为</p>
<p><span class="math display">\[{B_{N}}={R_{N}}\left( {I_{2}}\otimes
{B_{N/{2}\;}} \right)\]</span></p>
<p>其中<span class="math inline">\({I_{2}}\)</span>为2维单位阵，<span
class="math inline">\({B_{2}}={I_{2}}\)</span>；矩阵<span
class="math inline">\({R_{N}}\)</span>为置换矩阵，对输入序列完成奇序元素和偶序元素的分离，即先排奇序元素，再排偶序元素，其作为效果如下</p>
<p><span class="math display">\[\left(
{u_{1}},{u_{2}},{u_{3}},{u_{4}},...,u{}_{N} \right)\times {R_{N}}=\left(
{u_{1}},{u_{3}},{u_{5}},...,{u_{N-1}},{u_{2}},{u_{4}},{u_{6}},...,{u_{N}}
\right)\]</span></p>
<h1 id="总结">总结</h1>
<p><br/>本文首先介绍了Polar
Code的预备知识，如对称容量、巴氏参数以及所涉及的数学符号的表示。其次介绍了信道极化的两个阶段：信道联合与信道分裂。最后阐述了Polar
Code的编码过程：通过构造生成矩阵获得<span
class="math inline">\({G_{N}}\)</span>，通过计算各个分裂子信道的错误概率用以判断消息比特位置从而获得<span
class="math inline">\(u_{1}^{N}\)</span>；两者相乘<span
class="math inline">\(u_{1}^{N}{G_{N}}\)</span>即为Polar Code。</p>
<p>极化码是一种线性分组码，通过构造生成矩阵而获得编码。只要给定码长<span
class="math inline">\(N\)</span>，编译码结构就唯一确定。极化码基于信道极化现象，做到了扬长而避短。在最可靠的子信道上传输消息比特是为扬长，在最不可靠的子信道上传输冻结比特是为避短。</p>
<h1 id="参考文献">参考文献</h1>
<p><br/>[1] Arikan E. Channel Polarization: A Method for Constructing
Capacity-Achieving Codes for Symmetric Binary-Input Memoryless
Channels[J]. IEEE Transactions on Information Theory, 2008,
55(7):3051-3073.</p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（20）Beta-expansion</title>
    <url>/2017/09/19/polar-code-20-beta-expansion/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/><strong>高斯近似（GA）终将成为历史，取而代之的是β-expansion算法。β-expansion与GA性能等价，但复杂度极低。</strong></p>
<p>文献[1]首先揭示了极化码合成信道（synthesized
channels）之间的偏序（Partial
Order，PO）关系。2016年8月22-26日，在瑞典哥德堡举行的3GPP RAN1
#86次会议上，华为提出了用极化权重（Polarization
Weight，PW）来表征AWGN信道下极化码合成信道可靠性的算法[2]。这两项独立的研究似乎不谋而合，促使华为进一步进行理论扩展，追求AWGN信道下极化码的快速构造方法。这就是本博文所要介绍的β-expansion[3]。</p>
<p>文献[3]首先介绍了通用偏序（Universal Partial
Order，UPO）的两个重要性质：嵌套和对称。这两个性质是能够采用递归方式构造极化码序列的基础。然后介绍了PW方法，其中β参数需要慎重地选择，其值的大小直接决定了合成信道的顺序。最后用大量的篇幅论证了β的最佳取值为1.1892，即<span
class="math inline">\(\beta ={ {2}^{
{1}/{4}\;}}\)</span>。无论是渐进性分析，还是数值仿真结果都证实β-expansion方法以低复杂度获得了与GA相同的性能。</p>
<span id="more"></span>
<h1 id="预备知识">预备知识</h1>
<h2 id="极化码策略">极化码策略</h2>
<p><br/><strong>策略：</strong>将信息比特放置于好的信道位置上，将冻结比特放置于差的信道位置上。</p>
<p><strong>关键：</strong>如何有效地识别信道位置的好坏并按可靠性排序，是极化码序列构造的关键。</p>
<p><strong>不幸：</strong>有效地序列构造仅存在于二进制删除信道（BEC）上。</p>
<p><strong>挑战：</strong>5G无线通信系统要求极化码至少能够适用于AWGN信道。</p>
<p><strong>已有方法：</strong>高斯近似（GA）。</p>
<p><strong>已有方法缺点：</strong>GA的缺点是计算量大，其计算量随着码块长度成比例增加，这对于码长和码率变化的实际系统是不可接受的。不仅如此，对于低延迟的编译码器，也无法实现在线地处理。</p>
<h2 id="通用偏序upo">通用偏序（UPO）</h2>
<p><br/>文献[1]证明了任意二进制输入对称信道下的可靠性测量存在偏序（Partial
Order）关系。给定一对合成信道索引<span class="math inline">\(\left( x,y
\right)\)</span>，它们的可靠性关系取决于下列规则：</p>
<p><strong>Addition：</strong>若一个合成信道索引用二进制表示为<span
class="math inline">\(\left( a,b,1,c
\right)\)</span>，那么它的可靠性一定大于合成信道<span
class="math inline">\(\left( a,b,0,c \right)\)</span>。<span
class="math inline">\(&#39;&#39;1\succ
0&#39;&#39;\)</span>模式对于1比特或多比特同样适用。例如：</p>
<p>2（0, 1 ,0） $$ 3（0, 1, 1）</p>
<p>9（1, 0, 0, 1） $$ 15（1, 1, 1, 1）</p>
<p>在此例中（1, 0, 0, 1）是合成信道索引9的二进制表示。</p>
<p><strong>Left-swap：</strong>若合成信道索引为<span
class="math inline">\(\left( a,0,b,1,c
\right)\)</span>，那么它的可靠性一定小于合成信道<span
class="math inline">\(\left( a,1,b,0,c \right)\)</span>。<span
class="math inline">\(&#39;&#39;0...1\prec
1...0&#39;&#39;\)</span>模式可以出现多次，并且0,1不需要彼此相邻。例如：</p>
<p>2（0, 1 ,0） $$ 4（1, 0, 0）</p>
<p>12（0, 1, 1, 0, 0） $$ 24（1, 1, 0, 0, 0）</p>
<p>但这两个规则也不是万能的，对于某些索引对<span
class="math inline">\(\left( x,y
\right)\)</span>则无能为力。Addition、Left-swap或它们的联合都不能确定顺序。例如：</p>
<p>3（0, 1, 1）and 4（1, 0, 0）</p>
<p>7（0, 1, 1, 1）and 12（1, 1, 0, 0）</p>
<p>我们称这些序对于UPO是<strong>未知的</strong>。</p>
<h1 id="upo的性质">UPO的性质</h1>
<p><br/><strong>Proposition 1.</strong>
（嵌套和对称）极化码通用偏序有两个重要性质：</p>
<p><strong>嵌套：</strong>码长为<span
class="math inline">\(N\)</span>的序可在码长为<span
class="math inline">\(2N\)</span>的序中保持不变。</p>
<p><strong>对称：</strong>在码长为<span
class="math inline">\(N\)</span>的极化码中，<span
class="math inline">\(x\prec y\)</span>的序和<span
class="math inline">\(\left( N-1-x \right)\prec \left( N-1-y
\right)\)</span>的序对称。</p>
<p>现在讨论UPO的递归结构。定义<span class="math inline">\(\mathbf{UP}{
{\mathbf{O}}_{n}}\)</span>为极化码码长<span
class="math inline">\(N\)</span>的偏序关系<span
class="math inline">\(x\prec y\)</span>的最小集合，其中<span
class="math inline">\(x\prec y\)</span>记为<span
class="math inline">\(\left\{ x,y \right\}\)</span>，<span
class="math inline">\(x,y\)</span>是<span class="math inline">\(\left[
0,N-1 \right]\)</span>内的整数。关系链<span class="math inline">\(x\prec
y\prec z\)</span>可以用若干子链表示最临近节点之间的关系，即<span
class="math inline">\(x\prec y\)</span>和<span
class="math inline">\(y\prec z\)</span>。例如：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170919/181904087.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>其中<span class="math inline">\(\mathbf{UP}{
{\mathbf{O}}_{n}}\)</span>中黑色字体的序来源于它的上一级<span
class="math inline">\(\mathbf{UP}{
{\mathbf{O}}_{n-1}}\)</span>，对应于Proposition
1的<strong>嵌套性质</strong>；蓝色字体的序表示与黑色字体的序对称的部分，对应于Proposition
1的<strong>对称性质</strong>；红色字体的序表示从<span
class="math inline">\(\mathbf{UP}{ {\mathbf{O}}_{n-1}}\)</span>到<span
class="math inline">\(\mathbf{UP}{
{\mathbf{O}}_{n}}\)</span>构造过程中出现的新序，这些新出现的序对于UPO来说是<strong>未知的</strong>。</p>
<h1 id="β-expansionpw算法原理">β-expansion：PW算法原理</h1>
<p><br/><strong>定义：（PW 算法）</strong>考虑一个合成信道索引<span
class="math inline">\(x\)</span>，其<span
class="math inline">\(n\)</span>比特二进制扩展为<span
class="math inline">\(B=\left( { {b}_{n-1}},...,{ {b}_{1}},{ {b}_{0}}
\right)\)</span>，最左边为最高有效位。极化权重定义为</p>
<p><span class="math display">\[\begin{align}
{ {f}^{PW}}:x\mapsto \sum\limits_{i=1}^{n}{ { {b}_{i}}{ {\beta }^{i}}}
\end{align}\]</span></p>
<p>其中$<span
class="math inline">\(的值需要慎重选择。文献[2]建议\)</span>={ {2}^{
{1}/{4};}}$。</p>
<p>在数学上，这种表示方法被称为β-expansion，是十进制扩展的推广，可以看作是对于任意实数<span
class="math inline">\(y\)</span>的基于β的非整数表示。</p>
<p><strong>例1：</strong>令<span class="math inline">\(\beta ={ {2}^{
{1}/{4}\;}}\)</span>，极化码码长为<span class="math inline">\(N={
{2}^{n}}=16\)</span>。则对于合成信道索引3，即<span
class="math inline">\({ {B}_{3}}=\left( 0,0,1,1
\right)\)</span>，其β-expansion可计算为</p>
<p><span class="math display">\[{ {w}_{3}}=0\cdot { {2}^{
{3}/{4}\;}}+0\cdot { {2}^{ {2}/{4}\;}}+1\cdot { {2}^{ {1}/{4}\;}}+1\cdot
{ {2}^{ {0}/{4}\;}}=2.189\cdot \cdot \cdot \]</span></p>
<p>同理，我们可以写出所有合成信道的β-expansion</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; w=\left\{ \begin{matrix}
   0.000 &amp; 1.000 &amp; 1.189 &amp; 2.189 &amp; 1.414 &amp; 2.414
&amp; 2.603 &amp; 3.603  \\
\end{matrix} \right. \\
\nonumber &amp; \ \ \ \ \ \ \ \left. \begin{matrix}
   1.682 &amp; 2.682 &amp; 2.871 &amp; 3.871 &amp; 3.096 &amp; 4.096
&amp; 4.285 &amp; 5.285  \\
\end{matrix} \right\} \\
\end{align}\]</span></p>
<p><span class="math inline">\({
{w}_{x}}\)</span>值越大表示合成信道索引<span
class="math inline">\(x\)</span>的可靠性越高。将<span
class="math inline">\(w\)</span>按可靠性增序排列，就得到了极化码序列</p>
<p><span class="math display">\[order=\left\{ \begin{matrix}
   0 &amp; 1 &amp; 2 &amp; 4 &amp; 8 &amp; 3 &amp; 5 &amp; 6 &amp; 9
&amp; 10 &amp; 12 &amp; 7 &amp; 11 &amp; 13 &amp; 14 &amp; 15  \\
\end{matrix} \right\}\]</span></p>
<p><strong>PW算法的优点是，对合成信道可靠性，提供了一种简洁、低复杂度的全排列算法，并且当码长<span
class="math inline">\({ {2}^{n}}\)</span>从<span
class="math inline">\(n=1\)</span>到$n+$增加时，能够始终保持一种嵌套性质。</strong></p>
<p><strong>Proposition 2.
</strong>（嵌套结构）PW算法维持了极化码的嵌套码构造的特性。</p>
<p><strong>Proposition 3.</strong> 当<span class="math inline">\(\beta
&gt;1\)</span>，任何由PW算法得到的序列都遵循极化码的通用偏序（UPO）关系。</p>
<p><strong>Theorem 1.</strong> 对于长度为<span class="math inline">\({
{2}^{n}}\left( n\ge 3 \right)\)</span>的极化码，存在一个升序集合<span
class="math inline">\({ {A}_{n}}=\left\{ { {a}_{0}},{ {a}_{1}},{
{a}_{2}},...,{ {a}_{ { {i}_{\max }}}},+\infty
\right\}\)</span>，其中<span class="math inline">\({
{a}_{0}}=1\)</span>和<span class="math inline">\({ {a}_{1}},{
{a}_{2}},...,{ {a}_{ { {i}_{\max }}}}\)</span>都是代数。任意$<span
class="math inline">\(落入区间\)</span>( { {a}<em>{i}},{ {a}</em>{i+1}}
),i<span
class="math inline">\(内，β-expansion都是唯一的，并且\)</span><span
class="math inline">\(落入不同区间可导致不同的顺序序列。此外，集合\)</span>{
{A}<em>{n}}<span class="math inline">\(是嵌套的，即\)</span>{
{A}</em>{n}}$。</p>
<blockquote>
<p>Marshall：通过上述Proposition和Theorem，初步地把β-expansion和偏序建立起联系，β-expansion获得了偏序的理论支撑。两者的共性在于，它们都具有嵌套结构。然而$$的值究竟取何值呢？这还需要在具体的用例中去分析和确定。</p>
</blockquote>
<h1 id="awgn信道下的快速构造">AWGN信道下的快速构造</h1>
<p><br/>现在UPO已经成为极化码序列构造的基础，而极化码序列的构造决定了合成信道的可靠性顺序。但UPO无法做到对整个序列进行全排列，正如在UPO的性质一节所看到的，从<span
class="math inline">\(\mathbf{UP}{ {\mathbf{O}}_{n-1}}\)</span>到<span
class="math inline">\(\mathbf{UP}{
{\mathbf{O}}_{n}}\)</span>的构造中，总会有一些新的序是UPO无法判断的。而高斯近似虽然能够对整个序列进行全排序，但由于其高复杂度而不适用于实际应用。为了克服两者的缺点，本节呈现了一种基于UPO和β-expansion的快速构造方法。</p>
<blockquote>
<p>Marshall：根据高斯近似的结果，一步一步缩小$$的取值范围，最终的序列不仅满足UPO性质，而且与高斯近似的结果保持一致。换句话说，没有条件，就去创造条件。</p>
</blockquote>
<p>解释一下为什么$$的取值会影响序列顺序，如图1所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170919/181329970.png" title="图 1 $\beta $-expansion嵌套结构，$\beta ={ {2}^{ {1}/{4}\;}}$，$N=2,4,8,16$ "/></p>
<p>根据定理1，是默认为<span class="math inline">\(\beta
&gt;1\)</span>，所以今后只考虑<span class="math inline">\(\beta
&gt;1\)</span>。</p>
<p>当<span
class="math inline">\(n=3\)</span>时，只有一对未定关系，即<span
class="math inline">\(\left( \beta +1,{ {\beta }^{2}}
\right)\)</span>。为了区分它们的关系，需要多项式方式<span
class="math inline">\({ {x}^{2}}-x-1=0\)</span>，取其大于1的根为<span
class="math inline">\(x=\frac{1+\sqrt{5}}{2}=1.618\)</span>，因此升序集合为</p>
<p><span class="math display">\[{ {A}_{3}}=\left\{
1,1.618,+\infty  \right\}\]</span></p>
<p>当<span class="math inline">\(\beta \in \left( 1,1.618
\right)\)</span>时，有<span class="math inline">\(\beta +1&gt;{ {\beta
}^{2}}\)</span>，则相应的序列为</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170919/182022400.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>当<span class="math inline">\(\beta \in \left( 1.618,+\infty
\right)\)</span>时，有<span class="math inline">\(\beta +1&lt;{ {\beta
}^{2}}\)</span>，则相应的序列为</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170919/182147280.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>这就是定理1所说的，当$<span class="math inline">\(落入\)</span>{
{A}_{3}}$的任意区间内，β-expansion是唯一的，且导致不同的顺序序列。</p>
<p>当<span
class="math inline">\(n=4\)</span>时，有4对未定关系，包括之前提到的<span
class="math inline">\(\left( \beta +1,{ {\beta }^{2}}
\right)\)</span>及其两个等价形式，即</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; \left( \beta +1,{ {\beta }^{2}} \right),\left( {
{\beta }^{2}}+\beta ,{ {\beta }^{3}} \right),\left( { {\beta
}^{2}}+\beta ,{ {\beta }^{3}} \right) \\
\nonumber &amp; \left( \beta +1,{ {\beta }^{3}} \right),\left( { {\beta
}^{2}}+1,{ {\beta }^{3}} \right),\left( { {\beta }^{2}}+\beta +1,{
{\beta }^{3}} \right) \\
\end{align}\]</span></p>
<p>为了区分它们的关系，需要求解4个多项式方程</p>
<p><span class="math display">\[\begin{align}
{ {x}^{3}}-{ {x}^{2}}-x-1=0
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
{ {x}^{3}}-{ {x}^{2}}-1=0
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
{ {x}^{2}}-x-1=0
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
{ {x}^{3}}-x-1=0
\end{align}\]</span></p>
<p>得到</p>
<p><span class="math display">\[{ {A}_{4}}=\left\{
1,1.325,1.466,1.618,1.839,+\infty  \right\}\]</span></p>
<p>其中1.325,1.466,1.618,1.839分别是多项式方程（2~5）的根。</p>
<p>$<span class="math inline">\(分别落入\)</span>{
{A}_{4}}$的5段子区间内，将导致5种不同的序，如图2所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170919/183636666.png" title="图 2 极化码的$\beta $-expansion，$N=16$"/></p>
<p>$<span
class="math inline">\(取哪个值？此时高斯近似法开始派上用场。对于码长\)</span>N={
{2}^{4}}=16<span
class="math inline">\(，\)</span>n=4$的极化码，AWGN信道下，高斯近似法对合成信道索引的排序为</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; 0\to 1\to 2\to 4\to 8\to 3\to 5\to 6\to 9 \\
  \nonumber &amp; \to 10\to 12\to 7\to 11\to 13\to 14\to 15 \\
\end{align}\]</span></p>
<p>将这个序与图2对比，发现当<span class="math inline">\(\beta \in \left(
1,1.325 \right)\)</span>时，两个序一致。</p>
<p>由此，我们将$<span
class="math inline">\(的取值范围由\)</span>n=3<span
class="math inline">\(时的\)</span>( 1,1.618 )<span
class="math inline">\(缩小到\)</span>n=4<span
class="math inline">\(时的\)</span>( 1,1.325 )$。</p>
<p>进一步，当<span
class="math inline">\(n=5\)</span>时，有5对未定关系，即<span
class="math inline">\(\left( 28,15 \right),\left( 14,19 \right),\left(
24,13 \right),\left( 24,11 \right),\left( 24,7
\right)\)</span>。根据高斯近似的可靠性结果，呈现出与$$的对应关系</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; 28\prec 15,\ 24\prec 11\Leftrightarrow \beta &lt;1.221
\\
\nonumber &amp; \ \ \ \ \ \ \ \ \ \ \ \ 14\prec 19\Leftrightarrow \beta
&lt;1.325 \\
\nonumber &amp; \ \ \ \ \ \ \ \ \ \ \ \ 24\prec 13\Leftrightarrow \beta
&lt;1.272 \\
\end{align}\]</span></p>
<p>对于序<span class="math inline">\(\left\{ 7,24
\right\}\)</span>，虽然依赖于SNR的可靠性结果为<span
class="math inline">\(7\succ 24\)</span>，但大量仿真结果表明<span
class="math inline">\(7\prec 24\)</span>具有更好的性能。因此选择</p>
<p><span class="math display">\[7\prec 24\Leftrightarrow \beta
&gt;1.179\]</span></p>
<p>此时，$<span class="math inline">\(的取值范围进一步缩小到\)</span>(
1.179,1.221 )$。</p>
<p>对于<span class="math inline">\(n&gt;5\)</span>（<span
class="math inline">\(N&gt;32\)</span>）的情况，继续重复这一搜索过程，得到如下表中所示的结果。随着<span
class="math inline">\(N\)</span>的增加，$$的取值范围不断缩小，并接近于<span
class="math inline">\(1.1892\approx { {2}^{
{1}/{4}\;}}\)</span>。新的序对小于合成信道总数的20%。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170919/184231335.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h1 id="渐进性分析与数值仿真结果">渐进性分析与数值仿真结果</h1>
<p><br/>β-expansion可以转化为贝努力卷积（Bernoulli
Convolution）概念。贝努力卷积定义了概率测度</p>
<p><span class="math display">\[{ {v}_{\lambda
}}=\sum\limits_{i=1}^{+\infty }{ { {b}_{i}}}{ {\beta }^{i}}\]</span></p>
<p>假设<span class="math inline">\(B=\left( ...,{ {b}_{1}},{ {b}_{0}}
\right)\)</span>是二进制独立随机序列，满足</p>
<p><span class="math display">\[\Pr \left\{ { {b}_{i}}=1 \right\}=\Pr
\left\{ { {b}_{i}}=0 \right\}=0.5,\forall i\]</span></p>
<p>测度<span class="math inline">\({ {v}_{\lambda
}}\)</span>要么是绝对连续的，要么是奇异的。我们需要的正是<span
class="math inline">\({ {v}_{\lambda
}}\)</span>的绝对连续，使得在无限长的序列上能够进行全排列。令<span
class="math inline">\(\beta ={ {2}^{
{1}/{k}\;}}\)</span>，已经证明当<span
class="math inline">\(k=4\)</span>时，即<span
class="math inline">\(\beta
\text{=}1.1892\)</span>时，满足绝对连续的必要条件。这与上表中的观察一致。</p>
<p>图3则从仿真结果上表明β-expansion与高斯近似的性能相同。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170919/184439317.png" title="图 3 Comparison of PW algorithm with β= 1.1892 and Gaussian approximation for different block-length N (code length in number of code bits). Simulation assumptions are: BLER = 0.001, QPSK modulation, AWGN channel, successive cancellation list (SCL) decoder with list size 8 and extra 19-bit CRC."/></p>
<p>至此，从理论分析到仿真结果，充分论证了β-expansion算法的可行性和优越性。</p>
<h1 id="参考文献">参考文献</h1>
<p><br/>[1] C. Schurch, “A partial Order for the Synthesized Channels of
a Polar Code, ISIT 2016. [2] 3GPP, R1-167209, Polar code design and rate
matching, Huawei, HiSilicon. [3] β-expansion A Theoretical Framework for
Fast and Recursive Construction of Polar Codes, Huawei.</p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（21）3GPP RAN1#90</title>
    <url>/2017/10/20/polar-code-21-3gpp-ran1-90/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>我一直有意将<a
href="http://marshallcomm.cn/categories/Polar-Code/">Polar
Code</a>系列和<a
href="http://marshallcomm.cn/categories/3GPP-PolarCode/">3GPP_PolarCode</a>系列区分开，因此把它们放在不同的分类里，虽然它们都是关于polar
code的文章，但前者关注极化码编译码算法本身，而后者关注极化码在5G标准化中的进展。前者更偏于理论研究，参考资料多是paper，后者更注重实际应用，参考资料多是3GPP
proposal或Technical Specification（技术规范）。这可看作是polar
code发展的两条线，有时这两条线又相交重叠，相互促进。如果你熟悉LTE
system，那么<a
href="http://marshallcomm.cn/categories/3GPP-PolarCode/">3GPP_PolarCode</a>系列则更容易理解。3GPP里的极化码是控制信道框架下的信道编码，它的上一步骤是CRC添加，它的下一步是速率匹配，这个过程在LTE
system里也是如此。</p>
<p>3GPP RAN1#90会议于8月21~25日在布拉格召开。会议达成的结论已在3GPP
Rel-15技术规范v1.0.0版本中体现，详见<a
href="http://marshallcomm.cn/2017/09/11/nr-v100-l1-index/">《5G物理层协议V100》</a>。</p>
<p>截止到本次会议，polar
coding一个比较完整的编码方案已经形成，从CRC计算到极化码编码，再到速率匹配方案都基本确定了，并已将本次会议达成的结论体现在v1.0.0版本协议的<a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a>中。</p>
<p>本文结合本次会议达成的结论和v1.0.0版本协议的<a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a>，对Polar
coding过程进行比较全面的梳理。5G控制信道编码的基本流程：</p>
<ul>
<li>CRC添加</li>
<li>信道编码</li>
<li>速率匹配</li>
</ul>
<span id="more"></span>
<h1 id="code-construction">Code construction</h1>
<p><br/>这部分主要讨论了CRC和interleaver（交织器）的设计。一方面，基于CRC-Polar的编码方案无疑是3GPP确定采用的方案；另一方面，3GPP
RAN1会议已同意支持提前终止（early termination，ET）的编译码策略。
传统的做法是将CRC
bits统一地放置在信息比特后面，译码端只有译出全部比特时才能对该码字进行校验，校验后才能知道该译码码字是否正确。新的方法是将CRC
bits分散地插入到信息比特中间。这样做的好处是，只译出一部分bits即可进行一次CRC校验，一旦检测到误码立即终止译码，由于该码字已经出错，后面就没有必要再译了。Distributed-CRC（DCRC）可降低译码计算量，节省功率，带来提前终止增益。</p>
<p>例如，<span
class="math inline">\(K=4\)</span>位信息比特，CRC长度为<span
class="math inline">\({ {L}_{CRC}}=4\)</span>，CRC bits<span
class="math inline">\(\left( \begin{matrix}  { {p}_{1}} &amp; { {p}_{2}}
&amp; { {p}_{3}} &amp; { {p}_{4}} \\ \end{matrix}
\right)\)</span>已分散地插入到信息比特中：</p>
<p><span class="math display">\[\left( \begin{matrix}
   { {x}_{1}} &amp; { {x}_{2}} &amp; { {p}_{1}} &amp; { {x}_{3}} &amp; {
{p}_{2}} &amp; { {x}_{4}} &amp; { {p}_{3}} &amp; { {p}_{4}}  \\
\end{matrix} \right)\]</span> 译码时每译出一个CRC
bit就进行一次校验。</p>
<p>如上所述，对于极化码编码，CRC计算和交织器往往是联系在一起的。这个过程分为两步：</p>
<p><strong>第一步，进行正常的CRC添加。</strong>给定长度为<span
class="math inline">\({
{L}_{CRC}}\)</span>的CRC生成多项式，按照通行的做法去计算CRC。假设待编码比特序列长度为<span
class="math inline">\(K\)</span>，添加CRC后的序列长度为<span
class="math inline">\({ {K}^{&#39;}}=K+{
{L}_{CRC}}\)</span>。3GPP已确定5G NR-PDCCH的CRC长度为24，即<span
class="math inline">\({
{L}_{CRC}}=24\)</span>，并采用如下生成多项式：</p>
<p><span class="math display">\[{ {g}_{\text{CRC24C}}}\left( D
\right)=[{ {D}^{24}}+{ {D}^{23}}+{ {D}^{21}}+{ {D}^{20}}+{ {D}^{17}}+{
{D}^{15}}+{ {D}^{13}}+{ {D}^{12}}+{ {D}^{8}}+{ {D}^{4}}+{
{D}^{2}}+D+1]\]</span></p>
<p><strong>第二步进行交织。</strong>交织器将<span
class="math inline">\({ {L}_{CRC}}\)</span>个CRC bits分散插入到<span
class="math inline">\(K\)</span>个信息比特中。交织器的输入、输出比特数相同，都是<span
class="math inline">\({ {K}^{&#39;}}=K+{ {L}_{CRC}}\)</span>。</p>
<p><strong>交织模式（interleaver pattern）按下列方法得到</strong>：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/091026784.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p><span class="math inline">\({ {K}_{\max
}}\)</span>表示最大的信息比特数。5G
NR控制信道所承载的内容不能太多，因为涉及信令开销的问题，大致在200
bits以内。<span class="math inline">\({ {K}_{\max
}}\)</span>限定了极化码待编码比特的数目。</p>
<p>3GPP采用统一的交织方法，即给定了一个统一交织模式$<span
class="math inline">\(，\)</span><span
class="math inline">\(是按照最大比特数\)</span>( { {K}<em>{}}+{
{L}</em>{CRC}} )<span
class="math inline">\(得到的。交织器的输入比特数是\)</span>( K+{
{L}<em>{CRC}} )<span class="math inline">\(，对满足\)</span>( K+{
{L}</em>{CRC}} )( { {K}<em>{}}+{ {L}</em>{CRC}} )<span
class="math inline">\(的任意比特数，其子交织模式\)</span>'<span
class="math inline">\(都来自于这个统一的交织模式\)</span><span
class="math inline">\(。其中\)</span>( k )$的值见下表：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/091349888.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<blockquote>
<p>由于目前<span class="math inline">\({ {K}_{\max
}}\)</span>的值还未确定，<span class="math inline">\(\pi \left( k
\right)\)</span>是按照<span class="math inline">\(\left( { {K}_{\max
}}+{ {L}_{CRC}}
\right)\)</span>的长度来计算的，在后面的协议版本中，这张表格将会得到进一步的修订。</p>
</blockquote>
<p>子交织模式<span class="math inline">\(\pi
&#39;\)</span>表示交织后的比特位置索引，当按照上述方法获得<span
class="math inline">\(\pi
&#39;\)</span>，根据这个比特索引重新给信息比特排序：</p>
<p><span class="math inline">\(c_{k}^{&#39;}={ {c}_{\pi &#39;\left( k
\right)}}\)</span>，<span class="math inline">\(k=0,1,...,{
{K}^{&#39;}}-1\)</span></p>
<p>至此，就得到了交织后的信息比特序列，其效果就是：</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; \left( \begin{matrix}
   { {x}_{1}} &amp; { {x}_{2}} &amp; { {x}_{3}} &amp; { {x}_{4}} &amp; {
{p}_{1}} &amp; { {p}_{2}} &amp; { {p}_{3}} &amp; { {p}_{4}}  \\
\end{matrix} \right) \\
\nonumber &amp; \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \
\downarrow  \\
\nonumber &amp; \left( \begin{matrix}
   { {x}_{1}} &amp; { {x}_{2}} &amp; { {p}_{1}} &amp; { {x}_{3}} &amp; {
{p}_{2}} &amp; { {x}_{4}} &amp; { {p}_{3}} &amp; { {p}_{4}}  \\
\end{matrix} \right) \\
\end{align}\]</span></p>
<p>交织以后则进行极化码编码。不过在编码之前，还需要另一个独立的过程，那就是输入序列的设计。</p>
<h1 id="sequence-design">Sequence design</h1>
<p><br/>极化码输入序列的设计，事关信息比特和冻结比特位置如何选取的问题。选取的规则是根据子信道可靠性程度，将信息比特放置在可靠性高的子信道上。关于如何评估子信道可靠性，本博客已花了大量篇幅介绍AWGN下的高斯近似法，之后又介绍了<a
href="http://marshallcomm.cn/2017/09/19/polar-code-20-beta-expansion/">Beta-expansion</a>算法。3GPP正是采用了华为提出的Beta-expansion算法，按照极化权重（PW）给子信道排序，用极化权重来度量子信道可靠性。这部分已经写入5G协议规范中，详见博文<a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a>
polar
coding一节。虽然5G协议并不会提到Beta-expansion算法，但协议所展示的Table
5.3.1-2 Polar sequence and its corresponding
reliablity正是基于Beta-expansion算法得到的。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170911/230838961.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>需要说明的是，Table 5.3.1-2所示的<span class="math inline">\(W\left(
Q_{i}^{ { {N}_{\max }}}
\right)\)</span>，是在Beta-expansion算法基础上又做了进一步改进的结果。</p>
<p>按权重从小到大排序<span class="math inline">\(W\left( Q_{0}^{ {
{N}_{\max }}} \right)&lt;W\left( Q_{1}^{ { {N}_{\max }}}
\right)&lt;...&lt;W\left( Q_{ { {N}_{\max }}-1}^{ { {N}_{\max }}}
\right)\)</span>，其中<span class="math inline">\(Q_{i}^{ { {N}_{\max
}}}\)</span>就是按可靠性程度排序之后的比特索引，最终得到极化码输入序列的比特位置索引<span
class="math inline">\(\mathbf{Q}_{0}^{ { {N}_{\max }}-1}=\left\{ Q_{0}^{
{ {N}_{\max }}},Q_{1}^{ { {N}_{\max }}},...,Q_{ { {N}_{\max }}-1}^{ {
{N}_{\max }}} \right\}\)</span>。</p>
<p>用<span
class="math inline">\(\bar{Q}_{I}^{N}\)</span>表示信息比特索引集合，用<span
class="math inline">\(\bar{Q}_{F}^{N}\)</span>表示冻结比特索引集合，<span
class="math inline">\(\left| \bar{Q}_{I}^{N} \right|={ {K}^{&#39;}}+{
{n}_{PC}}\)</span>，<span class="math inline">\(\left| \bar{Q}_{F}^{N}
\right|=N-\left| \bar{Q}_{I}^{N} \right|\)</span>。</p>
<blockquote>
<p>为了本文叙述的连贯性，本文涉及的<span class="math inline">\({
{K}^{&#39;}}\)</span>表示包含CRC比特的信息位数，即<span
class="math inline">\({ {K}^{&#39;}}=K+{
{L}_{CRC}}\)</span>。因此本文中的<span class="math inline">\({
{K}^{&#39;}}\)</span>与5G协议<a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a>
polar coding一节中的<span class="math inline">\(K\)</span>等价。</p>
</blockquote>
<blockquote>
<p>若<span class="math inline">\({
{n}_{PC}}=0\)</span>，则说明极化码编码采用CRC-Polar；若<span
class="math inline">\({
{n}_{PC}}&gt;0\)</span>,则说明极化码采用CRC-PC-Polar，在这种情下，CRC、PC和待编码信息比特都作为极化码的信息比特位，即都在<span
class="math inline">\(\bar{Q}_{I}^{N}\)</span>中。对于PDCCH信道编码，<span
class="math inline">\({ {n}_{PC}}=0\)</span>。</p>
</blockquote>
<p>用<span
class="math inline">\(Q_{PC}^{N}\)</span>表示PC比特索引集合，<span
class="math inline">\(\left| Q_{PC}^{N} \right|={
{n}_{PC}}\)</span>。极化码信息比特索引集合<span
class="math inline">\(\bar{Q}_{I}^{N}\)</span>还可进一步细分，用<span
class="math inline">\(\tilde{Q}_{I}^{N}\)</span>表示<span
class="math inline">\(\bar{Q}_{I}^{N}\)</span>中可靠性最高的<span
class="math inline">\(\left( \left| \mathbf{\bar{Q}}_{I}^{N} \right|-{
{n}_{PC}} \right)\)</span>个比特索引。PC比特又分为两个部分，其中有<span
class="math inline">\(n_{PC}^{wm}\)</span>个PC比特对应于<span
class="math inline">\(\tilde{Q}_{I}^{N}\)</span>的最小行重。用<span
class="math inline">\({ {G}_{N}}\)</span>表示极化码生成矩阵，<span
class="math inline">\({ {G}_{N}}={ {\left( { {G}_{2}} \right)}^{\otimes
n}}\)</span>，<span class="math inline">\(G2=\left[ \begin{matrix}  1
&amp; 0 \\  1 &amp; 1 \\ \end{matrix} \right]\)</span>。用<span
class="math inline">\({ {\mathbf{g}}_{j}}\)</span>表示<span
class="math inline">\({ {G}_{N}}\)</span>的第<span
class="math inline">\(j\)</span>行，用<span
class="math inline">\(w\left( { {\mathbf{g}}_{j}}
\right)\)</span>表示<span class="math inline">\({
{\mathbf{g}}_{j}}\)</span>的行重，行重就是<span class="math inline">\({
{\mathbf{g}}_{j}}\)</span>中“1”的个数。</p>
<p>因此1）把<span
class="math inline">\(n_{PC}^{wm}\)</span>个PC比特放置在具有<span
class="math inline">\(\tilde{Q}_{I}^{N}\)</span>最小行重的索引上；2）把<span
class="math inline">\(\left( { {n}_{PC}}-n_{PC}^{wm}
\right)\)</span>个PC比特放置在<span
class="math inline">\(\bar{Q}_{I}^{N}\)</span>中可靠性最低的索引上；3）<span
class="math inline">\(\bar{Q}_{I}^{N}\)</span>中剩余的比特索引放置<span
class="math inline">\({ {K}^{&#39;}}=K+{
{L}_{CRC}}\)</span>个信息比特。</p>
<blockquote>
<p>这两部分的PC比特所在的位置是不会重合的。</p>
</blockquote>
<blockquote>
<p>如果<span
class="math inline">\(\tilde{Q}_{I}^{N}\)</span>中最小行重的比特索引数大于<span
class="math inline">\(n_{PC}^{wm}\)</span>，那么就将<span
class="math inline">\(n_{PC}^{wm}\)</span>个PC比特放置在行重最小且可靠性最高的比特索引上。</p>
</blockquote>
<p>极化码输入序列索引示意如下图所示。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171117/182024728.jpg"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>按照如上所述的方法，得到极化码输入序列<span
class="math inline">\(\mathbf{u}=\left[ { {u}_{0}}\text{ }{
{u}_{1}}\text{ }{ {u}_{2}}\text{ }...\text{ }{ {u}_{N-1}}
\right]\)</span>。将序列<span
class="math inline">\(\mathbf{u}\)</span>和生成矩阵相乘</p>
<p><span class="math display">\[\mathbf{d}=\mathbf{u}{
{\mathbf{G}}_{n}}\]</span></p>
<p>得到编码器输出序列<span class="math inline">\(\mathbf{d}=\left[ {
{d}_{0}}\text{ }{ {d}_{1}}\text{ }{ {d}_{2}}\text{ }...\text{ }{
{d}_{N-1}} \right]\)</span>。</p>
<h1 id="rate-matching">Rate matching</h1>
<p><br/>编码之后的速率匹配是非常重要的一环。速率匹配的输入序列即为编码输出序列<span
class="math inline">\(\mathbf{d}=\left[ { {d}_{0}}\text{ }{
{d}_{1}}\text{ }{ {d}_{2}}\text{ }...\text{ }{ {d}_{N-1}}
\right]\)</span>，速率匹配的输出序列为<span class="math inline">\({
{f}_{0}},{ {f}_{1}},{ {f}_{2}},...,{
{f}_{E-1}}\)</span>，速率匹配比特数为<span
class="math inline">\(E\)</span>。<span
class="math inline">\(E\)</span>才是实际要传输的编码比特数。</p>
<p>速率匹配分为三个过程，子块交织、比特收集、比特交织。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/112410760.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h2 id="子块交织">子块交织</h2>
<p><br/>子块交织就是上图所示的Rate-matching
Interleaving，它将输入进来的N编码比特分为32个子块，然后将32个子块按照序列（0
1 2 3 4 5 6 7 8 9 10 11 12 16 13 17 14 18 15 19 20 24 21 22 25 26 28 23
27 29 30 31）重新排序。编码序列<span class="math inline">\({ {d}_{0}},{
{d}_{1}},{ {d}_{2}},...,{ {d}_{N-1}}\)</span>，经过子块交织后表示为<span
class="math inline">\({ {y}_{0}},{ {y}_{1}},{ {y}_{2}},...,{
{y}_{N-1}}\)</span>。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/112524657.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>上图是示意图，3GPP规范做了进一步修改：</p>
<p>子块交织过程为：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/112624520.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>其中子块交织模式<span class="math inline">\(P\left( i
\right)\)</span>由下表得到：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/112709695.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h2 id="比特收集">比特收集</h2>
<p><br/>比特收集就是Circular
Buffer，有三种速率匹配模式：repetition，puncturing，shortening。比特收集器的输入序列为子块交织器的输出<span
class="math inline">\({ {y}_{0}},{ {y}_{1}},{ {y}_{2}},...,{
{y}_{N-1}}\)</span>，比特收集器的输出序列为<span class="math inline">\({
{e}_{0}},{ {e}_{1}},{ {e}_{2}},...,{
{e}_{E-1}}\)</span>。完成从极化码码长N到速率匹配比特数E的转换，E是实际传输的编码比特数。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/112827354.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>速率匹配模式的选择方法为：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/112857191.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>当<span class="math inline">\(E&gt;N\)</span>，选择repetiton；当<span
class="math inline">\(\frac{K}{E}\le
\frac{7}{16}\)</span>，选择Puncturing，当<span
class="math inline">\(\frac{K}{E}&gt;\frac{7}{16}\)</span>，选择shortening。</p>
<p>比特收集的具体方法为：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/113048532.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h2 id="比特交织">比特交织</h2>
<p><br/>比特交织器的输入序列为比特收集器的输出<span
class="math inline">\({ {e}_{0}},{ {e}_{1}},{ {e}_{2}},...,{
{e}_{E-1}}\)</span>，比特交织器的输出为<span class="math inline">\({
{f}_{0}},{ {f}_{1}},{ {f}_{2}},...,{ {f}_{E-1}}\)</span>。</p>
<p>交织过程如下：</p>
<p>$ T <span class="math inline">\(表示满足\)</span> T( T+1 )/2E
$的最小整数；</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/084452223.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170912/084546055.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>至此，一个码字的5G控制信道编码过程就完成了。<span
class="math inline">\(K\)</span>比特待编码序列，经极化码编码和速率匹配后，输出<span
class="math inline">\(E\)</span>比特编码序列。</p>
<h1 id="channel-interleaver">Channel interleaver</h1>
<p><br/>编码及速率匹配后，关于是否进行信道交织，以及如何进行交织，本次会议有如下工作假设：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/170137558.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>上行链路采用Triangular interleaver，下行链路采用Parallel rectangular
interleaver。上行链路信道交织在速率匹配之后，是一个独立的过程。信道交织对下行链路是否有必要，到下一次会议再决定。</p>
<h1 id="参考资料">参考资料</h1>
<p><br/>[1] Chairman's Notes RAN1_90_final [2] <a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">《5G-NR复用与信道编码》</a></p>
]]></content>
      <categories>
        <category>3GPP_PolarCode</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（23）3GPP RAN1#90bis</title>
    <url>/2017/10/20/polar-code-23-3gpp-ran1-90b/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>2017年10月9~13日，3GPP
RAN1#90bis会议在布拉格召开。本次会议对Polar
coding的遗留问题继续进行讨论。</p>
<h1 id="remaining-issues-of-code-construction">Remaining issues of code
construction</h1>
<p><br/>关于code
construction只剩下3个议题悬而未决：冻结比特的赋值问题，加扰方式以及CRC
masking。</p>
<p>关于CRC masking的比特数，本次会议达成如下结论：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/195052712.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>RNTI隐含在PDCCH的最后<span class="math inline">\({
{N}_{RNTI}}\)</span>个CRC bits上，<span class="math inline">\({
{N}_{RNTI}}\)</span>就是RNTI的比特数。工作假设认为<span
class="math inline">\({ {N}_{RNTI}}=16\)</span>。</p>
<p>RAN1通知RAN2，PDCCH信道编码对RNTI的承载能力可达到17 bits，也可能是21
bits。RAN1要求RAN2在确定RNTI长度时通知RAN1。</p>
<h1 id="remaining-details-of-dl-channel-interleaver">Remaining details
of DL channel interleaver</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/10/20/polar-code-22-3gpp-ran1-adhoc3/#Remaining-details-of-rate-matching">3GPP
RAN1
adhoc#3</a>会议中信道交织一节提到，是否进行下行信道交织。本次会议明确结论：不采用下行信道交织。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/195541238.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<span id="more"></span>
<h1 id="other">Other</h1>
<p><br/>对于较大的上行控制信息（UCI）要进行分段操作。本次会议达成如下结论：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/195618581.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>UCI要分为相同大小的两段（如需要，则在第一个分段的开始处插入零）。是否进行分段的阈值根据K和R确定，例如K&gt;=threshold且R&lt;=threshold。threshold的值待定。</p>
<p>先对第一个分段进行CRC添加，然后使用与第一个分段相同的CRC多项式对第二个段进行CRC添加。（也就是两个分段采用相同的CRC多项式。）</p>
<h1 id="参考资料">参考资料</h1>
<p><br/>[1] Draft_Minutes_report_RAN1#90b_v010</p>
]]></content>
      <categories>
        <category>3GPP_PolarCode</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（22）3GPP RAN1 adhoc#3</title>
    <url>/2017/10/20/polar-code-22-3gpp-ran1-adhoc3/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>Polar coding大部分内容已在<a
href="http://marshallcomm.cn/2017/10/20/polar-code-21-3gpp-ran1-90/">3GPP
RAN1#90</a>会议中确定下来。2017年9月18~21日，3GPP RAN1
adhoc#3会议在日本名古屋召开，对Polar coding遗留的问题继续进行讨论。</p>
<h1 id="downlink-code-construction">Downlink code construction</h1>
<p><br/>本次会议达成如下结论：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/172619575.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>确认了<a
href="http://marshallcomm.cn/2017/09/10/nr-v100-l1-multiplexing-coding/">38.212v1.0.0协议</a>中关于CRC添加和交织器的工作假设。目前协议假设下行控制信息（DCI）载荷最大为200
bits，即Kmax=200。日后正式确定下来的Kmax值应小于200。</p>
<span id="more"></span>
<h1 id="uplink-code-construction">Uplink code construction</h1>
<p><br/>对于上行控制信道编码，本次会议达成如下结论：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/172735593.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>确认了CRC
bits添加在信息比特末位的工作假设。确定了上行控制信道编码CRC的长度，<span
class="math inline">\({ {L}_{CRC}}\text{=}11\)</span>，生成多项式为<span
class="math inline">\({ {D}^{11}}+{ {D}^{10}}+{ {D}^{9}}+{
{D}^{5}}+1\)</span>。</p>
<h1 id="remaining-details-of-rate-matching">Remaining details of rate
matching</h1>
<p><br/>关于速率匹配，本次会议确认了上次会议的工作假设：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/172935924.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>即下图所示参数设置：</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/173004082.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p>母码长度N由<span class="math inline">\(\left( { {N}_{M}},{ {N}_{R}},{
{N}_{\max }} \right)\)</span>的最小值确定。</p>
<h1 id="remaining-details-of-channel-interleavers">Remaining details of
channel interleavers</h1>
<h2 id="downlink">downlink</h2>
<p><br/>关于是否采用下行比特级信道交织，本次会议有工作假设，如果采用信道交织，那么比特信道交织的跨度等于1个CCE对应的编码比特数。高CCE聚合等级下，有没有必要进行比特信道交织有待进一步讨论。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/173058821.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h2 id="uplink">uplink</h2>
<p><br/><a
href="http://marshallcomm.cn/2017/10/20/polar-code-21-3gpp-ran1-90/#Channel-interleaver">3GPP
RAN1#90会议Channel
interleaver</a>的部分提到工作假设，上行链路信道交织采用Triangular
interleaver，本次会议确认了这一工作假设。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171020/173205566.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h1 id="参考资料">参考资料</h1>
<p><br/>[1] Final_Minutes_report_RAN1#AH_NR3_v100</p>
]]></content>
      <categories>
        <category>3GPP_PolarCode</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（24）小结</title>
    <url>/2017/12/25/polar-code-24-brief-summary/</url>
    <content><![CDATA[<p>本文可能是最后一篇<a
href="http://marshallcomm.cn/tags/Polar-Code/">Polar
Code</a>系列文章，用以结束2017年对极化码的研究。</p>
<p>极化码和无线信道的特征是相关联的，这是极化码有别于其他信道编码的一个特点。其他信道编码通常编码就是编码，信道就是信道，两者是独立的。然而决定极化码子信道可靠性的因素有两个，一是它自身的结构（“蝶形图”结构），二是无线信道特征（表征参数可以是SNR或转移概率）。</p>
<p>第一个概念是“信道极化”，如果比特信道采用这种“蝶形图”方法构造，那么导致的结果就是一些子信道的容量趋于1，另一些子信道的容量趋于0。这种向两级分化的现象就是信道极化现象。</p>
<p>第二个概念是线性分组码，线性分组码可以通过生成矩阵相乘的方式得到编码，<span
class="math inline">\(\mathbf{x}=\mathbf{uG}\)</span>。</p>
<p>若将这两个概念融合在一起，利用了信息极化原理的线性分组码自然就成为“极化码”。如何利用？可视化的解释是“蝶形图”结构，数学化的解释是<span
class="math inline">\(\mathbf{x}=\mathbf{uG}\)</span>，<span
class="math inline">\(\mathbf{G}={ {\mathbf{F}}^{\otimes
n}}\)</span>。两种解释完全等价，信道极化过程体现在生成矩阵<span
class="math inline">\(\mathbf{G}\)</span>里。</p>
<p>码长N一旦确定，那么“蝶形图”的结构就确定了，或者说，生成矩阵<span
class="math inline">\(\mathbf{G}\)</span>就唯一确定了。而生成矩阵一旦确定，剩下的事儿就是构造输入序列的顺序了。</p>
<span id="more"></span>
<p>一方面，极化码自身的结构（“蝶形图”结构）使得子信道呈现出向两级分化的特点。无论无线信道是何种类型，它都呈现出信道极化现象，这是极化码固有特点。例如，假设此时有比特信道1、3、5的容量趋于1，比特信道2、4、6的容量趋于0。按可靠性从高到低排序，则比特信道索引为1、3、5、2、4、6。</p>
<p>另一方面，无线信道本身的特征也影响着这些子信道的排序，不同原始信道转移概率（或SNR）也造成子信道可靠性顺序可能发生变化。例如，原始信道的转移概率是p1，子信道顺序为1、5、3、2、4、6；若原始信道转移概率是p2，则子信道顺序可能变为1、5、3、4、2、6。</p>
<p>因此在编码时不得不考虑无线信道的知识（SNR或转移概率），难道每次编码都要估计信道？这也太不经济了。从理论到应用，极化码编码和无线信道特征之间的关系有这样一个趋势：从紧密耦合逐渐到解耦（个人观点）。</p>
<p>高斯近似是个不错的方法，然而以今天的视角，似乎有点原始。design-snr的思路则向前迈进了一大步，一个最佳design-snr可适用于一定范围的snr，它让编码和无线信道联系得不是那么紧密了。3GPP则更加彻底，甩掉了snr的包袱，用极化权重来表征子信道可靠性，针对N=1024给出了一张比特权重表，直接拿来用。</p>
<p>当然，如果认为极化编码和无线信道就此彻底断绝联系也是不对的。回顾开篇处，“极化码和无线信道的特征是相关联的，这是极化码有别于其他信道编码的一个特点”。恐怕这一点是绕不过去的。3GPP给出了一张比特权重表，表面上看和无线信道没关系，可那张表怎么来的呢？表格的背后其实隐含着无线信道的影响。表格之所以是现在的型态，已经考虑了无线信道的影响，在N&lt;=1024的范围内可直接使用。</p>
<p>3GPP 5G标准的第一个版本确定了，polar
code在5G上的应用就是这个样子。然而在学术领域，polar
code应不终结于3GPP，更先进的编译码算法还有待人们去挖掘。而所谓有始有终，我的极化码之旅暂时告一段落。</p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（3）编码实例</title>
    <url>/2017/03/05/polar-code-3-encoding-example/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>在<a
href="http://marshallcomm.cn/2017/03/04/polar-code-2-encoding-principle/">《Polar
Code（2）编码原理》</a>中详细阐述了Polar
Code编码原理，为更好地理解编码过程，本文将给出一个编码实例。</p>
<p>设码长为<span class="math inline">\(N=8\)</span>，消息比特数<span
class="math inline">\(K=4\)</span>。列出所有使用到的公式：</p>
<p><span class="math display">\[c_{1}^{N}=u_{1}^{N}{G_{N}}\]</span></p>
<p><span class="math display">\[{G_{N}}={B_{N}}{F^{\otimes
n}}\]</span></p>
<span id="more"></span>
<p><span class="math display">\[{F^{\otimes n}}=F\otimes {F^{\otimes
\left( n-1 \right)}}\]</span></p>
<p><span class="math display">\[F=\left[ \begin{matrix}
   1 &amp; 0  \\
   1 &amp; 1  \\
\end{matrix} \right]\]</span></p>
<p><span class="math display">\[{B_{N}}={R_{N}}\left( {I_{2}}\otimes
{B_{N/{2}\;}} \right)\]</span></p>
<p><span class="math display">\[{B_{2}}={I_{2}}\]</span></p>
<h1 id="极化信道的可靠性估计">极化信道的可靠性估计</h1>
<p><br/>假设对于各二进制删除信道（BEC），已计算出各个分裂信道的巴氏参数<span
class="math inline">\(Z\left( W_{N}^{\left( i \right)}
\right)\)</span>。</p>
<h1 id="比特混合">比特混合</h1>
<p><br/>假设通过第一步得到巴氏参数最小的4个子信道序号为“4，6，7，8”，则消息比特序号集合记为</p>
<p><span class="math display">\[A=\left\{ 4,6,7,8 \right\}\]</span></p>
<p>则固定比特序号集合为</p>
<p><span class="math display">\[{A^{c}}=\left\{ 1,2,3,5
\right\}\]</span></p>
<p>设信息比特集合为<span class="math inline">\(\left(
{i_{1}},{i_{2}},{i_{3}},{i_{4}} \right)=\left( 1,1,1,1
\right)\)</span>，固定比特集合为<span class="math inline">\(\left(
0,0,0,0 \right)\)</span>，则最终得到</p>
<p><span class="math display">\[u_{1}^{8}=\left[
0,0,0,{i_{1}},0,{i_{2}},{i_{3}},{i_{4}} \right]=\left[ 0,0,0,1,0,1,1,1
\right]\]</span></p>
<h1 id="构造生成矩阵">构造生成矩阵</h1>
<h2 id="求排序矩阵bn">求排序矩阵BN</h2>
<p><br/><strong>递归式：</strong></p>
<p><span class="math display">\[{B_{8}}={R_{8}}\left( {I_{2}}\otimes
{B_{4}} \right)\]</span></p>
<p><span class="math display">\[{B_{4}}={R_{4}}\left( {I_{2}}\otimes
{B_{2}} \right)\]</span></p>
<p><strong>计算：</strong></p>
<p><span class="math display">\[{B_{2}}=\left[ \begin{matrix}
   1 &amp; 0  \\
   0 &amp; 1  \\
\end{matrix} \right]\]</span></p>
<p><span class="math display">\[{I_{2}}\otimes {B_{2}}=\left[
\begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]\]</span></p>
<p><span class="math inline">\({R_{4}}\)</span>由<span
class="math inline">\({I_{4}}\)</span>变换得来，先排<span
class="math inline">\({I_{4}}\)</span>的奇数列，再排<span
class="math inline">\({I_{4}}\)</span>的偶数列：</p>
<p><span class="math display">\[{R_{4}}=\left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]\Leftarrow {I_{4}}=\left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]\]</span></p>
<p><span class="math display">\[{ {B}_{4}}={ {R}_{4}}\left( {
{I}_{2}}\otimes { {B}_{2}} \right)=\left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]\cdot \left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]\text{=}\left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]\]</span></p>
<p><span class="math display">\[{I_{2}}\otimes {B_{4}}=\left[
\begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]\]</span></p>
<p><span class="math inline">\({R_{8}}\)</span>由<span
class="math inline">\({I_{8}}\)</span>变换得来，先排<span
class="math inline">\({I_{8}}\)</span>的奇数列，再排<span
class="math inline">\({I_{8}}\)</span>的偶数列：</p>
<p><span class="math display">\[{R_{8}}=\left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]\Leftarrow {I_{8}}=\left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]\]</span></p>
<p><span class="math display">\[\begin{align}
  &amp; { {B}_{8}}={ {R}_{8}}\left( { {I}_{2}}\otimes { {B}_{4}}
\right)=\nonumber \left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]\cdot \left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right] \\
&amp; \begin{matrix}
   {} &amp; {} &amp; {} &amp; \begin{matrix}
   {} &amp; {} &amp; = \nonumber \left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]  \\
\end{matrix}  \\
\end{matrix} \\
\end{align}\]</span></p>
<h2 id="求f的n次克罗内克积">求F的n次克罗内克积</h2>
<p><br/><strong>递归式：</strong></p>
<p><span class="math display">\[{F^{\otimes 3}}=F\otimes {F^{\otimes
2}}\]</span></p>
<p><span class="math display">\[{F^{\otimes 2}}=F\otimes {F^{\otimes
1}}\]</span></p>
<p><strong>计算：</strong></p>
<p><span class="math display">\[{F^{\otimes 1}}\text{=}F=\left[
\begin{matrix}
   1 &amp; 0  \\
   1 &amp; 1  \\
\end{matrix} \right]\]</span></p>
<p><span class="math display">\[{F^{\otimes 2}}=F\otimes {F^{\otimes
1}}=\left[ \begin{matrix}
   1 &amp; 0  \\
   1 &amp; 1  \\
\end{matrix} \right]\otimes {F^{\otimes 1}}=\left[ \begin{matrix}
   {F^{\otimes 1}} &amp; 0  \\
   {F^{\otimes 1}} &amp; {F^{\otimes 1}}  \\
\end{matrix} \right]=\left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 1 &amp; 0  \\
   1 &amp; 1 &amp; 1 &amp; 1  \\
\end{matrix} \right]\]</span></p>
<p><span class="math display">\[{F^{\otimes 3}}=F\otimes {F^{\otimes
2}}=\left[ \begin{matrix}
   1 &amp; 0  \\
   1 &amp; 1  \\
\end{matrix} \right]\otimes {F^{\otimes 2}}=\left[ \begin{matrix}
   {F^{\otimes 2}} &amp; 0  \\
   {F^{\otimes 2}} &amp; {F^{\otimes 2}}  \\
\end{matrix} \right]\text{=}\left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 1 &amp; 0 &amp; 1 &amp; 0 &amp; 1 &amp; 0  \\
   1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1  \\
\end{matrix} \right]\]</span></p>
<h2 id="求生成矩阵gn">求生成矩阵GN</h2>
<p><br/><span class="math display">\[\begin{align}
  &amp; { {G}_{8}}={ {B}_{8}}{ {F}^{\otimes 3}}=\nonumber \left[
\begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0  \\
   0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right]\cdot \left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 1 &amp; 0 &amp; 1 &amp; 0 &amp; 1 &amp; 0  \\
   1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1  \\
\end{matrix} \right] \\
&amp; \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \text{=} \nonumber \left[
\begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 1 &amp; 0 &amp; 1 &amp; 0 &amp; 1 &amp; 0  \\
   1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1  \\
\end{matrix} \right] \\
\end{align}\]</span></p>
<h1 id="生成polar-code">生成Polar Code</h1>
<p><br/><span class="math display">\[\nonumber \begin{align}
  &amp; c_{1}^{8}=u_{1}^{8}{G_{8}}=\left[ \begin{matrix}
   0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 1 &amp; 1 &amp; 1  \\
\end{matrix} \right]\cdot \left[ \begin{matrix}
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 0 &amp; 1 &amp; 0 &amp; 1 &amp; 0 &amp; 1 &amp; 0  \\
   1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0  \\
   1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1  \\
\end{matrix} \right] \\
&amp; \ \ \ \ =\left[ \nonumber \begin{matrix}
   0 &amp; 1 &amp; 1 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 1  \\
\end{matrix} \right] \\
\end{align}\]</span></p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（5）编码之信道转移概率</title>
    <url>/2017/03/12/polar-code-5-encoding-chan-trans-prob/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>极化信道的可靠性估计是Polar
Code编码的第一步，对于BEC信道，若计算巴氏参数，转移概率是绕不开的一步。此外对于译码判决来说，计算转移概率也是必须的。本文就尝试梳理一下极化信道的转移概率<span
class="math inline">\(W_{N}^{\left( i \right)}\left(
y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}} \right)\)</span>。</p>
<h1 id="离散信道的数学模型">离散信道的数学模型</h1>
<p><br/>信道是信号传输的媒介，是传送信息的通道。在信息论研究中不考虑信道的物理特性，而只是考虑它的概率特性。研究信道的目的主要是为了解决信息如何通过信道实现有效和可靠传输的问题。香农第二定理指出，信息传输速率小于信道容量是实现可靠传输的充分与必要的条件。信道容量是信息能够可靠传输的最大信息传输速率，是信道研究中的一个重要内容。信道容量定义为信道输入与输出平均互信息的最大值，它是信道本身固有特性的反映，仅与信道的<strong>转移概率</strong>有关，与信道的输入概率无关，但是信道输人概率必须与信道匹配才能达到容量。</p>
<span id="more"></span>
<p>设信道的输入符号集合<span
class="math inline">\(X\)</span>为随机变量集合，则输出符号集合<span
class="math inline">\(Y\)</span>也为随机变量集合。因为信道有随机噪声干扰，使<span
class="math inline">\(Y\)</span>在<span
class="math inline">\(X\)</span>给定条件下为随机变量，所以用条件概率或转移概率<span
class="math inline">\(P\left( y|x \right)\)</span>描述<span
class="math inline">\(Y\)</span>与<span class="math inline">\(X\)</span>
之间的关系，其中<span class="math inline">\(x\in X,y\in
Y\)</span>。信道模型如图1所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170312/214259492.jpg" title="图 1 离散信道模型" /></p>
<p>一般的信道输入与输出均为随机矢量，设输入集合为<span
class="math inline">\({ {X}^{N}}={ {X}_{1}},{ {X}_{2}},...,{
{X}_{N}}\)</span>，集合中的矢量<span class="math inline">\(\mathbf{x}={
{x}_{1}},{ {x}_{2}},...{ {x}_{N}},\mathbf{x}\in {
{X}^{N}}\)</span>，输入单符号集为<span class="math inline">\(A=\left\{ {
{a}_{1}},{ {a}_{2}},...,{ {a}_{r}} \right\}\)</span>，其中<span
class="math inline">\({ {a}_{1}},{ {a}_{2}},...,{
{a}_{r}}\)</span>的概率分别是<span class="math inline">\({ {p}_{1}},{
{p}_{2}},...{ {p}_{r}}\)</span>，且<span class="math inline">\({
{x}_{n}}\)</span>取自<span class="math inline">\(A\)</span>，<span
class="math inline">\(1\le n\le N\)</span>，输入矢量的符号集为<span
class="math inline">\({ {A}^{N}}\)</span>。输出集合为<span
class="math inline">\({ {Y}^{N}}={ {Y}_{1}},{ {Y}_{2}},...,{
{Y}_{N}}\)</span>，集合中的矢量为<span
class="math inline">\(\mathbf{y}={ {y}_{1}},{ {y}_{2}},...,{
{y}_{N}},\mathbf{y}\in { {Y}^{N}}\)</span>，输出单符号集为<span
class="math inline">\(B=\left\{ { {b}_{1}},{ {b}_{2}},...,{ {b}_{s}}
\right\}\)</span>，其中<span class="math inline">\({ {b}_{1}},{
{b}_{2}},...,{ {b}_{s}}\)</span>的概率分别是<span
class="math inline">\({ {q}_{1}},{ {q}_{2}},...,{
{q}_{s}}\)</span>，且<span class="math inline">\({
{y}_{n}}\)</span>取自<span class="math inline">\(B\)</span>，<span
class="math inline">\(1\le n\le N\)</span>，输出矢量的符号集为<span
class="math inline">\({ {B}^{N}}\)</span>。这种信道模型表示为<span
class="math inline">\(\left\{ { {X}^{N}},p\left( \mathbf{y}|\mathbf{x}
\right),{ {Y}^{N}} \right\}\)</span>，其中<span
class="math inline">\(p\left( \mathbf{y}|\mathbf{x} \right)=p\left( {
{y}_{1}},...,{ {y}_{N}}|{ {x}_{1}},...,{ {x}_{N}} \right)\)</span>。</p>
<h2 id="二进制离散无记忆信道">二进制离散无记忆信道</h2>
<p><br/>设信道的输入和输出分别是长为<span
class="math inline">\(N\)</span>的序列，若信道的转移概率满足</p>
<p><span class="math display">\[p\left( \mathbf{y}|\mathbf{x}
\right)=\prod\limits_{n=1}^{N}{p\left( { {y}_{n}}|{ {x}_{n}}
\right)}\]</span></p>
<p>则称此信道为离散无记忆信道（DMC），其数学模型为：<span
class="math inline">\(\left\{ X,p\left( { {y}_{n}}|{ {x}_{n}} \right),Y
\right\}\)</span>。若输入单符号集为<span class="math inline">\(A=\left\{
{ {a}_{1}},{ {a}_{2}} \right\}\text{=}\left\{ 0,1
\right\}\)</span>，则此信道为二进制离散无记忆信道（B-DMC）。</p>
<h3 id="二进制对称信道">二进制对称信道</h3>
<p><br/>二进制对称信道，简记为BSC（Binary Symmetric
Channel），输入与输出符号集分别为<span class="math inline">\(A=\left\{
0,1 \right\}\)</span>，<span class="math inline">\(B=\left\{ 0,1
\right\}\)</span>，信道转移概率满足<span class="math inline">\({
{P}_{Y|X}}\left( 0|0 \right)={ {P}_{Y|X}}\left( 1|1
\right)=p\)</span>，<span class="math inline">\({ {P}_{Y|X}}\left( 1|0
\right)={ {P}_{Y|X}}\left( 0|1
\right)=1-p\)</span>。BSC转移概率图如图2所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170312/215829213.jpg" title="图 2 二进制对称信道转移概率图" /></p>
<h3 id="二进制删除信道">二进制删除信道</h3>
<p><br/>二进制删除信道，简记为BEC（Binary Erasure
Channel），输入与输出符号集分别为<span class="math inline">\(A=\left\{
0,1 \right\}\)</span>，<span class="math inline">\(B=\left\{ 0,2,1
\right\}\)</span>，信道转移概率满足${ {P}<em>{Y|X}}( 0|0 )={
{P}</em>{Y|X}}( 1|1 )=1-<span class="math inline">\(，\)</span>{
{P}<em>{Y|X}}( 2|0 )={ {P}</em>{Y|X}}( 2|1 )=<span
class="math inline">\(，\)</span>$称为错误率。BEC转移概率图如图3所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170312/220220784.jpg" title="图 3 二进制删除信道转移概率图" /></p>
<h2 id="极化信道">极化信道</h2>
<p><br/>Arikan在研究极化信道和极化码时是基于B-DMC的。原始信道<span
class="math inline">\(W:X\to Y\)</span>如图4（a）所示，其转移概率为<span
class="math inline">\(W\left( y|u \right),u\in X,y\in
Y\)</span>。将原始信道<span class="math inline">\(W\)</span>的<span
class="math inline">\(N\)</span>个独立副本经过联合与分裂操作之后就形成了新的极化信道<span
class="math inline">\(W_{N}^{\left( i \right)}:X\to { {Y}^{N}}\times {
{X}^{i-1}}\)</span>，如图4（b）所示，其转移概率为<span
class="math inline">\(W_{N}^{\left( i \right)}\left(
y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}} \right)\)</span>。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170312/220515878.jpg" title="图 4 原始信道与极化信道" /></p>
<h1 id="极化信道转移概率">极化信道转移概率</h1>
<p><br/>对任何<span class="math inline">\(n\ge 0,N={ {2}^{n}},1\le i\le
{N}/{2}\;\)</span>，有递归式</p>
<p><span class="math display">\[\begin{align}
  &amp; W_{N}^{\left( 2i-1 \right)}\left( y_{1}^{N},u_{1}^{2i-2}|{
{u}_{2i-1}} \right)=\sum\limits_{ { {u}_{2i}}}{\frac{1}{2}W_{
{N}/{2}\;}^{\left( i \right)}\left( y_{1}^{
{N}/{2}\;},u_{1,o}^{2i-2}\oplus u_{1,e}^{2i-2}|{ {u}_{2i-1}}\oplus {
{u}_{2i}} \right)} \\
&amp; \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \
\ \ \ \nonumber \cdot W_{ {N}/{2}\;}^{\left( i \right)}\left( y_{
{N}/{2}\;+1}^{N},u_{1,e}^{2i-2}|{ {u}_{2i}} \right) \\
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
  &amp; W_{N}^{\left( 2i \right)}\left( y_{1}^{N},u_{1}^{2i-1}|{
{u}_{2i}} \right)=\frac{1}{2}W_{ {N}/{2}\;}^{\left( i \right)}\left(
y_{1}^{ {N}/{2}\;},u_{1,o}^{2i-2}\oplus u_{1,e}^{2i-2}|{
{u}_{2i-1}}\oplus { {u}_{2i}} \right) \\
&amp; \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \
\nonumber \cdot W_{ {N}/{2}\;}^{\left( i \right)}\left( y_{
{N}/{2}\;+1}^{N},u_{1,e}^{2i-2}|{ {u}_{2i}} \right) \\
\end{align}\]</span></p>
<p>递归计算过程中对于任意<span
class="math inline">\(a_{i}^{j}\)</span>，只有<span
class="math inline">\(i\le j\)</span>的情况，如遇到<span
class="math inline">\(a_{i}^{j},i&gt;j\)</span>的情况则视为无效，并定义<span
class="math inline">\(W_{1}^{\left( 1 \right)}\triangleq {
{W}_{1}}=W\)</span>，<span class="math inline">\(y_{1}^{1}\triangleq {
{y}_{1}}\)</span>，<span class="math inline">\(u_{1}^{1}\triangleq {
{u}_{1}}\)</span>。下面以<span
class="math inline">\(N=4\)</span>为例详细说明。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170312/224336662.jpg" title="图 5 极化信道${ {W}_{4}}$" /></p>
<p><br/>下面以BSC信道为例，计算各极化信道转移概率。</p>
<h2 id="w_1left-1-right"><span class="math inline">\(W_{1}^{\left( 1
\right)}\)</span></h2>
<p><br/>当<span
class="math inline">\(N=1,i=1\)</span>时，利用式（1）计算信道<span
class="math inline">\(W_{1}^{\left( 1
\right)}\text{=}W\)</span>的转移概率：</p>
<p><span class="math display">\[\begin{align}
W_{1}^{\left( 1 \right)}\left( y_{1}^{1},u_{1}^{0}|{ {u}_{1}}
\right)=W\left( { {y}_{1}}|{ {u}_{1}} \right)=p
\end{align}\]</span></p>
<p>此时的信道即为如图4（a）所示的原始信道。类似的有<span
class="math inline">\(W\left( { {y}_{2}}|{ {u}_{2}} \right)=W\left( {
{y}_{N}}|{ {u}_{N}} \right)=p\)</span>。</p>
<h2 id="w_2left-1-right"><span class="math inline">\(W_{2}^{\left( 1
\right)}\)</span></h2>
<p><br/>当<span
class="math inline">\(N=2,i=1\)</span>时，利用式（1）计算信道<span
class="math inline">\(W_{2}^{\left( 1 \right)}\)</span>的转移概率：</p>
<p><span class="math display">\[\begin{align}
  \nonumber W_{2}^{\left( 1 \right)}\left( y_{1}^{2},u_{1}^{0}|{
{u}_{1}} \right)=\sum\limits_{ { {u}_{2}}}{\frac{1}{2}}W_{1}^{\left( 1
\right)}\left( y_{1}^{1},u_{1,o}^{0}\oplus u_{1,e}^{0}|{ {u}_{1}}\oplus
{ {u}_{2}} \right)\cdot W_{1}^{\left( 1 \right)}\left(
y_{2}^{2},u_{1,e}^{0}|{ {u}_{2}} \right) \\
  \downarrow  \\
  \nonumber W_{2}^{\left( 1 \right)}\left( y_{1}^{2}|{ {u}_{1}}
\right)=\sum\limits_{ { {u}_{2}}}{\frac{1}{2}}W\left( { {y}_{1}}|{
{u}_{1}}\oplus { {u}_{2}} \right)\cdot W\left( { {y}_{2}}|{ {u}_{2}}
\right) \\
\end{align}\]</span></p>
<p>此时的信道即为如图4（b）所示的第1个极化信道。考察对<span
class="math inline">\({ {u}_{1}}\)</span>的译码可知，根据运算关系有<span
class="math inline">\({ {u}_{1}}={ {y}_{1}}\oplus {
{y}_{2}}\)</span>，当<span class="math inline">\(\left\{ { {y}_{1}},{
{y}_{2}} \right\}\)</span>中有一个是错误符号时，<span
class="math inline">\({ {u}_{1}}\)</span>的值便无法获得，此时<span
class="math inline">\({ {u}_{1}}\)</span>译码失败，可以计算<span
class="math inline">\(W_{2}^{\left( 1 \right)}\)</span>的转移概率为</p>
<p><span class="math display">\[\begin{align}
W_{2}^{\left( 1 \right)}\left( y_{1}^{2}|{ {u}_{1}} \right)=p\times p={
{p}^{2}}
\end{align}\]</span></p>
<p>两个原始信道<span
class="math inline">\(W\)</span>的副本经过信道极化构成极化信道<span
class="math inline">\({ {W}_{2}}\)</span>。如图5所示，<span
class="math inline">\({ {W}_{2}}\)</span>的一个分裂子信道<span
class="math inline">\({ {v}_{1}}\)</span>的转移概率即为<span
class="math inline">\(W_{2}^{\left( 1 \right)}\)</span>，<span
class="math inline">\({ {v}_{2}}\)</span>是<span class="math inline">\({
{W}_{2}}\)</span>的另一个分裂子信道。下面求<span class="math inline">\({
{v}_{2}}\)</span>的转移概率。</p>
<h2 id="w_2left-2-right"><span class="math inline">\(W_{2}^{\left( 2
\right)}\)</span></h2>
<p><br/>当<span
class="math inline">\(N=2,i=1\)</span>时，利用式（2）计算信道<span
class="math inline">\(W_{2}^{\left( 2 \right)}\)</span>的转移概率：</p>
<p><span class="math display">\[\begin{align}
  \nonumber W_{2}^{\left( 2 \right)}\left( y_{1}^{2},u_{1}^{1}|{
{u}_{2}} \right)=\frac{1}{2}W_{1}^{\left( 1 \right)}\left(
y_{1}^{1},u_{1,o}^{0}\oplus u_{1,e}^{0}|{ {u}_{1}}\oplus { {u}_{2}}
\right)\cdot W_{1}^{\left( 1 \right)}\left( y_{2}^{2},u_{1,e}^{0}|{
{u}_{2}} \right) \\
  \downarrow  \\
  \nonumber W_{2}^{\left( 2 \right)}\left( y_{1}^{2},{ {u}_{1}}|{
{u}_{2}} \right)=\frac{1}{2}W\left( { {y}_{1}}|{ {u}_{1}}\oplus {
{u}_{2}} \right)\cdot W\left( { {y}_{2}}|{ {u}_{2}} \right) \\
\end{align}\]</span></p>
<p>此时的信道即为如图4（b）所示的第2个极化信道。考察对<span
class="math inline">\({ {u}_{2}}\)</span>的译码可知，根据运算关系有<span
class="math inline">\({ {u}_{2}}={ {y}_{1}}\oplus {
{u}_{1}}\)</span>或<span class="math inline">\({ {u}_{2}}={
{y}_{2}}\)</span>，只要这两个式子的任意一个提供了正确符号，那么<span
class="math inline">\({ {u}_{2}}\)</span>将必定被正确译码。即当<span
class="math inline">\({ {u}_{1}}\)</span>被正确译码时，只有<span
class="math inline">\(\left\{ { {y}_{1}},{ {y}_{2}}
\right\}\)</span>全部是错误符号时，<span class="math inline">\({
{u}_{2}}\)</span>才会译码失败。可以计算<span
class="math inline">\(W_{2}^{\left( 2 \right)}\)</span>的转移概率为</p>
<p><span class="math display">\[\begin{align}
W_{2}^{\left( 2 \right)}\left( y_{1}^{2},{ {u}_{1}}|{ {u}_{2}}
\right)=1-{ {\left( 1-p \right)}^{2}}
\end{align}\]</span></p>
<p>两个极化信道<span class="math inline">\({
{W}_{2}}\)</span>的副本又进一步经过信道极化构成了极化信道<span
class="math inline">\({ {W}_{4}}\)</span>。<span class="math inline">\({
{v}_{1}}\)</span>和<span class="math inline">\({
{v}_{3}}\)</span>的转移概率相同，<span class="math inline">\({
{v}_{2}}\)</span>和<span class="math inline">\({
{v}_{4}}\)</span>的转移概率相同，如图6所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170314/082522769.jpg" title="图 6 极化信道${ {W}_{2}}$的转移概率" /></p>
<h2 id="w_4left-1-right"><span class="math inline">\(W_{4}^{\left( 1
\right)}\)</span></h2>
<p><br/>当<span
class="math inline">\(N=4,i=1\)</span>时，利用式（1）计算信道<span
class="math inline">\(W_{4}^{\left( 1 \right)}\)</span>的转移概率：</p>
<p><span class="math display">\[\begin{align}
  \nonumber W_{4}^{\left( 1 \right)}\left( y_{1}^{4},u_{1}^{0}|{
{u}_{1}} \right)=\sum\limits_{ { {u}_{2}}}{\frac{1}{2}W_{2}^{\left( 1
\right)}\left( y_{1}^{2},u_{1,o}^{0}\oplus u_{1,e}^{0}|{ {u}_{1}}\oplus
{ {u}_{2}} \right)\cdot W_{2}^{\left( 1 \right)}\left(
y_{3}^{4},u_{1,e}^{0}|{ {u}_{2}} \right)} \\
  \downarrow  \\
  \nonumber W_{4}^{\left( 1 \right)}\left( y_{1}^{4}|{ {u}_{1}}
\right)=\sum\limits_{ { {u}_{2}}}{\frac{1}{2}W_{2}^{\left( 1
\right)}\left( y_{1}^{2}|{ {u}_{1}}\oplus { {u}_{2}} \right)\cdot
W_{2}^{\left( 1 \right)}\left( y_{3}^{4}|{ {u}_{2}} \right)} \\
\end{align}\]</span></p>
<p>利用递归思想，将（4）式<span class="math inline">\(W_{2}^{\left( 1
\right)}\left( y_{1}^{2}|{ {u}_{1}}
\right)\)</span>的计算结果作为新的“原始信道”的转移概率，即根据<span
class="math inline">\(\left\{ \begin{matrix}  { {y}_{1}}=v{}_{1}\oplus {
{v}_{3}} \\  { {y}_{2}}={ {v}_{3}} \\ \end{matrix}
\right.\)</span>递归计算<span class="math inline">\(W_{4}^{\left( 1
\right)}\left( y_{1}^{4}|{ {u}_{1}} \right)\)</span>的转移概率为<span
class="math inline">\({ {\left( { {p}^{2}}
\right)}^{2}}\)</span>，如图7所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170314/082636188.jpg" title="图 7 $W_{4}^{\left( 1 \right)}\left( y_{1}^{4}|{ {u}_{1}} \right)$" /></p>
<h2 id="w_4left-2-right"><span class="math inline">\(W_{4}^{\left( 2
\right)}\)</span></h2>
<p><br/>当<span
class="math inline">\(N=4,i=1\)</span>时，利用式（2）计算信道<span
class="math inline">\(W_{4}^{\left( 2 \right)}\)</span>的转移概率：</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; W_{4}^{\left( 2 \right)}\left( y_{1}^{4},{ {u}_{1}}|{
{u}_{2}} \right)=\frac{1}{2}W_{2}^{\left( 1 \right)}\left( y_{1}^{2}|{
{u}_{1}}\oplus { {u}_{2}} \right)\cdot W_{2}^{\left( 1 \right)}\left(
y_{3}^{4}|{ {u}_{2}} \right) \\
&amp; =1-{ {\left( 1-{ {p}^{2}} \right)}^{2}} \\
\end{align}\]</span></p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170314/082720011.jpg" title="图 8 $W_{4}^{\left( 2 \right)}\left( y_{1}^{4},{ {u}_{1}}|{ {u}_{2}} \right)$" /></p>
<h2 id="w_4left-3-right"><span class="math inline">\(W_{4}^{\left( 3
\right)}\)</span></h2>
<p><br/>当<span
class="math inline">\(N=4,i=2\)</span>时，利用式（1）计算信道<span
class="math inline">\(W_{4}^{\left( 3 \right)}\)</span>的转移概率：</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; W_{4}^{\left( 3 \right)}\left( y_{1}^{4},u_{1}^{2}|{
{u}_{3}} \right)=\sum\limits_{ { {u}_{4}}}{\frac{1}{2}W_{2}^{\left( 2
\right)}\left( y_{1}^{2},{ {u}_{1}}\oplus { {u}_{2}}|{ {u}_{3}}\oplus {
{u}_{4}} \right)\cdot W_{2}^{\left( 2 \right)}\left( y_{3}^{4},{
{u}_{2}}|{ {u}_{4}} \right)} \\
&amp; ={ {\left( 1-{ {\left( 1-p \right)}^{2}} \right)}^{2}} \\
\end{align}\]</span></p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170314/082801240.jpg" title="图 9 $W_{4}^{\left( 3 \right)}\left( y_{1}^{4},u_{1}^{2}|{ {u}_{3}} \right)$" /></p>
<h2 id="w_4left-4-right"><span class="math inline">\(W_{4}^{\left( 4
\right)}\)</span></h2>
<p><br/>当<span
class="math inline">\(N=4,i=2\)</span>时，利用式（2）计算信道<span
class="math inline">\(W_{4}^{\left( 4 \right)}\)</span>的转移概率：</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; W_{4}^{\left( 4 \right)}\left( y_{1}^{4},u_{1}^{3}|{
{u}_{4}} \right)=\frac{1}{2}W_{2}^{\left( 2 \right)}\left( y_{1}^{2},{
{u}_{1}}\oplus { {u}_{2}}|{ {u}_{3}}\oplus { {u}_{4}} \right)\cdot
W_{2}^{\left( 2 \right)}\left( y_{3}^{4},{ {u}_{2}}|{ {u}_{4}} \right)
\\
&amp; =1-{ {\left( { {\left( 1-p \right)}^{2}} \right)}^{2}} \\
\end{align}\]</span></p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170314/082845515.jpg" title="图 10 $W_{4}^{\left( 4 \right)}\left( y_{1}^{4},u_{1}^{3}|{ {u}_{4}} \right)$" /></p>
<h2 id="小结">小结</h2>
<p><br/>经过以上运算得到了极化信道<span class="math inline">\({
{W}_{4}}\)</span>的各个分裂子信道的转移概率：</p>
<p><span class="math display">\[\begin{align}
\left\{ \begin{matrix}
   W_{4}^{\left( 1 \right)}\left( y_{1}^{4}|{ {u}_{1}} \right)={ {\left(
{ {p}^{2}} \right)}^{2}}  \\
   W_{4}^{\left( 2 \right)}\left( y_{1}^{4},{ {u}_{1}}|{ {u}_{2}}
\right)=1-{ {\left( 1-{ {p}^{2}} \right)}^{2}}  \\
   W_{4}^{\left( 3 \right)}\left( y_{1}^{4},u_{1}^{2}|{ {u}_{3}}
\right)={ {\left( 1-{ {\left( 1-p \right)}^{2}} \right)}^{2}}  \\
   W_{4}^{\left( 4 \right)}\left( y_{1}^{4},u_{1}^{3}|{ {u}_{4}}
\right)=1-{ {\left( { {\left( 1-p \right)}^{2}} \right)}^{2}}  \\
\end{matrix} \right.
\end{align}\]</span></p>
<p>若信道为BSC，则<span class="math inline">\({
{W}_{4}}\)</span>的各分裂子信道的转移概率即为式（12）。若信道为BEC，只需将<span
class="math inline">\(p\)</span>替换为$1-$，即</p>
<p><span class="math display">\[\begin{align}
\left\{ \begin{matrix}
   W_{4}^{\left( 1 \right)}\left( y_{1}^{4}|{ {u}_{1}} \right)={ {\left(
{ {\left( 1-\varepsilon  \right)}^{2}} \right)}^{2}}  \\
   W_{4}^{\left( 2 \right)}\left( y_{1}^{4},{ {u}_{1}}|{ {u}_{2}}
\right)=1-{ {\left( 1-{ {\left( 1-\varepsilon  \right)}^{2}}
\right)}^{2}}  \\
   W_{4}^{\left( 3 \right)}\left( y_{1}^{4},u_{1}^{2}|{ {u}_{3}}
\right)={ {\left( 1-{ {\varepsilon }^{2}} \right)}^{2}}  \\
   W_{4}^{\left( 4 \right)}\left( y_{1}^{4},u_{1}^{3}|{ {u}_{4}}
\right)=1-{ {\left( { {\varepsilon }^{2}} \right)}^{2}}  \\
\end{matrix} \right.
\end{align}\]</span></p>
<h1 id="验证">验证</h1>
<p><br/>假设对于删除概率为<span class="math inline">\(\varepsilon
=0.5\)</span>的BEC，原始信道<span
class="math inline">\(W\)</span>的对称容量<span
class="math inline">\(I\left( W
\right)=0.5\)</span>，利用式（13）可得各分裂信道转移概率</p>
<p><span class="math display">\[\begin{align}
\left\{ \begin{matrix}
   W_{4}^{\left( 1 \right)}\left( y_{1}^{4}|{ {u}_{1}} \right)={ {\left(
{ {\left( 1-\varepsilon  \right)}^{2}} \right)}^{2}}=0.0625  \\
   W_{4}^{\left( 2 \right)}\left( y_{1}^{4},{ {u}_{1}}|{ {u}_{2}}
\right)=1-{ {\left( 1-{ {\left( 1-\varepsilon  \right)}^{2}}
\right)}^{2}}=0.4375  \\
   W_{4}^{\left( 3 \right)}\left( y_{1}^{4},u_{1}^{2}|{ {u}_{3}}
\right)={ {\left( 1-{ {\varepsilon }^{2}} \right)}^{2}}=0.5625  \\
   W_{4}^{\left( 4 \right)}\left( y_{1}^{4},u_{1}^{3}|{ {u}_{4}}
\right)=1-{ {\left( { {\varepsilon }^{2}} \right)}^{2}}=0.9375  \\
\end{matrix} \right.
\end{align}\]</span></p>
<p>进而求得各分裂信道的对称容量</p>
<p><span class="math display">\[\begin{align}
\left\{ \begin{matrix}
   I\left( W_{4}^{\left( 1 \right)} \right)=0.0625  \\
   I\left( W_{4}^{\left( 2 \right)} \right)=\text{0}\text{.4375}  \\
   I\left( W_{4}^{\left( 3 \right)} \right)=\text{0}\text{.5625}  \\
   I\left( W_{4}^{\left( 4 \right)} \right)=\text{0}\text{.9375}  \\
\end{matrix} \right.
\end{align}\]</span></p>
<p>从式（15）可以看出原始信道<span
class="math inline">\(W\)</span>的4个独立副本经过信道极化以后，各分裂信道的容量呈现两极分化趋势。一部分子信道容量开始趋近于0，另一部分子信道容量开始趋近于1。并且信道总容量不变：<span
class="math inline">\(I\left( W_{4}^{\left( 1 \right)}
\right)\text{+}I\left( W_{4}^{\left( 2 \right)} \right)\text{+}I\left(
W_{4}^{\left( 3 \right)} \right)\text{+}I\left( W_{4}^{\left( 4 \right)}
\right)\text{=}4\times I\left( W \right)\)</span>。</p>
<h1 id="总结">总结</h1>
<p><br/>本文首先引入离散信道的数学模型，进而定义二进制对称信道和二进制删除信道的转移概率，并延伸出极化信道的转移概率。之后以<span
class="math inline">\(N=4\)</span>为例，推导了极化信道<span
class="math inline">\({
{W}_{4}}\)</span>各分裂子信道的转移概率。最后由各分裂信道的转移概率计算相应的对称容量，验证了信道极化现象。</p>
<h1 id="参考文献">参考文献</h1>
<p><br/>[1] 田宝玉. 信息论基础.第2版[M]. 人民邮电出版社, 2016. [2]
Arikan E. Channel Polarization: A Method for Constructing
Capacity-Achieving Codes for Symmetric Binary-Input Memoryless
Channels[J]. IEEE Transactions on Information Theory, 2008,
55(7):3051-3073.</p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（4）编码之极化信道可靠性估计</title>
    <url>/2017/03/07/polar-code-4-encoding-chan-rel-est/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>由Arikan发明的Polar Code经典编码算法已在<a
href="http://marshallcomm.cn/2017/03/04/polar-code-2-encoding-principle/">《Polar
Code（2）编码原理》</a>中阐明，<a
href="http://marshallcomm.cn/2017/03/05/polar-code-3-encoding-example/">《Polar
Code（3）编码实例》</a>则是对前文的举例。在编码实例中，有两个前提假设：</p>
<ol type="1">
<li>假设一个二进制删除信道（BEC）；</li>
<li>假设采用计算巴氏参数来评估各分裂子信道的可靠性。</li>
</ol>
<p>Arikan在讨论信道极化时，针对的是二进制离散无记忆信道（B-DMC），然而在构造极化码时需要计算的巴氏参数<span
class="math inline">\(Z\left( W
\right)\)</span>的适用范围是二进制删除信道。BEC是B-DMC的子集。因此在Polar
Code编码时只能回落的BEC来进行构造。</p>
<span id="more"></span>
<p>当信道不是BEC信道时，比如二元对称信道（BSC）或二进制高斯白噪声信道（BAWGNC），则超出了<span
class="math inline">\(Z\left( W
\right)\)</span>的适用范围，各个分裂信道的<span
class="math inline">\(Z\left( W{}_{N}^{\left( i \right)}
\right)\)</span>无法精确得到。为了更精确地估计信道极化中各分裂信道的可靠性，Mori等人提出了密度进化（Density
Evolution，DE）的构造方法。该方法适用于所有类型的B-DMC。</p>
<p>定义错误概率：对信道<span class="math inline">\(W\)</span>的<span
class="math inline">\(N\)</span>个独立时隙上进行信道极化以后，得到极化信道<span
class="math inline">\(W_{N}^{\left( i \right)}\)</span>，其中<span
class="math inline">\(i=1,2,...,N\)</span>。令事件<span
class="math inline">\({ {A}_{i}}\)</span>表示序号为<span
class="math inline">\(i\)</span>的极化信道<span
class="math inline">\(W_{N}^{\left( i
\right)}\)</span>所承载的比特经过传输后接收发生错误，即</p>
<p><span class="math display">\[{ {A}_{i}}=\left\{
u_{1}^{N},y_{1}^{N}:W_{N}^{\left( i \right)}\left(
y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}} \right)&lt;W_{N}^{\left( i
\right)}\left( y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}}\oplus 1 \right)
\right\}\]</span></p>
<p>则极化信道<span class="math inline">\(W_{N}^{\left( i
\right)}\)</span>的错误概率为<span class="math inline">\(P\left( {
{A}_{i}} \right)\)</span>。</p>
<blockquote>
<p><strong>Marshall：</strong>关于事件<span class="math inline">\({
{A}_{i}}\)</span>的理解详见<a
href="http://marshallcomm.cn/2017/03/07/answer-polar-code-def-error-prob/">《Answer-Polar
Code-定义错误概率》</a>。</p>
</blockquote>
<h1 id="密度进化de">密度进化（DE）</h1>
<p><br/>类似LDPC码等信道编码，信道极化也可以用Tanner图的结构来表示。下图给出了一个<span
class="math inline">\(N=8\)</span>的例子，图中圆圈表示变量节点，每个变量节点代码一个比特，同时也存储了该比特取值为0或1时的概率；而方框则表示校验节点，表示与之相连的各变量节点比特值的检验和为零。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170307/222559340.png" title="当N=8时，信道极化的Tanner图表示。图中加粗线条标记出了比特u4的译码树" /></p>
<p>由于变量节点的比特值仅可能有0或1两种取值，因此，存储与变量节点的消息往往用对数似然比（LLR）值来表示。</p>
<p><span class="math display">\[\begin{equation}
L_{N}^{\left( i \right)}\left( y_{1}^{N},\hat{u}_{1}^{i-1} \right)=\ln
\left( \frac{W_{N}^{\left( i \right)}\left(
y_{1}^{N},\hat{u}_{1}^{i-1}|0 \right)}{W_{N}^{\left( i \right)}\left(
y_{1}^{N},\hat{u}_{1}^{i-1}|1 \right)} \right)
\end{equation}\]</span></p>
<p>根据<a
href="http://marshallcomm.cn/2017/03/04/polar-code-2-encoding-principle/">《Polar
Code（2）编码原理》</a>中递归式<span class="math inline">\(W_{N}^{\left(
2i-1 \right)}\left( y_{1}^{N},u_{1}^{2i-2}|{u_{2i-1}}
\right)\)</span>与式<span class="math inline">\(W_{N}^{\left( 2i
\right)}\left( y_{1}^{N},u_{1}^{2i-1}|{u_{2i}}
\right)\)</span>，Tanner图中各个变量节点的LLR值可以递归地计算得到</p>
<p><span class="math display">\[\begin{align}
  &amp; L_{N}^{\left( 2i-1 \right)}\left( y_{1}^{N},\hat{u}_{1}^{2i-2}
\right)=2{\tanh ^{-1}}\left( \tanh \left( \frac{L_{N/{2}\;}^{\left( i
\right)}\left( y_{1}^{N/{2}\;},\hat{u}_{1,o}^{2i-2}\oplus
\hat{u}_{1,e}^{2i-2} \right)}{2} \right) \right) \\
&amp; \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \
\ \ \ \nonumber \cdot \tanh \left( \frac{L_{N/{2}\;}^{\left( i
\right)}\left( y_{N/{2}\;+1}^{N},\hat{u}_{1,e}^{2i-2} \right)}{2}
\right) \\
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
  &amp; L_{N}^{\left( 2i \right)}\left( y_{1}^{N},\hat{u}_{1}^{2i-1}
\right)=L_{ {N}/{2}\;}^{\left( i \right)}\left( y_{
{N}/{2}\;+1}^{N},\hat{u}_{1,e}^{2i-2} \right)+{ {\left( -1 \right)}^{ {
{ {\hat{u}}}_{2i-1}}}} \\
&amp; \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \
\nonumber \cdot L_{ {N}/{2}\;}^{\left( i \right)}\left( y_{1}^{
{N}/{2}\;},\hat{u}_{1,o}^{2i-2}\oplus \hat{u}_{1,e}^{2i-2} \right) \\
\end{align}\]</span></p>
<p>若最终得到的<span class="math inline">\(L_{N}^{\left( i
\right)}\left( y_{1}^{N},\hat{u}_{1}^{i-1} \right)\ge
0\)</span>，则判决为<span
class="math inline">\({\hat{u}_{i}}=0\)</span>；否则，判决<span
class="math inline">\({\hat{u}_{i}}=1\)</span>。</p>
<p>将某一个变量节点的LLR值视为一个随机变量，用<span
class="math inline">\(\mathbf{a}\left( z
\right)\)</span>表示该随机变量的概率密度函数（PDF）。由于信道满足对称性，可以假设发送的比特为全零。从而该变量节点的比特判决值错误的概率为</p>
<p><span class="math display">\[\begin{equation}
{P_{e}}=\int_{-\infty }^{0}{\mathbf{a}\left( z \right)}dz
\end{equation}\]</span></p>
<p>在对第<span
class="math inline">\(i\)</span>个信道进行可靠性计算时，如上图中加粗线条所示，以比特<span
class="math inline">\({u_{i}}\)</span>对应的变量节点为根节点，逐层扩展，直至最右侧一列变量节点，构成译码树。</p>
<p>用<span
class="math inline">\({\mathbf{a}_{w}}\)</span>表示信道输入到最右侧一列变量节点的LLR值的PDF；用<span
class="math inline">\(\mathbf{a}_{N}^{\left( i
\right)}\)</span>表示<span class="math inline">\(L_{N}^{\left( i
\right)}\left( y_{1}^{N},\hat{u}_{1}^{i-1}
\right)\)</span>值的PDF。根据密度进化理论以及式（2）和式（3），假设发送序列为全零比特序列，在<span
class="math inline">\(u_{1}^{i-1}\)</span>值已知的条件下，序号为<span
class="math inline">\(i\)</span>的极化信道LLR值可以递归第计算如下</p>
<p><span class="math display">\[\begin{equation}
\mathbf{a}_{2N}^{\left( 2i-1 \right)}=\mathbf{a}_{N}^{\left( i
\right)}\odot \mathbf{a}_{N}^{\left( i \right)}
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
\mathbf{a}_{2N}^{\left( 2i \right)}=\mathbf{a}_{N}^{\left( i
\right)}*\mathbf{a}_{N}^{\left( i \right)}
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
\mathbf{a}_{1}^{\left( 1 \right)}\text{=}{\mathbf{a}_{w}}
\end{equation}\]</span></p>
<p>其中，运算$<span class="math inline">\(与\)</span>*<span
class="math inline">\(分布表示校验节点与变量节点上的卷积操作。通过概率密度函数\)</span><em>{N}^{(
i )}<span
class="math inline">\(与式（4）可以得到各个极化信道\)</span>W</em>{N}^{(
i )}<span class="math inline">\(的可靠性度量\)</span>P( {A_{i}} )$。</p>
<h1 id="高斯近似ga">高斯近似（GA）</h1>
<p><br/>通过密度进化对极化信道<span class="math inline">\(W_{N}^{\left(
i \right)}\)</span>的可靠性度量<span class="math inline">\(P\left(
{A_{i}}
\right)\)</span>进行计算，可以适用于任意类型的B-DMC信道。然而，在实际算法实现时，需要维护一个高维的向量以存储（量化后的）概率密度函数<span
class="math inline">\(\mathbf{a}_{N}^{\left( i
\right)}\)</span>。为保证计算结果精确，该向量的维度常取到<span
class="math inline">\({10^{6}}\)</span>，对如此高维的向量进行式（5）和式（6）的卷积操作，计算复杂度非常高。</p>
<p>在大多数研究场景下，信道编码的传输信道模型均为BAWGNC信道。在BAWGNC信道下，可以将密度进化中的LLR值的概率密度函数用一族方差为均值2倍的高斯分布来近似，从而简化成了对一维的均值的计算，大大降低计算量，这种对DE的简化计算即为高斯近似（Gaussian
Approximation，GA）。</p>
<p>对噪声方差为<span class="math inline">\({\sigma
^{2}}\)</span>的BAWGNC信道，调制方式采用BPSK，若从信道获取的接收信号为<span
class="math inline">\(y\)</span>。</p>
<p><span class="math display">\[\begin{equation}
y=\left( 1-2x \right)+z
\end{equation}\]</span></p>
<p>其中发送比特<span class="math inline">\(x\in \left\{ 0,1
\right\}\)</span>，<span class="math inline">\(z\sim N\left( 0,{\sigma
^{2}} \right)\)</span>。</p>
<p>假设发送比特为全零序列，则对应的LLR值为</p>
<p><span class="math display">\[\begin{equation}
LLR\left( y \right)=\ln \frac{p\left( y|x=0 \right)}{p\left( y|x=1
\right)}=\frac{2}{\sigma ^{2}}y
\end{equation}\]</span></p>
<p>其中<span class="math inline">\(y\sim N\left( 1,{\sigma ^{2}}
\right)\)</span>。因此式（9）中所得的LLR值符合均值为<span
class="math inline">\(2/{\sigma ^{2}}\;\)</span>、方差为<span
class="math inline">\(4/{\sigma
^{2}}\;\)</span>的高斯分布。根据已有的高斯近似理论，若输入的消息<span
class="math inline">\(\mathbf{a}_{N/{2}\;}^{\left( i
\right)}\)</span>服从独立的高斯分布，对如式（6）所示的变量节点上的操作，则其输出<span
class="math inline">\(\mathbf{a}_{N}^{\left( i
\right)}\)</span>也服从高斯分布；对如式（5）所示的变量节点上的操作，其输出<span
class="math inline">\(\mathbf{a}_{N}^{\left( 2i-1
\right)}\)</span>也非常接近高斯分布。由于高斯分布可以有其均值和方差完全决定，因此在概率密度函数的计算过程中值需要考虑均值和方差，但必需满足密度进化的对称条件。如果用<span
class="math inline">\(f\left( z
\right)\)</span>表示LLR的概率密度，则对称条件表示为<span
class="math inline">\(f\left( z \right)\text{=}f\left( -z
\right){e^{z}}\)</span>。对于均值为<span
class="math inline">\(m\)</span>、方差为<span
class="math inline">\({\sigma
^{2}}\)</span>的高斯分布，该对称条件可以简化为<span
class="math inline">\({\sigma
^{2}}=2m\)</span>。因此，在高斯近似中，仅需要考虑一维的变量，即均值<span
class="math inline">\(m\)</span>。设<span
class="math inline">\(\mathbf{a}_{N}^{\left( i
\right)}\)</span>可以用<span class="math inline">\(N\left( m_{N}^{\left(
i \right)},2m_{N}^{\left( i \right)}
\right)\)</span>表示，则式（5）、式（6）和式（7）中所示的LLR计算过程可以用高斯近似成为</p>
<p><span class="math display">\[\begin{equation}
m_{2N}^{\left( 2i \right)}={ {\varphi }^{-1}}\left( 1-{ {\left[
1-\varphi \left( m_{N}^{\left( i \right)} \right) \right]}^{2}} \right)
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
m_{2N}^{\left( 2i \right)}=2m_{N}^{\left( i \right)}
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
m_{1}^{\left( 1 \right)}={2}/{ { {\sigma }^{2}}}\;
\end{equation}\]</span></p>
<p>其中函数</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171110/102537471.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p><span class="math display">\[\begin{equation}
\varphi \left( x \right)=\left\{ \begin{matrix}
   1-\frac{1}{\sqrt{4\pi x}}\int_{-\infty }^{\infty }{\tanh
\frac{u}{2}\cdot \exp \left( -\frac{ { {\left( u-x \right)}^{2}}}{4x}
\right)du,x&gt;0}  \\
   1\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,x=0  \\
\end{matrix} \right.
\end{equation}\]</span></p>
<blockquote>
<p>注：文献[2]中的公式有误。</p>
</blockquote>
<p><span class="math inline">\(\varphi \left( x \right)\)</span>在<span
class="math inline">\(\left[ 0,\infty
\right)\)</span>上连续单调递减，<span class="math inline">\(\varphi
\left( 0 \right)\text{=}1\)</span>，<span class="math inline">\(\varphi
\left( \infty \right)\text{=0}\)</span>，其反函数用<span
class="math inline">\({ {\varphi }^{-1}}\left( x
\right)\)</span>表示。一般情况下，函数<span
class="math inline">\(\varphi \left( x
\right)\)</span>可以使用如下的近似形式计算</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171110/102615542.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<p><span class="math display">\[\begin{equation}
\varphi \left( x \right)=\left\{ \begin{matrix}
   \sqrt{\frac{\pi }{x}}\left( 1-\frac{10}{7x} \right)\exp \left(
-\frac{x}{4} \right),x\ge 10  \\
   \exp \left( -0.4527{ {x}^{0.86}}+0.0218 \right),0&lt;x&lt;10  \\
\end{matrix} \right.
\end{equation}\]</span></p>
<blockquote>
<p>注：文献[2]中的公式有误。</p>
</blockquote>
<p>在得到<span class="math inline">\(m_{N}^{\left( i
\right)}\)</span>后，各极化信道<span class="math inline">\(W_{N}^{\left(
i \right)}\)</span>在发送全零时对应的接收信号LLR值服从分布<span
class="math inline">\(N\left( m_{N}^{\left( i \right)},2m_{N}^{\left( i
\right)} \right)\)</span>，于是可靠性度量<span
class="math inline">\(P\left( { {A}_{i}}
\right)\)</span>即可计算如下</p>
<p><span class="math display">\[\begin{equation}
P\left( { {A}_{i}} \right)\text{=}\int\limits_{-\infty
}^{0}{\frac{1}{2\sqrt{\pi m_{N}^{\left( i \right)}}}\cdot \exp \left(
\frac{-{ {\left( x-m_{N}^{\left( i \right)}
\right)}^{2}}}{4m_{N}^{\left( i \right)}} \right)}dx
\end{equation}\]</span></p>
<h1 id="总结">总结</h1>
<p><br/>巴氏参数、密度进化和高斯近似法都是计算各分裂信道错误概率<span
class="math inline">\(P\left( { {A}_{i}}
\right)\)</span>的方法，不同的方法有各自的适用范围。巴氏参数法仅适用于BEC，密度进化法适用于所有类型的B-DMC，而高斯近似法则适用于更加实际的BAWGNC。</p>
<h1 id="参考文献">参考文献</h1>
<p><br/>[1] Arikan E. Channel Polarization: A Method for Constructing
Capacity-Achieving Codes for Symmetric Binary-Input Memoryless
Channels[J]. IEEE Transactions on Information Theory, 2008,
55(7):3051-3073. [2] 陈凯. 极化编码理论与实用方案研究[D]. 北京邮电大学,
2014.</p>
<h1 id="相关链接">相关链接</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/08/04/polar-code-17-gaussian-approximation2/">《Polar
Code（17）高斯近似（2）》</a> <a
href="http://marshallcomm.cn/2017/03/17/polar-code-8-gaussian-approximation/">《Polar
Code（8）高斯近似》</a></p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（6）SC译码算法</title>
    <url>/2017/03/13/polar-code-6-sc-decoder/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>Arikan在文献[1]中给出了Polar
Code译码算法，即串行抵消（Successive Cancellation，SL）译码算法。由Polar
Code编码原理可知，极化码的构造就是一个极化信道的选择问题，而极化信道的选择实际上是按照最优化SC译码性能为标准的。根据极化信道转移概率函数式，各个极化信道并不是相互独立的，而是具有确定的依赖关系的：信道序号大的极化信道依赖于所有比其序号小的极化信道。基于极化信道之间的这一依赖关系，SC译码算法对各个比特进行译码判决时，需要假设之前步骤的译码得到的结果都是正确的。并且正是在这种译码算法下，极化码被证明了是信道容量可达的。因此对极化码而言，最合适的译码算法应当是基于SC译码的，只有这类译码算法才能充分利用极化码的结构，并且同时保证在码长足够长时容量可达。</p>
<span id="more"></span>
<h1 id="sc译码算法">SC译码算法</h1>
<p><br/>在进行译码时，从式（1）的转移概率可以看出，序号<span
class="math inline">\(i\)</span>极化信道<span
class="math inline">\(W_{N}^{\left( i
\right)}\)</span>的输出包括信道接收信号<span
class="math inline">\(y_{1}^{N}\)</span>以及前<span
class="math inline">\(i-1\)</span>个极化信道的输入<span
class="math inline">\(u_{1}^{i-1}\)</span>两个部分。</p>
<p><span class="math display">\[\begin{align}
W_{N}^{\left( i \right)}\left( y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}}
\right)\triangleq \sum\limits_{u_{i+1}^{N}\in { {X}^{N-i}}}{\frac{1}{ {
{2}^{N-1}}}{ {W}_{N}}\left( y_{1}^{N}|u_{1}^{N} \right)}
\end{align}\]</span></p>
<p>因此，对于<span class="math inline">\(i\in \left\{ 1,2,...,N
\right\}\)</span>，比特<span class="math inline">\({
{u}_{i}}\)</span>的估计值<span class="math inline">\({
{\hat{u}}_{i}}\)</span>可以根据接收信号<span
class="math inline">\(y_{1}^{N}\)</span>和部分估计序列<span
class="math inline">\(u_{1}^{i-1}\)</span>通过计算当<span
class="math inline">\({ {\hat{u}}_{i}}=0\)</span>或<span
class="math inline">\({ {\hat{u}}_{i}}=1\)</span>时<span
class="math inline">\(W_{N}^{\left( i
\right)}\)</span>的转移概率进行逐个地判断。这种译码算法称为串行抵消（SC）译码算法：对信道序号<span
class="math inline">\(i\)</span>从1到N取值，各个比特的估计值根据以下公式得到：</p>
<p><span class="math display">\[\begin{align}
{ {\hat{u}}_{i}}=\left\{ \begin{matrix}
   { {h}_{i}}\left( y_{1}^{N},\hat{u}_{1}^{i-1} \right),\ \ if\ i\in
A  \\
   { {u}_{i}},\ \ if\ i\in { {A}^{c}}  \\
\end{matrix} \right.
\end{align}\]</span></p>
<p>其中，当<span class="math inline">\(i\in {
{A}^{c}}\)</span>时，表明该比特为冻结比特，即收发端事先约定的比特，因此直接判决为<span
class="math inline">\({ {\hat{u}}_{i}}={ {u}_{i}}\)</span>；当<span
class="math inline">\(i\in
A\)</span>时，表明该比特为承载信息的信息比特，判决函数为</p>
<p><span class="math display">\[\begin{align}
{ {h}_{i}}\left( y_{1}^{N},\hat{u}_{1}^{i-1} \right)=\left\{
\begin{matrix}
   0,\ \ if\ L_{N}^{\left( i \right)}\left( y_{1}^{N},\hat{u}_{1}^{i-1}
\right)\ge 0  \\
   1,\ \ if\ L_{N}^{\left( i \right)}\left( y_{1}^{N},\hat{u}_{1}^{i-1}
\right)&lt;0\   \\
\end{matrix} \right.
\end{align}\]</span></p>
<p>定义对数似然比（Log-Likelihood Ratio，LLR）为</p>
<p><span class="math display">\[\begin{align}
L_{N}^{\left( i \right)}\left( y_{1}^{N},\hat{u}_{1}^{i-1}
\right)\triangleq \ln \left( \frac{W_{N}^{\left( i \right)}\left(
y_{1}^{N},\hat{u}_{1}^{i-1}|0 \right)}{W_{N}^{\left( i \right)}\left(
y_{1}^{N},\hat{u}_{1}^{i-1}|1 \right)} \right)
\end{align}\]</span></p>
<p>LLR的计算可以通过递归完成。现定义函数<span
class="math inline">\(f\)</span>和<span
class="math inline">\(g\)</span>如下：</p>
<p><span class="math display">\[\begin{align}
f\left( a,b \right)=\ln \left( \frac{1+{ {e}^{a+b}}}{ { {e}^{a}}+{
{e}^{b}}} \right)
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
g\left( a,b,{ {u}_{s}} \right)={ {\left( -1 \right)}^{ { {u}_{s}}}}a+b
\end{align}\]</span></p>
<p>其中，<span class="math inline">\(a,b\in R,{ {u}_{s}}\in \left\{ 0,1
\right\}\)</span>。LLR的递归运算借助函数<span
class="math inline">\(f\)</span>和<span
class="math inline">\(g\)</span>表示如下：</p>
<p><span class="math display">\[\begin{align}
L_{N}^{\left( 2i-1 \right)}\left( y_{1}^{N},\hat{u}_{1}^{2i-2}
\right)=f\left( L_{N/2}^{\left( i \right)}\left( y_{1}^{
{N}/{2}\;},\hat{u}_{1,o}^{2i-2}\oplus \hat{u}_{1,e}^{2i-2}
\right),L_{N/2}^{\left( i \right)}\left( y_{
{N}/{2}\;+1}^{N},\hat{u}_{1,e}^{2i-2} \right) \right)
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
L_{N}^{\left( 2i \right)}\left( y_{1}^{N},\hat{u}_{1}^{2i-1}
\right)=g\left( L_{N/2}^{\left( i \right)}\left( y_{1}^{
{N}/{2}\;},\hat{u}_{1,o}^{2i-2}\oplus \hat{u}_{1,e}^{2i-2}
\right),L_{N/2}^{\left( i \right)}\left( y_{
{N}/{2}\;+1}^{N},\hat{u}_{1,e}^{2i-2} \right),{ { {\hat{u}}}_{2i-1}}
\right)
\end{align}\]</span></p>
<p>递归的终止条件为当<span
class="math inline">\(N=1\)</span>时，即到达了信道<span
class="math inline">\(W\)</span>端，此时<span
class="math inline">\(L_{1}^{\left( 1 \right)}\left( { {y}_{j}}
\right)=\ln \frac{W\left( { {y}_{j}}|0 \right)}{W\left( { {y}_{j}}|1
\right)}\)</span>。</p>
<p>定义事件“SC译码算法得到的译码码块错误”为<span
class="math inline">\(E=\bigcup\nolimits_{i=1}^{N}{ {
{B}_{i}}}\)</span>，其中事件</p>
<p><span class="math display">\[\begin{align}
{ {B}_{i}}=\left\{
u_{1}^{N},y_{1}^{N}:u_{1}^{i-1}=\hat{u}_{1}^{i-1},W_{N}^{\left( i
\right)}\left( y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}} \right)&lt;W_{N}^{\left(
i \right)}\left( y_{1}^{N},u_{1}^{i-1}|{ {u}_{i}}\oplus 1 \right)
\right\}
\end{align}\]</span></p>
<p>表示“SC译码过程中第一个错误判决发生在第<span
class="math inline">\(i\)</span>个比特”。由于<span
class="math inline">\({ {B}_{i}}\subset { {A}_{i}}\)</span>（事件<span
class="math inline">\({ {A}_{i}}\)</span>的定义参看<a
href="http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/">《Polar
Code（4）编码之极化信道可靠性估计》</a>前言），因此有<span
class="math inline">\(E\subset \sum\limits_{i\in A}{P\left( { {A}_{i}}
\right)}\)</span>，于是</p>
<p><span class="math display">\[\begin{align}
P\left( E \right)\le \sum\nolimits_{i\in A}{P\left( { {A}_{i}} \right)}
\end{align}\]</span></p>
<p>其中<span class="math inline">\(P\left( { {A}_{i}}
\right)\)</span>的值可根据前文所述的计算巴氏参数、密度进化或高斯近似方法得到。因此，通过式（6）可以得到极化码在SC译码下的误块率（BLER）性能上界。</p>
<p><span class="math inline">\(L_{1}^{\left( 1 \right)}\left( { {y}_{j}}
\right)=\ln \frac{W\left( { {y}_{j}}|0 \right)}{W\left( { {y}_{j}}|1
\right)}\)</span>在这里仍属于定义式，在实际中并不具有操作性，因为转移概率<span
class="math inline">\(W\)</span>是未知的。当引入高斯近似法，接收符号<span
class="math inline">\(y\)</span>的对数似然比（LLR）定义为</p>
<p><span class="math display">\[L\left( y \right)=\ln \frac{p\left( y|0
\right)}{p\left( y|1 \right)}=\frac{2y}{ { {\sigma }^{2}}}\]</span></p>
<p>因此译码端对数似然比的初始值<span class="math inline">\(L_{1}^{\left(
1 \right)}\left( { {y}_{j}} \right)=\frac{2y}{ { {\sigma
}^{2}}}\)</span>可轻松获得，<span
class="math inline">\(y\)</span>为接收符号，<span
class="math inline">\({ {\sigma }^{2}}\)</span>为噪声方差。</p>
<h1 id="sc译码示例">SC译码示例</h1>
<p><br/>现在以码长<span
class="math inline">\(N=4\)</span>，消息比特数为<span
class="math inline">\(K=3\)</span>的极化码为例，对SC译码进行说明。在图1中，<span
class="math inline">\({
{u}_{1}}\)</span>为冻结比特并设定为零值，而消息比特也假设为全零，最右端的<span
class="math inline">\(L_{1}^{\left( 1 \right)}\left( { {y}_{j}}
\right)\)</span>表示接收自信道的对数似然比。其他节点表示中间估计结果以及中间译码结果。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171123/114034280.jpg" title="图 1 极化码的SC译码，初始状态" /></p>
<p>需要说明的是，编码过程中计算转移概率是从图的左边逐级向右边递归。而在译码过程中，计算信道的LLR要从右边逐级向左递归。</p>
<p>SC译码算法将首先计算<span class="math inline">\({
{u}_{1}}\)</span>的对数似然比<span class="math inline">\(L_{4}^{\left( 1
\right)}\left( y_{1}^{4}
\right)\)</span>。根据式（5）和式（7），如图2所示，首先计算出<span
class="math inline">\(L_{2}^{\left( 1 \right)}\left( y_{1}^{2}
\right)\)</span>和<span class="math inline">\(L_{2}^{\left( 1
\right)}\left( y_{3}^{4} \right)\)</span>的值，其中</p>
<p><span class="math display">\[\begin{align}
L_{2}^{\left( 1 \right)}\left( y_{1}^{2} \right)=f\left( L_{1}^{\left( 1
\right)}\left( { {y}_{1}} \right),L_{1}^{\left( 1 \right)}\left( {
{y}_{2}} \right) \right)\text{=}\ln \left( \frac{1+{ {e}^{1.5+2}}}{ {
{e}^{1.5}}+{ {e}^{2}}} \right)=1.06
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
L_{2}^{\left( 1 \right)}\left( y_{3}^{4} \right)=f\left( L_{1}^{\left( 1
\right)}\left( { {y}_{3}} \right),L_{1}^{\left( 1 \right)}\left( {
{y}_{4}} \right) \right)\text{=}\ln \left( \frac{1+{ {e}^{-1+0.5}}}{ {
{e}^{-1}}+{ {e}^{0.5}}} \right)=-0.23
\end{align}\]</span></p>
<p>接着计算出<span class="math inline">\(L_{4}^{\left( 1 \right)}\left(
y_{1}^{4} \right)\)</span>：</p>
<p><span class="math display">\[\begin{align}
L_{4}^{\left( 1 \right)}\left( y_{1}^{4} \right)=f\left( L_{2}^{\left( 1
\right)}\left( y_{1}^{2} \right),L_{2}^{\left( 1 \right)}\left(
y_{3}^{4} \right) \right)=\ln \left( \frac{1+{ {e}^{1.06-0.23}}}{ {
{e}^{1.06}}+{ {e}^{-0.23}}} \right)=-0.11
\end{align}\]</span></p>
<p>虽然<span class="math inline">\(L_{4}^{\left( 1 \right)}\left(
y_{1}^{4} \right)&lt;0\)</span>，但由于<span class="math inline">\({
{u}_{1}}\)</span>是冻结比特，我们依然将<span class="math inline">\({
{u}_{1}}\)</span>判决为<span class="math inline">\({
{\hat{u}}_{1}}=0\)</span>。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171123/114123942.jpg" title="图 2 极化码的SC译码，对${ {u}_{1}}$译码" /></p>
<p>接着对<span class="math inline">\({
{u}_{2}}\)</span>进行译码，如图3所示，根据式（6）和式（8）可得</p>
<p><span class="math display">\[\begin{align}
L_{4}^{\left( 2 \right)}\left( y_{1}^{4},{ { {\hat{u}}}_{1}} \right)={
{\left( -1 \right)}^{ { { {\hat{u}}}_{1}}}}L_{2}^{\left( 1
\right)}\left( y_{1}^{2} \right)+L_{2}^{\left( 1 \right)}\left(
y_{3}^{4} \right)={ {\left( -1 \right)}^{0}}\times 1.06+\left( -0.23
\right)=0.83
\end{align}\]</span></p>
<p>由于<span class="math inline">\({ {u}_{2}}\)</span>是消息比特且<span
class="math inline">\(L_{4}^{\left( 2 \right)}\left( y_{1}^{4},{ {
{\hat{u}}}_{1}} \right)&gt;0\)</span>，因此判决为<span
class="math inline">\({ {\hat{u}}_{2}}=0\)</span>，此处为正确译码。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171123/114216877.jpg" title="图 3 极化码的SC译码，对${ {u}_{2}}$译码" /></p>
<p>接着对<span class="math inline">\({
{u}_{3}}\)</span>进行译码，如图4所示，根据式（5）和式（7）可得</p>
<p><span class="math display">\[\begin{align}
L_{4}^{\left( 3 \right)}\left( y_{1}^{4},\hat{u}_{1}^{2} \right)=f\left(
L_{2}^{\left( 2 \right)}\left( y_{1}^{2},{ { {\hat{u}}}_{1}}\oplus { {
{\hat{u}}}_{2}} \right),L_{2}^{\left( 2 \right)}\left( y_{3}^{4},{ {
{\hat{u}}}_{2}} \right) \right)
\end{align}\]</span></p>
<p>这里需要先求<span class="math inline">\(L_{2}^{\left( 2
\right)}\left( y_{1}^{2},{ { {\hat{u}}}_{1}}\oplus { { {\hat{u}}}_{2}}
\right)\)</span>，根据式（6）和式（8）可得</p>
<p><span class="math display">\[\begin{align}
L_{2}^{\left( 2 \right)}\left( y_{1}^{2},{ { {\hat{u}}}_{1}}\oplus { {
{\hat{u}}}_{2}} \right)={ {\left( -1 \right)}^{ { {
{\hat{u}}}_{1}}\oplus { { {\hat{u}}}_{2}}}}L_{1}^{\left( 1
\right)}\left( { {y}_{1}} \right)+L_{1}^{\left( 1 \right)}\left( {
{y}_{2}} \right)={ {\left( -1 \right)}^{0}}\times 1.5+2=3.5
\end{align}\]</span></p>
<p>再求<span class="math inline">\(L_{2}^{\left( 2 \right)}\left(
y_{3}^{4},{ { {\hat{u}}}_{2}}
\right)\)</span>，根据根据式（6）和式（8）可得</p>
<p><span class="math display">\[\begin{align}
L_{2}^{\left( 2 \right)}\left( y_{3}^{4},{ { {\hat{u}}}_{2}}
\right)\text{=}{ {\left( -1 \right)}^{ { {
{\hat{u}}}_{2}}}}L_{1}^{\left( 1 \right)}\left( { {y}_{3}}
\right)+L_{1}^{\left( 1 \right)}\left( { {y}_{4}} \right)={ {\left( -1
\right)}^{0}}\times \left( -1 \right)+0.5=-0.5
\end{align}\]</span></p>
<p>把式（16）和式（17）带入到式（15）得到</p>
<p><span class="math display">\[\begin{align}
L_{4}^{\left( 3 \right)}\left( y_{1}^{4},\hat{u}_{1}^{2} \right)=f\left(
3.5,-0.5 \right)\text{=}\ln \left( \frac{1+{ {e}^{3.5-0.5}}}{ {
{e}^{3.5}}+{ {e}^{-0.5}}} \right)=-0.47
\end{align}\]</span></p>
<p>由于<span class="math inline">\(L_{4}^{\left( 3 \right)}\left(
y_{1}^{4},\hat{u}_{1}^{2} \right)&lt;0\)</span>，因此判决<span
class="math inline">\({
{\hat{u}}_{3}}=1\)</span>，此处发生译码错误。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171123/114255712.jpg" title="图 4 极化码的SC译码，对${ {u}_{3}}$译码" /></p>
<p>最后对<span class="math inline">\({
{u}_{4}}\)</span>进行译码，如图5所示，根据式（6）和式（8）可得</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; L_{4}^{\left( 4 \right)}\left(
y_{1}^{4},\hat{u}_{1}^{3} \right)={ {\left( -1 \right)}^{ { {
{\hat{u}}}_{3}}}}L_{2}^{\left( 2 \right)}\left( y_{1}^{2},{ {
{\hat{u}}}_{1}}\oplus { { {\hat{u}}}_{2}} \right)+L_{2}^{\left( 2
\right)}\left( y_{3}^{4},{ { {\hat{u}}}_{2}} \right) \\
\nonumber &amp; ={ {\left( -1 \right)}^{1}}\times 3.5+\left( -0.5
\right) \\
&amp; =-4 \\
\end{align}\]</span></p>
<p>由于<span class="math inline">\(L_{4}^{\left( 4 \right)}\left(
y_{1}^{4},\hat{u}_{1}^{3} \right)&lt;0\)</span>，因此判决<span
class="math inline">\({
{\hat{u}}_{4}}=1\)</span>，此处发生译码错误。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171123/114336377.jpg" title="图 5 极化码的SC译码，对${ {u}_{4}}$译码" /></p>
<h1 id="总结">总结</h1>
<p><br/>SC译码算法以LLR为判决准则，对每一个比特进行硬判决，按比特序号从小到大的顺序依次判决译码。当码长趋近于无穷时，由于各个分裂信道接近完全极化（其信道容量或者为0或者为1），毎个消息比特都会获得正确的译码结果，可以在理论上使得极化码达到信道的对称容量<span
class="math inline">\(I\left( W
\right)\)</span>。而且SC译码器的复杂度仅为<span
class="math inline">\(O\left( N\log N
\right)\)</span>和码长呈近似线性的关系。然而，在有限码长下，由于信道极化并不完全，依然会存在一些消息比特无法被正确译码。当前面<span
class="math inline">\(i-1\)</span>个消息比特的译码中发生错误之后，由于SC译码器在对后面的消息比特译码时需要用到之前的消息比特的估计值，这就会导致较为严重的错误传递。因此，对于有限码长的极化码，采用SC译码器往往不能达到理想的性能。</p>
<h1 id="参考文献">参考文献</h1>
<p><br/>[1] Arikan E. Channel Polarization: A Method for Constructing
Capacity-Achieving Codes for Symmetric Binary-Input Memoryless
Channels[J]. IEEE Transactions on Information Theory, 2008,
55(7):3051-3073. [2] 张亮.
极化码的译码算法研究及其应用[D].浙江大学,2016.</p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（7）SCL译码算法</title>
    <url>/2017/03/15/polar-code-7-scl-decoder/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p>Polar
Code在码长趋于无穷时，信道极化才越完全。但在有限码长下，由于信道极化并不完全，依然会存在一些信息比特无法被正确译码。当前面<span
class="math inline">\(i-1\)</span>个信息比特的译码中发生错误之后，由于SC译码器在对后面的信息比特译码时需要用到之前的信息比特的估计值，这就会导致较为严重的错误传递。SC译码算法是一种贪婪算法，对码树的每一层仅仅搜索到最优路径就进行下一层，所以无法对错误进行修改。SCL译码算法就是对SC算法的改进。但在SCL之前，先来看看SC译码算法的码树表示。</p>
<span id="more"></span>
<h1 id="sc译码算法的码树表示">SC译码算法的码树表示</h1>
<p>根据极化码在SC译码下各个比特判决之间的依赖关系，能够构造一颗码树
<span class="math inline">\(\Gamma = \left( \varepsilon, V
\right)\)</span>，其中 <span class="math inline">\(\varepsilon\)</span>
和 <span class="math inline">\(V\)</span>
分别表示码树中的边和节点集合。定义节点的深度为该节点到根节点的最短路径长度，对于一个码长为
<span class="math inline">\(N\)</span> 的极化码，其码树节点集合<span
class="math inline">\(V\)</span> 能够按照深度 <span
class="math inline">\(d\)</span> 划分成 <span
class="math inline">\(N+1\)</span> 个子集，记作 <span
class="math inline">\(V_d\)</span>，其中 <span class="math inline">\(d =
0,1,...,N\)</span>。特别地，<span class="math inline">\(V_0\)</span>
仅包含根节点，即 <span class="math inline">\(\left| V_0 \right| =
1\)</span>。除了叶节点（即 <span class="math inline">\(d = N\)</span>
时），码树 <span class="math inline">\(\Gamma\)</span> 中的每一个节点
<span class="math inline">\(v \in V_d\)</span> 均分别通过两条标记着 0、1
的边与两个 <span class="math inline">\(V_{d+1}\)</span>
中的后继节点相连。某一个节点 <span class="math inline">\(v\)</span>
所对应的序列 <span class="math inline">\(u_1^d\)</span>
的值定义为从根节点开始到达该节点 <span class="math inline">\(v\)</span>
所需经过的各个边的标记序列。例如，若某一个节点 <span
class="math inline">\(v\)</span> 表示了序列 <span
class="math inline">\(u_1^i\)</span>，则其左、右后继节点分别代表了路径
<span class="math inline">\(\left( u_1^i, u_1^{i+1} = 0 \right)\)</span>
与 <span class="math inline">\(\left( u_1^i, u_1^{i+1} = 1
\right)\)</span>。于是，从根节点到每一个深度为 <span
class="math inline">\(d\)</span> 的节点 <span class="math inline">\(v\in
V_d\)</span> 的路径，均对应了一种 <span
class="math inline">\(u_1^d\)</span>
可能的取值，由于信源序列为二进制比特序列，所以 <span
class="math inline">\(\left| V_d \right| =
2^d\)</span>。定义连接着深度为 <span class="math inline">\(i-1\)</span>
和 <span class="math inline">\(i\)</span> 的节点的边所构成的集合为第
<span class="math inline">\(i\)</span> 层边，记作 <span
class="math inline">\(\varepsilon_i\)</span>。显然，对任意 <span
class="math inline">\(i \in \left\{1,2,...,N \right\}\)</span>，有 <span
class="math inline">\(\left| \varepsilon_i \right| =
2^i\)</span>。从根节点到任何一个节点所形成的路径，均对应一个路径度量值（PM）。值得注意的是，该码树结构仅与码长
<span class="math inline">\(N\)</span>
有关。极化码译码码树实质上是一个满二叉树，因此译码过程也就是在满二叉树上寻找合适的路径。如图
1 所示，给出了一个当 <span class="math inline">\(N = 4\)</span>
时极化码码树的示例，各节点旁的数字指示了对应的转移概率，在每个节点处选择转移概率最大的路径，最终译码序列为
<span class="math inline">\(\hat{u}_1^N = \left[ \begin{matrix} 0 &amp;
0 &amp; 1 &amp; 1 \end{matrix} \right]\)</span>。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170315/205026503.jpg" title="图 1 码长为4的极化码译码码树" /></p>
<h1 id="scl译码算法">SCL译码算法</h1>
<p>针对SC译码算法的缺点，一个直接的改进方案是，增加每一层路径搜索后允许保留的候选路径数量，从仅允许选择“最好的一条路径进行下一步扩展”改为“最大允许选择最好的
条路径进行下一步扩展”，其中<span class="math inline">\(L\ge
1\)</span>。与SC算法一样，改进的算法依然从码树根节点开始，逐层依次向叶子节点层进行路径搜索。不同的是，每一层扩展后，尽可能多地保留后继路径（每一层保留的路径数不大于<span
class="math inline">\(L\)</span>）。完成一层的路径扩展后，选择路径度量值（Path
Metrics，PM）最小的<span
class="math inline">\(L\)</span>条，保存在一个列表中，等待进行下一层的扩展。因此称该算法为<strong>串行抵消列表（Successive
Cancellation List，SCL）译码算法</strong>，并称参数<span
class="math inline">\(L\)</span>为<strong>搜索宽度</strong>。当<span
class="math inline">\(L=1\)</span>时，SCL译码算法退化为SC译码算法；当<span
class="math inline">\(L\ge {
{2}^{K}}\)</span>时，SCL译码等价于最大似然译码。</p>
<h2 id="思考">思考</h2>
<p>现在思考一个问题：如图2所示，当Polar
Code编译码结构用“蝶形图”表示时，在译码时只需要在每个节点处计算相应的对数似然比，从右到左依次计算，并最终得到<span
class="math inline">\(L_{N}^{\left( i \right)}\left(
y_{1}^{N},u_{1}^{i-1} \right)\)</span>，若LLR值为非负则判决<span
class="math inline">\({ {\hat{u}}_{i}}=0\)</span>，否则判决<span
class="math inline">\({ {\hat{u}}_{i}}=1\)</span>。一共有<span
class="math inline">\(N\log N\)</span>个节点，因此相应地也要计算<span
class="math inline">\(N\log
N\)</span>个LLR。对于图2来说这一过程没有任何问题。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171123/112310741.jpg" title="图 2 Polar Code编译码结构蝶形图表示" /></p>
<p>现在转换思路，将译码结构用二叉树表示，一个LLR值指示了每个节点两条支路上的转移概率的比值关系。如果像图1那样，每条支路就用转移概率来表征，向左是发送为比特0的转移概率，向右是发送为比特1的转移概率。当然这样也可以，对于SC译码来说，图1使用转移概率和图2使用对数似然比实际上是等价的。但随着码长的增加，转移概率函数的数值会越来越小，译码器存在着下溢的风险，所以通常不直接使用转移概率。由于SC译码过程实质上是二值判决，因此通常还是要采用转移概率的对数似然比。</p>
<p>现在可以明确两点：一是使用对数似然比，二是在满二叉树上使用对数似然比。但仍然存在的问题是：SC算法实际上是SCL算法的特例，即搜索宽度<span
class="math inline">\(L=1\)</span>的情况；对于<span
class="math inline">\(L\ge 2\)</span>的情况，单单依靠LLR是无法在<span
class="math inline">\(2L\)</span>个后继节点中挑选<span
class="math inline">\(L\)</span>个最优节点作为后继译码路径的。这就需要在LLR的基础上对<span
class="math inline">\(2L\)</span>条路径度量值进行计算，以便可以实现在对数似然域上的SCL译码算法。因此需要明确的第三点就是：重新定义路径度量值（PM）。</p>
<h2 id="路径度量值">路径度量值</h2>
<p>在SCL译码过程中，存在<span
class="math inline">\(L\)</span>条路径同时进行译码搜索，对于任意一条路径<span
class="math inline">\(l\in \left\{ 1,2,...,L
\right\}\)</span>以及任意发送比特<span class="math inline">\({
{u}_{i}}\)</span>（<span class="math inline">\(i\in \left\{ 1,2,...,N
\right\}\)</span>），其对应的路径度量值定义如下：</p>
<p><span class="math display">\[\begin{align}
PM_{l}^{\left( i \right)}\triangleq \sum\limits_{j=1}^{i}{\ln \left(
1+\exp \left( -\left( 1-2{ { {\hat{u}}}_{j}}\left[ l \right]
\right)\cdot L_{N}^{\left( j \right)} \right) \right)}
\end{align}\]</span></p>
<p>其中，<span class="math inline">\(L_{N}^{\left( j \right)}\left[ l
\right]=\ln \frac{W_{N}^{\left( i \right)}\left(
y_{1}^{N},\hat{u}_{1}^{i-1}\left[ l \right]|0 \right)}{W_{N}^{\left( i
\right)}\left( y_{1}^{N},\hat{u}_{1}^{i-1}\left[ l \right]|1
\right)}\)</span>。</p>
<p>如果发送端所有信息比特在<span class="math inline">\(\left\{ 0,1
\right\}\)</span>上均匀分布，那么对于任意两条不同路径<span
class="math inline">\({ {l}_{1}},{ {l}_{2}}\in \left\{ 1,2,...,L
\right\}\)</span>，当且仅当<span class="math inline">\(PM_{ {
{l}_{1}}}^{\left( i \right)}&gt;PM_{ { {l}_{2}}}^{\left( i
\right)}\)</span>成立时，有如下关系成立：</p>
<p><span class="math display">\[\begin{align}
W_{N}^{\left( i \right)}\left( y_{1}^{N},\hat{u}_{1}^{i-1}\left[ {
{l}_{1}} \right]|\hat{u}_{1}^{i}\left[ { {l}_{1}} \right]
\right)&lt;W_{N}^{\left( i \right)}\left(
y_{1}^{N},\hat{u}_{1}^{i-1}\left[ { {l}_{2}}
\right]|\hat{u}_{1}^{i}\left[ { {l}_{2}} \right] \right)
\end{align}\]</span></p>
<p>由上式可见，路径对应的转移概率越大，路径度量值越小。基于这种关系就完全可以在对数似然比上对<span
class="math inline">\(2L\)</span>条路径进行挑选。式（1）可以近似表示为</p>
<p><span class="math display">\[\begin{align}
\nonumber PM_{l}^{\left( i \right)}\approx \left\{ \begin{matrix}
   PM_{l}^{\left( i-1 \right)},\ \ if\ { { {\hat{u}}}_{i}}\left[ l
\right]=\delta \left( L_{N}^{\left( i \right)}\left[ l \right]
\right)  \\
   PM_{l}^{\left( i-1 \right)}+\left| L_{N}^{\left( i \right)}\left[ l
\right] \right|,\ \ if\ { { {\hat{u}}}_{i}}\left[ l \right]\ne \delta
\left( L_{N}^{\left( i \right)}\left[ l \right] \right)  \\
\end{matrix} \right.
\end{align}\]</span></p>
<p>但考虑译码过程中包含了信息比特和冻结比特，因此上式可以改写为</p>
<p><span class="math display">\[PM_{l}^{\left( i \right)}=\left\{
\begin{align}
  \nonumber &amp; PM_{l}^{\left( i-1 \right)}\ \ ,\ if\ { {u}_{i}}\ is\
\text{information or frozen bit}\ and\text{ }{ { {\hat{u}}}_{i}}\left[ l
\right]=\delta \left( L_{N}^{\left( i \right)}\left[ l \right] \right)
\\
&amp; PM_{l}^{\left( i-1 \right)}+\left| L_{N}^{\left( i \right)}\left[
l \right] \right|,\ if\ { {u}_{i}}\ is\ \text{information or frozen
bit}\ and\text{ }{ { {\hat{u}}}_{i}}\left[ l \right]\ne \delta \left(
L_{N}^{\left( i \right)}\left[ l \right] \right) \\
\nonumber &amp; +\infty \ \ ,\ if\ { {u}_{i}}\ is\ \text{frozen bit}\
and\ \text{incorrect value} \\
\end{align} \right.\]</span></p>
<p>其中<span class="math inline">\(\delta \left( x
\right)=\frac{1}{2}\left( 1-sign\left( x \right) \right)\)</span>，<span
class="math inline">\(PM_{l}^{\left( 0
\right)}=0\)</span>。对于信息比特的判决有</p>
<p><span class="math display">\[\begin{align}
{ {\hat{u}}_{i}}=\delta \left( L_{N}^{\left( i \right)}\left(
y_{1}^{N},\hat{u}_{1}^{i-1} \right) \right)
\end{align}\]</span></p>
<h1 id="scl译码示例">SCL译码示例</h1>
<p>下面仍然以<a
href="http://marshallcomm.cn/2017/03/13/polar-code-6-sc-decoder/">《Polar
Code（6）SC译码算法》</a>中的SC译码的例子为例来说明SCL算法的具体实现过程。给定发送端原始比特序列<span
class="math inline">\(u_{1}^{4}=\left( \begin{matrix}  { {u}_{1}} &amp;
{ {u}_{2}} &amp; { {u}_{3}} &amp; { {u}_{4}} \\ \end{matrix}
\right)=\left( \begin{matrix}  0 &amp; 0 &amp; 0 &amp; 0 \\ \end{matrix}
\right)\)</span>，其中<span class="math inline">\({
{u}_{1}}\)</span>为冻结比特，<span
class="math inline">\(u_{2}^{4}\)</span>为信息比特。经过Polar编码以后通过AWGN信道传输。假设接收端已知各子信道对数似然比<span
class="math inline">\(L_{1}^{\left( 1 \right)}\left( y_{1}^{4}
\right)=\left[ \begin{matrix}  1.5 &amp; 2 &amp; -1 &amp; 0.5 \\
\end{matrix} \right]\)</span>。</p>
<p><font color="#FF0000"><br />
每一条路径都拥有自己的一套LLR值，每一条路径的PM都要根据各自路径上的LLR值计算。以a、b、c、d表示路径1、路径2、路径3、路径4。为了便于说明SCL译码过程，PM值直接标注在示意图上，LLR值则用一个向量来表示。
</font></p>
<h2 id="搜索第一层">搜索第一层</h2>
<h3 id="计算第1个比特相关的llr">计算第1个比特相关的LLR</h3>
<p><span class="math display">\[L_{4}^{\left( 1 \right)}\left( y_{1}^{4}
\right)=f\left( L_{2}^{\left( 1 \right)}\left( y_{1}^{2}
\right),L_{2}^{\left( 1 \right)}\left( y_{3}^{4} \right)
\right)\]</span></p>
<p>其中，<span class="math inline">\(L_{2}^{\left( 1 \right)}\left(
y_{1}^{2} \right)\)</span>和<span class="math inline">\(L_{2}^{\left( 1
\right)}\left( y_{3}^{4} \right)\)</span>递归地计算为</p>
<p><span class="math display">\[L_{2}^{\left( 1 \right)}\left( y_{1}^{2}
\right)=f\left( L_{1}^{\left( 1 \right)}\left( { {y}_{1}}
\right),L_{1}^{\left( 1 \right)}\left( { {y}_{2}} \right)
\right)=f\left( 1.5,2 \right)=1.06\]</span></p>
<p><span class="math display">\[L_{2}^{\left( 1 \right)}\left( y_{3}^{4}
\right)=f\left( L_{1}^{\left( 1 \right)}\left( { {y}_{3}}
\right),L_{1}^{\left( 1 \right)}\left( { {y}_{4}} \right)
\right)=f\left( -1,0.5 \right)=-0.23\]</span></p>
<p>从而，<span class="math display">\[L_{4}^{\left( 1 \right)}\left(
y_{1}^{4} \right)=f\left( 1.06,-0.23 \right)=-0.11\]</span>。</p>
<p><strong>建立向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ \begin{matrix}
   -0.11 &amp; -0.11  \\
\end{matrix} \right]\]</span></p>
<h3 id="计算候选路径的度量值">计算候选路径的度量值</h3>
<h4 id="a.-0">a. 0</h4>
<p><span class="math inline">\(L_{4}^{\left( 1
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第1元素</font> ，即<span class="math inline">\(L_{4}^{\left( 1
\right)}=-0.11\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{1}}=0\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 1 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( -0.11 \right)
\right)=1\)</span>。由于<span class="math inline">\({
{u}_{1}}\)</span>是冻结比特，但<span class="math inline">\({
{\hat{u}}_{1}}\ne \delta \left( L_{4}^{\left( 1 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( { { {\hat{u}}}_{1}}=0
\right)=PM_{1}^{\left( 0 \right)}+\left| L_{4}^{\left( 1 \right)}
\right|=0+0.11=0.11\]</span></p>
<h4 id="b.-1">b. 1</h4>
<p><span class="math inline">\(L_{4}^{\left( 1
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第2元素</font> ，即<span class="math inline">\(L_{4}^{\left( 1
\right)}=-0.11\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{1}}=1\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 1 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( -0.11 \right)
\right)=1\)</span>。由于<span class="math inline">\({
{u}_{1}}\)</span>是冻结比特，但此时<span class="math inline">\({
{\hat{u}}_{1}}=1\)</span>显然取值错误，所以有</p>
<p><span class="math display">\[PM\left( { { {\hat{u}}}_{1}}=1
\right)=\text{+}\infty \]</span></p>
<h4 id="路径扩展">路径扩展</h4>
<p>如图3所示，由于搜索宽度已达到<span
class="math inline">\(L=2\)</span>，因此第1层的2条路径均保留。继续在下一层扩展，至<span
class="math inline">\(2L\)</span>条路径，再从中挑选<span
class="math inline">\(L\)</span>条。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170315/221254645.jpg" title="图 3 SCL译码算法在第1层的扩展" /></p>
<h2 id="搜索第二层">搜索第二层</h2>
<h3 id="计算第2个比特相关的llr">计算第2个比特相关的LLR</h3>
<p>分别计算<span
class="math inline">\(2L\)</span>条路径在第2层对应的LLR。</p>
<h4 id="a.-00">a. 00</h4>
<p>比特估计值<span class="math inline">\({
{\hat{u}}_{1}}=0\)</span>，所以有</p>
<p><span class="math display">\[\nonumber \begin{align}
  &amp; L_{4}^{\left( 2 \right)}\left( y_{1}^{4},{ { {\hat{u}}}_{1}}
\right)=g\left( L_{2}^{\left( 1 \right)}\left( y_{1}^{2}
\right),L_{2}^{\left( 1 \right)}\left( y_{3}^{4} \right),{ {
{\hat{u}}}_{1}} \right)\text{=}g\left( 1.06,-0.23,0 \right) \\
\nonumber &amp; ={ {\left( -1 \right)}^{0}}\times 1.06+\left( -0.23
\right) \\
\nonumber &amp; =0.83 \\
\end{align}\]</span></p>
<p><strong>重新建立向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ 0.83
\right]\]</span></p>
<h4 id="b.-01">b. 01</h4>
<p>同上，<span class="math inline">\(L_{4}^{\left( 2 \right)}\left(
y_{1}^{4},{ { {\hat{u}}}_{1}} \right)=0.83\)</span>。</p>
<p><strong>更新向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ \begin{matrix}
   0.83 &amp; 0.83  \\
\end{matrix} \right]\]</span></p>
<h4 id="c.-10">c. 10</h4>
<p>比特估计值<span class="math inline">\({
{\hat{u}}_{1}}=1\)</span>，所以有</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; L_{4}^{\left( 2 \right)}\left( y_{1}^{4},{ {
{\hat{u}}}_{1}} \right)=g\left( L_{2}^{\left( 1 \right)}\left( y_{1}^{2}
\right),L_{2}^{\left( 1 \right)}\left( y_{3}^{4} \right),{ {
{\hat{u}}}_{1}} \right)\text{=}g\left( 1.06,-0.23,1 \right) \\
\nonumber &amp; ={ {\left( -1 \right)}^{1}}\times 1.06+\left( -0.23
\right) \\
\nonumber &amp; =-1.29 \\
\end{align}\\]</span></p>
<p><strong>更新向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ \begin{matrix}
   \begin{matrix}
   0.83 &amp; 0.83  \\
\end{matrix} &amp; -1.29  \\
\end{matrix} \right]\]</span></p>
<h4 id="d.-11">d. 11</h4>
<p>同上，<span class="math inline">\(L_{4}^{\left( 2 \right)}\left(
y_{1}^{4},{ { {\hat{u}}}_{1}} \right)=-1.29\)</span>。</p>
<p><strong>更新向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ \begin{matrix}
   \begin{matrix}
   \begin{matrix}
   0.83 &amp; 0.83  \\
\end{matrix} &amp; -1.29  \\
\end{matrix} &amp; -1.29  \\
\end{matrix} \right]\]</span></p>
<h3 id="计算候选路径的度量值-1">计算候选路径的度量值</h3>
<p>由于在上一层已经扩展至<span
class="math inline">\(L\)</span>条路径，那么在这一层将会计算<span
class="math inline">\(2L\)</span>条路径的度量值，然后保留PM最小的<span
class="math inline">\(L\)</span>条路径，并且删除其余路径。</p>
<h4 id="a.-00-1">a. 00</h4>
<p><span class="math inline">\(L_{4}^{\left( 2
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第1元素</font> ，即<span class="math inline">\(L_{4}^{\left( 2
\right)}=0.83\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{2}}=0\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 2 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( 0.83 \right)
\right)=0\)</span>。由于<span class="math inline">\({
{u}_{2}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{2}}=\delta \left( L_{4}^{\left( 2 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{2}=00
\right)=PM\left( { { {\hat{u}}}_{1}}=0 \right)=0.11\]</span></p>
<h4 id="b.-01-1">b. 01</h4>
<p><span class="math inline">\(L_{4}^{\left( 2
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第2元素</font> ，即<span class="math inline">\(L_{4}^{\left( 2
\right)}=0.83\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{2}}=1\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 2 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( 0.83 \right)
\right)=0\)</span>。由于<span class="math inline">\({
{u}_{2}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{2}}\ne \delta \left( L_{4}^{\left( 2 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{2}=01
\right)=PM\left( { { {\hat{u}}}_{1}}=0 \right)+\left| L_{4}^{\left( 2
\right)} \right|\text{=0}\text{.11+}0.83=0.94\]</span></p>
<p>截止目前的扩展路径如图4所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170315/221926567.jpg" title="图 4 SCL译码算法在第2层的扩展" /></p>
<h4 id="c.-10-1">c. 10</h4>
<p><span class="math inline">\(L_{4}^{\left( 2
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第3元素</font> ，即<span class="math inline">\(L_{4}^{\left( 2
\right)}=-1.29\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{2}}=0\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 2 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( -1.29 \right)
\right)=1\)</span>。由于<span class="math inline">\({
{u}_{2}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{2}}\ne \delta \left( L_{4}^{\left( 2 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{2}=10
\right)=PM\left( { { {\hat{u}}}_{1}}=1 \right)\text{+}L_{4}^{\left( 2
\right)}\text{=}+\infty +1.29\to +\infty \]</span></p>
<h4 id="d.-11-1">d. 11</h4>
<p><span class="math inline">\(L_{4}^{\left( 2
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第4元素</font> ，即<span class="math inline">\(L_{4}^{\left( 2
\right)}=-1.29\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{2}}=1\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 2 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( -1.29 \right)
\right)=1\)</span>。由于<span class="math inline">\({
{u}_{2}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{2}}=\delta \left( L_{4}^{\left( 2 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{2}=11
\right)=PM\left( { { {\hat{u}}}_{1}}=1 \right)\text{=}+\infty
\]</span></p>
<p>截止目前的扩展路径如图5所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170315/222254421.jpg" title="图 5 SCL译码算法在第2层的扩展" /></p>
<h3 id="剪枝">剪枝</h3>
<p>将已经计算出的<span
class="math inline">\(2L\)</span>路径按照PM值从小到大排序，对这<span
class="math inline">\(2L\)</span>条路径进行剪枝操作：保留<span
class="math inline">\(L\)</span>条PM值最小的路径，并且删掉其余路径。如图6所示，被保留的路径为红色，被剪枝的路径均已变成灰色。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170315/222502055.jpg" title="图 6 剪枝" /></p>
<h2 id="搜索第三层">搜索第三层</h2>
<p>分别计算 条路径在第3层对应的LLR。</p>
<h3 id="计算第3个比特相关的llr">计算第3个比特相关的LLR</h3>
<h4 id="a.-000">a. 000</h4>
<p>比特估计值<span
class="math inline">\(\hat{u}{}_{1}=0,\hat{u}{}_{2}=0\)</span>。</p>
<p><span class="math display">\[L_{4}^{\left( 3 \right)}\left(
y_{1}^{4},\hat{u}_{1}^{2} \right)=f\left( L_{2}^{\left( 2 \right)}\left(
y_{1}^{2},\hat{u}{}_{1}\oplus { { {\hat{u}}}_{2}} \right),L_{2}^{\left(
2 \right)}\left( y_{3}^{4},{ { {\hat{u}}}_{2}} \right)
\right)\]</span></p>
<p>其中，<span class="math inline">\(L_{2}^{\left( 2 \right)}\left(
y_{1}^{2},\hat{u}{}_{1}\oplus { { {\hat{u}}}_{2}}
\right)\)</span>和<span class="math inline">\(L_{2}^{\left( 2
\right)}\left( y_{3}^{4},{ { {\hat{u}}}_{2}}
\right)\)</span>递归地计算为</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; L_{2}^{\left( 2 \right)}\left(
y_{1}^{2},\hat{u}{}_{1}\oplus { { {\hat{u}}}_{2}} \right)=g\left(
L_{1}^{\left( 1 \right)}\left( { {y}_{1}} \right),L_{1}^{\left( 1
\right)}\left( { {y}_{2}} \right),\hat{u}{}_{1}\oplus { {
{\hat{u}}}_{2}} \right)=g\left( 1.5,2,0 \right) \\
\nonumber &amp; ={ {\left( -1 \right)}^{0}}\times 1.5+2 \\
\nonumber &amp; =3.5 \\
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; L_{2}^{\left( 2 \right)}\left( y_{3}^{4},{ {
{\hat{u}}}_{2}} \right)=g\left( L_{1}^{\left( 1 \right)}\left( {
{y}_{3}} \right),L_{1}^{\left( 1 \right)}\left( { {y}_{4}} \right),{ {
{\hat{u}}}_{2}} \right)=g\left( -1,0.5,0 \right) \\
\nonumber &amp; ={ {\left( -1 \right)}^{0}}\times \left( -1 \right)+0.5
\\
\nonumber &amp; =-0.5 \\
\end{align}\]</span></p>
<p>从而，<span class="math inline">\(L_{4}^{\left( 3 \right)}\left(
y_{1}^{4},\hat{u}_{1}^{2} \right)=f\left( 3.5,-0.5
\right)=-0.47\)</span>。</p>
<p><strong>重新建立向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ -0.47
\right]\]</span></p>
<h4 id="b.-001">b. 001</h4>
<p>同上，<span class="math inline">\(L_{4}^{\left( 3 \right)}\left(
y_{1}^{4},\hat{u}_{1}^{2} \right)=f\left( 3.5,-0.5
\right)=-0.47\)</span>。</p>
<p><strong>更新向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ \begin{matrix}
   -0.47 &amp; -0.47  \\
\end{matrix} \right]\]</span></p>
<h4 id="c.-010">c. 010</h4>
<p>比特估计值<span
class="math inline">\(\hat{u}{}_{1}=0,\hat{u}{}_{2}=1\)</span>。</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; L_{2}^{\left( 2 \right)}\left(
y_{1}^{2},\hat{u}{}_{1}\oplus { { {\hat{u}}}_{2}} \right)=g\left(
L_{1}^{\left( 1 \right)}\left( { {y}_{1}} \right),L_{1}^{\left( 1
\right)}\left( { {y}_{2}} \right),\hat{u}{}_{1}\oplus { {
{\hat{u}}}_{2}} \right)=g\left( 1.5,2,1 \right) \\
\nonumber &amp; ={ {\left( -1 \right)}^{1}}\times 1.5+2 \\
\nonumber &amp; =0.5 \\
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; L_{2}^{\left( 2 \right)}\left( y_{3}^{4},{ {
{\hat{u}}}_{2}} \right)=g\left( L_{1}^{\left( 1 \right)}\left( {
{y}_{3}} \right),L_{1}^{\left( 1 \right)}\left( { {y}_{4}} \right),{ {
{\hat{u}}}_{2}} \right)=g\left( -1,0.5,1 \right) \\
\nonumber &amp; ={ {\left( -1 \right)}^{1}}\times \left( -1 \right)+0.5
\\
\nonumber &amp; =1.5 \\
\end{align}\]</span></p>
<p>从而，<span class="math inline">\(L_{4}^{\left( 3 \right)}\left(
y_{1}^{4},\hat{u}_{1}^{2} \right)=f\left( 0.5,1.5
\right)=0.31\)</span>。</p>
<p><strong>更新向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ \begin{matrix}
   \begin{matrix}
   -0.47 &amp; -0.47  \\
\end{matrix} &amp; 0.31  \\
\end{matrix} \right]\]</span></p>
<h4 id="d.-011">d. 011</h4>
<p>同上，<span class="math inline">\(L_{4}^{\left( 3 \right)}\left(
y_{1}^{4},\hat{u}_{1}^{2} \right)=f\left( 0.5,1.5
\right)=0.31\)</span>。</p>
<p><strong>更新向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ \begin{matrix}
   \begin{matrix}
   \begin{matrix}
   -0.47 &amp; -0.47  \\
\end{matrix} &amp; 0.31  \\
\end{matrix} &amp; 0.31  \\
\end{matrix} \right]\]</span></p>
<h3 id="计算候选路径的度量值-2">计算候选路径的度量值</h3>
<p>分别计算<span class="math inline">\(2L\)</span>条路径的度量值。</p>
<h4 id="a.-000-1">a. 000</h4>
<p><span class="math inline">\(L_{4}^{\left( 3
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第1元素</font> ，即<span class="math inline">\(L_{4}^{\left( 3
\right)}=-0.47\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{3}}=0\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 3 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( -0.47 \right)
\right)=1\)</span>。由于<span class="math inline">\({
{u}_{3}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{3}}\ne \delta \left( L_{4}^{\left( 3 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{3}=000
\right)=PM\left( \hat{u}_{1}^{2}=00 \right)+\left| L_{4}^{\left( 3
\right)} \right|=0.11+0.47=0.58\]</span></p>
<h4 id="b.-001-1">b. 001</h4>
<p><span class="math inline">\(L_{4}^{\left( 3
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第2元素</font> ，即<span class="math inline">\(L_{4}^{\left( 3
\right)}=-0.47\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{3}}=1\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 3 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( -0.47 \right)
\right)=1\)</span>。由于<span class="math inline">\({
{u}_{3}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{3}}=\delta \left( L_{4}^{\left( 3 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{3}=001
\right)=PM\left( \hat{u}_{1}^{2}=00 \right)\text{=}0.11\]</span></p>
<p>截止目前的扩展路径如图7所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170315/223032922.jpg" title="图 7 SCL译码算法在第3层的扩展" /></p>
<h4 id="c.-010-1">c. 010</h4>
<p><span class="math inline">\(L_{4}^{\left( 3
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第3元素</font> ，即<span class="math inline">\(L_{4}^{\left( 3
\right)}=0.31\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{3}}=0\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 3 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( 0.31 \right)
\right)=0\)</span>。由于<span class="math inline">\({
{u}_{3}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{3}}=\delta \left( L_{4}^{\left( 3 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{3}=010
\right)=PM\left( \hat{u}_{1}^{2}=01 \right)=0.94\]</span></p>
<h4 id="d.-011-1">d. 011</h4>
<p><span class="math inline">\(L_{4}^{\left( 3
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第4元素</font> ，即<span class="math inline">\(L_{4}^{\left( 3
\right)}=0.31\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{3}}=1\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 3 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( 0.31 \right)
\right)=0\)</span>。由于<span class="math inline">\({
{u}_{3}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{3}}\ne \delta \left( L_{4}^{\left( 3 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{3}=011
\right)=PM\left( \hat{u}_{1}^{2}=01 \right)+L_{4}^{\left( 3
\right)}=0.94+0.31=1.25\]</span></p>
<p>截止目前的扩展路径如图8所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170427/134154868.jpg" title="图 8 SCL译码算法在第3层的扩展" /></p>
<h3 id="剪枝-1">剪枝</h3>
<p>将已经计算出的<span
class="math inline">\(2L\)</span>路径按照PM值从小到大排序，对这<span
class="math inline">\(2L\)</span>条路径进行剪枝操作：保留<span
class="math inline">\(L\)</span>条PM值最小的路径，并且删掉其余路径。如图9所示，被保留的路径为红色，被剪枝的路径均已变成灰色。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170427/134331096.jpg" title="图 9 剪枝" /></p>
<h2 id="搜索第四层">搜索第四层</h2>
<h3 id="计算第4个比特相关的llr">计算第4个比特相关的LLR</h3>
<p>分别计算<span
class="math inline">\(2L\)</span>条路径在第4层对应的LLR。</p>
<h4 id="a.-0000">a. 0000</h4>
<p>比特估计值<span
class="math inline">\(\hat{u}{}_{1}=0,\hat{u}{}_{2}=0,\hat{u}{}_{3}=0\)</span>。</p>
<p><span class="math display">\[\begin{align}
  \nonumber &amp; L_{4}^{\left( 4 \right)}\left(
y_{1}^{4},\hat{u}_{1}^{3} \right)=g\left( L_{2}^{\left( 2 \right)}\left(
y_{1}^{2},{ { {\hat{u}}}_{1}}\oplus { { {\hat{u}}}_{2}}
\right),L_{2}^{\left( 2 \right)}\left( y_{3}^{4},{ { {\hat{u}}}_{2}}
\right),{ { {\hat{u}}}_{3}} \right)=g\left( 3.5,-0.5,0 \right) \\
\nonumber &amp; ={ {\left( -1 \right)}^{0}}\times 3.5+\left( -0.5
\right) \\
\nonumber &amp; =3 \\
\end{align}\]</span></p>
<p><strong>重新建立向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ 3
\right]\]</span></p>
<h4 id="b.-0001">b. 0001</h4>
<p>同上，<span class="math inline">\(L_{4}^{\left( 4 \right)}\left(
y_{1}^{4},\hat{u}_{1}^{3} \right)=3\)</span>。</p>
<p><strong>更新向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ \begin{matrix}
   3 &amp; 3  \\
\end{matrix} \right]\]</span></p>
<h4 id="c.-0010">c. 0010</h4>
<p>比特估计值<span
class="math inline">\(\hat{u}{}_{1}=0,\hat{u}{}_{2}=0,\hat{u}{}_{3}=1\)</span>。</p>
<p><span class="math display">\[\begin{align}
\nonumber &amp; L_{4}^{\left( 4 \right)}\left( y_{1}^{4},u_{1}^{3}
\right)=g\left( L_{2}^{\left( 2 \right)}\left( y_{1}^{2},{
{u}_{1}}\oplus { {u}_{2}} \right),L_{2}^{\left( 2 \right)}\left(
y_{3}^{4},{ {u}_{2}} \right),{ {u}_{3}} \right)=g\left( 3.5,-0.5,1
\right) \\
\nonumber &amp; ={ {\left( -1 \right)}^{1}}\times 3.5+\left( -0.5
\right) \\
\nonumber &amp; =-4 \\
\end{align}\]</span></p>
<p><strong>更新向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ \begin{matrix}
   3 &amp; 3 &amp; -4  \\
\end{matrix} \right]\]</span></p>
<h4 id="d.-0011">d. 0011</h4>
<p>同上，<span class="math inline">\(L_{4}^{\left( 4 \right)}\left(
y_{1}^{4},\hat{u}_{1}^{3} \right)=-4\)</span>。</p>
<p><strong>更新向量LLR</strong></p>
<p><span class="math display">\[\mathbf{LLR}=\left[ \begin{matrix}
   \begin{matrix}
   3 &amp; 3 &amp; -4  \\
\end{matrix} &amp; -4  \\
\end{matrix} \right]\]</span></p>
<h3 id="计算候选路径的度量值-3">计算候选路径的度量值</h3>
<p>终于到最后一层了，继续计算<span
class="math inline">\(2L\)</span>个路径的度量值。</p>
<h4 id="a.-0000-1">a. 0000</h4>
<p><span class="math inline">\(L_{4}^{\left( 4
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第1元素</font> ，即<span class="math inline">\(L_{4}^{\left( 4
\right)}=3\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{4}}=0\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 4 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( 3 \right)
\right)=0\)</span>。由于<span class="math inline">\({
{u}_{4}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{4}}=\delta \left( L_{4}^{\left( 4 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{4}=0000
\right)=PM\left( \hat{u}_{1}^{3}=000 \right)=0.58\]</span></p>
<h4 id="b.-0001-1">b. 0001</h4>
<p><span class="math inline">\(L_{4}^{\left( 4
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第2元素</font> ，即<span class="math inline">\(L_{4}^{\left( 4
\right)}=3\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{4}}=1\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 4 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( 3 \right)
\right)=0\)</span>。由于<span class="math inline">\({
{u}_{4}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{4}}\ne \delta \left( L_{4}^{\left( 4 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{4}=0001
\right)=PM\left( \hat{u}_{1}^{3}=000 \right)+L_{4}^{\left( 4
\right)}=0.58+3=3.58\]</span></p>
<p>截止目前的扩展路径如图10所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170427/135823406.jpg" title="图 10 SCL译码算法在4层的扩展" /></p>
<h4 id="c.-0010-1">c. 0010</h4>
<p><span class="math inline">\(L_{4}^{\left( 4
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第3元素</font> ，即<span class="math inline">\(L_{4}^{\left( 4
\right)}=-4\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{4}}=0\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 4 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( -4 \right)
\right)=1\)</span>。由于<span class="math inline">\({
{u}_{4}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{4}}\ne \delta \left( L_{4}^{\left( 4 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{4}=0010
\right)=PM\left( \hat{u}_{1}^{3}=001 \right)+\left| L_{4}^{\left( 4
\right)} \right|=0.11+4=4.\text{11}\]</span></p>
<h4 id="d.-0011-1">d. 0011</h4>
<p><span class="math inline">\(L_{4}^{\left( 4
\right)}\)</span>取向量<span
class="math inline">\(\mathbf{LLR}\)</span>的<font color="#FF0000">
第4元素</font> ，即<span class="math inline">\(L_{4}^{\left( 4
\right)}=-4\)</span>；比特估计值<span class="math inline">\({
{\hat{u}}_{4}}=1\)</span>。</p>
<p><span class="math inline">\(\delta \left( L_{4}^{\left( 4 \right)}
\right)=\frac{1}{2}\left( 1-sign\left( -4 \right)
\right)=1\)</span>。由于<span class="math inline">\({
{u}_{4}}\)</span>为信息比特，且<span class="math inline">\({
{\hat{u}}_{4}}=\delta \left( L_{4}^{\left( 4 \right)}
\right)\)</span>，所以有</p>
<p><span class="math display">\[PM\left( \hat{u}_{1}^{4}=0011
\right)=PM\left( \hat{u}_{1}^{3}=001 \right)=0.11\]</span></p>
<p>截止目前的扩展路径如图11所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170427/140245285.jpg" title="图 11 SCL译码算法在4层的扩展" /></p>
<h3 id="剪枝-2">剪枝</h3>
<p>到了最后一层，选取PM最小的路径作为唯一路径，即为译码输出结果：<span
class="math inline">\(\hat{u}_{1}^{4}=\left( \begin{matrix}  0 &amp; 0
&amp; 1 &amp; 1 \\ \end{matrix}
\right)\)</span>。如图12所示，只保留这一条路径，删除其余路径。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170427/140423071.jpg" title="图 12 SCL译码算法输出结果" /></p>
<p>注意，此时的<span class="math inline">\(\hat{u}_{1}^{4}=\left(
\begin{matrix}  0 &amp; 0 &amp; 1 &amp; 1 \\ \end{matrix}
\right)\)</span>并不是按正常顺序排列的译码结果。别忘了极化码编码时是经过比特反转的，<span
class="math inline">\(\left( \begin{matrix}  0 &amp; 0 &amp; 1 &amp; 1
\\ \end{matrix} \right)\)</span>对应的比特位置是<span
class="math inline">\(\left( \begin{matrix}  1 &amp; 3 &amp; 2 &amp; 4
\\ \end{matrix}
\right)\)</span>。所以再比特反转一次，得到最终的译码比特<span
class="math inline">\(\left( \begin{matrix}  0 &amp; 1 &amp; 0 &amp; 1
\\ \end{matrix} \right)\)</span>，其中第2、4位发生了译码错误。</p>
<figure>
<img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171123/110111367.png"
alt="mark" />
<figcaption aria-hidden="true">mark</figcaption>
</figure>
<h1 id="总结">总结</h1>
<p>SC译码算法是深度优先的，要的是从根节点快速到达叶子节点。而SCL译码算法是广度优先的，先扩展，再剪枝，最终到达叶子节点。SCL译码算法的PM机制就像“马太效应”，越是错误的路径越要施加惩罚，越是正确的路径越可以直接继承父节点以便保证自己具有最小的PM。对于信息比特且<span
class="math inline">\({ {\hat{u}}_{i}}\left[ l \right]\)</span>与<span
class="math inline">\(\delta \left( L_{N}^{\left( i \right)}\left[ l
\right]
\right)\)</span>相等的情况，该比特直接继承父节点的PM；对于信息比特且<span
class="math inline">\({ {\hat{u}}_{i}}\left[ l \right]\)</span>与<span
class="math inline">\(\delta \left( L_{N}^{\left( i \right)}\left[ l
\right]
\right)\)</span>不相等的情况则次之，施加一个惩罚因子，该惩罚因子的大小就是LLR的模值；对于冻结比特而且还取值错误的情况是最坏的，施加的惩罚因子是无穷大。</p>
<h1 id="参考文献">参考文献</h1>
<p>[1] Tal I, Vardy A. List Decoding of Polar Codes[J]. Information
Theory IEEE Transactions on, 2012, 61(5):2213-2226. [2]
Balatsoukas-Stimming A, Parizi M B, Burg A. LLR-Based Successive
Cancellation List Decoding of Polar Codes[J]. IEEE Transactions on
Signal Processing, 2015, 63(19):5165-5179. [3] 陈凯.
极化编码理论与实用方案研究[D]. 北京邮电大学, 2014.</p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（8）高斯近似</title>
    <url>/2017/03/17/polar-code-8-gaussian-approximation/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>通过系列文章《Polar Code（1~7）》大致梳理了Polar
Code从编码到译码的基本原理和算法步骤。本文回过头再来谈一谈高斯近似。高斯近似已在前文<a
href="http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/">《Polar
Code（4）编码之极化信道可靠性估计》</a>中有所介绍。对于Polar码的研究从BEC到一般类型的B-DMC，再到BAWGNC，越来越从理想走向实际。密度进化法把BEC扩展到了所有类型的B-DMC，高斯近似法则把B-DMC再次扩展到了BAWGNC。本文将梳理高斯近似在Polar
Code编码和译码中的具体应用。</p>
<span id="more"></span>
<h1 id="polar编码中的高斯近似">Polar编码中的高斯近似</h1>
<p><br/>高斯近似<sup>[1]</sup>是对密度进化的简化处理方法，早已广泛应用于LDPC码。<strong>高斯近似在Polar
Code编码中用于信道的可靠性估计</strong><sup>[2]</sup>，即估计各个极化信道的错误概率。应用高斯近似法的基本前提是满足<strong>对称性条件</strong>，因为这正是密度进化法必须满足的条件。如果接收符号对数似然比的概率密度函数满足<span
class="math inline">\(f\left( x \right)=f\left( -x \right){
{e}^{x}}\)</span>，那么高斯分布的均值<span
class="math inline">\(m\)</span>和方差<span class="math inline">\({
{\sigma }^{2}}\)</span>具有如下关系：<span class="math inline">\({
{\sigma
}^{2}}=2m\)</span>。由于高斯分布本身可以根据其均值和方差完全决定，所以在高斯近似假设条件下，只需要跟踪信息的均值变化就可以知道概率密度的变化。同时定义高斯变量的等效SNR为<span
class="math inline">\({ { {m}^{2}}}/{ { {\sigma
}^{2}}}\;\)</span>，所以SNR为<span
class="math inline">\({m}/{2}\;\)</span>，跟踪均值也相当于跟踪SNR。</p>
<p>对于方差为<span class="math inline">\({ {\sigma
}^{2}}\)</span>的BAWGN信道<span
class="math inline">\(W\)</span>，源比特序列用BPSK调制，其概率密度函数为</p>
<p><span class="math display">\[\begin{align}
p\left( y|x \right)=\frac{1}{\sqrt{2\pi { {\sigma }^{2}}}}{ {e}^{-\frac{
{ {\left( y-\left( 1-2x \right) \right)}^{2}}}{2{ {\sigma }^{2}}}}}
\end{align}\]</span></p>
<p>接收符号 的对数似然比（LLR）定义为</p>
<p><span class="math display">\[\begin{align}
L\left( y \right)=\ln \frac{p\left( y|0 \right)}{p\left( y|1
\right)}=\frac{2y}{ { {\sigma }^{2}}}
\end{align}\]</span></p>
<p>由于此时信道满足了对称性条件，那么译码错误概率与传输的码字无关，因此不失一般性，我们可以假设码字为全零发送，则LLR是服从均值为<span
class="math inline">\(\frac{2}{ { {\sigma }^{2}}}\)</span>，方差为<span
class="math inline">\(\frac{4}{ { {\sigma
}^{2}}}\)</span>的高斯分布。</p>
<h2 id="高斯近似假设">高斯近似假设</h2>
<p><br/><strong>GA
assumption</strong>：每个子信道的LLR都服从方差为均值2倍的高斯分布，即</p>
<p><span class="math display">\[\begin{align}
L_{N}^{\left( i \right)}\sim N\left( m_{N}^{\left( i
\right)},2m_{N}^{\left( i \right)} \right)
\end{align}\]</span></p>
<p>其中，<span class="math inline">\(m_{1}^{\left( 1 \right)}=\frac{2}{
{ {\sigma }^{2}}}\)</span>。</p>
<p>基于这样的高斯近似假设，唯一需要考虑的问题就是如何计算均值。根据密度进化中的设定，令<span
class="math inline">\(a_{N}^{\left( i \right)}\)</span>表示<span
class="math inline">\(L_{N}^{\left( i \right)}\left(
y_{1}^{N},0_{1}^{i-1} \right)\)</span>的概率密度函数，那么<span
class="math inline">\(a_{N}^{\left( i \right)}\)</span>是服从<span
class="math inline">\(N\left( m_{N}^{\left( i \right)},2m_{N}^{\left( i
\right)}
\right)\)</span>的高斯分布。再根据高斯近似的构造理论，将密度进化的计算转化为对均值<span
class="math inline">\(m_{N}^{\left( i \right)}\)</span>的递归计算：</p>
<p><span class="math display">\[\begin{align}
m_{2N}^{\left( 2i\text{-}1 \right)}={ {\varphi }^{-1}}\left( 1-{ {\left[
1-\varphi \left( m_{N}^{\left( i \right)} \right) \right]}^{2}} \right)
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
m_{2N}^{\left( 2i \right)}=2m_{N}^{\left( i \right)}
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
m_{1}^{\left( 1 \right)}={2}/{ { {\sigma }^{2}}}\;
\end{align}\]</span></p>
<p>其中函数</p>
<p><span class="math display">\[\begin{align}
\varphi \left( x \right)=\left\{ \begin{matrix}
   1-\frac{1}{\sqrt{4\pi x}}\int_{-\infty }^{\infty }{\tanh
\frac{u}{2}\cdot \exp \left( -\frac{ { {\left( u-x \right)}^{2}}}{4x}
\right)du,x&gt;0}  \\
   1\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ,x=0  \\
\end{matrix} \right.
\end{align}\]</span></p>
<p><span class="math inline">\(\varphi \left( x \right)\)</span>在<span
class="math inline">\(\left[ 0,\infty
\right)\)</span>上连续单调递减，<span class="math inline">\(\varphi
\left( 0 \right)\text{=}1\)</span>，<span class="math inline">\(\varphi
\left( +\infty \right)\text{=0}\)</span>，其反函数用<span
class="math inline">\({ {\varphi }^{-1}}\left( x
\right)\)</span>表示。一般情况下，函数<span
class="math inline">\(\varphi \left( x
\right)\)</span>可以使用如下GA近似式（AGA）<sup>[1]</sup>计算</p>
<p><span class="math display">\[\begin{align}
\varphi \left( x \right)=\left\{ \begin{matrix}
   \sqrt{\frac{\pi }{x}}\left( 1-\frac{10}{7x} \right)\exp \left(
-\frac{x}{4} \right),x\ge 10  \\
   \exp \left( -0.4527{ {x}^{0.86}}+0.0218 \right),0&lt;x&lt;10  \\
\end{matrix} \right.
\end{align}\]</span></p>
<h2 id="我发现的问题">我发现的问题</h2>
<p><br/><strong>注意式（8）的第二个式子中0.86应当是个正数</strong>，其出处在Sae-Young
Chung于2001年发表的论文<sup>[1]</sup>中，如图1所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170317/183242980.png" title="图 1 phi(x) in Sae-Young Chung’s Paper" /></p>
<p>许多中文文献虽然同样引用了这篇论文，但$$值却是-0.86。这些使用-0.86的文献不乏最近一两年（2015、2016）的硕博士论文，这里并不一一举例，仅就事论事地指出这个问题可能值得商榷。由于密度进化和高斯近似在LDPC码中早已应用，也可以举一个关于LDPC码早已成书的例子，在2008年出版的《LDPC码理论与应用》<sup>[3]</sup>一书中，在120页就使用了-0.86，如图2所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170317/183501206.png" title="图 2 《LDPC码理论与应用》P120" /></p>
<p>下面就比较一下0.86和-0.86对<span class="math inline">\(\varphi \left(
x \right)\)</span>函数的影响有何不同，如图2和图3所示。</p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170317/183630103.bmp" title="图 3 gamma取0.86时，$\varphi \left( x \right)$的曲线" /></p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170317/183715241.bmp" title="图 4 gamma取-0.86时，$\varphi \left( x \right)$的曲线" /></p>
<p><span class="math inline">\(x\ge
10\)</span>的范围是完全相同的；不同的地方就在于<span
class="math inline">\(0&lt;x&lt;10\)</span>。这会影响均值的取值，从而影响LLR的概率密度。这一点很重要，涉及到仿真参数的配置和仿真性能。</p>
<p>关于这一点就说到这里，<strong>我的结论是：gamma的取值还是回到Sae-Young
Chung的原始论文，取值为正0.86。</strong></p>
<h2 id="改进的aga">改进的AGA</h2>
<p><br/>高斯近似是对密度进化的简化，既然是简化，就会以损失一部分性能为代价。幸运的是，这代价很小，是可以接受的范围，如图2所说，高斯近似与密度进化的信道参数极限值仅相差<span
class="math inline">\(0.3%\sim
1.2%\)</span>。但式（7）计算起来稍显复杂，于是Sae-Young
Chung提出了对高斯近似的近似式（Approximate version of
GA，AGA），也就是式（8）。</p>
<p>不过对于Polar Code，当码长<span
class="math inline">\(N\)</span>很长时，由于式（8）的计算误差会带来很大的性能损失，于是Jincheng
Dai等人提出了改进的AGA。文献[4]采用累积对数误差（cumulative-logarithmic
error，CLE）来定量评估AGA在对数域上的余补误差，提出了新的两段式估计函数</p>
<p><span class="math display">\[\begin{align}
{ {\varphi }_{AGA-2}}\left( x \right)=\left\{ \begin{matrix}
   { {e}^{0.0116{ {x}^{2}}-0.4212x}},\ 0&lt;x\le a  \\
   { {e}^{-0.2944x-0.3169}},\ a&lt;x  \\
\end{matrix} \right.
\end{align}\]</span></p>
<p>其中，临界点<span
class="math inline">\(a=7.0633\)</span>。与此同时，还提出了一种适合于Polar
Code，特别是对于长码的三段式估计函数</p>
<p><span class="math display">\[\begin{align}
{ {\varphi }_{AGA-3}}\left( x \right)\text{=}\left\{ \begin{matrix}
   { {e}^{0.06725{ {x}^{2}}-0.4908x}},\ 0&lt;x\le a  \\
   { {e}^{-0.4527{ {x}^{0.86}}+0.0218}},\ a&lt;x\le b  \\
   { {e}^{-0.2832x-0.4254}},\ b&lt;x  \\
\end{matrix} \right.
\end{align}\]</span></p>
<p>其中，临界点<span
class="math inline">\(a=0.6357,b=9.2254\)</span>。</p>
<p>通过式（4~6）、式（9）或式（10）即可递归求出各极化信道的均值。</p>
<blockquote>
<p><span class="math inline">\({ {\varphi }_{AGA-2}}\left( x
\right)\)</span>的反函数详见<a
href="http://marshallcomm.cn/2017/11/02/answer-polar-code-ga-inverse-phix/">《Answer-Polar
Code-高斯近似之<span class="math inline">\(\varphi \left( x
\right)\)</span>反函数》</a>。</p>
</blockquote>
<h2 id="极化子信道错误概率">极化子信道错误概率</h2>
<p><br/>根据式（3）的高斯近似假设，各个极化子信道的错误概率为</p>
<p><span class="math display">\[\begin{align}
{ {P}_{e}}\left( W_{N}^{\left( i \right)} \right)=Q\left(
\frac{m_{N}^{\left( i \right)}}{\sqrt{2m_{N}^{\left( i \right)}}}
\right)=Q\left( \sqrt{\frac{m_{N}^{\left( i \right)}}{2}} \right)
\end{align}\]</span></p>
<p>其中<span class="math inline">\(Q\left( x \right)=\frac{1}{\sqrt{2\pi
}}\int_{x}^{+\infty }{ { {e}^{-\frac{ {
{t}^{2}}}{2}}}}dt\)</span>为余补误差函数。</p>
<p>至此，高斯近似在Polar Code编码中的使命就完成了。接下来就是<a
href="http://marshallcomm.cn/2017/03/05/polar-code-3-encoding-example/">《Polar
Code（3）编码实例》</a>中的第二步比特混合了。</p>
<h1 id="polar译码中的高斯近似">Polar译码中的高斯近似</h1>
<p><br/>在接收端译码时，首先要计算如图5最右端所示的信道对数似然比<span
class="math inline">\(L_{1}^{\left( 1 \right)}\left( { {y}_{j}}
\right)\)</span>。假设接收端的接收序列为<span
class="math inline">\(y_{1}^{N}\)</span>，直接由式（2）即可依次计算出：</p>
<p><span class="math display">\[\begin{align}
L_{1}^{\left( 1 \right)}\left( { {y}_{j}} \right)=\ln \frac{W\left( y|0
\right)}{W\left( y|1 \right)}=\frac{2{ {y}_{j}}}{ { {\sigma }^{2}}}
\end{align}\]</span></p>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170317/183715242.png" title="图 5 $L_{1}^{\left( 1 \right)}\left( { {y}_{j}} \right)$" /></p>
<p>接下来就可以利用LLR递归式依次计算各个节点的LLR值了。</p>
<h1 id="总结">总结</h1>
<p><br/>转移概率，多么重要的信道参数。高斯近似，多么重要的估计方法。有了这两点，就可以把Polar
Code编码和译码各个环节串联起来。在编码端，通过高斯近似估计子信道错误概率，扬长避短，择其善者而传信息，避其不善者而冻结。然后比特混合，构造生成矩阵，终成一列极化码。在译码端，还是通过高斯近似估计信道对数似然值，构造判决函数，或深度优先或广度优先，逐比特判决，从而估计出源比特序列。</p>
<h1 id="参考文献">参考文献</h1>
<p><br/>[1] Chung S Y, Richardson T J, Urbanke R L. Analysis of
sum-product decoding of low-density parity-check codes using a Gaussian
approximation[J]. IEEE Transactions on Information Theory, 2001,
47(2):657-670. [2] Trifonov P. Efficient Design and Decoding of Polar
Codes[J]. IEEE Transactions on Communications, 2012, 60(11):3221-3227.
[3] 袁东风, 张海刚. LDPC码理论与应用[M]. 人民邮电出版社, 2008. [4] Dai
J, Niu K, Si Z, et al. Evaluation and Optimization of Gaussian
Approximation for Polar Codes[J]. Proceedings of the American Society
for Information Science &amp; Technology, 2016, 51(1):1-2.</p>
<h1 id="相关链接">相关链接</h1>
<p><br/><a
href="http://marshallcomm.cn/2017/08/04/polar-code-17-gaussian-approximation2/">《Polar
Code（17）高斯近似（2）》</a> <a
href="http://marshallcomm.cn/2017/03/07/polar-code-4-encoding-chan-rel-est/">《Polar
Code（4）编码之极化信道可靠性估计》</a></p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>Polar Code（9）CA-SCL译码算法</title>
    <url>/2017/03/18/polar-code-9-ca-scl-decoder/</url>
    <content><![CDATA[<h1 id="前言">前言</h1>
<p><br/>循环冗余校验（Cyclic redundancy
check，CRC）是一种信道检错技术，在实际数字通信系统中已经得到了广泛应用。对于Polar码而言，在SCL译码结束时得到一组候选路径，能够以非常低的复杂度与CRC进行联合检测译码，选择能够通过CRC检测的候选序列作为译码器输出序列，从而提高译码算法的纠错能力。</p>
<h1 id="ca-scl译码算法">CA-SCL译码算法</h1>
<p><br/>文献[1]提出了CRC辅助的SCL（CRC-aided
SCL，CA-SCL）译码算法，在信息比特序列中添加CRC校验比特序列，利用SCL译码算法正常译码获得<span
class="math inline">\(L\)</span>条搜索路径，然后借助“正确信息比特可以通过CRC校验”的先验信息，对这<span
class="math inline">\(L\)</span>条搜索路径进行挑选，从而输出最佳译码路径。给定Polar码码长为<span
class="math inline">\(N\)</span>，CRC校验码码长为<span
class="math inline">\(m\)</span>，若极化码的信息为长度为<span
class="math inline">\(K\)</span>，编码信息比特的长度为<span
class="math inline">\(k\)</span>，如图1所示，有<span
class="math inline">\(K=k+m\)</span>。Polar码的码率仍然为<span
class="math inline">\(R={K}/{N}\;\)</span>。</p>
<span id="more"></span>
<p><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20170318/201254373.jpg" title="图 1 Polar Coding and CRC-aided Decoding Scheme" /></p>
<p>定义<span class="math inline">\({ {L}^{\left( i
\right)}}\)</span>为SCL译码码树第<span
class="math inline">\(i\)</span>层对应的候选路径集合，搜索列表宽度为<span
class="math inline">\(L\)</span>的CRC-aided
SCL译码算法表示为CA-SCL（L），有如下算法步骤：</p>
<p>1、<strong>初始化</strong>：候选路径列表初始化为一条空路径，对应的路径度量值设置为0：<span
class="math inline">\({ {L}^{\left( 0 \right)}}=\left\{ \varnothing
\right\}\)</span>，<span class="math inline">\(M\left( \varnothing
\right)=0\)</span>。</p>
<p>2、<strong>扩展</strong>：对于列表中的每个序列，产生2个长度为<span
class="math inline">\(i\)</span>的序列，分别对应译码<span
class="math inline">\({ {\hat{u}}_{i}}\)</span>为比特0或1，即</p>
<p><span class="math display">\[{ {L}^{\left( i \right)}}=\left\{ \left(
d_{1}^{i-1},{ {d}_{i}} \right)|d_{1}^{i-1}\in { {L}^{\left( i-1
\right)}},{ {d}_{i}}\in \left\{ 0,1 \right\} \right\}\]</span></p>
<p>对于每个<span class="math inline">\(d_{1}^{i}\in { {L}^{\left( i
\right)}}\)</span>更新路径度量值。</p>
<p>3、<strong>竞争</strong>：若经过步骤2后，列表中的路径数未达到<span
class="math inline">\(L\)</span>条，则跳过此步；否则，保存路径度量值最小的<span
class="math inline">\(L\)</span>条路径，并删除其余路径。</p>
<p>4、<strong>CRC辅助路径选择</strong>：重复步骤2和3直到码树第<span
class="math inline">\(N\)</span>层。把列表中的候选路径按度量值从小到大排序，依次进行CRC校验。第1个通过CRC校验的路径即为译码器输出的估计序列。若没有路径通过CRC检测，则把第1条路径作为译码器输出估计序列。</p>
<h1 id="小结">小结</h1>
<p><br/>CA-SCL译码算法是对SCL算法的增强，SCL的内核不变，只是在Polar编码之前给信息比特添加CRC，在SCL译码获得候选路径之后，进行CRC校验辅助路径选择，以较低的复杂度提升了Polar译码性能。</p>
<h1 id="参考文献">参考文献</h1>
<p><br/>[1] Niu K, Chen K. CRC-Aided Decoding of Polar Codes[J]. IEEE
Communications Letters, 2012, 16(10):1668-1671.</p>
]]></content>
      <categories>
        <category>Polar Code</category>
      </categories>
      <tags>
        <tag>Polar Code</tag>
      </tags>
  </entry>
  <entry>
    <title>5G Sounding Reference Signal</title>
    <url>/2020/11/21/r15_sounding_reference_signal/</url>
    <content><![CDATA[<p>Note: 本文基于 3GPP Rel15 (2020-09) 版本规范。</p>
<p>SRS
用于上行信道信息获取、满足信道互易性时的下行信道信息获取以及上行波束管理。</p>
<p>NR 定义了 3 种类型的 SRS 传输：周期性 SRS，半持续性 SRS 和非周期性
SRS，通过为 SRS 资源集和 SRS 资源配置关于时域类型的高层参数 resourceType
来实现。</p>
<p><strong>SRS 资源集配置</strong></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112101.png" /></p>
<p><strong>SRS 资源配置</strong></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112102.png" /></p>
<ul>
<li>周期性 SRS。时域类型被配置为周期 SRS
资源的所有参数由高层信令配置，UE根据所配置的参数进行周期性发送。同一个
SRS 资源集内的所有 SRS 资源具有相同的周期性。考虑到 NR
系统支持各种子载波间隔，不同子载波间隔对应的时隙时长不同，周期 SRS
资源的周期以及周期内的偏移以时隙为单位进行配置。周期 SRS
资源可配置的最小周期为 1 个时隙，最大周期为 2560 个时隙。</li>
<li>半持续性 SRS。时域类型被配置为半持续 SRS
资源在激活期间也是周期性发送。它与周期性 SRS 的区别在于 UE
在接收到关于半持续 SRS 资源的高层信令配置后不发送 SRS，只有在接收到 MAC
层发送的关于半持续 SRS 资源的激活信令后才开始周期性地发送半持续 SRS
资源对应的 SRS ，在收到 MAC 层发送的半持续 SRS
资源的去激活命令后停止发送 SRS。因此，相对于周期性 SRS 资源，半持续 SRS
资源的配置以及激活、去激活相比高层信令（RRC信令）更快，更灵活，适用于要求时延较低的业务的快速传输。与周期性
SRS 资源类似，基站通过高层信令为半持续 SRS
资源配置周期和周期内的偏移，同一个 SRS
资源集内的所有SRS资源具有相同的周期性。</li>
<li>非周期性 SRS。时域类型被配置为非周期 SRS 资源通过 DCI 信令激活。UE
每接收到一次触发非周期 SRS 资源的 SRS 触发信令，UE 进行一次所触发的 SRS
资源对应的 SRS 发送。DCI 中的 SRS 触发信令包含 2 个比特（如表 Table
7.3.1.1.2-24 所示），2 个比特可表示的 4 个状态。其中中的 1
个状态表示不触发非周期 SRS 发送，其他 3
个状态分别表示触发第一、第二、第三个 SRS
资源组；一个状态可以触发一个或多个 SRS 资源集，一个状态对应的多个 SRS
资源集可以对应多个载波。</li>
</ul>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112103.png" /></p>
<span id="more"></span>
<h1 id="srs-资源定义">SRS 资源定义</h1>
<p>SRS 资源由「天线端口数目 <span
class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}\)</span>，连续的
OFDM 符号数目 <span
class="math inline">\(N_{symb}^{SRS}\)</span>，时域起始符号 <span
class="math inline">\(\ l_0\)</span> 和频域起始位置 <span
class="math inline">\(k_0\)</span>」四个信息共同确定。</p>
<p><strong>天线端口数目 <span
class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}\)</span></strong>：
<span class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}\)</span>
取值范围 <span
class="math inline">\({1,2,4}\)</span>，天线端口索引表示为 <span
class="math inline">\(\left\{p_i\right\}_{i=0}^{N_{\mathrm{ap}}^{\mathrm{SRS}}-1}\)</span>，其中
<span class="math inline">\(p_i=1000+i\)</span>。</p>
<ul>
<li><p>如果高层参数 SRS-ResourceSet 中的 usage 未配置为
“nonCodebook”，则 <span
class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}\)</span> 由
nrofSRS-Ports 确定。</p></li>
<li><p>如果高层参数 SRS-ResourceSet 中的 usage 配置为 “nonCodebook”，则
<span class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}\)</span>
取决于 section 5.2.</p></li>
</ul>
<p><strong>连续的 OFDM 符号数目 <span
class="math inline">\(N_{symb}^{SRS}\)</span></strong>：由高层参数
resourceMapping 中的 nrofSymbols 确定。</p>
<p><strong>时域起始符号 <span class="math inline">\(\
l_0\)</span></strong>：<span
class="math inline">\(l_0=N_{\mathrm{symb}}^{\mathrm{slot}}-1-l_{\mathrm{offset}}\)</span>，其中
<span
class="math inline">\(l_{\mathrm{offset}}\in\left\{0,1,\ldots,5\right\}\)</span>
并且 <span class="math inline">\(l_{\mathrm{offset}}\geq
N_{\mathrm{symb}}^{\mathrm{SRS}}-1\)</span>。</p>
<p>当遍历所有可能的 <span
class="math inline">\(l_{\mathrm{offset}}\)</span> 取值后，可知 SRS
在一个时隙内的起始符号 <span class="math inline">\(l_0\)</span>
的可能取值是 symbol 8~13。即 symbol 8~13 是时隙内的 SRS 资源区域。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112104.png" /></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112105.jpg" /></p>
<p><strong>频域起始位置 <span
class="math inline">\(k_0\)</span></strong>：SRS 的频域起始子载波。</p>
<h1 id="srs-序列生成">SRS 序列生成</h1>
<p>SRS 序列基于Zadoff-Chu 序列产生：</p>
<p><span
class="math display">\[r^{\left(p_i\right)}\left(n,l&#39;\right)=r_{u,v}^{\left(\alpha_i,\delta\right)}\left(n\right)\]</span></p>
<p><span class="math display">\[0\le n\le
M_{\mathrm{sc},b}^{\mathrm{SRS}}-1\]</span></p>
<p><span
class="math display">\[l&#39;\in\left\{0,1,\ldots,N_{\mathrm{symb}}^{\mathrm{SRS}}-1\right\}\]</span></p>
<p><span
class="math inline">\(r_{u,v}^{\left(\alpha_i,\delta\right)}\left(n\right)\)</span>
是 扩展 ZC 序列，序列长度为 <span
class="math inline">\(M_{\mathrm{sc},b}^{\mathrm{SRS}}\)</span>，其中
<span
class="math inline">\(\delta={\mathrm{log}}_\mathrm{2}\left(K_{\mathrm{TC}}\right)\)</span>，<span
class="math inline">\(\alpha_i\)</span> 是对应于天线端口 <span
class="math inline">\(p_i\)</span> 的循环移位。<span
class="math inline">\(l&#39;\)</span> 是 SRS 资源的 OFDM
符号索引。传输梳齿数目 <span
class="math inline">\(K_{\mathrm{TC}}\)</span> 由高层参数
transmissionComb 确定，循环移位 <span
class="math inline">\(\alpha_i\)</span> 由下式给出：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112106.png" /></p>
<p>如果传输梳齿数目 <span
class="math inline">\(K_{\mathrm{TC}}=4\)</span>，则最大循环移位数目
<span
class="math inline">\(n_{SRS}^{cs,max}=12\)</span>；如果传输梳齿数目
<span
class="math inline">\(K_{\mathrm{TC}}=2\)</span>，则最大循环移位数目
<span class="math inline">\(n_{SRS}^{cs,max}=8\)</span>。<span
class="math inline">\(n_{\mathrm{SRS}}^{\mathrm{cs}}\in\left\{0,1,\ldots,n_{SRS}^{cs,max}-1\right\}\)</span>
由高层参数 transmissionComb 给定。</p>
<p>循环移位 <span class="math inline">\(\alpha_i\)</span> 是 <span
class="math inline">\(n_{\mathrm{SRS}}^{\mathrm{cs}}\)</span> 和 <span
class="math inline">\(p_i\)</span> 的函数，即使高层给定了 <span
class="math inline">\(n_{\mathrm{SRS}}^{\mathrm{cs}}\)</span>，不同的天线端口
<span class="math inline">\(p_i\)</span> 也会使得循环移位 <span
class="math inline">\(\alpha_i\)</span> 不同。也就是说，同一个 UE
的不同天线端口所使用的 SRS 序列不同，每个天线端口对应的 SRS
序列是通过不同的循环移位得到的。</p>
<p>例如，假设 SRS 天线端口数目 <span
class="math inline">\(N_{\mathrm{ap}}^{\mathrm{SRS}}=4\)</span>, <span
class="math inline">\(n_{SRS}^{cs,max}=8\)</span>，并且给定 <span
class="math inline">\(n_{\mathrm{SRS}}^{\mathrm{cs}}=0\)</span>。根据低峰均比序列的定义
<span
class="math inline">\(r_{u,v}^{\left(\alpha,\delta\right)}\left(n\right)=e^{j\alpha
n}{\bar{r}}_{u,\nu}\left(n\right)\)</span>，<span
class="math inline">\(e^{j\alpha n}\)</span>
表示对频域序列进行相位偏移，等效为时域的循环移位。这里假定基序列 <span
class="math inline">\({\bar{r}}_{u,\nu}\left(n\right)\)</span>
保持不变，则唯一变化的是相位偏移量 <span
class="math inline">\(e^{j\alpha
n}\)</span>。尽管数学上称为频域的相位偏移，但 NR
标准统称为循环移位（cyclic shift）。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112107.png" /></p>
<p>为了干扰随机化，5G NR 系统支持 SRS
序列跳和序列组跳，是否开启这项功能由高层参数 groupOrSequenceHopping
决定。</p>
<p>SRS 的基序列被分成若干组，每组包含若干序列。如果基站给终端配置为
groupOrSequenceHopping = neither，则每次终端发送的 SRS
序列不变；如果基站给终端配置为 groupOrSequenceHopping = groupHopping or
sequenceHopping，则每次终端发送上行 SRS
时按照以下规则采用不同的序列。</p>
<p>序列组号定义为 <span
class="math inline">\(u=\left(f_{\mathrm{gh}}\left(n_{\mathrm{s,f}}^\mu,l^\prime\right)+n_{\mathrm{ID}}^{\mathrm{SRS}}\right)\
mod\ 30\)</span>，序列号 <span class="math inline">\(v\)</span>
取决于高层参数 groupOrSequenceHopping 的值。SRS 序列标识 <span
class="math inline">\(n_{\mathrm{ID}}^{\mathrm{SRS}}\)</span> 由高层参数
sequenceId 给定，取值范围为 0~1023。</p>
<p>在协议讨论阶段，RAN1#89 次会议同意使用 SRS sequence ID 来生成 SRS
序列。序列组号 <span class="math inline">\(u\)</span> 是 SRS sequence ID
的函数，而 SRS sequence ID 是 UE 特定的信息。这意味着 NR SRS
序列本身带有 UE 信息，而 LTE SRS 序列的生成是不带有 UE
信息的。这样做的好处是，即使两个 UE 使用了完全相同的时频域资源发送
SRS，由于 SRS sequence ID 不同，又由于 ZC 序列良好的互相关特性，那么两个
SRS 序列也具有较好的正交性。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112108.png" /></p>
<p>下面回到序列跳和组跳的讨论。</p>
<p>如果 groupOrSequenceHopping = neither，表示
SRS既不序列跳，也不序列组跳，此时有</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112109.png" /></p>
<p>如果 groupOrSequenceHopping = groupHopping，表示 SRS
只进行序列组跳，此时有</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112110.png" /></p>
<p>其中 <span class="math inline">\(c\left(i\right)\)</span>
表示伪随机序列，伪随机序列在每个无线帧的起始点使用 <span
class="math inline">\(c_{\mathrm{init}}=n_{\mathrm{ID}}^{\mathrm{SRS}}\)</span>
进行初始化。</p>
<p>如果 groupOrSequenceHopping = sequenceHopping，表示 SRS
只进行序列跳，此时有</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112111.png" /></p>
<p>其中 <span class="math inline">\(c\left(i\right)\)</span>
表示伪随机序列，伪随机序列在每个无线帧的起始点使用 <span
class="math inline">\(c_{\mathrm{init}}=n_{\mathrm{ID}}^{\mathrm{SRS}}\)</span>
进行初始化。</p>
<h1 id="映射到物理资源">映射到物理资源</h1>
<h2 id="srs-频域资源">SRS 频域资源</h2>
<p>对应 SRS 资源的每个 OFDM 符号 <span
class="math inline">\(l\prime\)</span> 和天线端口 <span
class="math inline">\(p_i\)</span>，需要先将 SRS 序列 <span
class="math inline">\(r^{(p_i)}\left(n,l\prime\right)\)</span>
乘以幅度扩展因子 <span
class="math inline">\(\beta_{\mathrm{SRS}}\)</span> 以符合 38.213
规定的传输功率。然后对每个天线端口 <span
class="math inline">\(p_i\)</span>，从 <span
class="math inline">\(r^{\left(p_i\right)}(0,l^\prime)\)</span>
开始在一个时隙内根据下式映射到资源粒子 <span
class="math inline">\((k,l)\)</span>：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112112.png" /></p>
<p>SRS 序列长度等于 SRS 资源在一个符号内占用的子载波数目，具体定义为</p>
<p><span
class="math display">\[M_{\mathrm{sc},b}^{\mathrm{SRS}}=\frac{m_{\mathrm{SRS},b}N_{\mathrm{sc}}^{\mathrm{RB}}}{K_{\mathrm{TC}}}\]</span></p>
<p><span class="math inline">\(m_{\mathrm{SRS},b}\)</span> 通过查 Table
6.4.1.4.3-1 得到，其中 <span
class="math inline">\(b=B_{\mathrm{SRS}}\)</span>。<span
class="math inline">\(B_{\mathrm{SRS}}\in\left\{0,1,2,3\right\}\)</span>
由高层参数 freqHopping 中的字段 b-SRS 给定，<span
class="math inline">\(C_{\mathrm{SRS}}\in\left\{0,1,...,63\right\}\)</span>
由高层参数 freqHopping 中的 c-SRS 给定。查表时通过 <span
class="math inline">\(C_{\mathrm{SRS}}\)</span> 选中某一行，再通过 <span
class="math inline">\(B_{\mathrm{SRS}}\)</span> 选中某一列，即可最终确定
SRS 的带宽信息。 根据 Table 6.4.1.4.3-1，NR 系统支持 64 种 SRS
带宽配置方式，一个 SRS 资源可配置的最小带宽为 4 个 RB，最大带宽为 272
个RB。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112113.png" /></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112114.png" /></p>
<p>确定了 SRS 资源的带宽信息后，还需要确定 SRS 的频域起始位置。SRS
的频域起始位置 <span class="math inline">\(k_0^{(p_i)}\)</span>
定义如下：</p>
<p><span class="math display">\[k_0^{(p_i)} =
{\bar{k}}_0^{\left(p_i\right)} +
\sum_{b=0}^{B_{\mathrm{SRS}}}{K_{\mathrm{TC}}M_{\mathrm{sc},b}^{\mathrm{SRS}}}n_b\]</span></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112115.png" /></p>
<p>频域移位值 <span class="math inline">\(n_{shift}\)</span> 用来调整
SRS 资源和 CRB 的 4 的倍数网格对齐，它包含在高层参 freqDomainShift
中。如果 <span class="math inline">\(N_{BWP}^{start}\le\
n_{shift}\)</span>，则 <span
class="math inline">\(k_0^{(p_i)}=0\)</span> 的参考点是 CRB 0 的子载波
0；如果 <span
class="math inline">\(N_{BWP}^{start}&gt;n_{shift}\)</span>，则 <span
class="math inline">\(k_0^{(p_i)}=0\)</span> 的参考点是 BWP
的最低编号的子载波。</p>
<p>传输梳齿偏移量 <span
class="math inline">\({\bar{k}}_{\mathrm{TC}}\in\left\{0,1,\ldots,K_{\mathrm{TC}}-1\right\}\)</span>
由高层参数 transmissionComb 给定。<span
class="math inline">\(n_b\)</span> 是频域位置索引。</p>
<p>SRS 是否跳频由高层参数 freqHopping 中的字段 b-hop 决定。<span
class="math inline">\(b_{\mathrm{hop}}\)</span> 取值范围 0~3。</p>
<p>如果 <span class="math inline">\(b_{\mathrm{hop}}\geq\
B_{\mathrm{SRS}}\)</span>，则 SRS 跳频关闭，频域位置索引 <span
class="math inline">\(n_b\)</span>
保持为常量（除非被重新配置）。此时，对于 SRS 资源中的全部 <span
class="math inline">\(N_{\mathrm{symb}}^{\mathrm{SRS}}\)</span> 个 OFDM
符号，<span class="math inline">\(n_b\)</span> 的值定义为：</p>
<p><span
class="math display">\[n_b=\left\lfloor\frac{4n_{\mathrm{RRC}}}{m_{\mathrm{SRS,}b}}\right\rfloor\
mod{\ N}_b\]</span></p>
<p>其中 <span class="math inline">\(n_{\mathrm{RRC}}\)</span> 由高层参数
freqDomainPosition 给定。<span
class="math inline">\(m_{\mathrm{SRS,}b}\)</span> 和 <span
class="math inline">\(N_b\)</span> 的值通过给定的 <span
class="math inline">\(C_{\mathrm{SRS}}\)</span> 和 <span
class="math inline">\(b=B_{\mathrm{SRS}}\)</span> 查 Table 6.4.1.4.3-1
得到。</p>
<p>如果 <span
class="math inline">\(b_{\mathrm{hop}}&lt;B_{\mathrm{SRS}}\)</span>，则
SRS 跳频打开，频域位置索引 <span class="math inline">\(n_b\)</span>
由下式定义：</p>
<p><span
class="math display">\[n_b=\left\{\begin{matrix}\left\lfloor\frac{4n_{\mathrm{RRC}}}{m_{\mathrm{SRS},b}}\right\rfloor\mathrm{\
mod\ }\ N_\mathrm{b}&amp;b\le
b_{\mathrm{hop}}\\\left(F_b\left(n_{\mathrm{SRS}}\right)+\left\lfloor\frac{4n_{\mathrm{RRC}}}{m_{\mathrm{SRS},b}}\right\rfloor\right)\mathrm{\
mod\ }\
N_\mathrm{b}&amp;\mathrm{otherwise}\\\end{matrix}\right.\]</span></p>
<p>其中 <span class="math inline">\(N_\mathrm{b}\)</span> 通过查 Table
6.4.1.4.3-1 得到，<span
class="math inline">\(F_b\left(n_{\mathrm{SRS}}\right)\)</span>
由下式得到：</p>
<p><span
class="math display">\[F_b(n_{\mathrm{SRS}})=\left\{\begin{matrix}(N_b/2)\left\lfloor\frac{n_{\mathrm{SRS}}mod{\Pi_{b&#39;=b_{\mathrm{hop}}}^b}N_{b&#39;}}{\Pi_{b&#39;=b_{\mathrm{hop}}}^{b-1}N_{b&#39;}}\right\rfloor+\left\lfloor\frac{n_{\mathrm{SRS}}mod{\Pi_{b&#39;=b_{\mathrm{hop}}}^b}N_{b&#39;}}{2\Pi_{b&#39;=b_{\mathrm{hop}}}^{b-1}N_{b&#39;}}\right\rfloor&amp;\mathrm{if\
}N_b\mathrm{\ even\ }\ \\\left\lfloor N_b/2\right\rfloor\left\lfloor
n_{\mathrm{SRS}}/\Pi_{b&#39;=b_{\mathrm{hop}}}^{b-1}N_{b&#39;}\right\rfloor&amp;\mathrm{if\
}N_b\mathrm{\ odd}\ \\\end{matrix}\right.\]</span></p>
<p>无论 <span class="math inline">\(N_\mathrm{b}\)</span>
取任何值，<span
class="math inline">\(N_{b_{\mathrm{hop}}}=1\)</span>。</p>
<p><span class="math inline">\(n_{\mathrm{SRS}}\)</span> 用于 SRS
传输的计数。如果高层参数 resourceType 被配置为
“aperiodic”，则在时隙内发送 <span
class="math inline">\(N_{\mathrm{symb}}^{\mathrm{SRS}}\)</span> 个符号的
SRS 资源为 <span
class="math inline">\(n_{\mathrm{SRS}}=\left\lfloor\frac{l&#39;}{R}\right\rfloor\)</span>。重复因子
<span class="math inline">\(R\le\
N_{\mathrm{symb}}^{\mathrm{SRS}}\)</span> 由高层参数 resourceMapping
中的字段 repetitionFactor 给定。</p>
<p>如果高层参数 resourceType 被配置为 “semi-persistent”或
“periodic”，则对于满足 <span
class="math inline">\(\left(N_{\mathrm{slot}}^{\mathrm{frame},\mu}n_f+n_{\mathrm{s,f}}^\mu-T_{\mathrm{offset}}\right)mod{T_{\mathrm{SRS}}}=0\)</span>
的时隙，SRS 计数器由下式给定：</p>
<p><span
class="math display">\[n_{\mathrm{SRS}}=\left(\frac{N_{\mathrm{slot}}^{\mathrm{frame},\mu}n_f+n_{\mathrm{s,f}}^\mu-T_{\mathrm{offset}}}{T_{\mathrm{SRS}}}\right)\cdot\left(\frac{N_{\mathrm{symb}}^{\mathrm{SRS}}}{R}\right)+\left\lfloor\frac{l&#39;}{R}\right\rfloor\]</span></p>
<h2 id="srs-时域资源">SRS 时域资源</h2>
<p>以时隙表示的 SRS 周期 <span
class="math inline">\(T_{\mathrm{SRS}}\)</span> 和时隙偏移量 <span
class="math inline">\(T_{\mathrm{offset}}\)</span> 根据高层参数
periodicityAndOffset-p 或 periodicityAndOffset-sp 确定。如果
resourceType = “periodic”，则对应 periodicityAndOffset-p；如果
resourceType = “semi-persistent”，则对应
periodicityAndOffset-sp。在配置的SRS资源中可用于 SRS
传输的候选时隙需要满足 <span
class="math inline">\(\left(N_{\mathrm{slot}}^{\mathrm{frame},\mu}n_f+n_{\mathrm{s,f}}^\mu-T_{\mathrm{offset}}\right)mod{T_{\mathrm{SRS}}}=0\)</span>。</p>
<h1 id="ue-探测过程">UE 探测过程</h1>
<p>UE可以被高层参数 SRS-ResourceSet 配置一个或多个 SRS 资源集。对于每个
SRS 资源集，UE 可以被高层参数 SRS-Resource 配置 <span
class="math inline">\(K\geq1\)</span> 个 SRS 资源，其中 <span
class="math inline">\(K\)</span> 的最大值由 UE 能力指示。SRS
资源集的用途由高层参数 SRS-ResourceSet 中的字段 usage 确定。</p>
<p>当高层参数 usage 被配置为 beamManagement，则在给定的时刻每个 SRS
集中只能有一个 SRS 资源，但在同一 BWP 中具有相同时域行为的不同 SRS
资源集中的 SRS 资源可以同时发送。</p>
<p>对于非周期性 SRS，DCI 字段的至少一种状态用于从已配置的 SRS
资源集中选择至少一种。</p>
<p>下列 SRS 参数可由较高层参数 SRS-Resource 半静态配置。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112116.png" /></p>
<p>UE 由高层参数 SRS-Resource 中的字段 resourceMapping 来配置 SRS
资源，该 SRS 资源位于时隙内最后 6 个符号的区域，并占用 <span
class="math inline">\(N_S\in\left\{1,2,4\right\}\)</span>
个连续符号。</p>
<p>当 PUSCH 和 SRS 在同一个时隙中发送时，则 UE只能在 PUSCH 和相应的
DM-RS 发送完之后才能发送 SRS。</p>
<p>对于配置有一个或多个 SRS 资源配置的 UE，当高层参数 SRS-Resource
中的字段 resourceType 被配置为 “periodic” 时有如下定义：</p>
<ul>
<li><p>如果配置给 UE 的高层参数spatialRelationInfo 中包含了参考
“ssb-Index”，则 UE 发送目标 SRS 资源时，将使用与接收参考信号 SSB
相同的空间域传输过滤器。</p></li>
<li><p>如果配置给 UE 的高层参数spatialRelationInfo 中包含了参考
“csi-RS-Index”，则 UE 发送目标 SRS 资源时，将使用与接收周期性 CSI-RS
或者半持续性 CSI-RS 相同的空间域传输过滤器。</p></li>
<li><p>如果配置给 UE 的高层参数spatialRelationInfo 中包含了参考
“srs”，则 UE 发送目标 SRS 资源时，将使用与接收周期性 SRS
相同的空间域传输过滤器。</p></li>
</ul>
<p>对于配置有一个或多个 SRS 资源配置的 UE，当高层参数 SRS-Resource
中的字段 resourceType 被配置为 “semi-persistent” 时有如下定义：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112117.png" /></p>
<p>如果 UE 具有激活的半持续性 SRS
资源配置，并且没有收到去激活命令，则在激活的 UL BWP 中半持续性 SRS
资源配置被认为处于激活状态，否则被认为是暂停状态。</p>
<p>对于配置有一个或多个 SRS 资源配置的 UE，当高层参数 SRS-Resource
中的字段 resourceType 被配置为 “aperiodic” 时有如下定义：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112118.png" /></p>
<p>一个 SRS 可以周期性发送、半持续性发送或非周期性发送，但在一个 SRS
资源集中的所有
SRS的时域行为都必须是同一类型。也就是说，周期性、半持续性或非周期性是
SRS 资源集的特性，而不是某个 SRS 资源的特性。</p>
<p>DCI format 0_1 和 DCI format 1_1 中的SRS request 字段指示了 Table
7.3.1.1.2-24 中被触发的 SRS 资源集。DCI format 2_3 中 2-bit 的 SRS
request 字段，如果 UE 被高层参数 srs-TPC-PDCCH-Group 设置为
“typeB”，则该字段用于指示被触发的 SRS 资源集；如果 UE 被高层参数
srs-TPC-PDCCH-Group 设置为
“typeA”，则该字段用于指示通过高层配置的一组服务小区上进行SRS传输。</p>
<h1 id="srs-的冲突处理">SRS 的冲突处理</h1>
<p>PUCCH 和 SRS 在相同载波条件下，</p>
<ul>
<li><p>当半持续和周期 SRS 与仅携带 CSI 报告的 PUCCH
被配置在相同的符号时，或者当半持续和周期 SRS 与仅携带 L1-RSRP 报告的
PUCCH 被配置在相同的符号时, UE 不应发送 SRS。</p></li>
<li><p>当半持续性 SRS 或周期性 SRS 或非周期性 SRS 被触发后，与携带
HARQ-ACK 和/或 SR 的 PUCCH 在相同符号发送时，UE 不应发送 SRS。</p></li>
<li><p>对由于与 PUCCH 重叠而不发送 SRS 的情况，仅丢弃与 PUCCH 重叠的 SRS
符号。</p></li>
<li><p>非周期性 SRS 被触发后，与携带半持续/周期 CSI
报告或仅携带半持续/周期 L1-RSRP 报告的 PUCCH 在相同符号时，UE 不应发送
PUCCH。</p></li>
</ul>
<p>在带内载波聚合或带间CA频带组合的情况下，详见协议原文：</p>
<blockquote>
<p>In case of intra-band carrier aggregation or in inter-band CA band
combination if simultaneous SRS and PUCCH/PUSCH transmissions are not
supported by UE, the UE is not expected to be configured with SRS from a
carrier and PUSCH/UL DM-RS/UL PT-RS/PUCCH formats from a different
carrier in the same symbol. In case of intra-band carrier aggregation or
in inter-band CA band combination if simultaneous SRS and PRACH
transmissions are not supported by UE, the UE shall not transmit
simultaneously SRS resource(s) from a carrier and PRACH from a different
carrier.</p>
</blockquote>
<p>如果在配置了周期/半持续 SRS 传输的 OFDM 符号上触发了由高层参数
resourceType 配置 “aperiodic”SRS资源，UE 应发送非周期 SRS
资源，仅丢弃在该符号内重叠的周期/半持续 SRS，仍然会发送不与非周期 SRS
重叠的周期/半持续 SRS 符号。</p>
<p>如果在配置有周期性 SRS 传输的OFDM符号上触发了由高层参数 resourceType
配置的“semi-persistent”的SRS资源，UE应发送半持续 SRS
资源，仅丢弃在符号内重叠的周期性 SRS，仍然发送不与半持续 SRS
资源重叠的周期 SRS符号。</p>
<p>当 UE 被高层参数 SRS-ResourceSet 中的字段 usage 配置为
“antennaSwitching”，并且根据 Table 6.2.1.2-1 配置 Y
个符号的保护周期时，如果在保护周期内 UE 被配置了 SRS，则 UE
应使用与上述相同的优先级规则。</p>
<h2 id="ue-srs-跳频过程">UE SRS 跳频过程</h2>
<p>对于给定的 SRS 资源，UE 由高层参数 SRS-Resource::resourceMapping
中的字段 repetitionFactor 配置重复因子 <span
class="math inline">\(R\in\left\{1,2,4\right\}\)</span>，其中 <span
class="math inline">\(R\le N_s\)</span>。如果未配置每个时隙内 SRS
资源内的跳频（R = Ns），每个时隙中的 SRS 资源的每个天线端口在所有 <span
class="math inline">\(N_s\)</span> 个符号中被映射到相同的 PRB
集合中的相同的子载波集合。</p>
<p>如果每个时隙的 SRS 资源内的跳频配置没有重复（R = 1），根据 SRS
跳频参数 <span class="math inline">\(B_{SRS}\)</span>， <span
class="math inline">\(C_{SRS}\)</span> 和 <span
class="math inline">\(b_{hop}\)</span>，每个时隙中 SRS
资源的每个天线端口被映射到每个 OFDM
符号中的不同子载波集合，其中对于不同的子载波集合，假定具有相同的传输梳齿。</p>
<p>当每个时隙的 SRS 资源都配置了跳频和重复（Ns = 4，R =
2）时，每个时隙中的 SRS 资源的每个天线端口都被映射到每对 R 个相邻 OFDM
符号中相同的一组子载波，并且根据 SRS 的跳频参数 <span
class="math inline">\(B_{SRS}\)</span>， <span
class="math inline">\(C_{SRS}\)</span> 和 <span
class="math inline">\(b_{hop}\)</span> 在两对间跳频。</p>
<p>UE可以被配置 Ns = 2 or 4 个相邻符号的非周期 SRS 资源并在 BWP
内进行时隙内跳频，其中当跳频配置为 <span
class="math inline">\(R=1\)</span> 时，在 <span
class="math inline">\(N_s\)</span> 个符号上以相等大小的 sub-band
来探测全跳频带宽。UE可以被配置 <span
class="math inline">\(N_s=4\)</span> 个相邻符号非周期 SRS 资源并在 BWP
内进行时隙内跳频，其中当跳频配置为R = 2时，在两对 R 个相邻的 OFDM
符号之间以相等大小的 sub-band来探测全跳频带宽。SRS
资源的每个天线端口被映射到每对 R 个相邻的 OFDM
符号中相同的子载波集合。</p>
<p>UE可以被配置 <span class="math inline">\(N_s=1\)</span>
个符号的周期或半持续 SRS 资源并在 BWP 内进行时隙间跳频，其中 SRS
资源在每个时隙中占据相同的符号位置。UE可以被配置 Ns = 2 or 4
个符号的周期或半持续 SRS 资源并在 BWP 内进行时隙内和时隙间跳频，其中N
个符号的 SRS 资源在每个时隙中占据相同的符号位置。对于 <span
class="math inline">\(N_s=4\)</span>，当跳频配置为 R = 2 时，SRS
资源的每个天线端口通过每个时隙中的资源的两对 R 个相邻的 OFDM
符号映射到不同子载波集合以支持时隙内和时隙间跳频。对于 <span
class="math inline">\(N_s=R\)</span>，当跳频被配置，SRS
资源的每个天线端口映射到每个时隙中的资源的 R 个相邻 OFDM
符号中的相同一组子载波集合以支持时隙间跳频。</p>
<h2 id="用于下行-csi-获取的-ue-探测过程">用于下行 CSI 获取的 UE
探测过程</h2>
<p>当 UE 被高层参数 SRS-ResourceSet 中的字段 usage 配置为
“antennaSwitching”，根据 UE 能力
supportedSRS-TxPortSwitch，基站可以采用如下方式中的一种为 UE
配置用于下行 CSI 获取的 SRS 资源集。在 R15 （V15.11.0） 规范中UE 能力
supportedSRS-TxPortSwitch 包括 't1r2' for 1T2R, 't2r4' for 2T4R, 't1r4'
for 1T4R, 't1r4-t2r4' for 1T4R/2T4R, 't1r1' for 1T=1R, 't2r2' for 2T=2R,
or 't4r4' for 4T=4R。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112119.png" /></p>
<ul>
<li><p>对于 1T2R，最多配置两个 SRS 资源集。一个 SRS
资源集中包含两个配置在不同 OFDM 符号的 SRS 资源，每个 SRS 资源有 1
个端口。同一个 SRS 资源集中的不同 SRS 资源使用不同的 UE
天线端口（物理天线）分别发送。当配置两个 SRS 资源集时，这两个 SRS
资源集须通过高层参数 resourceType配置为不同的资源类型。</p></li>
<li><p>对于 2T4R，最多配置带个 SRS 资源集。一个 SRS
资源集中包含两个配置在不同 OFDM 符号的 SRS 资源，每个 SRS 资源有 2
个端口，其中的一个 SRS 资源由两个 UE 天线端口（物理天线）发送，另一个
SRS 资源则从另外两个 UE 天线端口（物理天线）发送。当配置两个 SRS
资源集时，这两个 SRS 资源集须通过高层参数
resourceType配置为不同的资源类型。</p></li>
<li><p>对于 1T4R，可以配置零个或一个周期或半持续 SRS
资源集。当配置一个周期或半持续 SRS 资源集时，该资源集内包含 4 个 SRS
资源，每个 SRS 资源包含 1 个端口，不同的 SRS 资源配置在不同的 OFDM
符号上，且使用不同的 UE 天线端口（物理天线）发送。</p></li>
<li><p>对于 1T4R，可以配置零个或两个非周期 SRS 资源集。当配置两个非周期
SRS 资源集时，由于天线切换需要时间，4 个 SRS
资源不能在一个时隙内发完，因此两个非周期 SRS
资源集要在两个时隙内发送。两个 SRS 资源集共包含 4 个 SRS
资源，每个资源集各包含两个 SRS 资源或者一个 SRS 资源集包含 1 个SRS
资源，另外一个 SRS 资源集包含 3 个 SRS 资源，每个 SRS
资源包含一个端口，不同的 SRS 资源通过不同的 UE
物理天线发送。当配置两个非周期 SRS 资源集时，两个 SRS
资源集需配置相同的功率控制参数，包括 SRS-ResourceSet 中的字段 alpha, p0,
pathlossReferenceRS 和
srs-PowerControlAdjustmentStates。UE期望高层参数aperiodicSRS-ResourceTrigger的值或每个SRS-ResourceSet中AperiodicSRS-ResourceTriggerList中的条目的值相同，并且每个SRS-ResourceSet中的高层参数slotOffset的值不同
。</p></li>
<li><p>对于 1T=1R 或 2T=2R 或 4T=4R，最多配置两个 SRS 资源集。每个 SRS
资源集包含 1 个 SRS 资源，每个 SRS 资源的端口数可以为 1，2或4。</p></li>
</ul>
<p>用于天线切换的 SRS 资源集内的多个 SRS 资源两两之间需要留有 Y
个符号的保护时间间隔，在保护时间间隔内，UE 不能发送任何信号。</p>
<p>如果UE能力是“t1r4-t2r4”，则对于一个或多个 SRS 资源集中的所有 SRS
资源，UE应期望配置有相同数量的 SRS 端口（一个或两个）。</p>
<p>如果UE能力是“t1r2”，“t2r4”，“t1r4”，“t1r4-t2r4”并且在同一个时隙内高层参数
usage 为“antennaSwitching”，则 UE
不应被配置或被触发一个以上的SRS资源集。如果UE能力是 “t1r1” 或 “t2r2” 或
“t4r4”并且在同一个符号内高层参数 usage 为“antennaSwitching”，则 UE
不应被配置或被触发一个以上的 SRS 资源集。</p>
<p>Y 的值由 Table 6.2.1.2-1 给出。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112120.png" /></p>
<h1 id="低峰均比序列">低峰均比序列</h1>
<p>低峰均比序列 <span
class="math inline">\(r_{u,v}^{(\alpha,\delta)}(n)\)</span> 由基序列
<span class="math inline">\({\bar{r}}_{u,\nu}\left(n\right)\)</span>
的循环移位 <span class="math inline">\(\alpha\)</span>
根据下式定义：</p>
<p><span
class="math display">\[r_{u,v}^{\left(\alpha,\delta\right)}\left(n\right)=e^{j\alpha
n}{\bar{r}}_{u,\nu}\left(n\right), 0≤n&lt;M_{ZC}\]</span></p>
<p>其中 <span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta}\)</span>
是序列的长度。基于单个基序列，通过不同的 <span
class="math inline">\(\alpha\)</span> 和 <span
class="math inline">\(\delta\)</span> 来定义多个序列。</p>
<p>基序列 <span
class="math inline">\({\bar{r}}_{u,\nu}\left(n\right)\)</span> 分别 30
个组，其中 <span
class="math inline">\(u\in\left\{0,1,...,29\right\}\)</span>
是组号，<span class="math inline">\(v\)</span>
是某个组内的序列号。分别以下两种情况。</p>
<p><strong>情况一</strong></p>
<p>如果序列长度为 <span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta}\)</span>，<span
class="math inline">\(\frac{1}{2}\le\frac{m}{2^\delta}\le5\)</span>，则每个组只包含一个基序列（<span
class="math inline">\(v=0\)</span>）。</p>
<p><strong>情况二</strong></p>
<p>如果序列长度为 <span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta},\
6\le\frac{m}{2^\delta}\)</span>， 则每个组包含两个基序列（<span
class="math inline">\(v=0,1\)</span>）。</p>
<p>以 SRS 序列为例，SRS 序列根据带宽和 comb
的配置也有以上两种情况。以下配置属于情况一：</p>
<p>（1）SRS 带宽 4 RB，传输梳齿数目 <span
class="math inline">\(K_{\mathrm{TC}}=2\)</span>, 则 <span
class="math inline">\(\delta={log}_2\left(2\right)=1\)</span>，<span
class="math inline">\(\frac{1}{2}\le\frac{4}{2}\le5\)</span>。此时序列长度为
<span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta}=4\ast12/2=24\)</span>。</p>
<p>（2）SRS 带宽 4 RB，传输梳齿数目 <span
class="math inline">\(K_{\mathrm{TC}}=4\)</span>, 则 <span
class="math inline">\(\delta={log}_2\left(4\right)=2\)</span>，<span
class="math inline">\(\frac{1}{2}\le\frac{4}{4}\le5\)</span>。此时序列长度为
<span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta}=4\ast12/4=12\)</span>。</p>
<p>（3）SRS 带宽 8 RB，传输梳齿数目 <span
class="math inline">\(K_{\mathrm{TC}}=4\)</span>, 则 <span
class="math inline">\(\delta={log}_2\left(4\right)=2\)</span>，<span
class="math inline">\(\frac{1}{2}\le\frac{8}{4}\le5\)</span>。此时序列长度为
<span
class="math inline">\(M_{\mathrm{ZC}}=\frac{mN_{\mathrm{sc}}^{\mathrm{RB}}}{2^\delta}=8\ast12/4=24\)</span>。</p>
<p>其他配置，如 <span class="math inline">\(K_{\mathrm{TC}}=2\)</span>
且 SRS 带宽大于等于 6RB，或 <span
class="math inline">\(K_{\mathrm{TC}}=4\)</span> 且 SRS 带宽大于等于
12RB 都属于情况二，此时序列长度 <span
class="math inline">\(M_{\mathrm{ZC}}\geq3N_{\mathrm{sc}}^{\mathrm{RB}}=36\)</span>。</p>
<h2 id="长度大于等于-36-的基序列">长度大于等于 36 的基序列</h2>
<p>大度大于等于 36 的基序列 <span
class="math inline">\({\bar{r}}_{u,\nu}\left(n\right),...,{\bar{r}}_{u,\nu}\left(M_{\mathrm{ZC}}-1\right)\)</span>
采用 Zadoff-Chu 循环扩展，并由下式定义：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112121.png" /></p>
<p>其中</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112122.png" /></p>
<p>ZC 序列长度 <span class="math inline">\(N_{\mathrm{ZC}}\)</span>
是满足 <span
class="math inline">\(N_{\mathrm{ZC}}&lt;M_{\mathrm{ZC}}\)</span>
的最大质数。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112123.png" /></p>
<p>ZC 序列的长度通常小于基序列的长度，剩余的那部分基序列由 ZC
序列循环扩展得到，首尾相接。例如基序列长度 <span
class="math inline">\(M_{\mathrm{ZC}}=36\)</span>，则 ZC 序列长度为
<span
class="math inline">\(N_{\mathrm{ZC}}=31\)</span>。通过对基序列进行循环移位可得到更多的
ZC 序列，当 <span class="math inline">\(N_{\mathrm{ZC}}=31\)</span>
时，可用的 ZC 序列有 30 个。可用的 ZC 序列数目为 <span
class="math inline">\(N_{\mathrm{ZC}}-1\)</span>。</p>
<h2 id="长度小于-36-的基序列">长度小于 36 的基序列</h2>
<p>长度为 <span
class="math inline">\(M_{\mathrm{ZC}}\in\left\{6,12,18,24\right\}\)</span>
的基序列由下式定义：</p>
<p><span
class="math display">\[{\bar{r}}_{u,\nu}\left(n\right)=\begin{matrix}e^\frac{j\phi\left(n\right)\pi}{4},&amp;0\le
n\le M_{\mathrm{ZC}}-1\\\end{matrix}\]</span></p>
<p>其中 (n) 的值由 Tables 5.2.2.2-1 ~ 5.2.2.2-4 给定。</p>
<p>长度为 <span class="math inline">\(M_{\mathrm{ZC}}=30\)</span>
的基序列由下式定义：</p>
<p><span
class="math display">\[{\bar{r}}_{u,\nu}\left(n\right)=\begin{matrix}e^{-j\frac{\pi(u+1)(n+1)(n+2)}{31}},&amp;0\le
n\le M_{\mathrm{ZC}}-1\\\end{matrix}\]</span></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112124.png" /></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112125.png" /></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112126.png" /></p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112127.png" /></p>
<h1 id="为什么是-zc-序列">为什么是 ZC 序列</h1>
<p>1962 年 Zadoff 和 Frank 提出了一种循环自相关为零的多相编码（polyphase
codes），但编码的长度受限于 p^2。十年后（1972），Chu 基于 Zadoff 和
Frank
的研究成果，提出了一种新的序列构造方法，依然具有完美的零相关性，但序列长度没有限制。这种新的序列就是
Zadoff-Chu 序列。又数十年后，它应用在4G 和 5G 的参考信号中。</p>
<p>Zadoff-Chu 序列一个关键特点是经过离散傅里叶变换，生成的新序列依然是
Zadoff-Chu 序列。Zadoff-Chu
序列的另一个特点是序列在时域和频域的幅度都是恒定的。时域信号的幅度恒定有助于提高功放效率。频域信号的幅度恒定意味着序列经过任意非零循环移位与原序列零相关。这就是说，同一个
Zadoff-Chu
序列在时域上经过不同的循环移位所产生的两个序列信号之间是正交的。时域的循环移位等效于在频域上进行连续的相位旋转。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112129.png" /></p>
<p>虽然 Zadoff-Chu 序列具有以上优点，但它并不能直接在 LTE/NR
系统中被使用。一个原因是 SRS 序列长度并不是质数，另一个原因是
Zadoff-Chu序列长度较短时，没有足够的可用序列。</p>
<p>原始的 Zadoff-Chu 序列可以为任意长度，但人们往往关注 <span
class="math inline">\(N_{\mathrm{ZC}}\)</span>
为质数的情况，因为质数长度会拥有最多可用的 Zadoff-Chu 序列。也就是说，在
Zadoff-Chu序列长度 <span class="math inline">\(N_{\mathrm{ZC}}\)</span>
为质数的情况下，可以找到 <span
class="math inline">\(N_{\mathrm{ZC}}-1\)</span> 个不同的
Zadoff-Chu序列。因此 SRS 序列采用 Zadoff-Chu序列循环扩展，从长度 <span
class="math inline">\(N_{\mathrm{ZC}}\)</span> 扩展到长度 <span
class="math inline">\(M_{\mathrm{ZC}}\)</span>。SRS
序列是频域序列，由于是在频域上扩展生成，所以依然保持了完美的循环自相关特性，但在时域上会破坏
Zadoff-Chu序列原有的幅度恒定特性，因此时域幅度上会产生波动。</p>
<p>对于长度超过 36 的 SRS 序列，都会使用扩展 Zadoff-Chu
序列。对于长度小于 36 的 SRS 序列，NR
标准通过计算机穷举法，找到了一组合适的序列，这些频域上平坦的序列具有良好的时域包络特性。长度小于
36 的 SRS 序列不使用 Zadoff-Chu 序列，主要原因是找不到足够的可用
Zadoff-Chu 序列。</p>
<p>David C. Chu 在 1972 年从数学上证明了 Zadoff-Chu
序列具有完美的循环自相关特性。</p>
<p>ZC 序列根据序列长度 N 为偶或奇定义如下：</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20201121/2020112128.png" /></p>
<p>其中 N 为任意正整数，M 为 相对于 N 的质数，<span
class="math inline">\(k=0,1,...,N-1\)</span>。</p>
<p>自相关函数 <span class="math inline">\(\left\{x_m\right\}\)</span>
定义为：</p>
<p><span
class="math display">\[x_0=\sum_{k=0}^{N-1}{a_ka_k^\ast}\]</span></p>
<p><span
class="math display">\[x_m=\sum_{k=0}^{N-m-1}{a_ka_{k+m}^\ast}+\sum_{k=N-m}^{N-1}{a_ka_{k+m-N}^\ast},\
\ j=1,2,...,N-1\]</span></p>
<p>已得到证明，无论 N 为偶或奇，ZC 序列的自相关函数 <span
class="math inline">\(x_m=0\)</span>。</p>
<p>为便于理解，可采用数值计算的方式验证 ZC
序列的零自相关性和良好的互相关性。ZC
序列具有零相关性是指，同一个基序列的不同循环移位得到任意两个序列之间的相关系数为零，如以下例子，忽略数值计算的误差，可以认为
autoCorr=0。另一方面，理论上两个不同的基序列（M1和M2不同，无循环移位）的互相关系数为
1/sqrt(N)。数值计算得到的 crossCorr=1/sqrt(63)=0.1260。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">N  = 63;</span><br><span class="line">M1 = 61;</span><br><span class="line">M2 = 59;</span><br><span class="line">m  = 5;</span><br><span class="line"> </span><br><span class="line">% 1. Zadoff-Chu</span><br><span class="line">ak1 = zeros(1,N);</span><br><span class="line">bk1 = zeros(1,N);</span><br><span class="line">for k = 0:N-1</span><br><span class="line">    ak1(k+1) = exp(1j * (M1 * pi * k * (k+1) / N));</span><br><span class="line">    bk1(k+1) = exp(1j * (M2 * pi * k * (k+1) / N));</span><br><span class="line">end</span><br><span class="line"> </span><br><span class="line">% 2. cyclic shift</span><br><span class="line">ak2 = [ak1(1, m+1:end), ak1(1, 1:m)];</span><br><span class="line"> </span><br><span class="line">% 3. autocorrelation</span><br><span class="line">autoCorr = abs(sum(ak1 .* conj(ak2)) / N)</span><br><span class="line"> </span><br><span class="line">% 4. cross correlation</span><br><span class="line">crossCorr = abs(sum(ak1 .* conj(bk1)) / N)</span><br></pre></td></tr></table></figure>
<p>Output: <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">autoCorr =</span><br><span class="line"></span><br><span class="line">   4.4623e-14</span><br><span class="line"></span><br><span class="line">crossCorr =</span><br><span class="line"></span><br><span class="line">    0.1260</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>5G-NR</category>
      </categories>
      <tags>
        <tag>5G-NR</tag>
        <tag>3GPP</tag>
      </tags>
  </entry>
  <entry>
    <title>可重构智能表面（RIS）</title>
    <url>/2022/08/14/reconfigurable-intelligent-surface/</url>
    <content><![CDATA[<h2 id="科普短视频">科普短视频</h2>
<p><a href="https://weibo.com/u/7495014682"><span class="citation"
data-cites="我爱星科技">@我爱星科技</span></a> 关于 RIS
的科普短视频↓：</p>
<p><a href="http://weibo.com/7495014682/LEQVYafGq"><img src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20220814/微信图片_20220814181650.jpg" alt="RIS" ></a></p>
<h2 id="什么是-ris">什么是 RIS</h2>
<p>从字面而言，智能反射表面（Intelligent Reflecting Surface,
IRS），也称为可重构智能表面（Reconfigurable Intelligent Surface,
RIS），是一种可以重新配置的超表面<a href="#fn1" class="footnote-ref"
id="fnref1" role="doc-noteref"><sup>1</sup></a>。</p>
<p>从结构而言，RIS
是一种亚波长尺寸的人工二维材料，通常由金属、介质和可调元件构成，可以等效表征为
RLC 电路。调整电磁单元的物理性质，如容抗、阻抗或感抗，改变 RIS
的辐射特性，实现非常规的物理现象诸如非规则反射、负折射、吸波、聚焦以及极化转换，进而对电磁波进行动态调控<a
href="#fn2" class="footnote-ref" id="fnref2"
role="doc-noteref"><sup>2</sup></a>。</p>
<p>从特性而言，RIS
是一种具有可编程电磁特性的人工电磁表面结构，由超材料技术发展而来<a
href="#fn3" class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a>。为了理解这句话，我查阅了一些资料，探究
RIS 如何从超材料发展而来：</p>
<p>RIS 首先属于一种「<a
href="https://marshallcomm.cn/2022/08/11/metamaterials/">超材料</a>」，进一步它属于一种「<a
href="https://marshallcomm.cn/2022/08/12/electromagnetic-metamaterials/">电磁超材料</a>」，更进一步它不是三维的而是二维的超材料，即它是一种「<a
href="https://marshallcomm.cn/2022/08/12/electromagnetic-metamaterials/#%E4%B8%80%E7%A7%8D%E4%BA%8C%E7%BB%B4%E8%B6%85%E6%9D%90%E6%96%99%E4%BA%BA%E5%B7%A5%E7%94%B5%E7%A3%81%E8%B6%85%E8%A1%A8%E9%9D%A2">超表面</a>」。在超表面的基础上再加限定词，可重构的、智能的超表面就是
RIS（Reconfigurable Intelligent Surface）。RIS
的可编程/可重构电磁特性是基于「<a
href="https://marshallcomm.cn/2022/08/13/information-metamaterials/">信息超材料</a>」，信息超材料将电磁波和数字信息世界联系起来，因此
RIS 不仅可以调控电磁波还可以调制信息。</p>
<p>RIS 可以调控电磁波意味着通过 RIS
可以构建可控的无线环境。前五代移动通信都基于无线环境的不可控假设，这就是为什么说
RIS 会带来一种全新的通信网络范式。</p>
<span id="more"></span>
<h2 id="ris-的原理">RIS 的原理</h2>
<p>在传统的无线通信环境中，无线信号在传输过程中会遇到障碍，经过反射、折射和透射等，会出现原始无线信号的多径分量，以不同的幅度、相位及延迟到达接收端。由于这些多径分量与原始无线信号在接收端正向叠加或反向抵消，使得接收信号产生多径衰落，严重损害无线通信系统的性能。</p>
<p>RIS
通过大量低成本电磁单元智能控制无线信号的<strong>反射特征</strong>，从而实现无线传播环境的重构，使得无线电环境「可控」。</p>
<p>RIS
以软件控制的方式重新设计环境中的电磁波，将不可控的传播环境变为一个确定性的空间。如下图所示，调控
RIS 的电磁单元的反射相移，使得通过 RIS
的反射信号以及通过其他路径传播的信号可以在接收端同相叠加以增强接收信号质量。</p>
<p><img
src="https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20220814/image-20220814104143178.png" /></p>
<h2 id="ris-的工作模式">RIS 的工作模式</h2>
<p>目前学术研究从理想假设出发，主要关注 RIS
辅助通信系统的理论性能上界。而实际部署需要综合考虑量化误差、处理复杂度、计算能力、系统开销等多种实际因素，因此，从静态到动态，逐步实现逼近理论上界的智能调控的「三步走」工作模式更符合一般部署节奏。</p>
<h3 id="静态半静态工作模式">静态/半静态工作模式</h3>
<p>初期阶段，可以令反射板波束固定不变，或者间隔很长一段时间进行相位调节。</p>
<h3 id="信道透明的动态工作模式">信道透明的动态工作模式</h3>
<p>在该阶段，反射相位调节过程无需信道信息，RIS
使用多个已知的波束方向（例如码本）进行调整，用户通过信道质量的测量，反馈对应最佳波束方向的相关信息，基站将反射面配置为所选择的波束方向。该工作模式无需小尺度信道信息，可选波束方向较为固定，控制指示开销较小，但多次调整波束会带来较大系统开销。</p>
<h3 id="信道非透明的智能工作模式">信道非透明的智能工作模式</h3>
<p>在该阶段，基站配置反射面的相位，多次调整反射单元相位进行信道估计，基站根据信道估计结果，配置与实际传输信道适配的反射相位。在工作模式可以获得最优性能，但是信道估计算法和流程的复杂度很高，系统开销很大。</p>
<p>基于以上分析，在当前条件下，信道透明的动态工作模式可以很好地获得性能和开销的折中，是目前研究的重点方向。</p>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p><a
href="https://max.book118.com/html/2022/0327/5102021041004204.shtm">中国移动.
6G信息超材料技术白皮书(2022)</a><a href="#fnref1" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>IMT-2030（6G）推进组. 智能超表面技术研究报告. 2021.<a
href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>IMT-2030（6G）推进组. 智能超表面技术研究报告. 2021.<a
href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
]]></content>
      <categories>
        <category>RIS</category>
      </categories>
  </entry>
</search>
